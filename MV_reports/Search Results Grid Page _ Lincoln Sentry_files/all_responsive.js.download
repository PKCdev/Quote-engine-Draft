
!function(a,b,c){var d=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=c(d):"function"==typeof define&&define.amd?define(function(){return b[a]=c(d)}):b[a]=c(d)}("enquire",this,function(a){"use strict";function b(a,b){var c,d=0,e=a.length;for(d;e>d&&(c=b(a[d],d),c!==!1);d++);}function c(a){return"[object Array]"===Object.prototype.toString.apply(a)}function d(a){return"function"==typeof a}function e(a){this.options=a,!a.deferSetup&&this.setup()}function f(b,c){this.query=b,this.isUnconditional=c,this.handlers=[],this.mql=a(b);var d=this;this.listener=function(a){d.mql=a,d.assess()},this.mql.addListener(this.listener)}function g(){if(!a)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!a("only all").matches}return e.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(a){return this.options===a||this.options.match===a}},f.prototype={addHandler:function(a){var b=new e(a);this.handlers.push(b),this.matches()&&b.on()},removeHandler:function(a){var c=this.handlers;b(c,function(b,d){return b.equals(a)?(b.destroy(),!c.splice(d,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){b(this.handlers,function(a){a.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var a=this.matches()?"on":"off";b(this.handlers,function(b){b[a]()})}},g.prototype={register:function(a,e,g){var h=this.queries,i=g&&this.browserIsIncapable;return h[a]||(h[a]=new f(a,i)),d(e)&&(e={match:e}),c(e)||(e=[e]),b(e,function(b){d(b)&&(b={match:b}),h[a].addHandler(b)}),this},unregister:function(a,b){var c=this.queries[a];return c&&(b?c.removeHandler(b):(c.clear(),delete this.queries[a])),this}},new g});;(function(window,document){'use strict';var nextTick,addEvent;nextTick=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};addEvent=(function(){if(document.addEventListener){return function addStandardEventListener(el,eventName,fn){return el.addEventListener(eventName,fn,false);};}
else{return function addIEEventListener(el,eventName,fn){return el.attachEvent('on'+eventName,fn);};}})();function Imager(elements,opts){var self=this,doc=document;opts=opts||{};this.elements=elements||'.js-responsive-image';this.className=opts.className||'js-responsive-image-replaced';this.onResize=opts.hasOwnProperty('onResize')?opts.onResize:true;this.onImagesReplaced=opts.onImagesReplaced||function(){};this.eles=$(elements);nextTick(function(){self.init();});}
Imager.prototype.init=function(){this.checkImagesNeedReplacing(this.eles);if(this.onResize){this.registerResizeEvent();}};Imager.prototype.checkImagesNeedReplacing=function(images){var self=this;if(!this.isResizing){this.isResizing=true;images.each(function(){self.replaceImagesBasedOnScreenDimensions(this);});this.isResizing=false;this.onImagesReplaced(images);}};Imager.prototype.replaceImagesBasedOnScreenDimensions=function(image){var src,availableWidths=[],srcARRAY,cwidth;if($(image).attr("data-media")!=undefined){var eMedia=$(image).attr("data-media")
$(image).removeAttr("data-media")
eMedia=JSON.parse(eMedia)
$.each(eMedia,function(key,value){var width=parseInt(key);if(!!width||width===0){availableWidths.push(width);}});$(image).data("width",availableWidths);$(image).data("media",eMedia);}
srcARRAY=$(image).data("media");cwidth=Imager.getClosestValue(window.innerWidth,$.extend([],$(image).data("width")));if(!srcARRAY[cwidth]||image.src==srcARRAY[cwidth]){return;}
image.src=srcARRAY[cwidth];};Imager.getClosestValue=function getClosestValue(baseValue,candidates){if(baseValue>=candidates[0]&&candidates.length>1){candidates.shift()
getClosestValue(baseValue,candidates)}
return candidates[0];}
Imager.prototype.registerResizeEvent=function(){var self=this;addEvent(window,'resize',function(){self.checkImagesNeedReplacing(self.eles);});};if(typeof module==='object'&&typeof module.exports==='object'){module.exports=exports=Imager;}else if(typeof define==='function'&&define.amd){define(function(){return Imager;});}else if(typeof window==='object'){window.Imager=Imager;}}(window,document));!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DOMPurify=t()}(this,function(){"use strict";function e(e,t){for(var n=t.length;n--;)"string"==typeof t[n]&&(t[n]=t[n].toLowerCase()),e[t[n]]=!0;return e}function t(e){var t={},n=void 0;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A(),S=function(e){return o(e)};if(S.version="1.0.3",S.removed=[],!x||!x.document||9!==x.document.nodeType)return S.isSupported=!1,S;var k=x.document,w=!1,E=!1,O=x.document,L=x.DocumentFragment,M=x.HTMLTemplateElement,N=x.Node,_=x.NodeFilter,D=x.NamedNodeMap,R=void 0===D?x.NamedNodeMap||x.MozNamedAttrMap:D,C=x.Text,F=x.Comment,z=x.DOMParser,H=x.XMLHttpRequest,I=void 0===H?x.XMLHttpRequest:H,j=x.encodeURI,U=void 0===j?x.encodeURI:j;if("function"==typeof M){var W=O.createElement("template");W.content&&W.content.ownerDocument&&(O=W.content.ownerDocument)}var q=O,G=q.implementation,P=q.createNodeIterator,B=q.getElementsByTagName,X=q.createDocumentFragment,V=k.importNode,Y={};S.isSupported=G&&void 0!==G.createHTMLDocument&&9!==O.documentMode;var K=p,$=f,J=h,Q=g,Z=v,ee=b,te=y,ne=null,oe=e({},[].concat(n(r),n(i),n(a),n(l),n(s))),re=null,ie=e({},[].concat(n(c),n(d),n(u),n(m))),ae=null,le=null,se=!0,ce=!0,de=!1,ue=!1,me=!1,pe=!1,fe=!1,he=!1,ge=!1,ye=!1,ve=!1,be=!0,Te=!0,Ae={},xe=e({},["audio","head","math","script","style","template","svg","video"]),Se=e({},["audio","video","img","source","image"]),ke=e({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),we=null,Ee=O.createElement("form"),Oe=function(o){"object"!==(void 0===o?"undefined":T(o))&&(o={}),ne="ALLOWED_TAGS"in o?e({},o.ALLOWED_TAGS):oe,re="ALLOWED_ATTR"in o?e({},o.ALLOWED_ATTR):ie,ae="FORBID_TAGS"in o?e({},o.FORBID_TAGS):{},le="FORBID_ATTR"in o?e({},o.FORBID_ATTR):{},Ae="USE_PROFILES"in o&&o.USE_PROFILES,se=!1!==o.ALLOW_ARIA_ATTR,ce=!1!==o.ALLOW_DATA_ATTR,de=o.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=o.SAFE_FOR_JQUERY||!1,me=o.SAFE_FOR_TEMPLATES||!1,pe=o.WHOLE_DOCUMENT||!1,ge=o.RETURN_DOM||!1,ye=o.RETURN_DOM_FRAGMENT||!1,ve=o.RETURN_DOM_IMPORT||!1,he=o.FORCE_BODY||!1,be=!1!==o.SANITIZE_DOM,Te=!1!==o.KEEP_CONTENT,te=o.ALLOWED_URI_REGEXP||te,me&&(ce=!1),ye&&(ge=!0),Ae&&(ne=e({},[].concat(n(s))),re=[],!0===Ae.html&&(e(ne,r),e(re,c)),!0===Ae.svg&&(e(ne,i),e(re,d),e(re,m)),!0===Ae.svgFilters&&(e(ne,a),e(re,d),e(re,m)),!0===Ae.mathMl&&(e(ne,l),e(re,u),e(re,m))),o.ADD_TAGS&&(ne===oe&&(ne=t(ne)),e(ne,o.ADD_TAGS)),o.ADD_ATTR&&(re===ie&&(re=t(re)),e(re,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&e(ke,o.ADD_URI_SAFE_ATTR),Te&&(ne["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(o),we=o},Le=function(e){S.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}},Me=function(e,t){try{S.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){S.removed.push({attribute:null,from:t})}t.removeAttribute(e)},Ne=function(e){var t=void 0,n=void 0;if(he&&(e="<remove></remove>"+e),E){try{e=U(e)}catch(e){}var o=new I;o.responseType="document",o.open("GET","data:text/html;charset=utf-8,"+e,!1),o.send(null),t=o.response}if(w)try{t=(new z).parseFromString(e,"text/html")}catch(e){}return t&&t.documentElement||((n=(t=G.createHTMLDocument("")).body).parentNode.removeChild(n.parentNode.firstElementChild),n.outerHTML=e),B.call(t,pe?"html":"body")[0]};S.isSupported&&function(){var e=Ne('<svg><g onload="this.parentNode.remove()"></g></svg>');e.querySelector("svg")||(E=!0);try{(e=Ne('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">')).querySelector("svg img")&&(w=!0)}catch(e){}}();var _e=function(e){return P.call(e.ownerDocument||e,e,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,function(){return _.FILTER_ACCEPT},!1)},De=function(e){return!(e instanceof C||e instanceof F)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof R&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute)},Re=function(e){return"object"===(void 0===N?"undefined":T(N))?e instanceof N:e&&"object"===(void 0===e?"undefined":T(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ce=function(e,t,n){Y[e]&&Y[e].forEach(function(e){e.call(S,t,n,we)})},Fe=function(e){var t=void 0;if(Ce("beforeSanitizeElements",e,null),De(e))return Le(e),!0;var n=e.nodeName.toLowerCase();if(Ce("uponSanitizeElement",e,{tagName:n,allowedTags:ne}),!ne[n]||ae[n]){if(Te&&!xe[n]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return Le(e),!0}return!ue||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(S.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"&lt;")),me&&3===e.nodeType&&(t=(t=(t=e.textContent).replace(K," ")).replace($," "),e.textContent!==t&&(S.removed.push({element:e.cloneNode()}),e.textContent=t)),Ce("afterSanitizeElements",e,null),!1},ze=function(e){var t=void 0,n=void 0,o=void 0,r=void 0,i=void 0,a=void 0,l=void 0;if(Ce("beforeSanitizeAttributes",e,null),a=e.attributes){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re};for(l=a.length;l--;){if(t=a[l],n=t.name,o=t.value.trim(),r=n.toLowerCase(),s.attrName=r,s.attrValue=o,s.keepAttr=!0,Ce("uponSanitizeAttribute",e,s),o=s.attrValue,"name"===r&&"IMG"===e.nodeName&&a.id)i=a.id,a=Array.prototype.slice.apply(a),Me("id",e),Me(n,e),a.indexOf(i)>l&&e.setAttribute("id",i.value);else{if("INPUT"===e.nodeName&&"type"===r&&"file"===o&&(re[r]||!le[r]))continue;"id"===n&&e.setAttribute(n,""),Me(n,e)}if(s.keepAttr&&(!be||"id"!==r&&"name"!==r||!(o in O||o in Ee))){if(me&&(o=(o=o.replace(K," ")).replace($," ")),ce&&J.test(r));else if(se&&Q.test(r));else{if(!re[r]||le[r])continue;if(ke[r]);else if(te.test(o.replace(ee,"")));else if("src"!==r&&"xlink:href"!==r||0!==o.indexOf("data:")||!Se[e.nodeName.toLowerCase()]){if(de&&!Z.test(o.replace(ee,"")));else if(o)continue}else;}try{e.setAttribute(n,o),S.removed.pop()}catch(e){}}}Ce("afterSanitizeAttributes",e,null)}},He=function e(t){var n=void 0,o=_e(t);for(Ce("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Ce("uponSanitizeShadowNode",n,null),Fe(n)||(n.content instanceof L&&e(n.content),ze(n));Ce("afterSanitizeShadowDOM",t,null)};return S.sanitize=function(e,t){var n=void 0,o=void 0,r=void 0,i=void 0,a=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!S.isSupported){if("object"===T(x.toStaticHTML)||"function"==typeof x.toStaticHTML){if("string"==typeof e)return x.toStaticHTML(e);if(Re(e))return x.toStaticHTML(e.outerHTML)}return e}if(fe||Oe(t),S.removed=[],e instanceof N)1===(o=(n=Ne("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===o.nodeName?n=o:n.appendChild(o);else{if(!ge&&!pe&&-1===e.indexOf("<"))return e;if(!(n=Ne(e)))return ge?null:""}he&&Le(n.firstChild);for(var l=_e(n);r=l.nextNode();)3===r.nodeType&&r===i||Fe(r)||(r.content instanceof L&&He(r.content),ze(r),i=r);if(ge){if(ye)for(a=X.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return ve&&(a=V.call(k,a,!0)),a}return pe?n.outerHTML:n.innerHTML},S.setConfig=function(e){Oe(e),fe=!0},S.clearConfig=function(){we=null,fe=!1},S.addHook=function(e,t){"function"==typeof t&&(Y[e]=Y[e]||[],Y[e].push(t))},S.removeHook=function(e){Y[e]&&Y[e].pop()},S.removeHooks=function(e){Y[e]&&(Y[e]=[])},S.removeAllHooks=function(){Y={}},S}var r=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],i=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],a=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"],l=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],s=["#text"],c=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],d=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],u=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],m=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"],p=/\{\{[\s\S]*|[\s\S]*\}\}/gm,f=/<%[\s\S]*|[\s\S]*%>/gm,h=/^data-[\-\w.\u00B7-\uFFFF]/,g=/^aria-[\-\w]+$/,y=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,v=/^(?:\w+script|data):/i,b=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=function(){return"undefined"==typeof window?null:window};return o()});;;(function(){"use strict";function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){};var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var mode=document.documentMode||0;var setExpr=$.isFunction(document.createElement('div').style.setExpression);$.blockUI=function(opts){install(window,opts);};$.unblockUI=function(opts){remove(window,opts);};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title)$m.append('<h1>'+title+'</h1>');if(message)$m.append('<h2>'+message+'</h2>');if(timeout===undefined)timeout=3000;var callBlock=function(opts){opts=opts||{};$.blockUI({message:$m,fadeIn:typeof opts.fadeIn!=='undefined'?opts.fadeIn:700,fadeOut:typeof opts.fadeOut!=='undefined'?opts.fadeOut:1000,timeout:typeof opts.timeout!=='undefined'?opts.timeout:timeout,centerY:false,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS});};callBlock();var nonmousedOpacity=$m.css('opacity');$m.mouseover(function(){callBlock({fadeIn:0,timeout:30000});var displayBlock=$('.blockMsg');displayBlock.stop();displayBlock.fadeTo(300,1);}).mouseout(function(){$('.blockMsg').fadeOut(1000);});};$.fn.block=function(opts){if(this[0]===window){$.blockUI(opts);return this;}
var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data('blockUI.isBlocked'))
return;$el.unblock({fadeOut:0});});return this.each(function(){if($.css(this,'position')=='static'){this.style.position='relative';$(this).data('blockUI.static',true);}
this.style.zoom=1;install(this,opts);});};$.fn.unblock=function(opts){if(this[0]===window){$.unblockUI(opts);return this;}
return this.each(function(){remove(this,opts);});};$.blockUI.version=2.66;$.blockUI.defaults={message:'<h1>Please wait...</h1>',title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:'30%',top:'40%',left:'35%',textAlign:'center',color:'#000',border:'3px solid #aaa',backgroundColor:'#fff',cursor:'wait'},themedCSS:{width:'30%',top:'40%',left:'35%'},overlayCSS:{backgroundColor:'#000',opacity:0.6,cursor:'wait'},cursorReset:'default',growlCSS:{width:'350px',top:'10px',left:'',right:'10px',border:'none',padding:'5px',opacity:0.6,cursor:'default',color:'#fff',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px','border-radius':'10px'},iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank',forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:':input:enabled:visible',onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:'blockMsg',ignoreIfBlocked:false};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var css,themedCSS;var full=(el==window);var msg=(opts&&opts.message!==undefined?opts.message:undefined);opts=$.extend({},$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data('blockUI.isBlocked'))
return;opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick)
opts.overlayCSS.cursor='pointer';themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)
remove(window,{fadeOut:0});if(msg&&typeof msg!='string'&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data('blockUI.history',data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)
data.parent.removeChild(node);}
$(el).data('blockUI.onUnblock',opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe)
lyr1=$('<iframe class="blockUI" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>');else
lyr1=$('<div class="blockUI" style="display:none"></div>');if(opts.theme)
lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(z++)+';display:none"></div>');else
lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||'&nbsp;')+'</div>';}
s+='<div class="ui-widget-content ui-dialog-content"></div>';s+='</div>';}
else if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||'&nbsp;')+'</div>';}
s+='<div class="ui-widget-content ui-dialog-content"></div>';s+='</div>';}
else if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>';}
else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';}
lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass('ui-widget-content');}
else
lyr3.css(css);}
if(!opts.theme)
lyr2.css(opts.overlayCSS);lyr2.css('position',full?'fixed':'absolute');if(msie||opts.forceIframe)
lyr1.css('opacity',0.0);var layers=[lyr1,lyr2,lyr3],$par=full?$('body'):$(el);$.each(layers,function(){this.appendTo($par);});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:'.ui-dialog-titlebar',cancel:'li'});}
var expr=setExpr&&(!$.support.boxModel||$('object,embed',full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel)
$('html,body').css('height','100%');if((ie6||!$.support.boxModel)&&!full){var t=sz(el,'borderTopWidth'),l=sz(el,'borderLeftWidth');var fixT=t?'(0 - '+t+')':0;var fixL=l?'(0 - '+l+')':0;}
$.each(layers,function(i,o){var s=o[0].style;s.position='absolute';if(i<2){if(full)
s.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:'+opts.quirksmodeOffsetHack+') + "px"');else
s.setExpression('height','this.parentNode.offsetHeight + "px"');if(full)
s.setExpression('width','jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');else
s.setExpression('width','this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression('left',fixL);if(fixT)s.setExpression('top',fixT);}
else if(opts.centerY){if(full)s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0;}
else if(!opts.centerY&&full){var top=(opts.css&&opts.css.top)?parseInt(opts.css.top,10):0;var expression='((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + "px"';s.setExpression('top',expression);}});}
if(msg){if(opts.theme)
lyr3.find('.ui-widget-content').append(msg);else
lyr3.append(msg);if(msg.jquery||msg.nodeType)
$(msg).show();}
if((msie||opts.forceIframe)&&opts.showOverlay)
lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=(opts.showOverlay&&!msg)?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)
lyr2._fadeIn(opts.fadeIn,cb1);if(msg)
lyr3._fadeIn(opts.fadeIn,cb2);}
else{if(opts.showOverlay)
lyr2.show();if(msg)
lyr3.show();if(opts.onBlock)
opts.onBlock();}
bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(opts.focusableElements,pageBlock);if(opts.focusInput)
setTimeout(focus,20);}
else
center(lyr3[0],opts.centerX,opts.centerY);if(opts.timeout){var to=setTimeout(function(){if(full)
$.unblockUI(opts);else
$(el).unblock(opts);},opts.timeout);$(el).data('blockUI.timeout',to);}}
function remove(el,opts){var count;var full=(el==window);var $el=$(el);var data=$el.data('blockUI.history');var to=$el.data('blockUI.timeout');if(to){clearTimeout(to);$el.removeData('blockUI.timeout');}
opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data('blockUI.onUnblock');$el.removeData('blockUI.onUnblock');}
var els;if(full)
els=$('body').children().filter('.blockUI').add('body > .blockUI');else
els=$el.find('>.blockUI');if(opts.cursorReset){if(els.length>1)
els[1].style.cursor=opts.cursorReset;if(els.length>2)
els[2].style.cursor=opts.cursorReset;}
if(full)
pageBlock=pageBlockEls=null;if(opts.fadeOut){count=els.length;els.stop().fadeOut(opts.fadeOut,function(){if(--count===0)
reset(els,data,opts,el);});}
else
reset(els,data,opts,el);}
function reset(els,data,opts,el){var $el=$(el);if($el.data('blockUI.isBlocked'))
return;els.each(function(i,o){if(this.parentNode)
this.parentNode.removeChild(this);});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;if(data.parent)
data.parent.appendChild(data.el);$el.removeData('blockUI.history');}
if($el.data('blockUI.static')){$el.css('position','static');}
if(typeof opts.onUnblock=='function')
opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW;}
function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data('blockUI.isBlocked')))
return;$el.data('blockUI.isBlocked',b);if(!full||!opts.bindEvents||(b&&!opts.showOverlay))
return;var events='mousedown mouseup keydown keypress keyup touchstart touchend touchmove';if(b)
$(document).bind(events,opts,handler);else
$(document).unbind(events,handler);}
function handler(e){if(e.type==='keydown'&&e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back);},10);return false;}}}
var opts=e.data;var target=$(e.target);if(target.hasClass('blockOverlay')&&opts.onOverlayClick)
opts.onOverlayClick(e);if(target.parents('div.'+opts.blockMsgClass).length>0)
return true;return target.parents().children().filter('div.blockUI').length===0;}
function focus(back){if(!pageBlockEls)
return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)
e.focus();}
function center(el,x,y){var p=el.parentNode,s=el.style;var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,'borderLeftWidth');var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,'borderTopWidth');if(x)s.left=l>0?(l+'px'):'0';if(y)s.top=t>0?(t+'px'):'0';}
function sz(el,p){return parseInt($.css(el,p),10)||0;}}
if(typeof define==='function'&&define.amd&&define.amd.jQuery){define(['jquery'],setup);}else{setup(jQuery);}})();(function(t,e,i){function n(i,n,o){var r=e.createElement(i);return n&&(r.id=Z+n),o&&(r.style.cssText=o),t(r)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function r(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function h(t){var e=W.length,i=(z+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?("x"===e?E.width():o())/100:1)*parseInt(t,10))}function s(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function l(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function d(t){"contains"in y[0]&&!y[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),y.focus())}function c(t){c.str!==t&&(y.add(v).removeClass(c.str).addClass(t),c.str=t)}function g(e){z=0,e&&e!==!1&&"nofollow"!==e?(W=t("."+te).filter(function(){var i=t.data(this,Y),n=new r(this,i);return n.get("rel")===e}),z=W.index(_.el),-1===z&&(W=W.add(_.el),z=W.length-1)):W=t(_.el)}function u(i){t(e).trigger(i),ae.triggerHandler(i)}function f(i){var o;if(!G){if(o=t(i).data(Y),_=new r(i,o),g(_.get("rel")),!$){$=q=!0,c(_.get("className")),y.css({visibility:"hidden",display:"block",opacity:""}),L=n(se,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),b.css({width:"",height:""}).append(L),D=T.height()+k.height()+b.outerHeight(!0)-b.height(),j=C.width()+H.width()+b.outerWidth(!0)-b.width(),A=L.outerHeight(!0),N=L.outerWidth(!0);var h=a(_.get("initialWidth"),"x"),s=a(_.get("initialHeight"),"y"),l=_.get("maxWidth"),f=_.get("maxHeight");_.w=(l!==!1?Math.min(h,a(l,"x")):h)-N-j,_.h=(f!==!1?Math.min(s,a(f,"y")):s)-A-D,L.css({width:"",height:_.h}),J.position(),u(ee),_.get("onOpen"),O.add(F).hide(),y.focus(),_.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",d,!0),ae.one(re,function(){e.removeEventListener("focus",d,!0)})),_.get("returnFocus")&&ae.one(re,function(){t(_.el).focus()})}var p=parseFloat(_.get("opacity"));v.css({opacity:p===p?p:"",cursor:_.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),_.get("closeButton")?B.html(_.get("close")).appendTo(b):B.appendTo("<div/>"),w()}}function p(){y||(V=!1,E=t(i),y=n(se).attr({id:Y,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(se,"Overlay").hide(),S=t([n(se,"LoadingOverlay")[0],n(se,"LoadingGraphic")[0]]),x=n(se,"Wrapper"),b=n(se,"Content").append(F=n(se,"Title"),I=n(se,"Current"),P=t('<button type="button"/>').attr({id:Z+"Previous"}),K=t('<button type="button"/>').attr({id:Z+"Next"}),R=n("button","Slideshow"),S),B=t('<button type="button"/>').attr({id:Z+"Close"}),x.append(n(se).append(n(se,"TopLeft"),T=n(se,"TopCenter"),n(se,"TopRight")),n(se,!1,"clear:left").append(C=n(se,"MiddleLeft"),b,H=n(se,"MiddleRight")),n(se,!1,"clear:left").append(n(se,"BottomLeft"),k=n(se,"BottomCenter"),n(se,"BottomRight"))).find("div div").css({"float":"left"}),M=n(se,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=K.add(P).add(I).add(R)),e.body&&!y.parent().length&&t(e.body).append(v,y.append(x,M))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return y?(V||(V=!0,K.click(function(){J.next()}),P.click(function(){J.prev()}),B.click(function(){J.close()}),v.click(function(){_.get("overlayClose")&&J.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;$&&_.get("escKey")&&27===e&&(t.preventDefault(),J.close()),$&&_.get("arrowKey")&&W[1]&&!t.altKey&&(37===e?(t.preventDefault(),P.click()):39===e&&(t.preventDefault(),K.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+te,i):t("."+te).live("click."+Z,i)),!0):!1}function w(){var e,o,r,h=J.prep,d=++le;if(q=!0,U=!1,u(he),u(ie),_.get("onLoad"),_.h=_.get("height")?a(_.get("height"),"y")-A-D:_.get("innerHeight")&&a(_.get("innerHeight"),"y"),_.w=_.get("width")?a(_.get("width"),"x")-N-j:_.get("innerWidth")&&a(_.get("innerWidth"),"x"),_.mw=_.w,_.mh=_.h,_.get("maxWidth")&&(_.mw=a(_.get("maxWidth"),"x")-N-j,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.get("maxHeight")&&(_.mh=a(_.get("maxHeight"),"y")-A-D,_.mh=_.h&&_.h<_.mh?_.h:_.mh),e=_.get("href"),Q=setTimeout(function(){S.show()},100),_.get("inline")){var c=t(e);r=t("<div>").hide().insertBefore(c),ae.one(he,function(){r.replaceWith(c)}),h(c)}else _.get("iframe")?h(" "):_.get("html")?h(_.get("html")):s(_,e)?(e=l(_,e),U=new Image,t(U).addClass(Z+"Photo").bind("error",function(){h(n(se,"Error").html(_.get("imgError")))}).one("load",function(){d===le&&setTimeout(function(){var e;t.each(["alt","longdesc","aria-describedby"],function(e,i){var n=t(_.el).attr(i)||t(_.el).attr("data-"+i);n&&U.setAttribute(i,n)}),_.get("retinaImage")&&i.devicePixelRatio>1&&(U.height=U.height/i.devicePixelRatio,U.width=U.width/i.devicePixelRatio),_.get("scalePhotos")&&(o=function(){U.height-=U.height*e,U.width-=U.width*e},_.mw&&U.width>_.mw&&(e=(U.width-_.mw)/U.width,o()),_.mh&&U.height>_.mh&&(e=(U.height-_.mh)/U.height,o())),_.h&&(U.style.marginTop=Math.max(_.mh-U.height,0)/2+"px"),W[1]&&(_.get("loop")||W[z+1])&&(U.style.cursor="pointer",U.onclick=function(){J.next()}),U.style.width=U.width+"px",U.style.height=U.height+"px",h(U)},1)}),U.src=e):e&&M.load(e,_.get("data"),function(e,i){d===le&&h("error"===i?n(se,"Error").html(_.get("xhrError")):t(this).contents())})}var v,y,x,b,T,C,H,k,W,E,L,M,S,F,I,R,K,P,B,O,_,D,j,A,N,z,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title}},Y="colorbox",Z="cbox",te=Z+"Element",ee=Z+"_open",ie=Z+"_load",ne=Z+"_complete",oe=Z+"_cleanup",re=Z+"_closed",he=Z+"_purge",ae=t("<a/>"),se="div",le=0,de={},ce=function(){function t(){clearTimeout(h)}function e(){(_.get("loop")||W[z+1])&&(t(),h=setTimeout(J.next,_.get("slideshowSpeed")))}function i(){R.html(_.get("slideshowStop")).unbind(s).one(s,n),ae.bind(ne,e).bind(ie,t),y.removeClass(a+"off").addClass(a+"on")}function n(){t(),ae.unbind(ne,e).unbind(ie,t),R.html(_.get("slideshowStart")).unbind(s).one(s,function(){J.next(),i()}),y.removeClass(a+"on").addClass(a+"off")}function o(){r=!1,R.hide(),t(),ae.unbind(ne,e).unbind(ie,t),y.removeClass(a+"off "+a+"on")}var r,h,a=Z+"Slideshow_",s="click."+Z;return function(){r?_.get("slideshow")||(ae.unbind(oe,o),o()):_.get("slideshow")&&W[1]&&(r=!0,ae.one(oe,o),_.get("slideshowAuto")?i():n(),R.show())}}();t[Y]||(t(p),J=t.fn[Y]=t[Y]=function(e,i){var n,o=this;if(e=e||{},t.isFunction(o))o=t("<a/>"),e.open=!0;else if(!o[0])return o;return o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Y)||{};t.data(this,Y,t.extend(i,e))}).addClass(te),n=new r(o[0],e),n.get("open")&&f(o[0])),o):o},J.position=function(e,i){function n(){T[0].style.width=k[0].style.width=b[0].style.width=parseInt(y[0].style.width,10)-j+"px",b[0].style.height=C[0].style.height=H[0].style.height=parseInt(y[0].style.height,10)-D+"px"}var r,h,s,l=0,d=0,c=y.offset();if(E.unbind("resize."+Z),y.css({top:-9e4,left:-9e4}),h=E.scrollTop(),s=E.scrollLeft(),_.get("fixed")?(c.top-=h,c.left-=s,y.css({position:"fixed"})):(l=h,d=s,y.css({position:"absolute"})),d+=_.get("right")!==!1?Math.max(E.width()-_.w-N-j-a(_.get("right"),"x"),0):_.get("left")!==!1?a(_.get("left"),"x"):Math.round(Math.max(E.width()-_.w-N-j,0)/2),l+=_.get("bottom")!==!1?Math.max(o()-_.h-A-D-a(_.get("bottom"),"y"),0):_.get("top")!==!1?a(_.get("top"),"y"):Math.round(Math.max(o()-_.h-A-D,0)/2),y.css({top:c.top,left:c.left,visibility:"visible"}),x[0].style.width=x[0].style.height="9999px",r={width:_.w+N+j,height:_.h+A+D,top:l,left:d},e){var g=0;t.each(r,function(t){return r[t]!==de[t]?(g=e,void 0):void 0}),e=g}de=r,e||y.css(r),y.dequeue().animate(r,{duration:e||0,complete:function(){n(),q=!1,x[0].style.width=_.w+N+j+"px",x[0].style.height=_.h+A+D+"px",_.get("reposition")&&setTimeout(function(){E.bind("resize."+Z,J.position)},1),t.isFunction(i)&&i()},step:n})},J.resize=function(t){var e;$&&(t=t||{},t.width&&(_.w=a(t.width,"x")-N-j),t.innerWidth&&(_.w=a(t.innerWidth,"x")),L.css({width:_.w}),t.height&&(_.h=a(t.height,"y")-A-D),t.innerHeight&&(_.h=a(t.innerHeight,"y")),t.innerHeight||t.height||(e=L.scrollTop(),L.css({height:"auto"}),_.h=L.height()),L.css({height:_.h}),e&&L.scrollTop(e),J.position("none"===_.get("transition")?0:_.get("speed")))},J.prep=function(i){function o(){return _.w=_.w||L.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function a(){return _.h=_.h||L.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if($){var d,g="none"===_.get("transition")?0:_.get("speed");L.remove(),L=n(se,"LoadedContent").append(i),L.hide().appendTo(M.show()).css({width:o(),overflow:_.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(b),M.hide(),t(U).css({"float":"none"}),c(_.get("className")),d=function(){function i(){t.support.opacity===!1&&y[0].style.removeAttribute("filter")}var n,o,a=W.length;$&&(o=function(){clearTimeout(Q),S.hide(),u(ne),_.get("onComplete")},F.html(_.get("title")).show(),L.show(),a>1?("string"==typeof _.get("current")&&I.html(_.get("current").replace("{current}",z+1).replace("{total}",a)).show(),K[_.get("loop")||a-1>z?"show":"hide"]().html(_.get("next")),P[_.get("loop")||z?"show":"hide"]().html(_.get("previous")),ce(),_.get("preloading")&&t.each([h(-1),h(1)],function(){var i,n=W[this],o=new r(n,t.data(n,Y)),h=o.get("href");h&&s(o,h)&&(h=l(o,h),i=e.createElement("img"),i.src=h)})):O.hide(),_.get("iframe")?(n=e.createElement("iframe"),"frameBorder"in n&&(n.frameBorder=0),"allowTransparency"in n&&(n.allowTransparency="true"),_.get("scrolling")||(n.scrolling="no"),t(n).attr({src:_.get("href"),name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0}).one("load",o).appendTo(L),ae.one(he,function(){n.src="//about:blank"}),_.get("fastIframe")&&t(n).trigger("load")):o(),"fade"===_.get("transition")?y.fadeTo(g,1,i):i())},"fade"===_.get("transition")?y.fadeTo(g,0,function(){J.position(0,d)}):J.position(g,d)}},J.next=function(){!q&&W[1]&&(_.get("loop")||W[z+1])&&(z=h(1),f(W[z]))},J.prev=function(){!q&&W[1]&&(_.get("loop")||z)&&(z=h(-1),f(W[z]))},J.close=function(){$&&!G&&(G=!0,$=!1,u(oe),_.get("onCleanup"),E.unbind("."+Z),v.fadeTo(_.get("fadeOut")||0,0),y.stop().fadeTo(_.get("fadeOut")||0,0,function(){y.hide(),v.hide(),u(he),L.remove(),setTimeout(function(){G=!1,u(re),_.get("onClosed")},1)}))},J.remove=function(){y&&(y.stop(),t[Y].close(),y.stop(!1,!0).remove(),v.remove(),G=!1,y=null,t("."+te).removeData(Y).removeClass(te),t(e).unbind("click."+Z).unbind("keydown."+Z))},J.element=function(){return t(_.el)},J.settings=X)})(jQuery,document,window);!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(r),r}:e(jQuery)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).closest("form").ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=r.form;if(i.clk=r,"image"===r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n=/\r?\n/g,i={};i.fileapi=void 0!==e('<input type="file">').get(0).files,i.formdata=void 0!==window.FormData;var o=!!e.fn.prop;e.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t,r,n,s){function u(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;a<o;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function c(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function i(){function t(){try{var e=n(v).readyState;a("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){a("Server abort: ",e," (",e.name,")"),s(L),j&&clearTimeout(j),j=void 0}}var r=p.attr2("target"),i=p.attr2("action"),o=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";w.setAttribute("target",m),l&&!/post/i.test(l)||w.setAttribute("method","POST"),i!==f.url&&w.setAttribute("action",f.url),f.skipEncodingOverride||l&&!/post/i.test(l)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(j=setTimeout(function(){T=!0,s(A)},f.timeout));var u=[];try{if(f.extraData)for(var c in f.extraData)f.extraData.hasOwnProperty(c)&&(e.isPlainObject(f.extraData[c])&&f.extraData[c].hasOwnProperty("name")&&f.extraData[c].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+f.extraData[c].name+'">',k).val(f.extraData[c].value).appendTo(w)[0]):u.push(e('<input type="hidden" name="'+c+'">',k).val(f.extraData[c]).appendTo(w)[0]));f.iframeTarget||h.appendTo(D),v.attachEvent?v.attachEvent("onload",s):v.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(e){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",o),r?w.setAttribute("target",r):p.removeAttr("target"),e(u).remove()}}function s(t){if(!x.aborted&&!X){if((O=n(v))||(a("cannot access response document"),t=L),t===A&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t===L&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(O&&O.location.href!==f.iframeSrc||T){v.detachEvent?v.detachEvent("onload",s):v.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"===f.dataType||O.XMLDocument||e.isXMLDoc(O);if(a("isXml="+o),!o&&window.opera&&(null===O.body||!O.body.innerHTML)&&--C)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=O.body?O.body:O.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=O.XMLDocument?O.XMLDocument:O,o&&(f.dataType="xml"),x.getResponseHeader=function(e){return{"content-type":f.dataType}[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(f.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||f.textarea){var p=O.getElementsByTagName("textarea")[0];if(p)x.responseText=p.value,x.status=Number(p.getAttribute("status"))||x.status,x.statusText=p.getAttribute("statusText")||x.statusText;else if(l){var m=O.getElementsByTagName("pre")[0],g=O.getElementsByTagName("body")[0];m?x.responseText=m.textContent?m.textContent:m.innerText:g&&(x.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"===c&&!x.responseXML&&x.responseText&&(x.responseXML=q(x.responseText));try{M=N(x,c,f)}catch(e){i="parsererror",x.error=r=e||i}}catch(e){a("error caught: ",e),i="error",x.error=r=e||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(f.success&&f.success.call(f.context,M,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,f])):i&&(void 0===r&&(r=x.statusText),f.error&&f.error.call(f.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,f,r])),d&&e.event.trigger("ajaxComplete",[x,f]),d&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,x,i),X=!0,f.timeout&&clearTimeout(j),setTimeout(function(){f.iframeTarget?h.attr("src",f.iframeSrc):h.remove(),x.responseXML=null},100)}}}var u,c,f,d,m,h,v,x,y,b,T,j,w=p[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(c=0;c<g.length;c++)u=e(g[c]),o?u.prop("disabled",!1):u.removeAttr("disabled");(f=e.extend(!0,{},e.ajaxSettings,t)).context=f.context||f,m="jqFormIO"+(new Date).getTime();var k=w.ownerDocument,D=p.closest("body");if(f.iframeTarget?(b=(h=e(f.iframeTarget,k)).attr2("name"))?m=b:h.attr2("name",m):(h=e('<iframe name="'+m+'" src="'+f.iframeSrc+'" />',k)).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=h[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}h.attr("src",f.iframeSrc),x.error=r,f.error&&f.error.call(f.context,x,r,t),d&&e.event.trigger("ajaxError",[x,f,r]),f.complete&&f.complete.call(f.context,x,r)}},(d=f.global)&&0==e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,f]),f.beforeSend&&!1===f.beforeSend.call(f.context,x,f))return f.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;(y=w.clk)&&(b=y.name)&&!y.disabled&&(f.extraData=f.extraData||{},f.extraData[b]=y.value,"image"===y.type&&(f.extraData[b+".x"]=w.clk_x,f.extraData[b+".y"]=w.clk_y));var A=1,L=2,F=e("meta[name=csrf-token]").attr("content"),E=e("meta[name=csrf-param]").attr("content");E&&F&&(f.extraData=f.extraData||{},f.extraData[E]=F),f.forceSync?i():setTimeout(i,10);var M,O,X,C=50,q=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},_=e.parseJSON||function(e){return window.eval("("+e+")")},N=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i=("xml"===r||!r)&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&(("json"===r||!r)&&n.indexOf("json")>=0?o=_(o):("script"===r||!r)&&n.indexOf("javascript")>=0&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var l,f,d,p=this;"function"==typeof t?t={success:t}:"string"==typeof t||!1===t&&arguments.length>0?(t={url:t,data:r,dataType:n},"function"==typeof s&&(t.success=s)):void 0===t&&(t={}),l=t.method||t.type||this.attr2("method"),(d=(d="string"==typeof(f=t.url||this.attr2("action"))?e.trim(f):"")||window.location.href||"")&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=t.traditional;void 0===h&&(h=e.ajaxSettings.traditional);var v,g=[],x=this.formToArray(t.semantic,g,t.filtering);if(t.data){var y=e.isFunction(t.data)?t.data(x):t.data;t.extraData=y,v=e.param(y,h)}if(t.beforeSubmit&&!1===t.beforeSubmit(x,this,t))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[x,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var b=e.param(x,h);v&&(b=b?b+"&"+v:v),"GET"===t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+b,t.data=null):t.data=b;var T=[];if(t.resetForm&&T.push(function(){p.resetForm()}),t.clearForm&&T.push(function(){p.clearForm(t.includeHidden)}),!t.dataType&&t.target){var j=t.success||function(){};T.push(function(r,a,n){var i=arguments,o=t.replaceTarget?"replaceWith":"html";e(t.target)[o](r).each(function(){j.apply(this,i)})})}else t.success&&(e.isArray(t.success)?e.merge(T,t.success):T.push(t.success));if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=T.length;i<o;i++)T[i].apply(n,[e,r,a||p,p])},t.error){var w=t.error;t.error=function(e,r,a){var n=t.context||this;w.apply(n,[e,r,a,p])}}if(t.complete){var S=t.complete;t.complete=function(e,r){var a=t.context||this;S.apply(a,[e,r,p])}}var k=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}).length>0,D="multipart/form-data",A=p.attr("enctype")===D||p.attr("encoding")===D,L=i.fileapi&&i.formdata;a("fileAPI :"+L);var F,E=(k||A)&&!L;!1!==t.iframe&&(t.iframe||E)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){F=c(x)}):F=c(x):F=(k||A)&&L?function(r){for(var a=new FormData,n=0;n<r.length;n++)a.append(r[n].name,r[n].value);if(t.extraData){var i=u(t.extraData);for(n=0;n<i.length;n++)i[n]&&a.append(i[n][0],i[n][1])}t.data=null;var o=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(o.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),o.data=null;var s=o.beforeSend;return o.beforeSend=function(e,r){t.formData?r.data=t.formData:r.data=a,s&&s.call(this,e,r)},e.ajax(o)}(x):e.ajax(t),p.removeData("jqxhr").data("jqxhr",F);for(var M=0;M<g.length;M++)g[M]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n,i,o,s){if(("string"==typeof n||!1===n&&arguments.length>0)&&(n={url:n,data:i,dataType:o},"function"==typeof s&&(n.success=s)),n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var u={s:this.selector,c:this.context};return!e.isReady&&u.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(u.s,u.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().on("submit.form-plugin",n,t).on("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r,a){var n=[];if(0===this.length)return n;var o,s=this[0],u=this.attr("id"),c=t||void 0===s.elements?s.getElementsByTagName("*"):s.elements;if(c&&(c=e.makeArray(c)),u&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(o=e(':input[form="'+u+'"]').get()).length&&(c=(c||[]).concat(o)),!c||!c.length)return n;e.isFunction(a)&&(c=e.map(c,a));var l,f,d,p,m,h,v;for(l=0,h=c.length;l<h;l++)if(m=c[l],(d=m.name)&&!m.disabled)if(t&&s.clk&&"image"===m.type)s.clk===m&&(n.push({name:d,value:e(m).val(),type:m.type}),n.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}));else if((p=e.fieldValue(m,!0))&&p.constructor===Array)for(r&&r.push(m),f=0,v=p.length;f<v;f++)n.push({name:d,value:p[f]});else if(i.fileapi&&"file"===m.type){r&&r.push(m);var g=m.files;if(g.length)for(f=0;f<g.length;f++)n.push({name:d,value:g[f],type:m.type});else n.push({name:d,value:"",type:m.type})}else null!==p&&void 0!==p&&(r&&r.push(m),n.push({name:d,value:p,type:m.type,required:m.required}));if(!t&&s.clk){var x=e(s.clk),y=x[0];(d=y.name)&&!y.disabled&&"image"===y.type&&(n.push({name:d,value:x.val()}),n.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor===Array)for(var i=0,o=n.length;i<o;i++)r.push({name:a,value:n[i]});else null!==n&&void 0!==n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;a<n;a++){var i=this[a],o=e.fieldValue(i,t);null===o||void 0===o||o.constructor===Array&&!o.length||(o.constructor===Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,i=t.type,o=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!t.checked||("submit"===i||"image"===i)&&t.form&&t.form.clk!==t||"select"===o&&-1===t.selectedIndex))return null;if("select"===o){var s=t.selectedIndex;if(s<0)return null;for(var u=[],c=t.options,l="select-one"===i,f=l?s+1:c.length,d=l?s:0;d<f;d++){var p=c[d];if(p.selected&&!p.disabled){var m=p.value;if(m||(m=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),l)return m;u.push(m)}}return u}return e(t).val().replace(n,"\r\n")},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"===n?this.value="":"checkbox"===a||"radio"===a?this.checked=!1:"select"===n?this.selectedIndex=-1:"file"===a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){var t=e(this),r=this.tagName.toLowerCase();switch(r){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var a=t.parents("select");return a.length&&a[0].multiple?"option"===r?this.selected=this.defaultSelected:t.find("option").resetForm():a.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var n=e(t.attr("for")),i=t.find("input,select,textarea");return n[0]&&i.unshift(n[0]),i.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"===r||"radio"===r)this.checked=t;else if("option"===this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"===a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:6,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn);}else if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector});}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut});}
var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(Math.sqrt((pX-cX)*(pX-cX)+(pY-cY)*(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=true;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=false;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type==="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(!ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover},cfg.selector);};})(jQuery);(function($){$.extend($.fn,{pstrength:function(options){var options=$.extend({verdicts:["Too Short!","Very Weak","Weak","Medium","Strong","Very Strong"],colors:["#ccc","#f00","#c06","#f60","#3c0","#3f0"],values:[20,30,40,60,80,100],scores:[10,15,30,40],minchar:6,minCharText:"Minimum length is %d characters"},options);return this.each(function(){var infoarea=$(this).attr('id');$(this).after($("<div>").attr("id",infoarea+"_bar").addClass("progress").css("display","none").append($("<div>").addClass("progress-bar").css("width","0%").attr({"role":"progressbar","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100}).append($("<span>").attr("id",infoarea+"_text").text("0%"))));if(options.minchar>0){$(this).after($("<div>").addClass("help-block").attr("id",infoarea+"_minchar").text(options.minCharText.replace('%d',options.minchar)));}
options.$ctlBar=$(document).find("#"+infoarea+"_bar .progress-bar");options.$ctlText=$(document).find("#"+infoarea+"_text");$(this).keyup(function(){if(options.minchar<=$(this).val().length&&$(document).find("#"+infoarea+'_bar:hidden')){$(document).find("#"+infoarea+'_bar').show();}
$.fn.runPassword($(this).val(),infoarea,options);});});},runPassword:function(password,infoarea,options){nPerc=$.fn.checkPassword(password,options);var statusNum;if(nPerc<0){statusNum=0}
else if(nPerc<=options.scores[0]){statusNum=1}
else if(nPerc>options.scores[0]&&nPerc<=options.scores[1]){statusNum=2}
else if(nPerc>options.scores[1]&&nPerc<=options.scores[2]){statusNum=3}
else if(nPerc>options.scores[2]&&nPerc<=options.scores[3]){statusNum=4}
else{statusNum=5}
options.$ctlBar.css({width:options.values[statusNum]+"%"});options.$ctlBar.attr("aria-valuenow",options.values[statusNum]);options.$ctlBar.css({backgroundColor:options.colors[statusNum]});options.$ctlText.html(options.verdicts[statusNum]);},checkPassword:function(password,options)
{var intScore=0;var strVerdict=options.verdicts[0];if(password.length<options.minchar){intScore=(intScore-100)}
else if(password.length>options.minchar+1&&password.length<options.minchar+3){intScore=(intScore+6)}
else if(password.length>options.minchar+2&&password.length<options.minchar+4){intScore=(intScore+12)}
else if(password.length>options.minchar*2){intScore=(intScore+18)}
if(password.match(/[a-z]/)){intScore=(intScore+1)}
if(password.match(/[A-Z]/)){intScore=(intScore+5)}
if(password.match(/\d+/)){intScore=(intScore+5)}
if(password.match(/(.*[0-9].*[0-9].*[0-9])/)){intScore=(intScore+5)}
if(password.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)){intScore=(intScore+5)}
if(password.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){intScore=(intScore+5)}
if(password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){intScore=(intScore+2)}
if(password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)){intScore=(intScore+2)}
if(password.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)){intScore=(intScore+2)}
return intScore;}});})(jQuery);(function($){var getHeightProperty=function(){var browser_id=0;var property=[['min-height','0px'],['height','1%']];var bMatch=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[],browser=bMatch[1]||"",browserVersion=bMatch[2]||"0";if(browser==='msie'&&browserVersion<7){browser_id=1;}
return{'name':property[browser_id][0],'autoheightVal':property[browser_id][1]};};$.getSyncedHeight=function(selector){var max=0;var heightProperty=getHeightProperty();$(selector).each(function(){$(this).css(heightProperty.name,heightProperty.autoheightVal);var val=parseInt($(this).css('height'),10);if(val>max){max=val;}});return max;};$.fn.syncHeight=function(config){var defaults={updateOnResize:false,height:false};var options=$.extend(defaults,config);var e=this;var max=0;var heightPropertyName=getHeightProperty().name;if(options.parent==true){$(this).each(function(){$(this).css(heightPropertyName,0+'px');});$(this).each(function(){$(this).css(heightPropertyName,$(this).parent().innerHeight()+'px');});}else{if(typeof(options.height)==="number"){max=options.height;}else{max=$.getSyncedHeight(this);}
$(this).each(function(){$(this).css(heightPropertyName,max+'px');});}
if(options.updateOnResize===true){$(window).bind('resize.syncHeight',function(){options["updateOnResize"]=false;$(e).syncHeight(options);});}
return this;};$.fn.unSyncHeight=function(){$(window).unbind('resize.syncHeight');var heightPropertyName=getHeightProperty().name;$(this).each(function(){$(this).css(heightPropertyName,'');});};})(jQuery);(function($){var debugMode=false;$.fn.extend({getUniqueId:function(p,q,r){if(r===undefined){r='';}else{r='-'+r;}
return p+q+r;},getClassSelectorsFromClassNames:function(className){if(className.indexOf(' '>-1)){return'.'+className.split(' ').join('.');}else{return'.'+className;}},accessibleTabs:function(config){var defaults={wrapperClass:'content',currentClass:'current',tabhead:'h4',tabheadClass:'tabhead',tabbody:'.tabbody',fx:'show',fxspeed:'normal',currentInfoText:'current tab: ',currentInfoPosition:'prepend',currentInfoClass:'current-info',tabsListClass:'tabs-list',syncheights:false,syncHeightMethodName:'syncHeight',cssClassAvailable:false,saveState:false,autoAnchor:false,pagination:false,position:'top',wrapInnerNavLinks:'',firstNavItemClass:'first',lastNavItemClass:'last',clearfixClass:'clearfix'};var keyCodes={37:-1,38:-1,39:+1,40:+1};var positions={top:'prepend',bottom:'append'};this.options=$.extend(defaults,config);var tabsCount=0;if($("body").data('accessibleTabsCount')!==undefined){tabsCount=$("body").data('accessibleTabsCount');}
$("body").data('accessibleTabsCount',this.length+tabsCount);var o=this;return this.each(function(t){var el=$(this);var list='';var tabCount=0;var ids=[];$(el).wrapInner('<div class="'+o.options.wrapperClass+'"></div>');$(el).find(o.options.tabhead).each(function(i){var id='';var elId=$(this).attr('id');if(elId){if(elId.indexOf('accessibletabscontent')===0){return;}
id=' id="'+elId+'"';}
var tabId=o.getUniqueId('accessibletabscontent',tabsCount+t,i);var navItemId=o.getUniqueId('accessibletabsnavigation',tabsCount+t,i);ids.push(tabId);var navItemText=($(this).children("a").length>0)?$(this).children("a").html():$(this).html();var ariaLabel="";if($(this).attr("aria-label")){ariaLabel='aria-label="'+$(this).attr("aria-label")+'"';}
if(o.options.cssClassAvailable===true){var cssClass='';if($(this).attr('class')){cssClass=$(this).attr('class');cssClass=' class="'+cssClass+'"';}
list+='<li id="'+navItemId+'"><a'+id+''+cssClass+' href="#'+tabId+'" '+ariaLabel+'>'+navItemText+'</a></li>';}else{list+='<li id="'+navItemId+'"><a'+id+' href="#'+tabId+'" '+ariaLabel+'>'+navItemText+'</a></li>';}
$(this).attr({"id":tabId,"class":o.options.tabheadClass,"tabindex":"-1"});tabCount++;});if(o.options.syncheights&&$.fn[o.options.syncHeightMethodName]){$(el).find(o.options.tabbody)[o.options.syncHeightMethodName]();$(window).resize(function(){$(el).find(o.options.tabbody)[o.options.syncHeightMethodName]();});}
var tabs_selector=o.getClassSelectorsFromClassNames(o.options.tabsListClass);if(!$(el).find(tabs_selector).length){$(el)[positions[o.options.position]]('<ul class="'+o.options.clearfixClass+' '+o.options.tabsListClass+' tabamount'+tabCount+'"></ul>');}
$(el).find(tabs_selector).append(list);var content=$(el).find(o.options.tabbody);if(content.length>0){$(content).hide();$(content[0]).show();}
$(el).find("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+">li:first").addClass(o.options.currentClass).addClass(o.options.firstNavItemClass).find('a')[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+'</span>').parents("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)).children('li:last').addClass(o.options.lastNavItemClass);var tabheads=$(el).find(o.options.tabhead);if(tabheads.length>0){$(tabheads[0]).addClass(o.options.currentClass).addClass(o.options.firstNavItemClass);$(tabheads[tabheads.length-1]).addClass(o.options.lastNavItemClass);}
if(o.options.wrapInnerNavLinks){$(el).find('ul'+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+'>li>a').wrapInner(o.options.wrapInnerNavLinks);}
$(el).find('ul'+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+'>li>a').each(function(i){$(this).click(function(event){event.preventDefault();el.trigger("showTab.accessibleTabs",[$(event.target)]);if(o.options.saveState&&$.cookie){$.cookie('accessibletab_'+el.attr('id')+'_active',i);}
$(el).find('ul'+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+'>li.'+o.options.currentClass).removeClass(o.options.currentClass).find("span"+o.getClassSelectorsFromClassNames(o.options.currentInfoClass)).remove();$(el).find(o.options.tabhead).removeClass(o.options.currentClass);$(this).blur();$(el).find(o.options.tabbody+':visible').hide();$(el).find(o.options.tabbody).eq(i)[o.options.fx](o.options.fxspeed);$(this)[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+'</span>').parent().addClass(o.options.currentClass);$($(this).attr("href")).addClass(o.options.currentClass);$($(this).attr("href")).focus().keyup(function(event){if(keyCodes[event.keyCode]){o.showAccessibleTab(i+keyCodes[event.keyCode]);$(this).unbind("keyup");}});});$(this).focus(function(){$(document).keyup(function(event){if(keyCodes[event.keyCode]){o.showAccessibleTab(i+keyCodes[event.keyCode]);}});});$(this).blur(function(){$(document).unbind("keyup");});});if(o.options.saveState&&$.cookie){var savedState=$.cookie('accessibletab_'+el.attr('id')+'_active');debug($.cookie('accessibletab_'+el.attr('id')+'_active'));if(savedState!==null){o.showAccessibleTab(savedState,el.attr('id'));}}
if(o.options.autoAnchor&&window.location.hash){var anchorTab=$(o.getClassSelectorsFromClassNames(o.options.tabsListClass)).find(window.location.hash);if(anchorTab.length){anchorTab.click();}}
if(o.options.pagination){var m='<ul class="pagination">';m+='    <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>';m+='    <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li>';m+='</ul>';var tabs=$(el).find('.tabbody');var tabcount=tabs.length;tabs.each(function(idx){$(this).append(m);var next=idx+1;if(next>=tabcount){next=0;}
var previous=idx-1;if(previous<0){previous=tabcount-1;}
var p=$(this).find('.pagination');var previousEl=p.find('.previous');previousEl.find('span').text($('#'+ids[previous]).text());previousEl.find('a').attr('href','#'+ids[previous]).click(function(event){event.preventDefault();$(el).find('.tabs-list a').eq(previous).click();});var nextEl=p.find('.next');nextEl.find('span').text($('#'+ids[next]).text());nextEl.find('a').attr('href','#'+ids[next]).click(function(event){event.preventDefault();$(el).find('.tabs-list a').eq(next).click();});});}});},showAccessibleTab:function(index,id){debug('showAccessibleTab');var o=this;if(id){var el=$('#'+id);var links=el.find('ul'+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+'>li>a');el.trigger("showTab.accessibleTabs",[links.eq(index)]);links.eq(index).click();}else{return this.each(function(){var el=$(this);el.trigger("showTab.accessibleTabs");var links=el.find('ul'+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+'>li>a');el.trigger("showTab.accessibleTabs",[links.eq(index)]);links.eq(index).click();});}},showAccessibleTabSelector:function(selector){debug('showAccessibleTabSelector');var el=$(selector);if(el){if(el.get(0).nodeName.toLowerCase()==='a'){el.click();}else{debug('the selector of a showAccessibleTabSelector() call needs to point to a tabs headline!');}}}});function debug(msg,info){if(debugMode&&window.console&&window.console.log){if(info){window.console.log(info+': ',msg);}else{window.console.log(msg);}}}})(jQuery);(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,o)}function o(){t.datepicker._isDisabledDatepicker(p.inline?p.dpDiv.parent()[0]:p.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}function r(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{},t.ui.version="1.12.1";var h=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},h=e.split(".")[0];e=e.split(".")[1];var l=h+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[h]=t[h]||{},n=t[h][e],o=t[h][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:h,widgetName:e,widgetFullName:l}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=l.call(arguments,1),o=0,a=n.length;a>o;o++)for(i in n[o])s=n[o][i],n[o].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var o="string"==typeof n,a=l.call(arguments,1),r=this;return o?this.length||"instance"!==n?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(r=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+n+"'")}):r=void 0:(a.length&&(n=t.widget.extend.apply(null,[n].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+o.eventNamespace,c=h[2];c?n.on(l,c,r):i.on(l,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,o=Math.max,a=Math.abs,r=/left|center|right/,h=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType,o=!s&&!n;return{element:i,isWindow:s,isDocument:n,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return d.apply(this,arguments);n=t.extend({},n);var u,p,f,g,m,_,v=t(n.of),b=t.position.getWithinInfo(n.within),y=t.position.getScrollInfo(b),w=(n.collision||"flip").split(" "),k={};return _=s(v),v[0].preventDefault&&(n.at="left top"),p=_.width,f=_.height,g=_.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=l.exec(i[0]),e=l.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===n.at[0]?m.left+=p:"center"===n.at[0]&&(m.left+=p/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),u=e(k.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,r,h=t(this),l=h.outerWidth(),c=h.outerHeight(),d=i(this,"marginLeft"),_=i(this,"marginTop"),x=l+d+i(this,"marginRight")+y.width,C=c+_+i(this,"marginBottom")+y.height,D=t.extend({},m),I=e(k.my,h.outerWidth(),h.outerHeight());"right"===n.my[0]?D.left-=l:"center"===n.my[0]&&(D.left-=l/2),"bottom"===n.my[1]?D.top-=c:"center"===n.my[1]&&(D.top-=c/2),D.left+=I[0],D.top+=I[1],s={marginLeft:d,marginTop:_},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](D,{targetWidth:p,targetHeight:f,elemWidth:l,elemHeight:c,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+I[0],u[1]+I[1]],my:n.my,at:n.at,within:b,elem:h})}),n.using&&(r=function(t){var e=g.left-D.left,i=e+p-l,s=g.top-D.top,r=s+f-c,u={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:h,left:D.left,top:D.top,width:l,height:c},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};l>p&&p>a(e+i)&&(u.horizontal="center"),c>f&&f>a(s+r)&&(u.vertical="middle"),u.important=o(a(e),a(i))>o(a(s),a(r))?"horizontal":"vertical",n.using.call(this,t,u)}),h.offset(t.extend(D,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-r-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-r-o,(0>i||a(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-r-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-r-o,(0>s||a(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,(i>0||u>a(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(i,s){var n,o,a,r,h,l=i.nodeName.toLowerCase();return"area"===l?(n=i.parentNode,o=n.name,i.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(l)?(r=!i.disabled,r&&(h=t(i).closest("fieldset")[0],h&&(r=!h.disabled))):r="a"===l?i.href||s:s,r&&t(i).is(":visible")&&e(t(i)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,i,s,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),s=this.attr("id"),s&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(s)+"']",n=n.add(o.find(i).addBack(i))),this.pushStack(n))},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||i>=0)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var c=!1;t(document).on("mouseup",function(){c=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,c=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),h=t.pageX,l=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(h=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,h,l,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)h=s.snapElements[d].left-s.margins.left,l=h+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,h-g>_||m>l+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(h-_),r=g>=Math.abs(l-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(h-m),r=g>=Math.abs(l-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],void 0):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&u(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var u=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,h=a+e.helperProportions.height,l=i.offset.left,c=i.offset.top,u=l+i.proportions().width,d=c+i.proportions().height;switch(s){case"fit":return o>=l&&u>=r&&a>=c&&d>=h;case"intersect":return o+e.helperProportions.width/2>l&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>h-e.helperProportions.height/2;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,l,i.proportions().width);case"touch":return(a>=c&&d>=a||h>=c&&d>=h||c>a&&h>d)&&(o>=l&&u>=o||r>=l&&u>=r||l>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&u(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=u(e,this,this.options.tolerance,i),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===n}),o.length&&(s=t(o[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,h=this._change[o];return this._updatePrevProperties(),h?(i=h.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,h=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=r-e.minWidth),s&&l&&(t.left=r-e.maxWidth),a&&c&&(t.top=h-e.minHeight),n&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,h=t(this).resizable("instance"),l=h.options,c=h.element,u=l.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(h.containerElement=t(d),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=h._num(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,o=h.containerSize.width,a=h._hasScroll(d,"left")?d.scrollWidth:o,r=h._hasScroll(d)?d.scrollHeight:n,h.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?h.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-h.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-h.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,c=h[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=h,_&&(p+=l),v&&(f+=c),g&&(p-=l),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-l)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-l>0?(i.size.width=p,i.position.left=a.left-u):(p=l-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),s=i.offset(),n={left:s.left-e.elementPos.left,top:s.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:n.left,top:n.top,right:n.left+i.outerWidth(),bottom:n.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(s.$element,"ui-selected"),s.selected=!1,i._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),i._removeClass(n.$element,s?"ui-unselecting":"ui-selected")._addClass(n.$element,s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1,c={};i&&i.element!==s.element[0]&&(c.left=i.left+s.elementPos.left,c.right=i.right+s.elementPos.left,c.top=i.top+s.elementPos.top,c.bottom=i.bottom+s.elementPos.top,"touch"===n.tolerance?l=!(c.left>r||o>c.right||c.top>h||a>c.bottom):"fit"===n.tolerance&&(l=c.left>o&&r>c.right&&c.top>a&&h>c.bottom),l?(i.selected&&(s._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(s._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(s._addClass(i.$element,"ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,s._addClass(i.$element,"ui-selected"),i.selected=!0):(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(s._removeClass(i.$element,"ui-selected"),i.selected=!1,s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-selecting")._addClass(s.$element,"ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,h,l,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[a],l=!1,e[u]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(e[u]-h)&&(n=Math.abs(e[u]-h),o=this.items[s],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,s=this.options.icons;s&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+s.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,s.header)._addClass(i,null,s.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),void 0):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void 0)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),t(o).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),s=e.next(),n=s.uniqueId().attr("id");e.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(e=n.height(),this.element.siblings(":visible").each(function(){var i=t(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,s,n=this.options,o=this.active,a=t(e.currentTarget),r=a[0]===o[0],h=r&&n.collapsible,l=h?t():a.next(),c=o.next(),u={oldHeader:o,oldPanel:c,newHeader:h?t():a,newPanel:l};e.preventDefault(),r&&!n.collapsible||this._trigger("beforeActivate",e,u)===!1||(n.active=h?!1:this.headers.index(a),this.active=r?t():a,this._toggle(u),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),n.icons&&(i=o.children(".ui-accordion-header-icon"),this._removeClass(i,null,n.icons.activeHeader)._addClass(i,null,n.icons.header)),r||(this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active"),n.icons&&(s=a.children(".ui-accordion-header-icon"),this._removeClass(s,null,n.icons.header)._addClass(s,null,n.icons.activeHeader)),this._addClass(a.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var s,n,o,a=this,r=0,h=t.css("box-sizing"),l=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=l&&c.down||c,d=function(){a._toggleComplete(i)};return"number"==typeof u&&(o=u),"string"==typeof u&&(n=u),n=n||u.easing||c.easing,o=o||u.duration||c.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:n,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(this.showProps,{duration:o,easing:n,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==a.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-r),r=0)}}),void 0):e.animate(this.hideProps,o,n,d):t.animate(this.showProps,o,n,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget);i[0]===s[0]&&(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var i,s,n,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||"",o=!1,n=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),n===s?o=!0:n=s+n,i=this._filterMenuItems(n),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(e.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(e,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s,n,o,a=this,r=this.options.icons.submenu,h=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),s=h.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev(),s=t("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+r),i.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",i.attr("id"))}),this._addClass(s,"ui-menu","ui-widget ui-widget-content ui-front"),e=h.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);a._isDivider(e)&&a._addClass(e,"ui-menu-divider","ui-widget-content")}),n=i.not(".ui-menu-item, .ui-menu-divider"),o=n.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,s,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,void 0;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=s})),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!s)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var d=/ui-corner-([a-z]){2,6}/g;t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,function(s,n){var o,a={};return n?"controlgroupLabel"===s?(o=e.element.find(n),o.each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),i=i.concat(o.get()),void 0):(t.fn[s]&&(a=e["_"+s+"Options"]?e["_"+s+"Options"]("middle"):{classes:{}},e.element.find(n).each(function(){var n=t(this),o=n[s]("instance"),r=t.widget.extend({},a);if("button"!==s||!n.parent(".ui-spinner").length){o||(o=n[s]()[s]("instance")),o&&(r.classes=e._resolveClassesValues(r.classes,o)),n[s](r);var h=n[s]("widget");t.data(h[0],"ui-controlgroup-data",o?o:n[s]("instance")),i.push(h[0])}})),void 0):void 0}),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var i=t(this),s=i.data("ui-controlgroup-data");s&&s[e]&&s[e]()})},_updateCornerClass:function(t,e){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",s=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,i),this._addClass(t,null,s)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,function(n){var o=i.options.classes[n]||"";o=t.trim(o.replace(d,"")),s[n]=(o+" "+e[n]).replace(/\s+/g," ")}),s},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?(this._callChildMethod(e?"disable":"enable"),void 0):(this.refresh(),void 0)},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,s){var n=e[s]().data("ui-controlgroup-data");if(n&&i["_"+n.widgetName+"Options"]){var o=i["_"+n.widgetName+"Options"](1===e.length?"only":s);o.classes=i._resolveClassesValues(o.classes,n),n.element[n.widgetName](o)}else i._updateCornerClass(e[s](),s)}),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,s=this,n=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){s.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(n.disabled=e),n},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,i=this.element[0].name,s="input[name='"+t.ui.escapeSelector(i)+"']";return i?(e=this.form.length?t(this.form[0].elements).filter(s):t(s).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),this.element[0].disabled=e,void 0):(this.refresh(),void 0)):void 0},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var s="iconPosition"!==e,n=s?this.options.iconPosition:i,o="top"===n||"bottom"===n;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,i),this._attachIcon(n),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),t.uiBackCompat!==!1&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?(this._super("showLabel",e),void 0):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments),void 0)}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}});var p;t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.on("focus",this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,o){var r,h,l,c,u,d=this._dialogInst;return d||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+c,l/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),p===n&&(p=null))},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,o,r,h,l=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),a(l.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,r)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var s,n,o,r,h,l,c;s=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,"beforeShow"),o=n?n.apply(e,[e,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),h={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(s),h=t.datepicker._checkOffset(s,h,r),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),s.inline||(l=t.datepicker._get(s,"showAnim"),c=t.datepicker._get(s,"duration"),s.dpDiv.css("z-index",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?s.dpDiv.show(l,t.datepicker._get(s,"showOptions"),c):s.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),t.datepicker._curInst=s))}},_updateDatepicker:function(e){this.maxRows=4,p=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),s=this._get(a,"duration"),n=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),s,n):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).val(n))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,o,a,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},w=function(t){var e=y(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,o=RegExp("^\\d{"+n+","+s+"}"),a=i.substring(h).match(o);if(!a)throw"Missing number at position "+h;return h+=a[0].length,parseInt(a[0],10)},k=function(e,s,n){var o=-1,a=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var s=e[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(o=e[0],h+=s.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+h},x=function(){if(i.charAt(h)!==e.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;e.length>n;n++)if(b)"'"!==e.charAt(n)||y("'")?x():b=!1;else switch(e.charAt(n)){case"d":_=w("d");break;case"D":k("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":r=new Date(w("@")),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(i.length>h&&(a=i.substr(h),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),v>-1)for(m=1,_=v;;){if(o=this._getDaysInMonth(g,m-1),o>=_)break;m++,_-=o}if(r=this._daylightSavingAdjust(new Date(g,m-1,_)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,_,v,b,y,w,k,x,C,D,I,T,P,M,S,H,z,O,A,N,W,E,F,L,R=new Date,B=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),$=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=Q&&Q>e?Q:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-$,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+$,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?G:B,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=" ui-corner-all",T="",X){if(T+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:T+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:T+=" ui-datepicker-group-middle",I=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,te,Q,J,k>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",P=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,P+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[M]+"'>"+p[M]+"</span></th>";for(T+=P+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),H=(this._getFirstDayOfMonth(te,Z)-c+7)%7,z=Math.ceil((H+S)/7),O=X?this.maxRows>z?this.maxRows:z:z,this.maxRows=O,A=this._daylightSavingAdjust(new Date(te,Z,1-H)),N=0;O>N;N++){for(T+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(A)+"</td>":"",w=0;7>w;w++)E=m?m.apply(t.input?t.input[0]:null,[A]):[!0,""],F=A.getMonth()!==Z,L=F&&!v||!E[0]||Q&&Q>A||J&&A>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(A.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===A.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+E[1]+(A.getTime()===G.getTime()?" "+this._currentClass:"")+(A.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(F&&!_||!E[2]?"":" title='"+E[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":L?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===B.getTime()?" ui-state-highlight":"")+(A.getTime()===G.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);T+=W+"</tr>"}Z++,Z>11&&(Z=0,te++),T+="</tbody></table>"+(X?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=T}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),s=!0),s&&!i&&this._trigger("focus",e),s},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),void 0;if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.trigger("focus")}),e.preventDefault()):(this._delay(function(){s.trigger("focus")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this._removeClass(this.uiDialog,"ui-dialog-buttons"),void 0):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,o={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,"boolean"==typeof s.text&&delete s.text,t("<button></button>",s).button(o).appendTo(e.uiButtonSet).on("click",function(){n.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){i._addClass(t(this),"ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){var a=o.offset.left-i.document.scrollLeft(),r=o.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(r>=0?"+":"")+r,of:i.window},i._removeClass(t(this),"ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){i._addClass(t(this),"ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){var a=i.uiDialog.offset(),r=a.left-i.document.scrollLeft(),h=a.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},i._removeClass(t(this),"ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,n={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,i){var s,n,o=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&(s=o.is(":data(ui-draggable)"),s&&!i&&o.draggable("destroy"),!s&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!i&&o.resizable("destroy"),n&&"string"==typeof i&&o.resizable("option","handles",i),n||i===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),void 0)},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,s=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(s).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var s=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&s.index!==e.focusIndex&&(e._trigger("focus",t,{item:s}),e.isOpen||e._select(s,t)),e.focusIndex=s.index,e.button.attr("aria-activedescendant",e.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t("<span>");return this._setText(i,e.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(e,i){var s=this,n="";t.each(i,function(i,o){var a;o.optgroup!==n&&(a=t("<li>",{text:o.optgroup}),s._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(e),n=o.optgroup),s._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var s=t("<li>"),n=t("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(s,null,"ui-state-disabled"),this._setText(n,i.label),s.append(n).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),n+=":not(.ui-state-disabled)"),s="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](n).eq(-1):i[t+"All"](n).eq(0),s.length&&this.menuInstance.focus(e,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return t===!1?(this.button.css("width",""),void 0):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t),void 0)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var i=this,s=[];e.each(function(e,n){s.push(i._parseOption(t(n),e))}),this.items=s},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n,o=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==o&&(s=this._trigger("slide",t,this._uiHash(e,i,a)),s!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,s=Math.round((t-e)/i)*i;t=s+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,s,n,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),i=this._start(e,a),i===!1))return}switch(o=this.options.step,s=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-o)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);null!=n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);e||(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,s,n;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,this.element.val(this._format(i)),void 0):(("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(s=this.buttons.first().find(".ui-icon"),this._removeClass(s,null,this.options.icons.up),this._addClass(s,null,e.up),n=this.buttons.last().find(".ui-icon"),this._removeClass(n,null,this.options.icons.down),this._addClass(n,null,e.down)),this._super(t,e),void 0)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:r(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null===t?!1:t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:r(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:r(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:r(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:r(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(r(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.uiBackCompat!==!1&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),t.ui.spinner,t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var i,s;i=e.href.replace(t,""),s=location.href.replace(t,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return e.hash.length>1&&i===s}}(),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===e&&(s&&this.tabs.each(function(i,n){return t(n).attr("aria-controls")===s?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=this.tabs.length?0:!1)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=i?!1:0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:n=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}e.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?(this._activate(e),void 0):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e),void 0)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each(function(i,s){var n,o,a,r=t(s).uniqueId().attr("id"),h=t(s).closest("li"),l=h.attr("aria-controls");e._isLocal(s)?(n=s.hash,a=n.substring(1),o=e.element.find(e._sanitizeSelector(n))):(a=h.attr("aria-controls")||t({}).uniqueId()[0].id,n="#"+a,o=e.element.find(n),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":a,"aria-labelledby":r}),o.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,s,n;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),n=0;s=this.tabs[n];n++)i=t(s),e===!0||-1!==t.inArray(n,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,e===!0)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){o._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){o._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;i!==!1&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(i!==!0){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var s=this,n=this.tabs.eq(e),o=n.find(".ui-tabs-anchor"),a=this._getPanelForTab(n),r={tab:n,panel:a},h=function(t,e){"abort"===e&&s.panels.stop(!1,!0),s._removeClass(n,"ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){a.html(t),s._trigger("load",i,r),h(n,e)},1)}).fail(function(t,e){setTimeout(function(){h(t,e)},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.uiBackCompat!==!1&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs,t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s.element[0],e.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);return e.is("[title]")?e.data("ui-tooltip-title",e.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s||s.nodeType||s.jquery?this._open(e,t,s):(i=s.call(t[0],function(i){n._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=o),this._open(e,t,i))})}),i&&this._open(e,t,i),void 0)},_open:function(e,i,s){function n(t){l.of=t,a.is(":hidden")||a.position(l)}var o,a,r,h,l=t.extend({},this.options.position);if(s){if(o=this._find(i))return o.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),a=o.tooltip,this._addDescribedBy(i,a.attr("id")),a.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),h=t("<div>").html(a.find(".ui-tooltip-content").html()),h.removeAttr("name").find("[name]").removeAttr("name"),h.removeAttr("id").find("[id]").removeAttr("id"),h.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:n}),n(e)):a.position(t.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(":visible")&&(n(l.of),clearInterval(r))},t.fx.interval)),this._trigger("open",e,{tooltip:a})}},_registerCloseHandlers:function(e,i){var s={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var s=t.Event(e);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);return o?(i=o.tooltip,o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:i}),o.hiding||(o.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),s=t("<div>").appendTo(i),n=i.uniqueId().attr("id");return this._addClass(s,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur"),o=s.element;n.target=n.currentTarget=o[0],e.close(n,!0),t("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),t.uiBackCompat!==!1&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var f="ui-effects-",g="ui-effects-style",m="ui-effects-animated",_=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(_),function(){function e(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function i(e,i){var s,o,a={};for(s in i)o=i[s],e[s]!==o&&(n[s]||(t.fx.step[s]||!isNaN(parseFloat(o)))&&(a[s]=o));return a}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(_.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var i=t(this);return{el:i,start:e(this)}}),o=function(){t.each(s,function(t,e){n[e]&&a[e+"Class"](n[e])})},o(),l=l.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,s,n,o,a){return"boolean"==typeof s||void 0===s?n?t.effects.animateClass.call(this,s?{add:i}:{remove:i},n,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},s,n,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function e(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function i(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}function s(t,e){var i=e.outerWidth(),s=e.outerHeight(),n=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=n.exec(t)||["",0,i,s,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?s:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(i){return!!t(i).data(m)||e(i)}}(t.expr.filters.animated)),t.uiBackCompat!==!1&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;s>i;i++)null!==e[i]&&t.data(f+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;n>s;s++)null!==e[s]&&(i=t.data(f+e[s]),t.css(e[s],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus"),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,s){return s||(s=i,i="effect"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(e||100)/100:1,n="vertical"!==i?(e||100)/100:1;return{height:t.height()*n,width:t.width()*s,outerHeight:t.outerHeight()*n,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();e>1&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(g,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(g)||"",t.removeData(g)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css("position"),n=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),"float":e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(f+"placeholder",i)),e.css({position:s,left:n.left,top:n.top}),i},removePlaceholder:function(t){var e=f+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function i(e){function i(){r.removeData(m),t.effects.cleanUp(r),"hide"===s.mode&&r.hide(),a()}function a(){t.isFunction(h)&&h.call(r[0]),t.isFunction(e)&&e()}var r=t(this);s.mode=c.shift(),t.uiBackCompat===!1||o?"none"===s.mode?(r[l](),a()):n.call(r[0],s,i):(r.is(":hidden")?"hide"===l:"show"===l)?(r[l](),a()):n.call(r[0],s,a)}var s=e.apply(this,arguments),n=t.effects.effect[s.effect],o=n.mode,a=s.queue,r=a||"fx",h=s.complete,l=s.mode,c=[],u=function(e){var i=t(this),s=t.effects.mode(i,l)||o;i.data(m,!0),c.push(s),o&&("show"===s||s===o&&"hide"===s)&&i.show(),o&&"none"===s||t.effects.saveStyle(i),t.isFunction(e)&&e()};return t.fx.off||!n?l?this[l](s.duration,h):this.each(function(){h&&h.call(this)}):a===!1?this.each(u).each(i):this.queue(r,u).queue(r,i)},show:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(t.fn.show),hide:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(s){if(i(s)||"boolean"==typeof s)return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):s(this.css("clip"),this)},transfer:function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=s(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}();var v=t.effects;t.effects.define("blind","hide",function(e,i){var s={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},n=t(this),o=e.direction||"up",a=n.cssClip(),r={clip:t.extend({},a)},h=t.effects.createPlaceholder(n);r.clip[s[o][0]]=r.clip[s[o][1]],"show"===e.mode&&(n.cssClip(r.clip),h&&h.css(t.effects.clipToBox(r)),r.clip=a),h&&h.animate(t.effects.clipToBox(r),e.duration,e.easing),n.animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("bounce",function(e,i){var s,n,o,a=t(this),r=e.mode,h="hide"===r,l="show"===r,c=e.direction||"up",u=e.distance,d=e.times||5,p=2*d+(l||h?1:0),f=e.duration/p,g=e.easing,m="up"===c||"down"===c?"top":"left",_="up"===c||"left"===c,v=0,b=a.queue().length;for(t.effects.createPlaceholder(a),o=a.css(m),u||(u=a["top"===m?"outerHeight":"outerWidth"]()/3),l&&(n={opacity:1},n[m]=o,a.css("opacity",0).css(m,_?2*-u:2*u).animate(n,f,g)),h&&(u/=Math.pow(2,d-1)),n={},n[m]=o;d>v;v++)s={},s[m]=(_?"-=":"+=")+u,a.animate(s,f,g).animate(n,f,g),u=h?2*u:u/2;h&&(s={opacity:0},s[m]=(_?"-=":"+=")+u,a.animate(s,f,g)),a.queue(i),t.effects.unshift(a,b,p+1)}),t.effects.define("clip","hide",function(e,i){var s,n={},o=t(this),a=e.direction||"vertical",r="both"===a,h=r||"horizontal"===a,l=r||"vertical"===a;s=o.cssClip(),n.clip={top:l?(s.bottom-s.top)/2:s.top,right:h?(s.right-s.left)/2:s.right,bottom:l?(s.bottom-s.top)/2:s.bottom,left:h?(s.right-s.left)/2:s.left},t.effects.createPlaceholder(o),"show"===e.mode&&(o.cssClip(n.clip),n.clip=s),o.animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("drop","hide",function(e,i){var s,n=t(this),o=e.mode,a="show"===o,r=e.direction||"left",h="up"===r||"down"===r?"top":"left",l="up"===r||"left"===r?"-=":"+=",c="+="===l?"-=":"+=",u={opacity:0};t.effects.createPlaceholder(n),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0)/2,u[h]=l+s,a&&(n.css(u),u[h]=c+s,u.opacity=1),n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("explode","hide",function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=e.mode,g="show"===f,m=p.show().css("visibility","hidden").offset(),_=Math.ceil(p.outerWidth()/d),v=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*v,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*_,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*_,top:-o*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:_,height:v,left:r+(g?l*_:0),top:h+(g?c*v:0),opacity:g?0:1}).animate({left:r+(g?0:l*_),top:h+(g?0:c*v),opacity:g?1:0},e.duration||500,e.easing,s)}),t.effects.define("fade","toggle",function(e,i){var s="show"===e.mode;t(this).css("opacity",s?0:1).animate({opacity:s?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("fold","hide",function(e,i){var s=t(this),n=e.mode,o="show"===n,a="hide"===n,r=e.size||15,h=/([0-9]+)%/.exec(r),l=!!e.horizFirst,c=l?["right","bottom"]:["bottom","right"],u=e.duration/2,d=t.effects.createPlaceholder(s),p=s.cssClip(),f={clip:t.extend({},p)},g={clip:t.extend({},p)},m=[p[c[0]],p[c[1]]],_=s.queue().length;h&&(r=parseInt(h[1],10)/100*m[a?0:1]),f.clip[c[0]]=r,g.clip[c[0]]=r,g.clip[c[1]]=0,o&&(s.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=p),s.queue(function(i){d&&d.animate(t.effects.clipToBox(f),u,e.easing).animate(t.effects.clipToBox(g),u,e.easing),i()}).animate(f,u,e.easing).animate(g,u,e.easing).queue(i),t.effects.unshift(s,_,4)}),t.effects.define("highlight","show",function(e,i){var s=t(this),n={backgroundColor:s.css("backgroundColor")};"hide"===e.mode&&(n.opacity=0),t.effects.saveStyle(s),s.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("size",function(e,i){var s,n,o,a=t(this),r=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.mode,u="effect"!==c,d=e.scale||"both",p=e.origin||["middle","center"],f=a.css("position"),g=a.position(),m=t.effects.scaledDimensions(a),_=e.from||m,v=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),"show"===c&&(o=_,_=v,v=o),n={from:{y:_.height/m.height,x:_.width/m.width},to:{y:v.height/m.height,x:v.width/m.width}},("box"===d||"both"===d)&&(n.from.y!==n.to.y&&(_=t.effects.setTransition(a,h,n.from.y,_),v=t.effects.setTransition(a,h,n.to.y,v)),n.from.x!==n.to.x&&(_=t.effects.setTransition(a,l,n.from.x,_),v=t.effects.setTransition(a,l,n.to.x,v))),("content"===d||"both"===d)&&n.from.y!==n.to.y&&(_=t.effects.setTransition(a,r,n.from.y,_),v=t.effects.setTransition(a,r,n.to.y,v)),p&&(s=t.effects.getBaseline(p,m),_.top=(m.outerHeight-_.outerHeight)*s.y+g.top,_.left=(m.outerWidth-_.outerWidth)*s.x+g.left,v.top=(m.outerHeight-v.outerHeight)*s.y+g.top,v.left=(m.outerWidth-v.outerWidth)*s.x+g.left),a.css(_),("content"===d||"both"===d)&&(h=h.concat(["marginTop","marginBottom"]).concat(r),l=l.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var i=t(this),s=t.effects.scaledDimensions(i),o={height:s.height*n.from.y,width:s.width*n.from.x,outerHeight:s.outerHeight*n.from.y,outerWidth:s.outerWidth*n.from.x},a={height:s.height*n.to.y,width:s.width*n.to.x,outerHeight:s.height*n.to.y,outerWidth:s.width*n.to.x};n.from.y!==n.to.y&&(o=t.effects.setTransition(i,h,n.from.y,o),a=t.effects.setTransition(i,h,n.to.y,a)),n.from.x!==n.to.x&&(o=t.effects.setTransition(i,l,n.from.x,o),a=t.effects.setTransition(i,l,n.to.x,a)),u&&t.effects.saveStyle(i),i.css(o),i.animate(a,e.duration,e.easing,function(){u&&t.effects.restoreStyle(i)})})),a.animate(v,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===v.opacity&&a.css("opacity",_.opacity),u||(a.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(a)),i()}})}),t.effects.define("scale",function(e,i){var s=t(this),n=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==n?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(s),to:t.effects.scaledDimensions(s,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,i)}),t.effects.define("puff","hide",function(e,i){var s=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,s,i)}),t.effects.define("pulsate","show",function(e,i){var s=t(this),n=e.mode,o="show"===n,a="hide"===n,r=o||a,h=2*(e.times||5)+(r?1:0),l=e.duration/h,c=0,u=1,d=s.queue().length;for((o||!s.is(":visible"))&&(s.css("opacity",0).show(),c=1);h>u;u++)s.animate({opacity:c},l,e.easing),c=1-c;s.animate({opacity:c},l,e.easing),s.queue(i),t.effects.unshift(s,d,h+1)}),t.effects.define("shake",function(e,i){var s=1,n=t(this),o=e.direction||"left",a=e.distance||20,r=e.times||3,h=2*r+1,l=Math.round(e.duration/h),c="up"===o||"down"===o?"top":"left",u="up"===o||"left"===o,d={},p={},f={},g=n.queue().length;for(t.effects.createPlaceholder(n),d[c]=(u?"-=":"+=")+a,p[c]=(u?"+=":"-=")+2*a,f[c]=(u?"-=":"+=")+2*a,n.animate(d,l,e.easing);r>s;s++)n.animate(p,l,e.easing).animate(f,l,e.easing);n.animate(p,l,e.easing).animate(d,l/2,e.easing).queue(i),t.effects.unshift(n,g,h+1)}),t.effects.define("slide","show",function(e,i){var s,n,o=t(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=e.mode,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u=e.distance||o["top"===l?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(o),s=o.cssClip(),n=o.position()[l],d[l]=(c?-1:1)*u+n,d.clip=o.cssClip(),d.clip[a[h][1]]=d.clip[a[h][0]],"show"===r&&(o.cssClip(d.clip),o.css(l,d[l]),d.clip=s,d[l]=n),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})});var v;t.uiBackCompat!==!1&&(v=t.effects.define("transfer",function(e,i){t(this).transfer(e,i)}))});(function(o){var t={url:!1,callback:!1,target:!1,duration:120,on:"mouseover",touch:!0,onZoomIn:!1,onZoomOut:!1,magnify:1};o.zoom=function(t,n,e,i){var u,c,a,r,m,l,s,f=o(t),h=f.css("position"),d=o(n);return t.style.position=/(absolute|fixed)/.test(h)?h:"relative",t.style.overflow="hidden",e.style.width=e.style.height="",o(e).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:e.width*i,height:e.height*i,border:"none",maxWidth:"none",maxHeight:"none"}).appendTo(t),{init:function(){c=f.outerWidth(),u=f.outerHeight(),n===t?(r=c,a=u):(r=d.outerWidth(),a=d.outerHeight()),m=(e.width-c)/r,l=(e.height-u)/a,s=d.offset()},move:function(o){var t=o.pageX-s.left,n=o.pageY-s.top;n=Math.max(Math.min(n,a),0),t=Math.max(Math.min(t,r),0),e.style.left=t*-m+"px",e.style.top=n*-l+"px"}}},o.fn.zoom=function(n){return this.each(function(){var e=o.extend({},t,n||{}),i=e.target&&o(e.target)[0]||this,u=this,c=o(u),a=document.createElement("img"),r=o(a),m="mousemove.zoom",l=!1,s=!1;if(!e.url){var f=u.querySelector("img");if(f&&(e.url=f.getAttribute("data-src")||f.currentSrc||f.src),!e.url)return}c.one("zoom.destroy",function(o,t){c.off(".zoom"),i.style.position=o,i.style.overflow=t,a.onload=null,r.remove()}.bind(this,i.style.position,i.style.overflow)),a.onload=function(){function t(t){f.init(),f.move(t),r.stop().fadeTo(o.support.opacity?e.duration:0,1,o.isFunction(e.onZoomIn)?e.onZoomIn.call(a):!1)}function n(){r.stop().fadeTo(e.duration,0,o.isFunction(e.onZoomOut)?e.onZoomOut.call(a):!1)}var f=o.zoom(i,u,a,e.magnify);"grab"===e.on?c.on("mousedown.zoom",function(e){1===e.which&&(o(document).one("mouseup.zoom",function(){n(),o(document).off(m,f.move)}),t(e),o(document).on(m,f.move),e.preventDefault())}):"click"===e.on?c.on("click.zoom",function(e){return l?void 0:(l=!0,t(e),o(document).on(m,f.move),o(document).one("click.zoom",function(){n(),l=!1,o(document).off(m,f.move)}),!1)}):"toggle"===e.on?c.on("click.zoom",function(o){l?n():t(o),l=!l}):"mouseover"===e.on&&(f.init(),c.on("mouseenter.zoom",t).on("mouseleave.zoom",n).on(m,f.move)),e.touch&&c.on("touchstart.zoom",function(o){o.preventDefault(),s?(s=!1,n()):(s=!0,t(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]))}).on("touchmove.zoom",function(o){o.preventDefault(),f.move(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0])}).on("touchend.zoom",function(o){o.preventDefault(),s&&(s=!1,n())}),o.isFunction(e.callback)&&e.callback.call(a)},a.setAttribute("role","presentation"),a.alt="",a.src=e.url})},o.fn.zoom.defaults=t})(window.jQuery);"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+
a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}
function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},i=0,c=0,l=[];function g(g,d,h,e){var c={data:e||(e===0||e===false)?e:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};g&&a.extend(c,g,{nodes:[],parent:d});if(h){c.tmpl=h;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++i;(l.length?f:b)[i]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a(i[h])[d](k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,m,k){if(d[0]&&a.isArray(d[0])){var g=a.makeArray(arguments),h=d[0],j=h.length,i=0,f;while(i<j&&!(f=a.data(h[i++],"tmplItem")));if(f&&c)g[2]=function(b){a.tmpl.afterManip(this,b,k)};r.apply(this,g)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var i,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(j(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);i=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(j(c,null,i)):i},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function j(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:j(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=k(c).concat(b);if(d)b=b.concat(k(d))});return b?b:k(c)}function k(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,k,g,b,c,d){var j=a.tmpl.tag[k],i,e,f;if(!j)throw"Unknown template tag: "+k;i=j._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=h(b);d=d?","+h(d)+")":c?")":"";e=c?b.indexOf(".")>-1?b+h(c):"("+b+").call($item"+d:b;f=c?e:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else f=e=i.$1||"null";g=h(g);return"');"+j[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(f).split("$1").join(e).split("$2").join(g||i.$2||"")+"__.push('"})+"');}return __;")}function n(c,b){c._wrap=j(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,h;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(h=j.length-1;h>=0;h--)m(j[h]);m(k)}function m(j){var p,h=j,k,e,m;if(m=j.getAttribute(d)){while(h.parentNode&&(h=h.parentNode).nodeType===1&&!(p=h.getAttribute(d)));if(p!==m){h=h.parentNode?h.nodeType===11?0:h.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[h]||f[h]);e.key=++i;b[i]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;h=a.data(j.parentNode,"tmplItem");h=h?h.key:0}if(e){k=e;while(k&&k.key!=h){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};if(typeof Currency==="undefined"){var Currency={}}Currency.cookie={configuration:{expires:365,path:"/",domain:window.location.hostname},name:"currency",write:function(a){jQuery.cookie(this.name,a,this.configuration)},read:function(){return jQuery.cookie(this.name)},destroy:function(){jQuery.cookie(this.name,null,this.configuration)}};Currency.money_with_currency_format={USD:"${{amount}} USD",EUR:"&euro;{{amount}} EUR",GBP:"&pound;{{amount}} GBP",CAD:"${{amount}} CAD",ARS:"${{amount_with_comma_separator}} ARS",AUD:"${{amount}} AUD",BBD:"${{amount}} Bds",BDT:"Tk {{amount}} BDT",BSD:"BS${{amount}} BSD",BHD:"{{amount}}0 BHD",BRL:"R$ {{amount_with_comma_separator}} BRL",BOB:"Bs{{amount_with_comma_separator}} BOB",BND:"${{amount}} BND",BGN:"{{amount}} лв BGN",MMK:"K{{amount}} MMK",KYD:"${{amount}} KYD",CLP:"${{amount_no_decimals}} CLP",CNY:"&#165;{{amount}} CNY",COP:"${{amount_with_comma_separator}} COP",CRC:"&#8353; {{amount_with_comma_separator}} CRC",HRK:"{{amount_with_comma_separator}} kn HRK",CZK:"{{amount_with_comma_separator}} K&#269;",DKK:"kr.{{amount_with_comma_separator}}",DOP:"RD$ {{amount_with_comma_separator}}",XCD:"EC${{amount}}",EGP:"LE {{amount}} EGP",XPF:"{{amount_no_decimals_with_space_separator}}} XPF",FJD:"FJ${{amount}}",GHS:"GH&#8373;{{amount}}",GTQ:"{{amount}} GTQ",GYD:"${{amount}} GYD",GEL:"{{amount}} GEL",HKD:"HK${{amount}}",HUF:"{{amount_no_decimals_with_comma_separator}} Ft",ISK:"{{amount_no_decimals}} kr ISK",INR:"Rs.{{amount}}",IDR:"Rp {{amount_with_comma_separator}}",NIS:"{{amount}} NIS",JMD:"${{amount}} JMD",JPY:"&#165;{{amount_no_decimals}} JPY",JOD:"{{amount}}0 JOD",KZT:"{{amount}} KZT",KES:"KSh{{amount}}",KWD:"{{amount}}0 KWD",LVL:"Ls {{amount}} LVL",LTL:"{{amount}} Lt",MXN:"$ {{amount}} MXN",MYR:"RM{{amount}} MYR",MUR:"Rs {{amount}} MUR",MDL:"{{amount}} MDL",MAD:"Dh {{amount}} MAD",MNT:"{{amount_no_decimals}} MNT",MZN:"Mt {{amount}} MZN",ANG:"{{amount}} NA&fnof;",NZD:"${{amount}} NZD",NGN:"&#8358;{{amount}} NGN",NOK:"kr {{amount_with_comma_separator}} NOK",OMR:"{{amount_with_comma_separator}} OMR",PKR:"Rs.{{amount}} PKR",PYG:"Gs. {{amount_no_decimals_with_comma_separator}} PYG",PEN:"S/. {{amount}} PEN",PHP:"&#8369;{{amount}} PHP",PLN:"{{amount_with_comma_separator}} zl PLN",QAR:"QAR {{amount_with_comma_separator}}",RON:"{{amount_with_comma_separator}} lei RON",RUB:"&#1088;&#1091;&#1073;{{amount_with_comma_separator}} RUB",SAR:"{{amount}} SAR",RSD:"{{amount}} RSD",SCR:"Rs {{amount}} SCR",SGD:"${{amount}} SGD",SYP:"S&pound;{{amount}} SYP",ZAR:"R {{amount}} ZAR",KRW:"&#8361;{{amount_no_decimals}} KRW",LKR:"Rs {{amount}} LKR",SEK:"{{amount_no_decimals}} kr SEK",CHF:"SFr. {{amount}} CHF",TWD:"${{amount}} TWD",THB:"{{amount}} &#xe3f; THB",TZS:"{{amount}} TZS",TTD:"${{amount}} TTD",TRY:"{{amount}}TL",UAH:"₴{{amount}} UAH",AED:"Dhs. {{amount}} AED",UYU:"${{amount_with_comma_separator}} UYU",VEB:"Bs. {{amount_with_comma_separator}} VEB",VND:"{{amount_no_decimals_with_comma_separator}} VND",ZMK:"ZMK{{amount_no_decimals_with_comma_separator}}"};Currency.money_format={USD:"${{amount}}",EUR:"&euro;{{amount}}",GBP:"&pound;{{amount}}",CAD:"${{amount}}",ARS:"${{amount_with_comma_separator}}",AUD:"${{amount}}",BBD:"${{amount}}",BDT:"Tk {{amount}}",BSD:"BS${{amount}}",BHD:"{{amount}}0 BHD",BRL:"R$ {{amount_with_comma_separator}}",BOB:"Bs{{amount_with_comma_separator}}",BND:"${{amount}}",BGN:"{{amount}} лв",MMK:"K{{amount}}",KYD:"${{amount}}",CLP:"${{amount_no_decimals}}",CNY:"&#165;{{amount}}",COP:"${{amount_with_comma_separator}}",CRC:"&#8353; {{amount_with_comma_separator}}",HRK:"{{amount_with_comma_separator}} kn",CZK:"{{amount_with_comma_separator}} K&#269;",DKK:"{{amount_with_comma_separator}}",DOP:"RD$ {{amount_with_comma_separator}}",XCD:"${{amount}}",EGP:"LE {{amount}}",XPF:"{{amount_no_decimals_with_space_separator}}} XPF",FJD:"${{amount}}",GHS:"GH&#8373;{{amount}}",GTQ:"{{amount}}",GYD:"${{amount}}",GEL:"{{amount}} GEL",HKD:"${{amount}}",HUF:"{{amount_no_decimals_with_comma_separator}}",ISK:"{{amount_no_decimals}} kr",INR:"{{amount}}",IDR:"{{amount_with_comma_separator}}",NIS:"{{amount}} NIS",JMD:"${{amount}}",JPY:"&#165;{{amount_no_decimals}}",JOD:"{{amount}}0 JD",KZT:"{{amount}} KZT",KES:"KSh{{amount}}",KWD:"{{amount}}0 KD",LVL:"Ls {{amount}}",LTL:"{{amount}} Lt",MXN:"$ {{amount}}",MYR:"RM{{amount}} MYR",MUR:"Rs {{amount}}",MDL:"{{amount}} MDL",MAD:"{{amount}} dh",MNT:"{{amount_no_decimals}} &#8366",MZN:"{{amount}} Mt",ANG:"&fnof;{{amount}}",NZD:"${{amount}}",NGN:"&#8358;{{amount}}",NOK:"kr {{amount_with_comma_separator}}",OMR:"{{amount_with_comma_separator}} OMR",PKR:"Rs.{{amount}}",PYG:"Gs. {{amount_no_decimals_with_comma_separator}}",PEN:"S/. {{amount}}",PHP:"&#8369;{{amount}}",PLN:"{{amount_with_comma_separator}} zl",QAR:"QAR {{amount_with_comma_separator}}",RON:"{{amount_with_comma_separator}} lei",RUB:"&#1088;&#1091;&#1073;{{amount_with_comma_separator}}",SAR:"{{amount}} SR",RSD:"{{amount}} RSD",SCR:"Rs {{amount}}",SGD:"${{amount}}",SYP:"S&pound;{{amount}}",ZAR:"R {{amount}}",KRW:"&#8361;{{amount_no_decimals}}",LKR:"Rs {{amount}}",SEK:"{{amount_no_decimals}} kr",CHF:"SFr. {{amount}}",TWD:"${{amount}}",THB:"{{amount}} &#xe3f;",TZS:"{{amount}} TZS",TTD:"${{amount}}",TRY:"{{amount}}TL",UAH:"₴{{amount}}",AED:"Dhs. {{amount}}",UYU:"${{amount_with_comma_separator}}",VEB:"Bs. {{amount_with_comma_separator}}",VND:"{{amount_no_decimals_with_comma_separator}}₫",ZMK:"K{{amount_no_decimals_with_comma_separator}}"};Currency.formatMoney=function(b,f){if(typeof b=="string"){b=b.replace(".","")}var e="";var d=/\{\{\s*(\w+)\s*\}\}/;var a=(f||this.money_format);function c(g){return g.replace(/(\d+)(\d{3}[\.,]?)/,"$1,$2")}switch(a.match(d)[1]){case"amount":e=c(floatToString(b/100,2));break;case"amount_no_decimals":e=c(floatToString(b/100,0));break;case"amount_with_comma_separator":e=floatToString(b/100,2).replace(/\./,",");break;case"amount_no_decimals_with_comma_separator":e=c(floatToString(b/100,0)).replace(/\./,",");break}return a.replace(d,e)};function floatToString(c,a){var b=c.toFixed(a).toString();if(b.match(/^\.\d+/)){return"0"+b}else{return b}}Currency.currentCurrency="";Currency.format="money_with_currency_format";Currency.convertAll=function(c,b,a,d){jQuery(a||"span.money").each(function(){if(jQuery(this).attr("data-currency")===b){return}if(jQuery(this).attr("data-currency-"+b)){jQuery(this).html(jQuery(this).attr("data-currency-"+b))}else{var e=0;var f=Currency[d||Currency.format][c]||"{{amount}}";var g=Currency[d||Currency.format][b]||"{{amount}}";if(f.indexOf("amount_no_decimals")!==-1){e=Currency.convert(parseInt(jQuery(this).html().replace(/[^0-9]/g,""),10)*100,c,b)}else{e=Currency.convert(parseInt(jQuery(this).html().replace(/[^0-9]/g,""),10),c,b)}var h=Currency.formatMoney(e,g);jQuery(this).html(h);jQuery(this).attr("data-currency-"+b,h)}jQuery(this).attr("data-currency",b)});this.currentCurrency=b;this.cookie.write(b)};(function(e){var t="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]},e.expr[":"].uncached=function(t){if(!e(t).is('img[src!=""]'))return!1;var n=new Image;return n.src=t.src,!n.complete},e.fn.waitForImages=function(n,r,i){var s=0,o=0;e.isPlainObject(arguments[0])&&(i=arguments[0].waitForAll,r=arguments[0].each,n=arguments[0].finished),n=n||e.noop,r=r||e.noop,i=!!i;if(!e.isFunction(n)||!e.isFunction(r))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var u=e(this),a=[],f=e.waitForImages.hasImageProperties||[],l=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?u.find("*").andSelf().each(function(){var t=e(this);t.is("img:uncached")&&a.push({src:t.attr("src"),element:t[0]}),e.each(f,function(e,n){var r=t.css(n),i;if(!r)return!0;while(i=l.exec(r))a.push({src:i[2],element:t[0]})})}):u.find("img:uncached").each(function(){a.push({src:this.src,element:this})}),s=a.length,o=0,s===0&&n.call(u[0]),e.each(a,function(i,a){var f=new Image;e(f).bind("load."+t+" error."+t,function(e){o++,r.call(a.element,o,s,e.type=="load");if(o==s)return n.call(u[0]),!1}),f.src=a.src})})}})(jQuery);jQuery(function(){jQuery("div.svw").prepend(jQuery("<img>").attr({"src":"","alt":"loading..."}).addClass("ldrgif"));});var j=0;var quantofamo=0;var currentActive=0;var total=0;var listelements=[];jQuery.fn.slideView=function(settings){settings=jQuery.extend({easeFunc:"easeInOutExpo",easeTime:750,uiBefore:false,toolTip:false,ttOpacity:0.9,autoPlay:false,autoPlayTime:'8000'},settings);return this.each(function(){var container=jQuery(this);container.find("img.ldrgif").remove();container.removeClass("svw").addClass("stripViewer");var pictWidth=container.find("img").width();var pictHeight=container.find("img").height();var pictEls=container.find("li").size();var stripViewerWidth=pictWidth*pictEls;container.find("ul").css("width",stripViewerWidth);container.css("width",pictWidth);container.css("height",pictHeight);container.each(function(i){(!settings.uiBefore)?jQuery(this).after("<div class='stripTransmitter' id='stripTransmitter"+(j)+"'><ul><\/ul><\/div>"):jQuery(this).before("<div class='stripTransmitter' id='stripTransmitter"+(j)+"'><ul><\/ul><\/div>");jQuery(this).find("li").each(function(n){jQuery("div#stripTransmitter"+j+" ul").append("<li><a title='"+jQuery(this).find("img").attr("alt")+"' href='#'>"+(n+1)+"<\/a><\/li>");});jQuery("div#stripTransmitter"+j+" a").each(function(z){jQuery(this).bind("click",function(){slide(jQuery(this),z);return false;});listelements.push(jQuery(this));total++;});function slide(target,z){target.addClass("current").parent().parent().find("a").not(target).removeClass("current");currentActive=z;var cnt=-(pictWidth*z);container.find("ul").animate({left:cnt},settings.easeTime,settings.easeFunc);}
container.bind("click",function(e){var ui=(!settings.uiBefore)?jQuery(this).next().find("a.current"):jQuery(this).prev().find("a.current");var bTotal=parseFloat(jQuery(this).css('borderLeftWidth').replace("px",""))+parseFloat(jQuery(this).css('borderRightWidth').replace("px",""));var dOs=jQuery(this).offset();var zeroLeft=(bTotal/2+pictWidth)-(e.pageX-dOs.left);if(zeroLeft>=pictWidth/2){var uiprev=ui.parent().prev().find("a");(jQuery(uiprev).length!=0)?uiprev.trigger("click"):ui.parent().parent().find("a:last").trigger("click");}
else{var uinext=ui.parent().next().find("a");(jQuery(uinext).length!=0)?uinext.trigger("click"):ui.parent().parent().find("a:first").trigger("click");}});jQuery("div#stripTransmitter"+j).css("width",pictWidth);jQuery("div#stripTransmitter"+j+" a:first").addClass("current");jQuery('body').append('<div class="tooltip" style="display:none;"><\/div>');if(settings.autoPlay){var slideOn=setInterval(function(){slide((total>currentActive+1)?listelements[currentActive+1]:listelements[0],(total>currentActive+1)?currentActive+1:0)},settings.autoPlayTime);}
if(settings.toolTip){var aref=jQuery("div#stripTransmitter"+j+" a");aref.each(function(){jQuery(this).data("title",jQuery(this).prop("title"));});aref.on('mousemove',function(e){var att=jQuery(this).data('title');posX=e.pageX+10;posY=e.pageY+10;jQuery('.tooltip').html(att).css({'position':'absolute','top':posY+'px','left':posX+'px','display':'block','opacity':settings.ttOpacity});});aref.on('mouseout',function(){jQuery('.tooltip').hide();this.title=jQuery(this).data("title");});aref.on('mouseover',function(){this.title='';});}});j++;});};if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($,undefined){function UTCDate(){return new Date(Date.UTC.apply(Date,arguments));}
function UTCToday(){var today=new Date();return UTCDate(today.getFullYear(),today.getMonth(),today.getDate());}
function isUTCEquals(date1,date2){return(date1.getUTCFullYear()===date2.getUTCFullYear()&&date1.getUTCMonth()===date2.getUTCMonth()&&date1.getUTCDate()===date2.getUTCDate());}
function alias(method,deprecationMsg){return function(){if(deprecationMsg!==undefined){$.fn.datepicker.deprecated(deprecationMsg);}
return this[method].apply(this,arguments);};}
function isValidDate(d){return d&&!isNaN(d.getTime());}
var DateArray=(function(){var extras={get:function(i){return this.slice(i)[0];},contains:function(d){var val=d&&d.valueOf();for(var i=0,l=this.length;i<l;i++)
if(0<=this[i].valueOf()-val&&this[i].valueOf()-val<1000*60*60*24)
return i;return-1;},remove:function(i){this.splice(i,1);},replace:function(new_array){if(!new_array)
return;if(!$.isArray(new_array))
new_array=[new_array];this.clear();this.push.apply(this,new_array);},clear:function(){this.length=0;},copy:function(){var a=new DateArray();a.replace(this);return a;}};return function(){var a=[];a.push.apply(a,arguments);$.extend(a,extras);return a;};})();var Datepicker=function(element,options){$.data(element,'datepicker',this);this._events=[];this._secondaryEvents=[];this._process_options(options);this.dates=new DateArray();this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=$(element);this.isInput=this.element.is('input');this.inputField=this.isInput?this.element:this.element.find('input');this.component=this.element.hasClass('date')?this.element.find('.add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn'):false;if(this.component&&this.component.length===0)
this.component=false;this.isInline=!this.component&&this.element.is('div');this.picker=$(DPGlobal.template);if(this._check_template(this.o.templates.leftArrow)){this.picker.find('.prev').html(this.o.templates.leftArrow);}
if(this._check_template(this.o.templates.rightArrow)){this.picker.find('.next').html(this.o.templates.rightArrow);}
this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass('datepicker-inline').appendTo(this.element);}
else{this.picker.addClass('datepicker-dropdown dropdown-menu');}
if(this.o.rtl){this.picker.addClass('datepicker-rtl');}
if(this.o.calendarWeeks){this.picker.find('.datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear').attr('colspan',function(i,val){return Number(val)+1;});}
this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=false;this.setViewMode(this.o.startView);this._allow_update=true;this.fillDow();this.fillMonths();this.update();if(this.isInline){this.show();}};Datepicker.prototype={constructor:Datepicker,_resolveViewName:function(view){$.each(DPGlobal.viewModes,function(i,viewMode){if(view===i||$.inArray(view,viewMode.names)!==-1){view=i;return false;}});return view;},_resolveDaysOfWeek:function(daysOfWeek){if(!$.isArray(daysOfWeek))
daysOfWeek=daysOfWeek.split(/[,\s]*/);return $.map(daysOfWeek,Number);},_check_template:function(tmp){try{if(tmp===undefined||tmp===""){return false;}
if((tmp.match(/[<>]/g)||[]).length<=0){return true;}
var jDom=$(tmp);return jDom.length>0;}
catch(ex){return false;}},_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o);var lang=o.language;if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])
lang=defaults.language;}
o.language=lang;o.startView=this._resolveViewName(o.startView);o.minViewMode=this._resolveViewName(o.minViewMode);o.maxViewMode=this._resolveViewName(o.maxViewMode);o.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,o.startView));if(o.multidate!==true){o.multidate=Number(o.multidate)||false;if(o.multidate!==false)
o.multidate=Math.max(0,o.multidate);}
o.multidateSeparator=String(o.multidateSeparator);o.weekStart%=7;o.weekEnd=(o.weekStart+6)%7;var format=DPGlobal.parseFormat(o.format);if(o.startDate!==-Infinity){if(!!o.startDate){if(o.startDate instanceof Date)
o.startDate=this._local_to_utc(this._zero_time(o.startDate));else
o.startDate=DPGlobal.parseDate(o.startDate,format,o.language,o.assumeNearbyYear);}
else{o.startDate=-Infinity;}}
if(o.endDate!==Infinity){if(!!o.endDate){if(o.endDate instanceof Date)
o.endDate=this._local_to_utc(this._zero_time(o.endDate));else
o.endDate=DPGlobal.parseDate(o.endDate,format,o.language,o.assumeNearbyYear);}
else{o.endDate=Infinity;}}
o.daysOfWeekDisabled=this._resolveDaysOfWeek(o.daysOfWeekDisabled||[]);o.daysOfWeekHighlighted=this._resolveDaysOfWeek(o.daysOfWeekHighlighted||[]);o.datesDisabled=o.datesDisabled||[];if(!$.isArray(o.datesDisabled)){o.datesDisabled=o.datesDisabled.split(',');}
o.datesDisabled=$.map(o.datesDisabled,function(d){return DPGlobal.parseDate(d,format,o.language,o.assumeNearbyYear);});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();plc=$.grep(plc,function(word){return/^auto|left|right|top|bottom$/.test(word);});o.orientation={x:'auto',y:'auto'};if(!_plc||_plc==='auto');else if(plc.length===1){switch(plc[0]){case'top':case'bottom':o.orientation.y=plc[0];break;case'left':case'right':o.orientation.x=plc[0];break;}}
else{_plc=$.grep(plc,function(word){return/^left|right$/.test(word);});o.orientation.x=_plc[0]||'auto';_plc=$.grep(plc,function(word){return/^top|bottom$/.test(word);});o.orientation.y=_plc[0]||'auto';}
if(o.defaultViewDate instanceof Date||typeof o.defaultViewDate==='string'){o.defaultViewDate=DPGlobal.parseDate(o.defaultViewDate,format,o.language,o.assumeNearbyYear);}else if(o.defaultViewDate){var year=o.defaultViewDate.year||new Date().getFullYear();var month=o.defaultViewDate.month||0;var day=o.defaultViewDate.day||1;o.defaultViewDate=UTCDate(year,month,day);}else{o.defaultViewDate=UTCToday();}},_applyEvents:function(evs){for(var i=0,el,ch,ev;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1];}else if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2];}
el.on(ev,ch);}},_unapplyEvents:function(evs){for(var i=0,el,ev,ch;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1];}else if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2];}
el.off(ev,ch);}},_buildEvents:function(){var events={keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)
this.update();},this),keydown:$.proxy(this.keydown,this),paste:$.proxy(this.paste,this)};if(this.o.showOnFocus===true){events.focus=$.proxy(this.show,this);}
if(this.isInput){this._events=[[this.element,events]];}
else if(this.component&&this.inputField.length){this._events=[[this.inputField,events],[this.component,{click:$.proxy(this.show,this)}]];}
else{this._events=[[this.element,{click:$.proxy(this.show,this),keydown:$.proxy(this.keydown,this)}]];}
this._events.push([this.element,'*',{blur:$.proxy(function(e){this._focused_from=e.target;},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target;},this)}]);if(this.o.immediateUpdates){this._events.push([this.element,{'changeYear changeMonth':$.proxy(function(e){this.update(e.date);},this)}]);}
this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[this.picker,'.prev, .next',{click:$.proxy(this.navArrowsClick,this)}],[this.picker,'.day:not(.disabled)',{click:$.proxy(this.dayCellClick,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{'mousedown touchstart':$.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline)){this.hide();}},this)}]];},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events);},_detachEvents:function(){this._unapplyEvents(this._events);},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents);},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents);},_trigger:function(event,altdate){var date=altdate||this.dates.get(-1),local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,viewMode:this.viewMode,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(ix,format){if(arguments.length===0){ix=this.dates.length-1;format=this.o.format;}else if(typeof ix==='string'){format=ix;ix=this.dates.length-1;}
format=format||this.o.format;var date=this.dates.get(ix);return DPGlobal.formatDate(date,format,this.o.language);},this)});},show:function(){if(this.inputField.is(':disabled')||(this.inputField.prop('readonly')&&this.o.enableOnReadonly===false))
return;if(!this.isInline)
this.picker.appendTo(this.o.container);this.place();this.picker.show();this._attachSecondaryEvents();this._trigger('show');if((window.navigator.msMaxTouchPoints||'ontouchstart'in document)&&this.o.disableTouchKeyboard){$(this.element).blur();}
return this;},hide:function(){if(this.isInline||!this.picker.is(':visible'))
return this;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.setViewMode(this.o.startView);if(this.o.forceParse&&this.inputField.val())
this.setValue();this._trigger('hide');return this;},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date;}
return this;},paste:function(e){var dateString;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&$.inArray('text/plain',e.originalEvent.clipboardData.types)!==-1){dateString=e.originalEvent.clipboardData.getData('text/plain');}else if(window.clipboardData){dateString=window.clipboardData.getData('Text');}else{return;}
this.setDate(dateString);this.update();e.preventDefault();},_utc_to_local:function(utc){if(!utc){return utc;}
var local=new Date(utc.getTime()+(utc.getTimezoneOffset()*60000));if(local.getTimezoneOffset()!==utc.getTimezoneOffset()){local=new Date(utc.getTime()+(local.getTimezoneOffset()*60000));}
return local;},_local_to_utc:function(local){return local&&new Date(local.getTime()-(local.getTimezoneOffset()*60000));},_zero_time:function(local){return local&&new Date(local.getFullYear(),local.getMonth(),local.getDate());},_zero_utc_time:function(utc){return utc&&UTCDate(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate());},getDates:function(){return $.map(this.dates,this._utc_to_local);},getUTCDates:function(){return $.map(this.dates,function(d){return new Date(d);});},getDate:function(){return this._utc_to_local(this.getUTCDate());},getUTCDate:function(){var selected_date=this.dates.get(-1);if(selected_date!==undefined){return new Date(selected_date);}else{return null;}},clearDates:function(){this.inputField.val('');this.update();this._trigger('changeDate');if(this.o.autoclose){this.hide();}},setDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,args);this._trigger('changeDate');this.setValue();return this;},setUTCDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,$.map(args,this._utc_to_local));return this;},setDate:alias('setDates'),setUTCDate:alias('setUTCDates'),remove:alias('destroy','Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead'),setValue:function(){var formatted=this.getFormattedDate();this.inputField.val(formatted);return this;},getFormattedDate:function(format){if(format===undefined)
format=this.o.format;var lang=this.o.language;return $.map(this.dates,function(d){return DPGlobal.formatDate(d,format,lang);}).join(this.o.multidateSeparator);},getStartDate:function(){return this.o.startDate;},setStartDate:function(startDate){this._process_options({startDate:startDate});this.update();this.updateNavArrows();return this;},getEndDate:function(){return this.o.endDate;},setEndDate:function(endDate){this._process_options({endDate:endDate});this.update();this.updateNavArrows();return this;},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled:daysOfWeekDisabled});this.update();return this;},setDaysOfWeekHighlighted:function(daysOfWeekHighlighted){this._process_options({daysOfWeekHighlighted:daysOfWeekHighlighted});this.update();return this;},setDatesDisabled:function(datesDisabled){this._process_options({datesDisabled:datesDisabled});this.update();return this;},place:function(){if(this.isInline)
return this;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,container=$(this.o.container),windowWidth=container.width(),scrollTop=this.o.container==='body'?$(document).scrollTop():container.scrollTop(),appendOffset=container.offset();var parentsZindex=[0];this.element.parents().each(function(){var itemZIndex=$(this).css('z-index');if(itemZIndex!=='auto'&&Number(itemZIndex)!==0)parentsZindex.push(Number(itemZIndex));});var zIndex=Math.max.apply(Math,parentsZindex)+this.o.zIndexOffset;var offset=this.component?this.component.parent().offset():this.element.offset();var height=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var width=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var left=offset.left-appendOffset.left;var top=offset.top-appendOffset.top;if(this.o.container!=='body'){top+=scrollTop;}
this.picker.removeClass('datepicker-orient-top datepicker-orient-bottom '+'datepicker-orient-right datepicker-orient-left');if(this.o.orientation.x!=='auto'){this.picker.addClass('datepicker-orient-'+this.o.orientation.x);if(this.o.orientation.x==='right')
left-=calendarWidth-width;}
else{if(offset.left<0){this.picker.addClass('datepicker-orient-left');left-=offset.left-visualPadding;}else if(left+calendarWidth>windowWidth){this.picker.addClass('datepicker-orient-right');left+=width-calendarWidth;}else{if(this.o.rtl){this.picker.addClass('datepicker-orient-right');}else{this.picker.addClass('datepicker-orient-left');}}}
var yorient=this.o.orientation.y,top_overflow;if(yorient==='auto'){top_overflow=-scrollTop+top-calendarHeight;yorient=top_overflow<0?'bottom':'top';}
this.picker.addClass('datepicker-orient-'+yorient);if(yorient==='top')
top-=calendarHeight+parseInt(this.picker.css('padding-top'));else
top+=height;if(this.o.rtl){var right=windowWidth-(left+width);this.picker.css({top:top,right:right,zIndex:zIndex});}else{this.picker.css({top:top,left:left,zIndex:zIndex});}
return this;},_allow_update:true,update:function(){if(!this._allow_update)
return this;var oldDates=this.dates.copy(),dates=[],fromArgs=false;if(arguments.length){$.each(arguments,$.proxy(function(i,date){if(date instanceof Date)
date=this._local_to_utc(date);dates.push(date);},this));fromArgs=true;}else{dates=this.isInput?this.element.val():this.element.data('date')||this.inputField.val();if(dates&&this.o.multidate)
dates=dates.split(this.o.multidateSeparator);else
dates=[dates];delete this.element.data().date;}
dates=$.map(dates,$.proxy(function(date){return DPGlobal.parseDate(date,this.o.format,this.o.language,this.o.assumeNearbyYear);},this));dates=$.grep(dates,$.proxy(function(date){return(!this.dateWithinRange(date)||!date);},this),true);this.dates.replace(dates);if(this.o.updateViewDate){if(this.dates.length)
this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)
this.viewDate=new Date(this.o.startDate);else if(this.viewDate>this.o.endDate)
this.viewDate=new Date(this.o.endDate);else
this.viewDate=this.o.defaultViewDate;}
if(fromArgs){this.setValue();this.element.change();}
else if(this.dates.length){if(String(oldDates)!==String(this.dates)&&fromArgs){this._trigger('changeDate');this.element.change();}}
if(!this.dates.length&&oldDates.length){this._trigger('clearDate');this.element.change();}
this.fill();return this;},fillDow:function(){if(this.o.showWeekDays){var dowCnt=this.o.weekStart,html='<tr>';if(this.o.calendarWeeks){html+='<th class="cw">&#160;</th>';}
while(dowCnt<this.o.weekStart+7){html+='<th class="dow';if($.inArray(dowCnt,this.o.daysOfWeekDisabled)!==-1)
html+=' disabled';html+='">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';}
html+='</tr>';this.picker.find('.datepicker-days thead').append(html);}},fillMonths:function(){var localDate=this._utc_to_local(this.viewDate);var html='';var focused;for(var i=0;i<12;i++){focused=localDate&&localDate.getMonth()===i?' focused':'';html+='<span class="month'+focused+'">'+dates[this.o.language].monthsShort[i]+'</span>';}
this.picker.find('.datepicker-months td').html(html);},setRange:function(range){if(!range||!range.length)
delete this.range;else
this.range=$.map(range,function(d){return d.valueOf();});this.fill();},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),today=UTCToday();if(date.getUTCFullYear()<year||(date.getUTCFullYear()===year&&date.getUTCMonth()<month)){cls.push('old');}else if(date.getUTCFullYear()>year||(date.getUTCFullYear()===year&&date.getUTCMonth()>month)){cls.push('new');}
if(this.focusDate&&date.valueOf()===this.focusDate.valueOf())
cls.push('focused');if(this.o.todayHighlight&&isUTCEquals(date,today)){cls.push('today');}
if(this.dates.contains(date)!==-1)
cls.push('active');if(!this.dateWithinRange(date)){cls.push('disabled');}
if(this.dateIsDisabled(date)){cls.push('disabled','disabled-date');}
if($.inArray(date.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1){cls.push('highlighted');}
if(this.range){if(date>this.range[0]&&date<this.range[this.range.length-1]){cls.push('range');}
if($.inArray(date.valueOf(),this.range)!==-1){cls.push('selected');}
if(date.valueOf()===this.range[0]){cls.push('range-start');}
if(date.valueOf()===this.range[this.range.length-1]){cls.push('range-end');}}
return cls;},_fill_yearsView:function(selector,cssClass,factor,year,startYear,endYear,beforeFn){var html='';var step=factor/10;var view=this.picker.find(selector);var startVal=Math.floor(year/factor)*factor;var endVal=startVal+step*9;var focusedVal=Math.floor(this.viewDate.getFullYear()/step)*step;var selected=$.map(this.dates,function(d){return Math.floor(d.getUTCFullYear()/step)*step;});var classes,tooltip,before;for(var currVal=startVal-step;currVal<=endVal+step;currVal+=step){classes=[cssClass];tooltip=null;if(currVal===startVal-step){classes.push('old');}else if(currVal===endVal+step){classes.push('new');}
if($.inArray(currVal,selected)!==-1){classes.push('active');}
if(currVal<startYear||currVal>endYear){classes.push('disabled');}
if(currVal===focusedVal){classes.push('focused');}
if(beforeFn!==$.noop){before=beforeFn(new Date(currVal,0,1));if(before===undefined){before={};}else if(typeof before==='boolean'){before={enabled:before};}else if(typeof before==='string'){before={classes:before};}
if(before.enabled===false){classes.push('disabled');}
if(before.classes){classes=classes.concat(before.classes.split(/\s+/));}
if(before.tooltip){tooltip=before.tooltip;}}
html+='<span class="'+classes.join(' ')+'"'+(tooltip?' title="'+tooltip+'"':'')+'>'+currVal+'</span>';}
view.find('.datepicker-switch').text(startVal+'-'+endVal);view.find('td').html(html);},fill:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,startMonth=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,endYear=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,endMonth=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,todaytxt=dates[this.o.language].today||dates['en'].today||'',cleartxt=dates[this.o.language].clear||dates['en'].clear||'',titleFormat=dates[this.o.language].titleFormat||dates['en'].titleFormat,todayDate=UTCToday(),titleBtnVisible=(this.o.todayBtn===true||this.o.todayBtn==='linked')&&todayDate>=this.o.startDate&&todayDate<=this.o.endDate&&!this.weekOfDateIsDisabled(todayDate),tooltip,before;if(isNaN(year)||isNaN(month))
return;this.picker.find('.datepicker-days .datepicker-switch').text(DPGlobal.formatDate(d,titleFormat,this.o.language));this.picker.find('tfoot .today').text(todaytxt).css('display',titleBtnVisible?'table-cell':'none');this.picker.find('tfoot .clear').text(cleartxt).css('display',this.o.clearBtn===true?'table-cell':'none');this.picker.find('thead .datepicker-title').text(this.o.title).css('display',typeof this.o.title==='string'&&this.o.title!==''?'table-cell':'none');this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month,0),day=prevMonth.getUTCDate();prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);if(prevMonth.getUTCFullYear()<100){nextMonth.setUTCFullYear(prevMonth.getUTCFullYear());}
nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var weekDay,clsName;while(prevMonth.valueOf()<nextMonth){weekDay=prevMonth.getUTCDay();if(weekDay===this.o.weekStart){html.push('<tr>');if(this.o.calendarWeeks){var
ws=new Date(+prevMonth+(this.o.weekStart-weekDay-7)%7*864e5),th=new Date(Number(ws)+(7+4-ws.getUTCDay())%7*864e5),yth=new Date(Number(yth=UTCDate(th.getUTCFullYear(),0,1))+(7+4-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+'</td>');}}
clsName=this.getClassNames(prevMonth);clsName.push('day');var content=prevMonth.getUTCDate();if(this.o.beforeShowDay!==$.noop){before=this.o.beforeShowDay(this._utc_to_local(prevMonth));if(before===undefined)
before={};else if(typeof before==='boolean')
before={enabled:before};else if(typeof before==='string')
before={classes:before};if(before.enabled===false)
clsName.push('disabled');if(before.classes)
clsName=clsName.concat(before.classes.split(/\s+/));if(before.tooltip)
tooltip=before.tooltip;if(before.content)
content=before.content;}
if($.isFunction($.uniqueSort)){clsName=$.uniqueSort(clsName);}else{clsName=$.unique(clsName);}
html.push('<td class="'+clsName.join(' ')+'"'+(tooltip?' title="'+tooltip+'"':'')+' data-date="'+prevMonth.getTime().toString()+'">'+content+'</td>');tooltip=null;if(weekDay===this.o.weekEnd){html.push('</tr>');}
prevMonth.setUTCDate(prevMonth.getUTCDate()+1);}
this.picker.find('.datepicker-days tbody').html(html.join(''));var monthsTitle=dates[this.o.language].monthsTitle||dates['en'].monthsTitle||'Months';var months=this.picker.find('.datepicker-months').find('.datepicker-switch').text(this.o.maxViewMode<2?monthsTitle:year).end().find('tbody span').removeClass('active');$.each(this.dates,function(i,d){if(d.getUTCFullYear()===year)
months.eq(d.getUTCMonth()).addClass('active');});if(year<startYear||year>endYear){months.addClass('disabled');}
if(year===startYear){months.slice(0,startMonth).addClass('disabled');}
if(year===endYear){months.slice(endMonth+1).addClass('disabled');}
if(this.o.beforeShowMonth!==$.noop){var that=this;$.each(months,function(i,month){var moDate=new Date(year,i,1);var before=that.o.beforeShowMonth(moDate);if(before===undefined)
before={};else if(typeof before==='boolean')
before={enabled:before};else if(typeof before==='string')
before={classes:before};if(before.enabled===false&&!$(month).hasClass('disabled'))
$(month).addClass('disabled');if(before.classes)
$(month).addClass(before.classes);if(before.tooltip)
$(month).prop('title',before.tooltip);});}
this._fill_yearsView('.datepicker-years','year',10,year,startYear,endYear,this.o.beforeShowYear);this._fill_yearsView('.datepicker-decades','decade',100,year,startYear,endYear,this.o.beforeShowDecade);this._fill_yearsView('.datepicker-centuries','century',1000,year,startYear,endYear,this.o.beforeShowCentury);},updateNavArrows:function(){if(!this._allow_update)
return;var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,startMonth=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,endYear=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,endMonth=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,prevIsDisabled,nextIsDisabled,factor=1;switch(this.viewMode){case 4:factor*=10;case 3:factor*=10;case 2:factor*=10;case 1:prevIsDisabled=Math.floor(year/factor)*factor<=startYear;nextIsDisabled=Math.floor(year/factor)*factor+factor>endYear;break;case 0:prevIsDisabled=year<=startYear&&month<=startMonth;nextIsDisabled=year>=endYear&&month>=endMonth;break;}
this.picker.find('.prev').toggleClass('disabled',prevIsDisabled);this.picker.find('.next').toggleClass('disabled',nextIsDisabled);},click:function(e){e.preventDefault();e.stopPropagation();var target,dir,day,year,month;target=$(e.target);if(target.hasClass('datepicker-switch')&&this.viewMode!==this.o.maxViewMode){this.setViewMode(this.viewMode+1);}
if(target.hasClass('today')&&!target.hasClass('day')){this.setViewMode(0);this._setDate(UTCToday(),this.o.todayBtn==='linked'?null:'view');}
if(target.hasClass('clear')){this.clearDates();}
if(!target.hasClass('disabled')){if(target.hasClass('month')||target.hasClass('year')||target.hasClass('decade')||target.hasClass('century')){this.viewDate.setUTCDate(1);day=1;if(this.viewMode===1){month=target.parent().find('span').index(target);year=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(month);}else{month=0;year=Number(target.text());this.viewDate.setUTCFullYear(year);}
this._trigger(DPGlobal.viewModes[this.viewMode-1].e,this.viewDate);if(this.viewMode===this.o.minViewMode){this._setDate(UTCDate(year,month,day));}else{this.setViewMode(this.viewMode-1);this.fill();}}}
if(this.picker.is(':visible')&&this._focused_from){this._focused_from.focus();}
delete this._focused_from;},dayCellClick:function(e){var $target=$(e.currentTarget);var timestamp=$target.data('date');var date=new Date(timestamp);if(this.o.updateViewDate){if(date.getUTCFullYear()!==this.viewDate.getUTCFullYear()){this._trigger('changeYear',this.viewDate);}
if(date.getUTCMonth()!==this.viewDate.getUTCMonth()){this._trigger('changeMonth',this.viewDate);}}
this._setDate(date);},navArrowsClick:function(e){var $target=$(e.currentTarget);var dir=$target.hasClass('prev')?-1:1;if(this.viewMode!==0){dir*=DPGlobal.viewModes[this.viewMode].navStep*12;}
this.viewDate=this.moveMonth(this.viewDate,dir);this._trigger(DPGlobal.viewModes[this.viewMode].e,this.viewDate);this.fill();},_toggle_multidate:function(date){var ix=this.dates.contains(date);if(!date){this.dates.clear();}
if(ix!==-1){if(this.o.multidate===true||this.o.multidate>1||this.o.toggleActive){this.dates.remove(ix);}}else if(this.o.multidate===false){this.dates.clear();this.dates.push(date);}
else{this.dates.push(date);}
if(typeof this.o.multidate==='number')
while(this.dates.length>this.o.multidate)
this.dates.remove(0);},_setDate:function(date,which){if(!which||which==='date')
this._toggle_multidate(date&&new Date(date));if((!which&&this.o.updateViewDate)||which==='view')
this.viewDate=date&&new Date(date);this.fill();this.setValue();if(!which||which!=='view'){this._trigger('changeDate');}
this.inputField.trigger('change');if(this.o.autoclose&&(!which||which==='date')){this.hide();}},moveDay:function(date,dir){var newDate=new Date(date);newDate.setUTCDate(date.getUTCDate()+dir);return newDate;},moveWeek:function(date,dir){return this.moveDay(date,dir*7);},moveMonth:function(date,dir){if(!isValidDate(date))
return this.o.defaultViewDate;if(!dir)
return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag===1){test=dir===-1?function(){return new_date.getUTCMonth()===month;}:function(){return new_date.getUTCMonth()!==new_month;};new_month=month+dir;new_date.setUTCMonth(new_month);new_month=(new_month+12)%12;}
else{for(var i=0;i<mag;i++)
new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!==new_date.getUTCMonth();};}
while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month);}
return new_date;},moveYear:function(date,dir){return this.moveMonth(date,dir*12);},moveAvailableDate:function(date,dir,fn){do{date=this[fn](date,dir);if(!this.dateWithinRange(date))
return false;fn='moveDay';}
while(this.dateIsDisabled(date));return date;},weekOfDateIsDisabled:function(date){return $.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1;},dateIsDisabled:function(date){return(this.weekOfDateIsDisabled(date)||$.grep(this.o.datesDisabled,function(d){return isUTCEquals(date,d);}).length>0);},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate;},keydown:function(e){if(!this.picker.is(':visible')){if(e.keyCode===40||e.keyCode===27){this.show();e.stopPropagation();}
return;}
var dateChanged=false,dir,newViewDate,focusDate=this.focusDate||this.viewDate;switch(e.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();}
else
this.hide();e.preventDefault();e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||this.o.daysOfWeekDisabled.length===7)
break;dir=e.keyCode===37||e.keyCode===38?-1:1;if(this.viewMode===0){if(e.ctrlKey){newViewDate=this.moveAvailableDate(focusDate,dir,'moveYear');if(newViewDate)
this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newViewDate=this.moveAvailableDate(focusDate,dir,'moveMonth');if(newViewDate)
this._trigger('changeMonth',this.viewDate);}else if(e.keyCode===37||e.keyCode===39){newViewDate=this.moveAvailableDate(focusDate,dir,'moveDay');}else if(!this.weekOfDateIsDisabled(focusDate)){newViewDate=this.moveAvailableDate(focusDate,dir,'moveWeek');}}else if(this.viewMode===1){if(e.keyCode===38||e.keyCode===40){dir=dir*4;}
newViewDate=this.moveAvailableDate(focusDate,dir,'moveMonth');}else if(this.viewMode===2){if(e.keyCode===38||e.keyCode===40){dir=dir*4;}
newViewDate=this.moveAvailableDate(focusDate,dir,'moveYear');}
if(newViewDate){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault();}
break;case 13:if(!this.o.forceParse)
break;focusDate=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(focusDate);dateChanged=true;}
this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(':visible')){e.preventDefault();e.stopPropagation();if(this.o.autoclose)
this.hide();}
break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break;}
if(dateChanged){if(this.dates.length)
this._trigger('changeDate');else
this._trigger('clearDate');this.inputField.trigger('change');}},setViewMode:function(viewMode){this.viewMode=viewMode;this.picker.children('div').hide().filter('.datepicker-'+DPGlobal.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger('changeViewMode',new Date(this.viewDate));}};var DateRangePicker=function(element,options){$.data(element,'datepicker',this);this.element=$(element);this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i;});delete options.inputs;this.keepEmptyValues=options.keepEmptyValues;delete options.keepEmptyValues;datepickerPlugin.call($(this.inputs),options).on('changeDate',$.proxy(this.dateUpdated,this));this.pickers=$.map(this.inputs,function(i){return $.data(i,'datepicker');});this.updateDates();};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.getUTCDate();});this.updateRanges();},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf();});$.each(this.pickers,function(i,p){p.setRange(range);});},clearDates:function(){$.each(this.pickers,function(i,p){p.clearDates();});},dateUpdated:function(e){if(this.updating)
return;this.updating=true;var dp=$.data(e.target,'datepicker');if(dp===undefined){return;}
var new_date=dp.getUTCDate(),keep_empty_values=this.keepEmptyValues,i=$.inArray(e.target,this.inputs),j=i-1,k=i+1,l=this.inputs.length;if(i===-1)
return;$.each(this.pickers,function(i,p){if(!p.getUTCDate()&&(p===dp||!keep_empty_values))
p.setUTCDate(new_date);});if(new_date<this.dates[j]){while(j>=0&&new_date<this.dates[j]){this.pickers[j--].setUTCDate(new_date);}}else if(new_date>this.dates[k]){while(k<l&&new_date>this.dates[k]){this.pickers[k++].setUTCDate(new_date);}}
this.updateDates();delete this.updating;},destroy:function(){$.map(this.pickers,function(p){p.destroy();});$(this.inputs).off('changeDate',this.dateUpdated);delete this.element.data().datepicker;},remove:alias('destroy','Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead')};function opts_from_el(el,prefix){var data=$(el).data(),out={},inkey,replace=new RegExp('^'+prefix.toLowerCase()+'([A-Z])');prefix=new RegExp('^'+prefix.toLowerCase());function re_lower(_,a){return a.toLowerCase();}
for(var key in data)
if(prefix.test(key)){inkey=key.replace(replace,re_lower);out[inkey]=data[key];}
return out;}
function opts_from_locale(lang){var out={};if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])
return;}
var d=dates[lang];$.each(locale_opts,function(i,k){if(k in d)
out[k]=d[k];});return out;}
var old=$.fn.datepicker;var datepickerPlugin=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return;this.each(function(){var $this=$(this),data=$this.data('datepicker'),options=typeof option==='object'&&option;if(!data){var elopts=opts_from_el(this,'date'),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.hasClass('input-daterange')||opts.inputs){$.extend(opts,{inputs:opts.inputs||$this.find('input').toArray()});data=new DateRangePicker(this,opts);}
else{data=new Datepicker(this,opts);}
$this.data('datepicker',data);}
if(typeof option==='string'&&typeof data[option]==='function'){internal_return=data[option].apply(data,args);}});if(internal_return===undefined||internal_return instanceof Datepicker||internal_return instanceof DateRangePicker)
return this;if(this.length>1)
throw new Error('Using only allowed for the collection of a single element ('+option+' function)');else
return internal_return;};$.fn.datepicker=datepickerPlugin;var defaults=$.fn.datepicker.defaults={assumeNearbyYear:false,autoclose:false,beforeShowDay:$.noop,beforeShowMonth:$.noop,beforeShowYear:$.noop,beforeShowDecade:$.noop,beforeShowCentury:$.noop,calendarWeeks:false,clearBtn:false,toggleActive:false,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:true,format:'mm/dd/yyyy',keepEmptyValues:false,keyboardNavigation:true,language:'en',minViewMode:0,maxViewMode:4,multidate:false,multidateSeparator:',',orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,updateViewDate:true,weekStart:0,disableTouchKeyboard:false,enableOnReadonly:true,showOnFocus:true,zIndexOffset:10,container:'body',immediateUpdates:false,title:'',templates:{leftArrow:'&#x00AB;',rightArrow:'&#x00BB;'},showWeekDays:true};var locale_opts=$.fn.datepicker.locale_opts=['format','rtl','weekStart'];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}};var DPGlobal={viewModes:[{names:['days','month'],clsName:'days',e:'changeMonth'},{names:['months','year'],clsName:'months',e:'changeYear',navStep:1},{names:['years','decade'],clsName:'years',e:'changeDecade',navStep:10},{names:['decades','century'],clsName:'decades',e:'changeCentury',navStep:100},{names:['centuries','millennium'],clsName:'centuries',e:'changeMillennium',navStep:1000}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(format){if(typeof format.toValue==='function'&&typeof format.toDisplay==='function')
return format;var separators=format.replace(this.validParts,'\0').split('\0'),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||parts.length===0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};},parseDate:function(date,format,language,assumeNearby){if(!date)
return undefined;if(date instanceof Date)
return date;if(typeof format==='string')
format=DPGlobal.parseFormat(format);if(format.toValue)
return format.toValue(date,format,language);var fn_map={d:'moveDay',m:'moveMonth',w:'moveWeek',y:'moveYear'},dateAliases={yesterday:'-1d',today:'+0d',tomorrow:'+1d'},parts,part,dir,i,fn;if(date in dateAliases){date=dateAliases[date];}
if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(date)){parts=date.match(/([\-+]\d+)([dmwy])/gi);date=new Date();for(i=0;i<parts.length;i++){part=parts[i].match(/([\-+]\d+)([dmwy])/i);dir=Number(part[1]);fn=fn_map[part[2].toLowerCase()];date=Datepicker.prototype[fn](date,dir);}
return Datepicker.prototype._zero_utc_time(date);}
parts=date&&date.match(this.nonpunctuation)||[];function applyNearbyYear(year,threshold){if(threshold===true)
threshold=10;if(year<100){year+=2000;if(year>((new Date()).getFullYear()+threshold)){year-=100;}}
return year;}
var parsed={},setters_order=['yyyy','yy','M','MM','m','mm','d','dd'],setters_map={yyyy:function(d,v){return d.setUTCFullYear(assumeNearby?applyNearbyYear(v,assumeNearby):v);},m:function(d,v){if(isNaN(d))
return d;v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!==v)
d.setUTCDate(d.getUTCDate()-1);return d;},d:function(d,v){return d.setUTCDate(v);}},val,filtered;setters_map['yy']=setters_map['yyyy'];setters_map['M']=setters_map['MM']=setters_map['mm']=setters_map['m'];setters_map['dd']=setters_map['d'];date=UTCToday();var fparts=format.parts.slice();if(parts.length!==fparts.length){fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1;}).toArray();}
function match_part(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m.toLowerCase()===p.toLowerCase();}
if(parts.length===fparts.length){var cnt;for(i=0,cnt=fparts.length;i<cnt;i++){val=parseInt(parts[i],10);part=fparts[i];if(isNaN(val)){switch(part){case'MM':filtered=$(dates[language].months).filter(match_part);val=$.inArray(filtered[0],dates[language].months)+1;break;case'M':filtered=$(dates[language].monthsShort).filter(match_part);val=$.inArray(filtered[0],dates[language].monthsShort)+1;break;}}
parsed[part]=val;}
var _date,s;for(i=0;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s])){_date=new Date(date);setters_map[s](_date,parsed[s]);if(!isNaN(_date))
date=_date;}}}
return date;},formatDate:function(date,format,language){if(!date)
return'';if(typeof format==='string')
format=DPGlobal.parseFormat(format);if(format.toDisplay)
return format.toDisplay(date,format,language);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;date=[];var seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<=cnt;i++){if(seps.length)
date.push(seps.shift());date.push(val[format.parts[i]]);}
return date.join('');},headTemplate:'<thead>'+'<tr>'+'<th colspan="7" class="datepicker-title"></th>'+'</tr>'+'<tr>'+'<th class="prev">'+defaults.templates.leftArrow+'</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">'+defaults.templates.rightArrow+'</th>'+'</tr>'+'</thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot>'+'<tr>'+'<th colspan="7" class="today"></th>'+'</tr>'+'<tr>'+'<th colspan="7" class="clear"></th>'+'</tr>'+'</tfoot>'};DPGlobal.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+'<tbody></tbody>'+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-months">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-years">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-decades">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-centuries">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';$.fn.datepicker.DPGlobal=DPGlobal;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this;};$.fn.datepicker.version='1.9.0';$.fn.datepicker.deprecated=function(msg){var console=window.console;if(console&&console.warn){console.warn('DEPRECATED: '+msg);}};$(document).on('focus.datepicker.data-api click.datepicker.data-api','[data-provide="datepicker"]',function(e){var $this=$(this);if($this.data('datepicker'))
return;e.preventDefault();datepickerPlugin.call($this,'show');});$(function(){datepickerPlugin.call($('[data-provide="datepicker-inline"]'));});}));!function(a,b){function c(a){throw new Error("Pagination: "+a)}function d(a){a.dataSource||c('"dataSource" is required.'),"string"==typeof a.dataSource?void 0===a.totalNumberLocator?void 0===a.totalNumber?c('"totalNumber" is required.'):b.isNumeric(a.totalNumber)||c('"totalNumber" is incorrect. (Number)'):b.isFunction(a.totalNumberLocator)||c('"totalNumberLocator" should be a Function.'):i.isObject(a.dataSource)&&(void 0===a.locator?c('"dataSource" is an Object, please specify "locator".'):"string"==typeof a.locator||b.isFunction(a.locator)||c(a.locator+" is incorrect. (String | Function)")),void 0===a.formatResult||b.isFunction(a.formatResult)||c('"formatResult" should be a Function.')}function e(a){var c=["go","previous","next","disable","enable","refresh","show","hide","destroy"];b.each(c,function(b,c){a.off(h+c)}),a.data("pagination",{}),b(".paginationjs",a).remove()}function f(a,b){return("object"==(b=typeof a)?null==a&&"null"||Object.prototype.toString.call(a).slice(8,-1):b).toLowerCase()}void 0===b&&c("Pagination requires jQuery.");var g="pagination",h="__pagination-";b.fn.pagination&&(g="pagination2"),b.fn[g]=function(f){if(void 0===f)return this;var j=b(this),k=b.extend({},b.fn[g].defaults,f),l={initialize:function(){var a=this;if(j.data("pagination")||j.data("pagination",{}),!1!==a.callHook("beforeInit")){j.data("pagination").initialized&&b(".paginationjs",j).remove(),a.disabled=!!k.disabled;var c=a.model={pageRange:k.pageRange,pageSize:k.pageSize};a.parseDataSource(k.dataSource,function(b){a.isAsync=i.isString(b),i.isArray(b)&&(c.totalNumber=k.totalNumber=b.length),a.isDynamicTotalNumber=a.isAsync&&k.totalNumberLocator;var d=a.render(!0);k.className&&d.addClass(k.className),c.el=d,j["bottom"===k.position?"append":"prepend"](d),a.observer(),j.data("pagination").initialized=!0,a.callHook("afterInit",d)})}},render:function(a){var c=this,d=c.model,e=d.el||b('<div class="paginationjs"></div>'),f=!0!==a;c.callHook("beforeRender",f);var g=d.pageNumber||k.pageNumber,h=k.pageRange||0,i=c.getTotalPage(),j=g-h,l=g+h;return l>i&&(l=i,j=i-2*h,j=j<1?1:j),j<=1&&(j=1,l=Math.min(2*h+1,i)),e.html(c.generateHTML({currentPage:g,pageRange:h,rangeStart:j,rangeEnd:l})),k.hideWhenLessThanOnePage&&e[i<=1?"hide":"show"](),c.callHook("afterRender",f),e},generatePageNumbersHTML:function(a){var b,c=this,d=a.currentPage,e=c.getTotalPage(),f=a.rangeStart,g=a.rangeEnd,h="",i=k.pageLink,j=k.ellipsisText,l=k.classPrefix,m=k.activeClassName,n=k.disableClassName;if(null===k.pageRange){for(b=1;b<=e;b++)h+=b==d?'<li class="'+l+"-page J-paginationjs-page "+m+'" data-num="'+b+'"><a>'+b+"</a></li>":'<li class="'+l+'-page J-paginationjs-page" data-num="'+b+'"><a href="'+i+'">'+b+"</a></li>";return h}if(f<=3)for(b=1;b<f;b++)h+=b==d?'<li class="'+l+"-page J-paginationjs-page "+m+'" data-num="'+b+'"><a>'+b+"</a></li>":'<li class="'+l+'-page J-paginationjs-page" data-num="'+b+'"><a href="'+i+'">'+b+"</a></li>";else k.showFirstOnEllipsisShow&&(h+='<li class="'+l+"-page "+l+'-first J-paginationjs-page" data-num="1"><a href="'+i+'">1</a></li>'),h+='<li class="'+l+"-ellipsis "+n+'"><a>'+j+"</a></li>";for(b=f;b<=g;b++)h+=b==d?'<li class="'+l+"-page J-paginationjs-page "+m+'" data-num="'+b+'"><a>'+b+"</a></li>":'<li class="'+l+'-page J-paginationjs-page" data-num="'+b+'"><a href="'+i+'">'+b+"</a></li>";if(g>=e-2)for(b=g+1;b<=e;b++)h+='<li class="'+l+'-page J-paginationjs-page" data-num="'+b+'"><a href="'+i+'">'+b+"</a></li>";else h+='<li class="'+l+"-ellipsis "+n+'"><a>'+j+"</a></li>",k.showLastOnEllipsisShow&&(h+='<li class="'+l+"-page "+l+'-last J-paginationjs-page" data-num="'+e+'"><a href="'+i+'">'+e+"</a></li>");return h},generateHTML:function(a){var c,d=this,e=a.currentPage,f=d.getTotalPage(),g=d.getTotalNumber(),h=k.showPrevious,i=k.showNext,j=k.showPageNumbers,l=k.showNavigator,m=k.showGoInput,n=k.showGoButton,o=k.pageLink,p=k.prevText,q=k.nextText,r=k.goButtonText,s=k.classPrefix,t=k.disableClassName,u=k.ulClassName,v="",w='<input type="text" class="J-paginationjs-go-pagenumber">',x='<input type="button" class="J-paginationjs-go-button" value="'+r+'">',y=b.isFunction(k.formatNavigator)?k.formatNavigator(e,f,g):k.formatNavigator,z=b.isFunction(k.formatGoInput)?k.formatGoInput(w,e,f,g):k.formatGoInput,A=b.isFunction(k.formatGoButton)?k.formatGoButton(x,e,f,g):k.formatGoButton,B=b.isFunction(k.autoHidePrevious)?k.autoHidePrevious():k.autoHidePrevious,C=b.isFunction(k.autoHideNext)?k.autoHideNext():k.autoHideNext,D=b.isFunction(k.header)?k.header(e,f,g):k.header,E=b.isFunction(k.footer)?k.footer(e,f,g):k.footer;return D&&(c=d.replaceVariables(D,{currentPage:e,totalPage:f,totalNumber:g}),v+=c),(h||j||i)&&(v+='<div class="paginationjs-pages">',v+=u?'<ul class="'+u+'">':"<ul>",h&&(e<=1?B||(v+='<li class="'+s+"-prev "+t+'"><a>'+p+"</a></li>"):v+='<li class="'+s+'-prev J-paginationjs-previous" data-num="'+(e-1)+'" title="Previous page"><a href="'+o+'">'+p+"</a></li>"),j&&(v+=d.generatePageNumbersHTML(a)),i&&(e>=f?C||(v+='<li class="'+s+"-next "+t+'"><a>'+q+"</a></li>"):v+='<li class="'+s+'-next J-paginationjs-next" data-num="'+(e+1)+'" title="Next page"><a href="'+o+'">'+q+"</a></li>"),v+="</ul></div>"),l&&y&&(c=d.replaceVariables(y,{currentPage:e,totalPage:f,totalNumber:g}),v+='<div class="'+s+'-nav J-paginationjs-nav">'+c+"</div>"),m&&z&&(c=d.replaceVariables(z,{currentPage:e,totalPage:f,totalNumber:g,input:w}),v+='<div class="'+s+'-go-input">'+c+"</div>"),n&&A&&(c=d.replaceVariables(A,{currentPage:e,totalPage:f,totalNumber:g,button:x}),v+='<div class="'+s+'-go-button">'+c+"</div>"),E&&(c=d.replaceVariables(E,{currentPage:e,totalPage:f,totalNumber:g}),v+=c),v},findTotalNumberFromRemoteResponse:function(a){this.model.totalNumber=k.totalNumberLocator(a)},go:function(a,c){function d(a){if(!1===e.callHook("beforePaging",g))return!1;if(f.direction=void 0===f.pageNumber?0:g>f.pageNumber?1:-1,f.pageNumber=g,e.render(),e.disabled&&e.isAsync&&e.enable(),j.data("pagination").model=f,k.formatResult){var d=b.extend(!0,[],a);i.isArray(a=k.formatResult(d))||(a=d)}j.data("pagination").currentPageData=a,e.doCallback(a,c),e.callHook("afterPaging",g),1==g&&e.callHook("afterIsFirstPage"),g==e.getTotalPage()&&e.callHook("afterIsLastPage")}var e=this,f=e.model;if(!e.disabled){var g=a;if((g=parseInt(g))&&!(g<1)){var h=k.pageSize,l=e.getTotalNumber(),m=e.getTotalPage();if(!(l>0&&g>m)){if(!e.isAsync)return void d(e.getDataFragment(g));var n={},o=k.alias||{};n[o.pageSize?o.pageSize:"pageSize"]=h,n[o.pageNumber?o.pageNumber:"pageNumber"]=g;var p=b.isFunction(k.ajax)?k.ajax():k.ajax,q={type:"get",cache:!1,data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",async:!0};b.extend(!0,q,p),b.extend(q.data,n),q.url=k.dataSource,q.success=function(a){e.isDynamicTotalNumber?e.findTotalNumberFromRemoteResponse(a):e.model.totalNumber=k.totalNumber,d(e.filterDataByLocator(a))},q.error=function(a,b,c){k.formatAjaxError&&k.formatAjaxError(a,b,c),e.enable()},e.disable(),b.ajax(q)}}}},doCallback:function(a,c){var d=this,e=d.model;b.isFunction(c)?c(a,e):b.isFunction(k.callback)&&k.callback(a,e)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),j.off(),b("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(a){this.go(this.model.pageNumber-1,a)},next:function(a){this.go(this.model.pageNumber+1,a)},disable:function(){var a=this,b=a.isAsync?"async":"sync";!1!==a.callHook("beforeDisable",b)&&(a.disabled=!0,a.model.disabled=!0,a.callHook("afterDisable",b))},enable:function(){var a=this,b=a.isAsync?"async":"sync";!1!==a.callHook("beforeEnable",b)&&(a.disabled=!1,a.model.disabled=!1,a.callHook("afterEnable",b))},refresh:function(a){this.go(this.model.pageNumber,a)},show:function(){var a=this;a.model.el.is(":visible")||a.model.el.show()},hide:function(){var a=this;a.model.el.is(":visible")&&a.model.el.hide()},replaceVariables:function(a,b){var c;for(var d in b){var e=b[d],f=new RegExp("<%=\\s*"+d+"\\s*%>","img");c=(c||a).replace(f,e)}return c},getDataFragment:function(a){var b=k.pageSize,c=k.dataSource,d=this.getTotalNumber(),e=b*(a-1)+1,f=Math.min(a*b,d);return c.slice(e-1,f)},getTotalNumber:function(){return this.model.totalNumber||k.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/k.pageSize)},getLocator:function(a){var d;return"string"==typeof a?d=a:b.isFunction(a)?d=a():c('"locator" is incorrect. (String | Function)'),d},filterDataByLocator:function(a){var d,e=this.getLocator(k.locator);if(i.isObject(a)){try{b.each(e.split("."),function(b,c){d=(d||a)[c]})}catch(a){}d?i.isArray(d)||c("dataSource."+e+" must be an Array."):c("dataSource."+e+" is undefined.")}return d||a},parseDataSource:function(a,d){var e=this;i.isObject(a)?d(k.dataSource=e.filterDataByLocator(a)):i.isArray(a)?d(k.dataSource=a):b.isFunction(a)?k.dataSource(function(a){i.isArray(a)||c('The parameter of "done" Function should be an Array.'),e.parseDataSource.call(e,a,d)}):"string"==typeof a?(/^https?|file:/.test(a)&&(k.ajaxDataType="jsonp"),d(a)):c('Unexpected type of "dataSource".')},callHook:function(c){var d,e=j.data("pagination"),f=Array.prototype.slice.apply(arguments);return f.shift(),k[c]&&b.isFunction(k[c])&&!1===k[c].apply(a,f)&&(d=!1),e.hooks&&e.hooks[c]&&b.each(e.hooks[c],function(b,c){!1===c.apply(a,f)&&(d=!1)}),!1!==d},observer:function(){var a=this,d=a.model.el;j.on(h+"go",function(d,e,f){(e=parseInt(b.trim(e)))&&(b.isNumeric(e)||c('"pageNumber" is incorrect. (Number)'),a.go(e,f))}),d.delegate(".J-paginationjs-page","click",function(c){var d=b(c.currentTarget),e=b.trim(d.attr("data-num"));if(e&&!d.hasClass(k.disableClassName)&&!d.hasClass(k.activeClassName))return!1!==a.callHook("beforePageOnClick",c,e)&&(a.go(e),a.callHook("afterPageOnClick",c,e),!!k.pageLink&&void 0)}),d.delegate(".J-paginationjs-previous","click",function(c){var d=b(c.currentTarget),e=b.trim(d.attr("data-num"));if(e&&!d.hasClass(k.disableClassName))return!1!==a.callHook("beforePreviousOnClick",c,e)&&(a.go(e),a.callHook("afterPreviousOnClick",c,e),!!k.pageLink&&void 0)}),d.delegate(".J-paginationjs-next","click",function(c){var d=b(c.currentTarget),e=b.trim(d.attr("data-num"));if(e&&!d.hasClass(k.disableClassName))return!1!==a.callHook("beforeNextOnClick",c,e)&&(a.go(e),a.callHook("afterNextOnClick",c,e),!!k.pageLink&&void 0)}),d.delegate(".J-paginationjs-go-button","click",function(c){var e=b(".J-paginationjs-go-pagenumber",d).val();if(!1===a.callHook("beforeGoButtonOnClick",c,e))return!1;j.trigger(h+"go",e),a.callHook("afterGoButtonOnClick",c,e)}),d.delegate(".J-paginationjs-go-pagenumber","keyup",function(c){if(13===c.which){var e=b(c.currentTarget).val();if(!1===a.callHook("beforeGoInputOnEnter",c,e))return!1;j.trigger(h+"go",e),b(".J-paginationjs-go-pagenumber",d).focus(),a.callHook("afterGoInputOnEnter",c,e)}}),j.on(h+"previous",function(b,c){a.previous(c)}),j.on(h+"next",function(b,c){a.next(c)}),j.on(h+"disable",function(){a.disable()}),j.on(h+"enable",function(){a.enable()}),j.on(h+"refresh",function(b,c){a.refresh(c)}),j.on(h+"show",function(){a.show()}),j.on(h+"hide",function(){a.hide()}),j.on(h+"destroy",function(){a.destroy()});var e=Math.max(a.getTotalPage(),1),f=k.pageNumber;a.isDynamicTotalNumber&&(f=1),k.triggerPagingOnInit&&j.trigger(h+"go",Math.min(f,e))}};if(j.data("pagination")&&!0===j.data("pagination").initialized){if(b.isNumeric(f))return j.trigger.call(this,h+"go",f,arguments[1]),this;if("string"==typeof f){var m=Array.prototype.slice.apply(arguments);switch(m[0]=h+m[0],f){case"previous":case"next":case"go":case"disable":case"enable":case"refresh":case"show":case"hide":case"destroy":j.trigger.apply(this,m);break;case"getSelectedPageNum":return j.data("pagination").model?j.data("pagination").model.pageNumber:j.data("pagination").attributes.pageNumber;case"getTotalPage":return Math.ceil(j.data("pagination").model.totalNumber/j.data("pagination").model.pageSize);case"getSelectedPageData":return j.data("pagination").currentPageData;case"isDisabled":return!0===j.data("pagination").model.disabled;default:c("Unknown action: "+f)}return this}e(j)}else i.isObject(f)||c("Illegal options");return d(k),l.initialize(),this},b.fn[g].defaults={totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,pageLink:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",inlineStyle:!0,formatNavigator:"<%= currentPage %> / <%= totalPage %>",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,hideWhenLessThanOnePage:!1,showFirstOnEllipsisShow:!0,showLastOnEllipsisShow:!0,callback:function(){}},b.fn.addHook=function(a,d){arguments.length<2&&c("Missing argument."),b.isFunction(d)||c("callback must be a function.");var e=b(this),f=e.data("pagination");f||(e.data("pagination",{}),f=e.data("pagination")),!f.hooks&&(f.hooks={}),f.hooks[a]=f.hooks[a]||[],f.hooks[a].push(d)},b[g]=function(a,d){arguments.length<2&&c("Requires two parameters.");var e;if(e="string"!=typeof a&&a instanceof jQuery?a:b(a),e.length)return e.pagination(d),e};var i={};b.each(["Object","Array","String"],function(a,b){i["is"+b]=function(a){return f(a)===b.toLowerCase()}}),"function"==typeof define&&define.amd&&define(function(){return b})}(this,window.jQuery);!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dragula=e()}(function(){return function o(r,i,u){function c(t,e){if(!i[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},r[t][0].call(n.exports,function(e){return c(r[t][1][e]||e)},n,n.exports,o,r,i,u)}return i[t].exports}for(var a="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";var o={},r="(?:^|\\s)",i="(?:\\s|$)";function u(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(r+e+i,"g"),t}t.exports={add:function(e,t){var n=e.className;n.length?u(t).test(n)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(u(t)," ").trim()}}},{}],2:[function(e,t,n){(function(r){"use strict";var M=e("contra/emitter"),k=e("crossvent"),j=e("./classes"),R=document,q=R.documentElement;function U(e,t,n,o){r.navigator.pointerEnabled?k[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],o):r.navigator.msPointerEnabled?k[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],o):(k[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],o),k[t](e,n,o))}function K(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;e=e.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function z(e,t){return void 0!==r[t]?r[t]:(q.clientHeight?q:R.body)[e]}function H(e,t,n){var o=(e=e||{}).className||"";return e.className+=" gu-hide",n=R.elementFromPoint(t,n),e.className=o,n}function V(){return!1}function $(){return!0}function G(e){return e.width||e.right-e.left}function J(e){return e.height||e.bottom-e.top}function Q(e){return e.parentNode===R?null:e.parentNode}function W(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(Q(t))}(e)}function Z(t){return t.nextElementSibling||function(){var e=t;for(;e=e.nextSibling,e&&1!==e.nodeType;);return e}()}function ee(e,t){var t=(n=t).targetTouches&&n.targetTouches.length?n.targetTouches[0]:n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),t[e]}t.exports=function(e,t){var l,f,s,d,m,o,r,v,p,h,n;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var i,g=null,y=t||{};void 0===y.moves&&(y.moves=$),void 0===y.accepts&&(y.accepts=$),void 0===y.invalid&&(y.invalid=function(){return!1}),void 0===y.containers&&(y.containers=e||[]),void 0===y.isContainer&&(y.isContainer=V),void 0===y.copy&&(y.copy=!1),void 0===y.copySortSource&&(y.copySortSource=!1),void 0===y.revertOnSpill&&(y.revertOnSpill=!1),void 0===y.removeOnSpill&&(y.removeOnSpill=!1),void 0===y.direction&&(y.direction="vertical"),void 0===y.ignoreInputTextSelection&&(y.ignoreInputTextSelection=!0),void 0===y.mirrorContainer&&(y.mirrorContainer=R.body);var w=M({containers:y.containers,start:function(e){e=S(e);e&&C(e)},end:O,cancel:L,remove:X,destroy:function(){c(!0),N({})},canMove:function(e){return!!S(e)},dragging:!1});return!0===y.removeOnSpill&&w.on("over",function(e){j.rm(e,"gu-hide")}).on("out",function(e){w.dragging&&j.add(e,"gu-hide")}),c(),w;function u(e){return-1!==w.containers.indexOf(e)||y.isContainer(e)}function c(e){e=e?"remove":"add";U(q,e,"mousedown",E),U(q,e,"mouseup",N)}function a(e){U(q,e?"remove":"add","mousemove",x)}function b(e){e=e?"remove":"add";k[e](q,"selectstart",T),k[e](q,"click",T)}function T(e){i&&e.preventDefault()}function E(e){var t,n;o=e.clientX,r=e.clientY,1!==K(e)||e.metaKey||e.ctrlKey||(n=S(t=e.target))&&(i=n,a(),"mousedown"===e.type&&(W(t)?t.focus():e.preventDefault()))}function x(e){if(i)if(0!==K(e)){if(!(void 0!==e.clientX&&Math.abs(e.clientX-o)<=(y.slideFactorX||0)&&void 0!==e.clientY&&Math.abs(e.clientY-r)<=(y.slideFactorY||0))){if(y.ignoreInputTextSelection){var t=ee("clientX",e)||0,n=ee("clientY",e)||0;if(W(R.elementFromPoint(t,n)))return}n=i;a(!0),b(),O(),C(n);n=function(e){e=e.getBoundingClientRect();return{left:e.left+z("scrollLeft","pageXOffset"),top:e.top+z("scrollTop","pageYOffset")}}(s);d=ee("pageX",e)-n.left,m=ee("pageY",e)-n.top,j.add(h||s,"gu-transit"),function(){if(l)return;var e=s.getBoundingClientRect();(l=s.cloneNode(!0)).style.width=G(e)+"px",l.style.height=J(e)+"px",j.rm(l,"gu-transit"),j.add(l,"gu-mirror"),y.mirrorContainer.appendChild(l),U(q,"add","mousemove",P),j.add(y.mirrorContainer,"gu-unselectable"),w.emit("cloned",l,s,"mirror")}(),P(e)}}else N({})}function S(e){if(!(w.dragging&&l||u(e))){for(var t=e;Q(e)&&!1===u(Q(e));){if(y.invalid(e,t))return;if(!(e=Q(e)))return}var n=Q(e);if(n)if(!y.invalid(e,t))if(y.moves(e,n,t,Z(e)))return{item:e,source:n}}}function C(e){var t,n;t=e.item,n=e.source,("boolean"==typeof y.copy?y.copy:y.copy(t,n))&&(h=e.item.cloneNode(!0),w.emit("cloned",h,e.item,"copy")),f=e.source,s=e.item,v=p=Z(e.item),w.dragging=!0,w.emit("drag",s,f)}function O(){var e;w.dragging&&_(e=h||s,Q(e))}function I(){a(!(i=!1)),b(!0)}function N(e){var t,n;I(),w.dragging&&(t=h||s,n=ee("clientX",e)||0,e=ee("clientY",e)||0,(e=B(H(l,n,e),n,e))&&(h&&y.copySortSource||!h||e!==f)?_(t,e):(y.removeOnSpill?X:L)())}function _(e,t){var n=Q(e);h&&y.copySortSource&&t===f&&n.removeChild(s),A(t)?w.emit("cancel",e,f,f):w.emit("drop",e,t,f,p),Y()}function X(){var e,t;w.dragging&&((t=Q(e=h||s))&&t.removeChild(e),w.emit(h?"cancel":"remove",e,t,f),Y())}function L(e){var t,n,o;w.dragging&&(t=0<arguments.length?e:y.revertOnSpill,!1===(e=A(o=Q(n=h||s)))&&t&&(h?o&&o.removeChild(h):f.insertBefore(n,v)),e||t?w.emit("cancel",n,f,f):w.emit("drop",n,o,f,p),Y())}function Y(){var e=h||s;I(),l&&(j.rm(y.mirrorContainer,"gu-unselectable"),U(q,"remove","mousemove",P),Q(l).removeChild(l),l=null),e&&j.rm(e,"gu-transit"),n&&clearTimeout(n),w.dragging=!1,g&&w.emit("out",e,g,f),w.emit("dragend",e),f=s=h=v=p=n=g=null}function A(e,t){t=void 0!==t?t:l?p:Z(h||s);return e===f&&t===v}function B(t,n,o){for(var r=t;r&&!function(){if(!1===u(r))return!1;var e=D(r,t),e=F(r,e,n,o);if(A(r,e))return!0;return y.accepts(s,r,f,e)}();)r=Q(r);return r}function P(e){if(l){e.preventDefault();var t=ee("clientX",e)||0,n=ee("clientY",e)||0,o=t-d,r=n-m;l.style.left=o+"px",l.style.top=r+"px";var i=h||s,e=H(l,t,n),o=B(e,t,n),u=null!==o&&o!==g;!u&&null!==o||(g&&a("out"),g=o,u&&a("over"));r=Q(i);if(o!==f||!h||y.copySortSource){var c,e=D(o,e);if(null!==e)c=F(o,e,t,n);else{if(!0!==y.revertOnSpill||h)return void(h&&r&&r.removeChild(i));c=v,o=f}(null===c&&u||c!==i&&c!==Z(i))&&(p=c,o.insertBefore(i,c),w.emit("shadow",i,o,f))}else r&&r.removeChild(i)}function a(e){w.emit(e,i,g,f)}}function D(e,t){for(var n=t;n!==e&&Q(n)!==e;)n=Q(n);return n===q?null:n}function F(r,t,i,u){var c="horizontal"===y.direction;return(t!==r?function(){var e=t.getBoundingClientRect();if(c)return n(i>e.left+G(e)/2);return n(u>e.top+J(e)/2)}:function(){var e,t,n,o=r.children.length;for(e=0;e<o;e++){if(t=r.children[e],n=t.getBoundingClientRect(),c&&n.left+n.width/2>i)return t;if(!c&&n.top+n.height/2>u)return t}return null})();function n(e){return e?Z(t):t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],4:[function(e,t,n){"use strict";var o=e("ticky");t.exports=function(e,t,n){e&&o(function(){e.apply(n||null,t||[])})}},{ticky:10}],5:[function(e,t,n){"use strict";var c=e("atoa"),a=e("./debounce");t.exports=function(r,e){var i=e||{},u={};return void 0===r&&(r={}),r.on=function(e,t){return u[e]?u[e].push(t):u[e]=[t],r},r.once=function(e,t){return t._once=!0,r.on(e,t),r},r.off=function(e,t){var n=arguments.length;if(1===n)delete u[e];else if(0===n)u={};else{e=u[e];if(!e)return r;e.splice(e.indexOf(t),1)}return r},r.emit=function(){var e=c(arguments);return r.emitterSnapshot(e.shift()).apply(this,e)},r.emitterSnapshot=function(o){var e=(u[o]||[]).slice(0);return function(){var t=c(arguments),n=this||r;if("error"===o&&!1!==i.throws&&!e.length)throw 1===t.length?t[0]:t;return e.forEach(function(e){i.async?a(e,t,n):e.apply(n,t),e._once&&r.off(o,e)}),r}},r}},{"./debounce":4,atoa:3}],6:[function(n,o,e){(function(r){"use strict";var i=n("custom-event"),u=n("./eventmap"),c=r.document,e=function(e,t,n,o){return e.addEventListener(t,n,o)},t=function(e,t,n,o){return e.removeEventListener(t,n,o)},a=[];function l(e,t,n){t=function(e,t,n){var o,r;for(o=0;o<a.length;o++)if((r=a[o]).element===e&&r.type===t&&r.fn===n)return o}(e,t,n);if(t){n=a[t].wrapper;return a.splice(t,1),n}}r.addEventListener||(e=function(e,t,n){return e.attachEvent("on"+t,function(e,t,n){var o=l(e,t,n)||function(n,o){return function(e){var t=e||r.event;t.target=t.target||t.srcElement,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},t.which=t.which||t.keyCode,o.call(n,t)}}(e,n);return a.push({wrapper:o,element:e,type:t,fn:n}),o}(e,t,n))},t=function(e,t,n){n=l(e,t,n);if(n)return e.detachEvent("on"+t,n)}),o.exports={add:e,remove:t,fabricate:function(e,t,n){var o=-1===u.indexOf(t)?new i(t,{detail:n}):function(){var e;c.createEvent?(e=c.createEvent("Event")).initEvent(t,!0,!0):c.createEventObject&&(e=c.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,r,t){(function(e){"use strict";var t=[],n="",o=/^on/;for(n in e)o.test(n)&&t.push(n.slice(2));r.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,n,t){(function(e){var t=e.CustomEvent;n.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}}()?t:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){var o,r,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(e){o=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var a,l=[],f=!1,s=-1;function d(){f&&a&&(f=!1,a.length?l=a.concat(l):s=-1,l.length&&m())}function m(){if(!f){var e=c(d);f=!0;for(var t=l.length;t;){for(a=l,l=[];++s<t;)a&&a[s].run();s=-1,t=l.length}a=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new v(e,t)),1!==l.length||f||c(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],10:[function(e,n,t){(function(t){var e="function"==typeof t?function(e){t(e)}:function(e){setTimeout(e,0)};n.exports=e}).call(this,e("timers").setImmediate)},{timers:11}],11:[function(a,e,l){(function(e,t){var o=a("process/browser.js").nextTick,n=Function.prototype.apply,r=Array.prototype.slice,i={},u=0;function c(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new c(n.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new c(n.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof e?e:function(e){var t=u++,n=!(arguments.length<2)&&r.call(arguments,1);return i[t]=!0,o(function(){i[t]&&(n?e.apply(null,n):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof t?t:function(e){delete i[e]}}).call(this,a("timers").setImmediate,a("timers").clearImmediate)},{"process/browser.js":9,timers:11}]},{},[2])(2)});var autoScroll=function(){"use strict";function e(e,n){return"undefined"==typeof e?"undefined"==typeof n?e:n:e}function n(n,t){return n=e(n,t),"function"==typeof n?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return!!n.apply(this,t)}:n?function(){return!0}:function(){return!1}}function t(e,n){if(n=u(n,!0),!y(n))return-1;for(var t=0;t<e.length;t++)if(e[t]===n)return t;return-1}function r(e,n){return-1!==t(e,n)}function o(e,n){for(var t=0;t<n.length;t++)r(e,n[t])||e.push(n[t]);return n}function i(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t=t.map(u),o(e,t)}function a(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.map(u).reduce(function(n,r){var o=t(e,r);return o!==-1?n.concat(e.splice(o,1)):n},[])}function u(e,n){if("string"==typeof e)try{return document.querySelector(e)}catch(e){throw e}if(!y(e)&&!n)throw new TypeError(e+" is not a DOM element.");return e}function l(){var e={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},e);var n={};return Object.defineProperties(n,e),n}function c(e){if(e===window)return l();try{var n=e.getBoundingClientRect();return void 0===n.x&&(n.x=n.left,n.y=n.top),n}catch(n){throw new TypeError("Can't call getBoundingClientRect on "+e)}}function f(e,n){var t=c(n);return e.y>t.top&&e.y<t.bottom&&e.x>t.left&&e.x<t.right}function d(e){function t(n){for(var t=0;t<e.length;t++)if(e[t]===n.target){L=!0;break}L&&v(function(){return L=!1})}function o(){j=!0}function u(){j=!1,p(q),p(F)}function l(){j=!1}function f(n){if(!n)return null;if(X===n)return n;if(r(e,n))return n;for(;n=n.parentNode;)if(r(e,n))return n;return null}function d(){for(var n=null,t=0;t<e.length;t++)w(T,e[t])&&(n=e[t]);return n}function m(e){if(E.autoScroll()){var n=e.target,t=document.body;X&&!w(T,X)&&(E.scrollWhenOutside||(X=null)),n&&n.parentNode===t?n=d():(n=f(n),n||(n=d())),n&&n!==X&&(X=n),M&&(p(F),F=v(s)),X&&(p(q),q=v(h))}}function s(){y(M),p(F),F=v(s)}function h(){X&&(y(X),p(q),q=v(h))}function y(e){var n=c(e),t=void 0,r=void 0;t=T.x<n.left+E.margin?Math.floor(Math.max(-1,(T.x-n.left)/E.margin-1)*E.maxSpeed):T.x>n.right-E.margin?Math.ceil(Math.min(1,(T.x-n.right)/E.margin+1)*E.maxSpeed):0,r=T.y<n.top+E.margin?Math.floor(Math.max(-1,(T.y-n.top)/E.margin-1)*E.maxSpeed):T.y>n.bottom-E.margin?Math.ceil(Math.min(1,(T.y-n.bottom)/E.margin+1)*E.maxSpeed):0,setTimeout(function(){r&&g(e,r),t&&A(e,t)})}function g(e,n){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+n):e.scrollTop+=n}function A(e,n){e===window?window.scrollTo(e.pageXOffset+n,e.pageYOffset):e.scrollLeft+=n}var x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E=this,S=4,L=!1;this.margin=x.margin||-1,this.scrollWhenOutside=x.scrollWhenOutside||!1;var T={},O=b(T),j=!1;window.addEventListener("mousemove",O,!1),window.addEventListener("touchmove",O,!1),isNaN(x.maxSpeed)||(S=x.maxSpeed),this.autoScroll=n(x.autoScroll),this.destroy=function(){window.removeEventListener("mousemove",O,!1),window.removeEventListener("touchmove",O,!1),window.removeEventListener("mousedown",o,!1),window.removeEventListener("touchstart",o,!1),window.removeEventListener("mouseup",u,!1),window.removeEventListener("touchend",u,!1),window.removeEventListener("scroll",t,!0),e=[]},this.add=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return i.apply(void 0,[e].concat(t)),this},this.remove=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return a.apply(void 0,[e].concat(t))};var M=null,F=void 0;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),function(n){e=[],n.forEach(function(e){e===window?M=window:E.add(e)})}(e),Object.defineProperties(this,{down:{get:function(){return j}},maxSpeed:{get:function(){return S}},point:{get:function(){return T}},scrolling:{get:function(){return L}}});var X=null,q=void 0;window.addEventListener("mousedown",o,!1),window.addEventListener("touchstart",o,!1),window.addEventListener("mouseup",u,!1),window.addEventListener("touchend",u,!1),window.addEventListener("mousemove",m,!1),window.addEventListener("touchmove",m,!1),window.addEventListener("mouseleave",l,!1),window.addEventListener("scroll",t,!0)}function m(e,n){return new d(e,n)}function w(e,n,t){return t?e.y>t.top&&e.y<t.bottom&&e.x>t.left&&e.x<t.right:f(e,n)}var s=["webkit","moz","ms","o"],v=function(){for(var e=0,n=s.length;e<n&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[s[e]+"RequestAnimationFrame"];return window.requestAnimationFrame||!function(){var e=0;window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-t-e),o=window.setTimeout(function(){return n(t+r)},r);return e=t+r,o}}(),window.requestAnimationFrame.bind(window)}(),p=function(){for(var e=0,n=s.length;e<n&&!window.cancelAnimationFrame;++e)window.cancelAnimationFrame=window[s[e]+"CancelAnimationFrame"]||window[s[e]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},y=function(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":h(e))&&1===e.nodeType&&"object"===h(e.style)&&"object"===h(e.ownerDocument)},g=function(){var e=function(e){return"function"==typeof e},n=function(e){var n=Number(e);return isNaN(n)?0:0!==n&&isFinite(n)?(n>0?1:-1)*Math.floor(Math.abs(n)):n},t=Math.pow(2,53)-1,r=function(e){var r=n(e);return Math.min(Math.max(r,0),t)},o=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},i=function(n,t){if(null!=n&&null!=t){var r=n[t];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},a=function(e){var n=e.next(),t=Boolean(n.done);return!t&&n};return function(n){var t,u=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}var c,f,d=i(n,o(n));if(void 0!==d){c=e(u)?Object(new u):[];var m=d.call(n);if(null==m)throw new TypeError("Array.from requires an array-like or iterable object");f=0;for(var w,s;;){if(w=a(m),!w)return c.length=f,c;s=w.value,l?c[f]=l.call(t,s,f):c[f]=s,f++}}else{var v=Object(n);if(null==n)throw new TypeError("Array.from requires an array-like object - not null or undefined");var p=r(v.length);c=e(u)?Object(new u(p)):new Array(p),f=0;for(var h;f<p;)h=v[f],l?c[f]=l.call(t,h,f):c[f]=h,f++;c.length=p}return c}}(),b=("function"==typeof Array.from?Array.from:g,Array.isArray,Object.prototype.toString,function(e,n){n=n||{};var t;return t="function"==typeof n.allowUpdate?n.allowUpdate:function(){return!0},function(n){if(n=n||window.event,e.target=n.target||n.srcElement||n.originalTarget,e.element=this,e.type=n.type,t(n))if(n.targetTouches)e.x=n.targetTouches[0].clientX,e.y=n.targetTouches[0].clientY,e.pageX=n.pageX,e.pageY=n.pageY;else{if(null===n.pageX&&null!==n.clientX){var r=n.target&&n.target.ownerDocument||document,o=r.documentElement,i=r.body;e.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}else e.pageX=n.pageX,e.pageY=n.pageY;e.x=n.clientX,e.y=n.clientY}}});return m}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,i;function f(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(m(e,t))return;return 1}function r(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){for(var n=[],s=0;s<e.length;++s)n.push(t(e[s],s));return n}function c(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t,n,s){return xt(e,t,n,s,!0).utc()}function y(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=y(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function w(e){var t=_(NaN);return null!=e?c(y(t),e):y(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var p=f.momentProperties=[],t=!1;function v(e,t){var n,s,i;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=y(t)),r(t._locale)||(e._locale=t._locale),0<p.length)for(n=0;n<p.length;n++)r(i=t[s=p[n]])||(e[s]=i);return e}function k(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,f.updateOffset(this),t=!1)}function M(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function D(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return c(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,i),a){for(var e,t,n=[],s=0;s<arguments.length;s++){if(e="","object"==typeof arguments[s]){for(t in e+="\n["+s+"] ",arguments[0])m(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[s];n.push(e)}D(i+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,S={};function Y(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),S[e]||(D(t),S[e]=!0)}function O(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=c({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},c(s[n],e[n]),c(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=c({},s[n]));return s}function x(e){null!=e&&this.set(e)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};function T(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(s){for(var e,i=s.match(N),t=0,r=i.length;t<r;t++)W[i[t]]?i[t]=W[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",n=0;n<r;n++)t+=O(i[n])?i[n].call(e,s):i[n];return t}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;0<=n&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,--n;return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function V(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e)m(e,n)&&(t=V(n))&&(s[t]=e[n]);return s}var E={};function A(e,t){E[e]=t}function j(e){return e%4==0&&e%100!=0||e%400==0}function I(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!=t&&isFinite(t)&&(n=I(t)),n}function z(t,n){return function(e){return null!=e?(q(this,t,e),f.updateOffset(this,n),this):$(this,t)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&j(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),xe(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var B,J=/\d/,Q=/\d\d/,X=/\d{3}/,K=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,re=/\d{1,4}/,ae=/[+-]?\d{1,6}/,oe=/\d+/,ue=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ce(e,n,s){B[e]=O(n)?n:function(e,t){return e&&s?s:n}}function fe(e,t){return m(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}B={};var _e={};function ye(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),h(n)&&(s=function(e,t){t[n]=Z(e)}),t=0;t<e.length;t++)_e[e[t]]=s}function ge(e,i){ye(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var we,pe=0,ve=1,ke=2,Me=3,De=4,Se=5,Ye=6,Oe=7,be=8;function xe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1==s?j(e)?29:28:31-s%7%2}we=Array.prototype.indexOf?Array.prototype.indexOf:function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),C("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),A("month",8),ce("M",te),ce("MM",te,Q),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),ye(["M","MM"],function(e,t){t[ve]=Z(e)-1}),ye(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ve]=i:y(n).invalidMonth=e});var Te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Re=de,We=de;function Ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Z(t);else if(!h(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),xe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Ce(this,e),f.updateOffset(this,!0),this):$(this,"Month")}function He(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=_([2e3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=me(n[r]),s[r]=me(s[r]);for(r=0;r<24;r++)i[r]=me(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Fe(e){return j(e)?366:365}C("Y",0,0,function(){var e=this.year();return e<=9999?T(e,4):"+"+e}),C(0,["YY",2],0,function(){return this.year()%100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),L("year","y"),A("year",1),ce("Y",ue),ce("YY",te,Q),ce("YYYY",re,K),ce("YYYYY",ae,ee),ce("YYYYYY",ae,ee),ye(["YYYYY","YYYYYY"],pe),ye("YYYY",function(e,t){t[pe]=2===e.length?f.parseTwoDigitYear(e):Z(e)}),ye("YY",function(e,t){t[pe]=f.parseTwoDigitYear(e)}),ye("Y",function(e,t){t[pe]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return Z(e)+(68<Z(e)?1900:2e3)};var Le=z("FullYear",!0);function Ve(e){var t,n;return e<100&&0<=e?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ge(e,t,n){var s=7+t-n;return s-(7+Ve(e,0,s).getUTCDay()-t)%7-1}function Ee(e,t,n,s,i){var r,a=1+7*(t-1)+(7+n-s)%7+Ge(e,s,i),o=a<=0?Fe(r=e-1)+a:a>Fe(e)?(r=e+1,a-Fe(e)):(r=e,a);return{year:r,dayOfYear:o}}function Ae(e,t,n){var s,i,r=Ge(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+je(i=e.year()-1,t,n):a>je(e.year(),t,n)?(s=a-je(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function je(e,t,n){var s=Ge(e,t,n),i=Ge(e+1,t,n);return(Fe(e)-s+i)/7}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),A("week",5),A("isoWeek",5),ce("w",te),ce("ww",te,Q),ce("W",te),ce("WW",te,Q),ge(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=Z(e)});function Ie(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("d",0,"do","day"),C("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),C("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ce("d",te),ce("e",te),ce("E",te),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:y(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,s){t[s]=Z(e)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qe=de,Be=de,Je=de;function Qe(){function e(e,t){return t.length-e.length}for(var t,n,s,i,r=[],a=[],o=[],u=[],l=0;l<7;l++)t=_([2e3,1]).day(l),n=me(this.weekdaysMin(t,"")),s=me(this.weekdaysShort(t,"")),i=me(this.weekdays(t,"")),r.push(n),a.push(s),o.push(i),u.push(n),u.push(s),u.push(i);r.sort(e),a.sort(e),o.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Ke(e,t){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Xe),C("k",["kk",2],0,function(){return this.hours()||24}),C("hmm",0,0,function(){return""+Xe.apply(this)+T(this.minutes(),2)}),C("hmmss",0,0,function(){return""+Xe.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),L("hour","h"),A("hour",13),ce("a",et),ce("A",et),ce("H",te),ce("h",te),ce("k",te),ce("HH",te,Q),ce("hh",te,Q),ce("kk",te,Q),ce("hmm",ne),ce("hmmss",se),ce("Hmm",ne),ce("Hmmss",se),ye(["H","HH"],Me),ye(["k","kk"],function(e,t,n){var s=Z(e);t[Me]=24===s?0:s}),ye(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ye(["h","hh"],function(e,t,n){t[Me]=Z(e),y(n).bigHour=!0}),ye("hmm",function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s)),y(n).bigHour=!0}),ye("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i)),y(n).bigHour=!0}),ye("Hmm",function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s))}),ye("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i))});var tt=z("Hours",!0);var nt,st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Te,monthsShort:Ne,week:{dow:0,doy:6},weekdays:Ze,weekdaysMin:$e,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;0<t;){if(s=ut(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return nt}function ut(t){var e;if(void 0===it[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=nt._abbr,require("./locale/"+t),lt(e)}catch(e){it[t]=null}return it[t]}function lt(e,t){var n;return e&&((n=r(t)?dt(e):ht(e,t))?nt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),nt._abbr}function ht(e,t){if(null===t)return delete it[e],null;var n,s=st;if(t.abbr=e,null!=it[e])Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])s=it[t.parentLocale]._config;else{if(null==(n=ut(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;s=n._config}return it[e]=new x(b(s,t)),rt[e]&&rt[e].forEach(function(e){ht(e.name,e.config)}),lt(e),it[e]}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return nt;if(!o(e)){if(t=ut(e))return t;e=[e]}return ot(e)}function ct(e){var t,n=e._a;return n&&-2===y(e).overflow&&(t=n[ve]<0||11<n[ve]?ve:n[ke]<1||n[ke]>xe(n[pe],n[ve])?ke:n[Me]<0||24<n[Me]||24===n[Me]&&(0!==n[De]||0!==n[Se]||0!==n[Ye])?Me:n[De]<0||59<n[De]?De:n[Se]<0||59<n[Se]?Se:n[Ye]<0||999<n[Ye]?Ye:-1,y(e)._overflowDayOfYear&&(t<pe||ke<t)&&(t=ke),y(e)._overflowWeeks&&-1===t&&(t=Oe),y(e)._overflowWeekday&&-1===t&&(t=be),y(e).overflow=t),e}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,pt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,vt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(y(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Ot(e)}else e._isValid=!1}function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Ne.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function Dt(e){var t,n,s,i,r=pt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(r){if(t=Mt(r[4],r[3],r[2],r[5],r[6],r[7]),n=r[1],s=t,i=e,n&&ze.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()&&(y(i).weekdayMismatch=!0,!void(i._isValid=!1)))return;e._a=t,e._tzm=function(e,t,n){if(e)return vt[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return 60*((s-i)/100)+i}(r[8],r[9],r[10]),e._d=Ve.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function St(e,t,n){return null!=e?e:null!=t?t:n}function Yt(e){var t,n,s,i,r,a,o,u=[];if(!e._d){for(a=e,o=new Date(f.now()),s=a._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],e._w&&null==e._a[ke]&&null==e._a[ve]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=St(t.GG,e._a[pe],Ae(Tt(),1,4).year),s=St(t.W,1),((i=St(t.E,1))<1||7<i)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=Ae(Tt(),r,a),n=St(t.gg,e._a[pe],l.year),s=St(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r);s<1||s>je(n,r,a)?y(e)._overflowWeeks=!0:null!=u?y(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[pe]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=St(e._a[pe],s[pe]),(e._dayOfYear>Fe(r)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=Ve(r,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ke]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=u[t]=s[t];for(;t<7;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Me]&&0===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&(e._nextDay=!0,e._a[Me]=0),e._d=(e._useUTC?Ve:function(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,u),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Me]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function Ot(e){if(e._f!==f.ISO_8601)if(e._f!==f.RFC_2822){e._a=[],y(e).empty=!0;for(var t,n,s,i,r,a,o,u=""+e._i,l=u.length,h=0,d=H(e._f,e._locale).match(N)||[],c=0;c<d.length;c++)n=d[c],(t=(u.match(fe(n,e))||[])[0])&&(0<(s=u.substr(0,u.indexOf(t))).length&&y(e).unusedInput.push(s),u=u.slice(u.indexOf(t)+t.length),h+=t.length),W[n]?(t?y(e).empty=!1:y(e).unusedTokens.push(n),r=n,o=e,null!=(a=t)&&m(_e,r)&&_e[r](a,o._a,o,r)):e._strict&&!t&&y(e).unusedTokens.push(n);y(e).charsLeftOver=l-h,0<u.length&&y(e).unusedInput.push(u),e._a[Me]<=12&&!0===y(e).bigHour&&0<e._a[Me]&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[Me]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[Me],e._meridiem),null!==(i=y(e).era)&&(e._a[pe]=e._locale.erasConvertYear(i,e._a[pe])),Yt(e),ct(e)}else Dt(e);else kt(e)}function bt(e){var t,n,s=e._i,i=e._f;return e._locale=e._locale||dt(e._l),null===s||void 0===i&&""===s?w({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),M(s)?new k(ct(s)):(a(s)?e._d=s:o(i)?function(e){var t,n,s,i,r,a,o=!1;if(0===e._f.length)return y(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,a=!1,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Ot(t),g(t)&&(a=!0),r+=y(t).charsLeftOver,r+=10*y(t).unusedTokens.length,y(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));c(e,n||t)}(e):i?Ot(e):r(n=(t=e)._i)?t._d=new Date(f.now()):a(n)?t._d=new Date(n.valueOf()):"string"==typeof n?function(e){var t=wt.exec(e._i);null===t?(kt(e),!1===e._isValid&&(delete e._isValid,Dt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:f.createFromInputFallback(e)))):e._d=new Date(+t[1])}(t):o(n)?(t._a=d(n.slice(0),function(e){return parseInt(e,10)}),Yt(t)):u(n)?function(e){var t,n;e._d||(n=void 0===(t=G(e._i)).day?t.date:t.day,e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Yt(e))}(t):h(n)?t._d=new Date(n):f.createFromInputFallback(t),g(e)||(e._d=null),e))}function xt(e,t,n,s,i){var r,a={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&l(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new k(ct(bt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,t,n,s){return xt(e,t,n,s,!1)}f.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};var Nt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:w()}),Pt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:w()});function Rt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ct(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,s=!1;for(t in e)if(m(e,t)&&(-1===we.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Wt.length;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==Z(e[Wt[n]])&&(s=!0)}return!0}(t),this._milliseconds=+h+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=dt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){C(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+T(~~(e/60),2)+n+T(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ce("Z",he),ce("ZZ",he),ye(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Vt(he,e)});var Lt=/([\+\-]|\d\d)/gi;function Vt(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(Lt)||["-",0,0])[1]+Z(n[2]))?0:"+"===n[0]?s:-s}function Gt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(M(e)||a(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),f.updateOffset(n,!1),n):Tt(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}f.updateOffset=function(){};var jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,It=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Zt(e,t){var n,s,i,r=e,a=null;return Ut(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=jt.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:Z(a[ke])*n,h:Z(a[Me])*n,m:Z(a[De])*n,s:Z(a[Se])*n,ms:Z(Ht(1e3*a[Ye]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:1,r={y:zt(a[2],n),M:zt(a[3],n),w:zt(a[4],n),d:zt(a[5],n),h:zt(a[6],n),m:zt(a[7],n),s:zt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=$t(e,t):((n=$t(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ct(r),Ut(e)&&m(e,"_locale")&&(s._locale=e._locale),Ut(e)&&m(e,"_isValid")&&(s._isValid=e._isValid),s}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=t-e.clone().add(n.months,"M"),n}function qt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Y(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),Bt(this,Zt(e,t),s),this}}function Bt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),a=Ht(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,$(e,"Month")+a*n),r&&q(e,"Date",$(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&f.updateOffset(e,r||a))}Zt.fn=Ct.prototype,Zt.invalid=function(){return Zt(NaN)};var Jt=qt(1,"add"),Qt=qt(-1,"subtract");function Xt(e){return"string"==typeof e||e instanceof String}function Kt(e){return M(e)||a(e)||Xt(e)||h(e)||function(t){var e=o(t),n=!1;e&&(n=0===t.filter(function(e){return!h(e)&&Xt(t)}).length);return e&&n}(e)||function(e){var t,n,s=u(e)&&!l(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)n=r[t],i=i||m(e,n);return s&&i}(e)||null==e}function en(e,t){if(e.date()<t.date())return-en(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),i=t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s);return-(n+i)||0}function tn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var nn=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function sn(){return this._locale}var rn=126227808e5;function an(e,t){return(e%t+t)%t}function on(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-rn:new Date(e,t,n).valueOf()}function un(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-rn:Date.UTC(e,t,n)}function ln(e,t){return t.erasAbbrRegex(e)}function hn(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(me(i[r].name)),e.push(me(i[r].abbr)),n.push(me(i[r].narrow)),s.push(me(i[r].name)),s.push(me(i[r].abbr)),s.push(me(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function dn(e,t){C(0,[e,e.length],0,t)}function cn(e,t,n,s,i){var r;return null==e?Ae(this,s,i).year:((r=je(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ve(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),ce("N",ln),ce("NN",ln),ce("NNN",ln),ce("NNNN",function(e,t){return t.erasNameRegex(e)}),ce("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?y(n).era=i:y(n).invalidEra=e}),ce("y",oe),ce("yy",oe),ce("yyy",oe),ce("yyyy",oe),ce("yo",function(e,t){return t._eraYearOrdinalRegex||oe}),ye(["y","yy","yyy","yyyy"],pe),ye(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[pe]=n._locale.eraYearOrdinalParse(e,i):t[pe]=parseInt(e,10)}),C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100}),dn("gggg","weekYear"),dn("ggggg","weekYear"),dn("GGGG","isoWeekYear"),dn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ce("G",ue),ce("g",ue),ce("GG",te,Q),ce("gg",te,Q),ce("GGGG",re,K),ce("gggg",re,K),ce("GGGGG",ae,ee),ce("ggggg",ae,ee),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=Z(e)}),ge(["gg","GG"],function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)}),C("Q",0,"Qo","quarter"),L("quarter","Q"),A("quarter",7),ce("Q",J),ye("Q",function(e,t){t[ve]=3*(Z(e)-1)}),C("D",["DD",2],"Do","date"),L("date","D"),A("date",9),ce("D",te),ce("DD",te,Q),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ye(["D","DD"],ke),ye("Do",function(e,t){t[ke]=Z(e.match(te)[0])});var fn=z("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),A("dayOfYear",4),ce("DDD",ie),ce("DDDD",X),ye(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Z(e)}),C("m",["mm",2],0,"minute"),L("minute","m"),A("minute",14),ce("m",te),ce("mm",te,Q),ye(["m","mm"],De);var mn=z("Minutes",!1);C("s",["ss",2],0,"second"),L("second","s"),A("second",15),ce("s",te),ce("ss",te,Q),ye(["s","ss"],Se);var _n,yn,gn=z("Seconds",!1);for(C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return 10*this.millisecond()}),C(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),C(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),C(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),C(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),C(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),A("millisecond",16),ce("S",ie,J),ce("SS",ie,Q),ce("SSS",ie,X),_n="SSSS";_n.length<=9;_n+="S")ce(_n,oe);function wn(e,t){t[Ye]=Z(1e3*("0."+e))}for(_n="S";_n.length<=9;_n+="S")ye(_n,wn);yn=z("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var pn=k.prototype;function vn(e){return e}pn.add=Jt,pn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Kt(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=u(e)&&!l(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||m(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var n=e||Tt(),s=Gt(n,this).startOf("day"),i=f.calendarFormat(this,s)||"sameElse",r=t&&(O(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},pn.clone=function(){return new k(this)},pn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=V(t)){case"year":r=en(this,s)/12;break;case"month":r=en(this,s);break;case"quarter":r=en(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:I(r)},pn.endOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-an(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-an(t,1e3)-1;break}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.format=function(e){e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},pn.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.fromNow=function(e){return this.from(Tt(),e)},pn.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.toNow=function(e){return this.to(Tt(),e)},pn.get=function(e){return O(this[e=V(e)])?this[e]():this},pn.invalidAt=function(){return y(this).overflow},pn.isAfter=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},pn.isBefore=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},pn.isBetween=function(e,t,n,s){var i=M(e)?e:Tt(e),r=M(t)?t:Tt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n)))},pn.isSame=function(e,t){var n,s=M(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},pn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},pn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},pn.isValid=function(){return g(this)},pn.lang=nn,pn.locale=tn,pn.localeData=sn,pn.max=Pt,pn.min=Nt,pn.parsingFlags=function(){return c({},y(this))},pn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)m(e,t)&&n.push({unit:t,priority:E[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=G(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(O(this[e=V(e)]))return this[e](t);return this},pn.startOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=an(t,6e4);break;case"second":t=this._d.valueOf(),t-=an(t,1e3);break}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.subtract=Qt,pn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},pn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(pn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1e3)},pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},pn.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},pn.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},pn.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},pn.year=Le,pn.isLeapYear=function(){return j(this.year())},pn.weekYear=function(e){return cn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(e){return cn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},pn.month=Ue,pn.daysInMonth=function(){return xe(this.year(),this.month())},pn.week=pn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},pn.isoWeek=pn.isoWeeks=function(e){var t=Ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},pn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},pn.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},pn.isoWeeksInYear=function(){return je(this.year(),1,4)},pn.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},pn.date=fn,pn.day=pn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},pn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},pn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,s=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?s:s-7)},pn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},pn.hour=pn.hours=tt,pn.minute=pn.minutes=mn,pn.second=pn.seconds=gn,pn.millisecond=pn.milliseconds=yn,pn.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if("string"==typeof e){if(null===(e=Vt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?Bt(this,Zt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},pn.utc=function(e){return this.utcOffset(0,e)},pn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),"m")),this},pn.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Vt(le,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},pn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pn.isUtc=At,pn.isUTC=At,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=n("dates accessor is deprecated. Use date instead.",fn),pn.months=n("months accessor is deprecated. Use month instead",Ue),pn.years=n("years accessor is deprecated. Use year instead",Le),pn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),pn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e,t={};return v(t,this),(t=bt(t))._a?(e=(t._isUTC?_:Tt)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&Z(e[a])!==Z(t[a]))&&r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});var kn=x.prototype;function Mn(e,t,n,s){var i=dt(),r=_().set(s,t);return i[n](r,e)}function Dn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return Mn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=Mn(e,i,n,"month");return s}function Sn(e,t,n,s){t=("boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t||"");var i,r=dt(),a=e?r._week.dow:0,o=[];if(null!=n)return Mn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=Mn(t,(i+a)%7,s,"day");return o}kn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},kn.invalidDate=function(){return this._invalidDate},kn.ordinal=function(e){return this._ordinal.replace("%d",e)},kn.preparse=vn,kn.postformat=vn,kn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},kn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)},kn.set=function(e){var t,n;for(n in e)m(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kn.eras=function(e,t){for(var n,s=this._eras||dt("en")._eras,i=0,r=s.length;i<r;++i){switch(typeof s[i].since){case"string":n=f(s[i].since).startOf("day"),s[i].since=n.valueOf();break}switch(typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":n=f(s[i].until).startOf("day").valueOf(),s[i].until=n.valueOf();break}}return s},kn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s];break}else if(0<=[r,a,o].indexOf(e))return u[s]},kn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},kn.erasAbbrRegex=function(e){return m(this,"_erasAbbrRegex")||hn.call(this),e?this._erasAbbrRegex:this._erasRegex},kn.erasNameRegex=function(e){return m(this,"_erasNameRegex")||hn.call(this),e?this._erasNameRegex:this._erasRegex},kn.erasNarrowRegex=function(e){return m(this,"_erasNarrowRegex")||hn.call(this),e?this._erasNarrowRegex:this._erasRegex},kn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},kn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Pe.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},kn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=_([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))||-1!==(i=we.call(this._longMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))||-1!==(i=we.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=_([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},kn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=We),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},kn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},kn.week=function(e){return Ae(e,this._week.dow,this._week.doy).week},kn.firstDayOfYear=function(){return this._week.doy},kn.firstDayOfWeek=function(){return this._week.dow},kn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ie(n,this._week.dow):e?n[e.day()]:n},kn.weekdaysMin=function(e){return!0===e?Ie(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},kn.weekdaysShort=function(e){return!0===e?Ie(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},kn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=_([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=_([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},kn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Be),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},kn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},lt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Z(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=n("moment.lang is deprecated. Use moment.locale instead.",lt),f.langData=n("moment.langData is deprecated. Use moment.localeData instead.",dt);var Yn=Math.abs;function On(e,t,n,s){var i=Zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function xn(e){return 4800*e/146097}function Tn(e){return 146097*e/4800}function Nn(e){return function(){return this.as(e)}}var Pn=Nn("ms"),Rn=Nn("s"),Wn=Nn("m"),Cn=Nn("h"),Un=Nn("d"),Hn=Nn("w"),Fn=Nn("M"),Ln=Nn("Q"),Vn=Nn("y");function Gn(e){return function(){return this.isValid()?this._data[e]:NaN}}var En=Gn("milliseconds"),An=Gn("seconds"),jn=Gn("minutes"),In=Gn("hours"),Zn=Gn("days"),zn=Gn("months"),$n=Gn("years");var qn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Jn(e,t,n,s){var i=Zt(e).abs(),r=qn(i.as("s")),a=qn(i.as("m")),o=qn(i.as("h")),u=qn(i.as("d")),l=qn(i.as("M")),h=qn(i.as("w")),d=qn(i.as("y")),c=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(c=c||h<=1&&["w"]||h<n.w&&["ww",h]),(c=c||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,c[3]=0<+e,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}var Qn=Math.abs;function Xn(e){return(0<e)-(e<0)||+e}function Kn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,u=Qn(this._milliseconds)/1e3,l=Qn(this._days),h=Qn(this._months),d=this.asSeconds();return d?(e=I(u/60),t=I(e/60),u%=60,e%=60,n=I(h/12),h%=12,s=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=Xn(this._months)!==Xn(d)?"-":"",a=Xn(this._days)!==Xn(d)?"-":"",o=Xn(this._milliseconds)!==Xn(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(h?r+h+"M":"")+(l?a+l+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+s+"S":"")):"P0D"}var es=Ct.prototype;return es.isValid=function(){return this._isValid},es.abs=function(){var e=this._data;return this._milliseconds=Yn(this._milliseconds),this._days=Yn(this._days),this._months=Yn(this._months),e.milliseconds=Yn(e.milliseconds),e.seconds=Yn(e.seconds),e.minutes=Yn(e.minutes),e.hours=Yn(e.hours),e.months=Yn(e.months),e.years=Yn(e.years),this},es.add=function(e,t){return On(this,e,t,1)},es.subtract=function(e,t){return On(this,e,t,-1)},es.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+xn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Tn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},es.asMilliseconds=Pn,es.asSeconds=Rn,es.asMinutes=Wn,es.asHours=Cn,es.asDays=Un,es.asWeeks=Hn,es.asMonths=Fn,es.asQuarters=Ln,es.asYears=Vn,es.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Z(this._months/12):NaN},es._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*bn(Tn(o)+a),o=a=0),u.milliseconds=r%1e3,e=I(r/1e3),u.seconds=e%60,t=I(e/60),u.minutes=t%60,n=I(t/60),u.hours=n%24,a+=I(n/24),o+=i=I(xn(a)),a-=bn(Tn(i)),s=I(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},es.clone=function(){return Zt(this)},es.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},es.milliseconds=En,es.seconds=An,es.minutes=jn,es.hours=In,es.days=Zn,es.weeks=function(){return I(this.days()/7)},es.months=zn,es.years=$n,es.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=Bn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(r=Object.assign({},Bn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=this.localeData(),s=Jn(this,!i,r,n),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},es.toISOString=Kn,es.toString=Kn,es.toJSON=Kn,es.locale=tn,es.localeData=sn,es.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kn),es.lang=nn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),ce("x",ue),ce("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),ye("x",function(e,t,n){n._d=new Date(Z(e))}),f.version="2.29.1",e=Tt,f.fn=pn,f.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},f.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=_,f.unix=function(e){return Tt(1e3*e)},f.months=function(e,t){return Dn(e,t,"months")},f.isDate=a,f.locale=lt,f.invalid=w,f.duration=Zt,f.isMoment=M,f.weekdays=function(e,t,n){return Sn(e,t,n,"weekdays")},f.parseZone=function(){return Tt.apply(null,arguments).parseZone()},f.localeData=dt,f.isDuration=Ut,f.monthsShort=function(e,t){return Dn(e,t,"monthsShort")},f.weekdaysMin=function(e,t,n){return Sn(e,t,n,"weekdaysMin")},f.defineLocale=ht,f.updateLocale=function(e,t){var n,s,i;return null!=t?(i=st,null!=it[e]&&null!=it[e].parentLocale?it[e].set(b(it[e]._config,t)):(null!=(s=ut(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=it[e],it[e]=n),lt(e)):null!=it[e]&&(null!=it[e].parentLocale?(it[e]=it[e].parentLocale,e===lt()&&lt(e)):null!=it[e]&&delete it[e]),it[e]},f.locales=function(){return s(it)},f.weekdaysShort=function(e,t,n){return Sn(e,t,n,"weekdaysShort")},f.normalizeUnits=V,f.relativeTimeRounding=function(e){return void 0===e?qn:"function"==typeof e&&(qn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},f.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},f.prototype=pn,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f});function addStorage(key,value){const storage=localStorage.getItem(key);let items;if(storage!=null&&storage.length>0){items=Object.values(JSON.parse(storage).reduce((a,{term,url,date})=>{if(a[term]){if(a[term].date<date)a[term]={term,url,date};}else a[term]={term,url,date};return a;},{}));items.sort(function(a,b){return new Date(a.date).getTime()-new Date(b.date).getTime();});}else{items=[];}
items.push(value);localStorage.setItem(key,JSON.stringify(items));}
function getItem(key){const storage=localStorage.getItem(key);let items;if(storage!=null&&storage.length>0){items=Object.values(JSON.parse(storage).reduce((a,{term,url,date})=>{if(a[term]){if(a[term].date<date)a[term]={term,url,date};}else a[term]={term,url,date};return a;},{}));items.sort(function(a,b){return new Date(a.date).getTime()-new Date(b.date).getTime();});}else{items=[];}
return items;}
function clearStorage(key){localStorage.removeItem(key);};ACC.address={_autoload:["bindToChangeAddressButton","bindCreateUpdateAddressForm","bindSuggestedDeliveryAddresses","bindCountrySpecificAddressForms","showAddressFormButtonPanel","bindViewAddressBook","bindToColorboxClose","showRemoveAddressFromBookConfirmation","backToListAddresses"],spinner:'',addressID:'',handleChangeAddressButtonClick:function()
{ACC.address.addressID=($(this).data("address"))?$(this).data("address"):'';$('#summaryDeliveryAddressFormContainer').show();$('#summaryOverlayViewAddressBook').show();$('#summaryDeliveryAddressBook').hide();$.getJSON(getDeliveryAddressesUrl,ACC.address.handleAddressDataLoad);return false;},handleAddressDataLoad:function(data)
{ACC.address.setupDeliveryAddressPopupForm(data);ACC.colorbox.open("",{inline:true,href:"#summaryDeliveryAddressOverlay",overlayClose:false,onOpen:function(){ACC.address.emptyAddressForm();$(document).on('change','#saveAddress',function()
{var saveAddressChecked=$(this).prop('checked');$('#defaultAddress').prop('disabled',!saveAddressChecked);if(!saveAddressChecked)
{$('#defaultAddress').prop('checked',false);}});}});},setupDeliveryAddressPopupForm:function(data)
{$('#summaryDeliveryAddressBook').html($('#deliveryAddressesTemplate').tmpl({addresses:data}));$('#summaryDeliveryAddressBook button.use_address').click(ACC.address.handleSelectExistingAddressClick);$('#summaryDeliveryAddressBook button.edit').click(ACC.address.handleEditAddressClick);$('#summaryDeliveryAddressBook button.default').click(ACC.address.handleDefaultAddressClick);},emptyAddressForm:function()
{var options={url:getDeliveryAddressFormUrl,data:{addressId:ACC.address.addressID,createUpdateStatus:''},type:'GET',dataType:'html',success:function(data)
{$('#summaryDeliveryAddressFormContainer').html(data);ACC.address.bindCreateUpdateAddressForm();}};$.ajax(options);},handleSelectExistingAddressClick:function()
{var addressId=$(this).attr('data-address');$.postJSON(setDeliveryAddressUrl,{addressId:addressId},ACC.address.handleSelectExitingAddressSuccess);return false;},handleEditAddressClick:function()
{$('#summaryDeliveryAddressFormContainer').show();$('#summaryOverlayViewAddressBook').show();$('#summaryDeliveryAddressBook').hide();var addressId=$(this).attr('data-address');var options={url:getDeliveryAddressFormUrl,data:{addressId:addressId,createUpdateStatus:''},target:'#summaryDeliveryAddressFormContainer',type:'GET',success:function(data)
{ACC.address.bindCreateUpdateAddressForm();ACC.colorbox.resize();},error:function(xht,textStatus,ex)
{console.log("Failed to update cart. Error details ["+xht+", "+textStatus+", "+ex+"]");}};$(this).ajaxSubmit(options);return false;},handleDefaultAddressClick:function()
{var addressId=$(this).attr('data-address');var options={url:setDefaultAddressUrl,data:{addressId:addressId},type:'GET',success:function(data)
{ACC.address.setupDeliveryAddressPopupForm(data);},error:function(xht,textStatus,ex)
{console.log("Failed to update address book. Error details ["+xht+", "+textStatus+", "+ex+"]");}};$(this).ajaxSubmit(options);return false;},handleSelectExitingAddressSuccess:function(data)
{if(data!=null)
{ACC.refresh.refreshPage(data);ACC.colorbox.close();}
else
{console.log("Failed to set delivery address");}},bindCreateUpdateAddressForm:function()
{$('.create_update_address_form').each(function()
{var options={type:'POST',beforeSubmit:function()
{$('#checkout_delivery_address').block({message:ACC.address.spinner});},success:function(data)
{$('#summaryDeliveryAddressFormContainer').html(data);var status=$('.create_update_address_id').attr('status');if(status!=null&&"success"===status.toLowerCase())
{ACC.refresh.getCheckoutCartDataAndRefreshPage();ACC.colorbox.close();}
else
{ACC.address.bindCreateUpdateAddressForm();ACC.colorbox.resize();}},error:function(xht,textStatus,ex)
{console.log("Failed to update cart. Error details ["+xht+", "+textStatus+", "+ex+"]");},complete:function()
{$('#checkout_delivery_address').unblock();}};$(this).ajaxForm(options);});},refreshDeliveryAddressSection:function(data)
{$('.summaryDeliveryAddress').replaceWith($('#deliveryAddressSummaryTemplate').tmpl(data));},bindSuggestedDeliveryAddresses:function()
{var status=$('.add_edit_delivery_address_id').attr('status');if(status!=null&&"hasSuggestedAddresses"==status)
{ACC.address.showSuggestedAddressesPopup();}},showSuggestedAddressesPopup:function()
{$(document).ready(function(){ACC.colorbox.open("Suggested Addresses",{href:"#popup_suggested_delivery_addresses",inline:true,width:"525px",onComplete:function()
{$(this).colorbox.resize();}});})},bindCountrySpecificAddressForms:function(){$(document).on("change",'#countrySelector select',function(){var options={'addressCode':'','countryIsoCode':$(this).val()};ACC.address.displayCountrySpecificAddressForm(options,ACC.address.showAddressFormButtonPanel);})},showAddressFormButtonPanel:function()
{if($('#countrySelector :input').val()!=='')
{$('#addressform_button_panel').show();}},bindToColorboxClose:function()
{$(document).on("click",".closeColorBox",function()
{ACC.colorbox.close();})},displayCountrySpecificAddressForm:function(options,callback)
{$.ajax({url:ACC.config.encodedContextPath+'/my-account/addressform',async:true,data:options,dataType:"html",beforeSend:function()
{$("#i18nAddressForm").html(ACC.address.spinner);}}).done(function(data)
{$("#i18nAddressForm").html($(data).html());if(typeof callback=='function')
{callback.call();}});},bindToChangeAddressButton:function()
{$(document).on("click",'.summaryDeliveryAddress .editButton',ACC.address.handleChangeAddressButtonClick);},bindViewAddressBook:function()
{$(document).on("click",".js-address-book",function(e){e.preventDefault();ACC.colorbox.open("Saved Addresses",{href:"#addressbook",inline:true,width:"380px"});})
$(document).on("click",'#summaryOverlayViewAddressBook',function()
{$('#summaryDeliveryAddressFormContainer').hide();$('#summaryOverlayViewAddressBook').hide();$('#summaryDeliveryAddressBook').show();ACC.colorbox.resize();});},showRemoveAddressFromBookConfirmation:function()
{$(document).on("click",".removeAddressFromBookButton",function()
{var addressId=$(this).data("addressId");var popupTitle=$(this).data("popupTitle");ACC.colorbox.open(popupTitle,{inline:true,height:false,href:"#popup_confirm_address_removal_"+addressId,onComplete:function()
{$(this).colorbox.resize();}});})},backToListAddresses:function(){$(".addressBackBtn").on("click",function(){var sUrl=$(this).data("backToAddresses");window.location=sUrl;});}};var jspNumberOfProducts;ACC.autocomplete={_autoload:["bindDisableSearch","storeSearchTerm","searchDropdown",["bindSearchButton",$(".js_search_button").length!==0],],bindSearchAutocomplete:function()
{$.widget("custom.yautocomplete",$.ui.autocomplete,{_create:function(){var option=this.element.data("options");this._setOptions({minLength:option.minCharactersBeforeRequest,displayProductImages:option.displayProductImages,delay:option.waitTimeBeforeRequest,autocompleteUrl:option.autocompleteUrl,source:this.source});$.ui.autocomplete.prototype._create.call(this);},options:{cache:{},focus:function(){return false;},select:function(event,ui){ui.item.value=ACC.sanitizer.sanitize(ui.item.value);window.location.href=ui.item.url;}},_renderItem:function(ul,item){if(item.type=="autoSuggestion"){var renderHtml=$("<a>").attr("href",item.url).append($("<div>").addClass("name").text(item.value));return $("<li>").data("item.autocomplete",item).append(renderHtml).appendTo(ul);}
else if(item.type=="productResult"){var renderHtml=$("<a>").attr("href",item.url).append(item.image?$("<div>").addClass("thumb").append($("<img>").attr("src",item.image)):null).append($("<div>").addClass("name").html(ACC.sanitizer.sanitize(item.value))).append($("<div>").addClass("price").text(item.price));return $("<li>").data("item.autocomplete",item).append(renderHtml).appendTo(ul);}},source:function(request,response)
{var self=this;var term=request.term.toLowerCase();if(term in self.options.cache)
{return response(self.options.cache[term]);}
$.getJSON(self.options.autocompleteUrl,{term:request.term},function(data)
{var autoSearchData=[];if(data.suggestions!=null){$.each(data.suggestions,function(i,obj)
{autoSearchData.push({value:obj.term,url:ACC.config.encodedContextPath+"/search?sort=relevance&q="+encodeURIComponent(obj.term),type:"autoSuggestion"});});}
if(data.products!=null){$.each(data.products,function(i,obj)
{autoSearchData.push({value:ACC.sanitizer.sanitize(obj.name),code:obj.code,desc:ACC.sanitizer.sanitize(obj.description),manufacturer:ACC.sanitizer.sanitize(obj.manufacturer),url:ACC.config.encodedContextPath+obj.url,price:obj.price.formattedValue,type:"productResult",image:(obj.images!=null&&self.options.displayProductImages)?obj.images[0].url:null});});}
self.options.cache[term]=autoSearchData;return response(autoSearchData);});}});$search=$(".js-site-search-input");if($search.length>0){$search.yautocomplete()}},bindDisableSearch:function(){var timerId;$("#js-site-search-input").on("change keypress input",function(e){var value=$(this).val();$(".js_search_button").prop("disabled",value==""?true:false);if(e.key==="Enter"||e.keyCode===13){var searchOption=$("#ls-select-search-by").data();var searchTerm=encodeURIComponent($("#js-site-search-input").val().replace(/</gi,'&lt;'));var searchUrl=`/search?q=${searchTerm}${searchOption.code && searchOption.code !== 'LSG_TYPE' ? `::prodcategory:${searchOption.code}` : '' }`;if(searchUrl){window.location.href=window.location.origin+searchUrl;}}
if(value!==""){clearTimeout(timerId);timerId=setTimeout(function(){hideSearchDropdownList();getFragmentPreSearch();},1000);}});},storeSearchTerm:function(searchMode){$('#searchForm').submit(function(e){e.preventDefault();getFragmentPreSearch();});},searchDropdown:function(){var url="/search/searchdropdown/typecategories";var allCategoriesTranslation=$("input[name=allCategoriesTranslation]").val();$.ajax({url:url,type:"get",dataType:"json",success:function(response){var results=response.map(function(item){return{code:item["code"],name:item["name"],newCode:item["newCode"],mode:"text",helpText:item["searchDDHelpText"]};});results.filter(function(item){return item.code==="LSG_TYPE";})[0].name=allCategoriesTranslation;var prependData={category:results.filter(function(item){return item.code==="LSG_TYPE";})};var appendData={category:results.filter(function(item){return item.code!=="LSG_TYPE";})};var dropdownCategories={prependData:prependData,appendData:appendData,defaultOption:prependData.category[0]};sessionStorage.setItem("dropdownCategories",JSON.stringify(dropdownCategories));}});$('#ls-select-search-by').on("mouseenter",function(){var dropdownCategories=JSON.parse(sessionStorage.getItem('dropdownCategories'));if(dropdownCategories&&$('#ls-select-search-by-list').find('li').length<=1){$("#category-item-template").tmpl(dropdownCategories.prependData).prependTo("#ls-select-search-by-list");$("#category-item-template").tmpl(dropdownCategories.appendData).appendTo("#ls-select-search-by-list");$("#ls-select-search-by").dropdown();$("#ls-select-search-by").html(dropdownCategories.defaultOption?.name+"<i class='icon-down-arrow'></i>");$("#js-site-search-input").attr("placeholder",dropdownCategories.defaultOption?.helpText);$("#ls-select-search-by").data("code",dropdownCategories.defaultOption?.code);$("#ls-select-search-by").data("newcode",dropdownCategories.defaultOption?.newCode);$("#ls-select-search-by").data("mode",dropdownCategories.defaultOption?.mode);$("#ls-select-search-by").data("text",dropdownCategories.defaultOption?.helpText);$("#ls-select-search-by").data("category-name",dropdownCategories.defaultOption?.helpText);$("#ls-select-search-by-list a").on("click",function(){$("#ls-select-search-by").html($(this).html()+"<i class='icon-down-arrow'></i>");$("#js-site-search-input").attr("placeholder",$(this).data("text"));$("#ls-select-search-by").data("code",$(this).data("code"));$("#ls-select-search-by").data("newcode",$(this).data("newcode"));$("#ls-select-search-by").data("mode",$(this).data("mode"));$("#ls-select-search-by").data("category-name",$(this).data("code")!=='LSG_TYPE'?$(this).data("category-name"):'');$(".dropdown-toggle").dropdown("toggle");});}});},bindSearchButton:function(){$(".js_search_button").on("click",function(){ACC.autocomplete.trackProductSearch();var searchOption=$("#ls-select-search-by").data();var searchTerm=encodeURIComponent($("#js-site-search-input").val().replace(/</gi,'&lt;'));var searchUrl=`/search?q=${searchTerm}${searchOption.code && searchOption.code == 'LSG_TYPE' ? `::prodcategory:${searchOption.code}` : '' }`;if(searchUrl){window.location.href=window.location.origin+searchUrl;}});},bindShowAll:function(){$('.btn-show-all-results').off();$('.btn-show-all-results').on('click',function(e){var searchOption=$("#ls-select-search-by").data();var searchTerm=encodeURIComponent($("#js-site-search-input").val().replace(/</gi,'&lt;'));var searchUrl=`/search?q=${searchTerm}${searchOption.code && searchOption.code !== 'LSG_TYPE' ? `::prodcategory:${searchOption.code}` : '' }`;if(searchUrl){window.location.href=window.location.origin+searchUrl;}});},trackProductSearch:function(){ACC.track.trackSearch();}};function showPreSearchDropdownList(){$('#ls-pre-search-dropdown-list').removeClass("hide");$('#ls-pre-search-dropdown-list').addClass("show");if($('#ls-pre-search-dropdown-list').closest(".show").length>0){ACC.autocomplete.trackProductSearch();}}
function hidePreSearchDropdownList(){$('#ls-pre-search-dropdown-list').removeClass("show");$('#ls-pre-search-dropdown-list').addClass("hide");}
function showPreSeachLoading(){$('#ls-pre-search-loading').removeClass("hide");$('#ls-pre-search-loading').addClass("show");}
function hidePreSeachLoading(){$('#ls-pre-search-loading').removeClass("show");$('#ls-pre-search-loading').addClass("hide");}
function showPreSearchDropdownListNoResult(searchMode){let jspSearchText=' "'+$("#js-site-search-input").val().replace(/</gi,'&lt;')+'"';let noResultText=$('.ls-pre-search-no-result-text');let cmsContent=$('.ls-pre-search-no-result-cms-content');var searchText=$('#searchTextContent');var searchCode=$('#searchCodeContent');const searchTextVal=searchText.val()?searchText.val().replace(/</gi,'&lt;'):'';const searchCodeVal=searchCode.val()?searchCode.val().replace(/</gi,'&lt;'):'';noResultText.empty();cmsContent.empty();if(searchMode==='code'){jspSearchText=jspSearchText+" in product code.";cmsContent.append(searchCodeVal);}else if(searchMode==='text'){jspSearchText=jspSearchText+"."
cmsContent.append(searchTextVal);}
noResultText.append(jspSearchText);$('#ls-pre-search-dropdown-list-no-result').removeClass("hide").addClass("show");if($('#ls-pre-search-dropdown-list-no-result').closest(".show").length>0){ACC.autocomplete.trackProductSearch();}}
function hidePreSearchDropdownListNoResult(){$('#ls-pre-search-dropdown-list-no-result').removeClass("show");$('#ls-pre-search-dropdown-list-no-result').addClass("hide");}
function showSearchDropdownList(){$("#ls-search-dropdown-list").removeClass("hide");$("#ls-search-dropdown-list").addClass("show");}
function hideSearchDropdownList(){$("#ls-search-dropdown-list").removeClass("show");$("#ls-search-dropdown-list").addClass("hide");}
function showSearchRecentlyList(){$(".ls-search-recent-all").removeClass("hide");$(".ls-search-recent-all").addClass("show");}
function hideSearchRecentlyList(){$(".ls-search-recent-all").removeClass("show");$(".ls-search-recent-all").addClass("hide");}
function getFragmentPreSearch(){var searchMode=$("#ls-select-search-by").data("mode");var searchCategory=$("#ls-select-search-by").data("newcode");var catCode=$("#ls-select-search-by").data("code");const searchForm=$('#searchForm');const searchUrl=searchForm.attr('action');const searchTerm=$('#js-site-search-input');const searchVal=encodeURIComponent(searchTerm.val().replace(/</gi,'&lt;'));var targetUrl=catCode==='LSG_TYPE'?`${searchUrl}?searchMode=${searchMode}&sort=relevance&${searchTerm.attr('name')}=${searchVal}`:`${searchUrl}?searchMode=${searchMode}&category=${searchCategory}&sort=relevance&${searchTerm.attr('name')}=${searchVal}`;const searchTermObject={term:searchVal,url:targetUrl,date:new Date()};addStorage('recentlySearchList',searchTermObject);hideSearchDropdownList();hidePreSearchDropdownList();hidePreSearchDropdownListNoResult();showPreSeachLoading();$.cookie(isProductTabActive,null,{path:'/'});localStorage.removeItem(searchContentURLId);$.ajax({url:searchTermObject.url,success:function(fragment){$("#ls-pre-search-dropdown-list").html(fragment);jspNumberOfProducts=$("#ls-pre-search-number-of-product").val();checkToShowPreSearchDropdown(`${searchMode}`);hidePreSeachLoading();ACC.autocomplete.bindShowAll();}});}
function checkToShowPreSearchDropdown(searchMode){if(jspNumberOfProducts>0){showPreSearchDropdownList();ACC.priceFactory.loadAsyncPrices();}
else{showPreSearchDropdownListNoResult(searchMode);}}
function getRecentlySearchTerms(){if($("#js-site-search-input").val()===""||$("#js-site-search-input").val()==='""'){$("#ls-search-dropdown-list").toggleClass("show");}else{getFragmentPreSearch();}
hidePreSearchDropdownList();hidePreSearchDropdownListNoResult();$(".ls-search-recent-list a").remove();let recentlySearchTerms=getItem('recentlySearchList').reverse();if(recentlySearchTerms.length){if($("#js-site-search-input").val()===""||$("#js-site-search-input").val()==='""'){showSearchRecentlyList();}
if(recentlySearchTerms.length>=10){let itemshow=getItem('recentlySearchList').splice(recentlySearchTerms.length-10).reverse();for(let i=0;i<itemshow.length;i++){let itemRecentSearch=decodeURIComponent(itemshow[i].term.replace(/</gi,'&lt;'));$(".ls-search-recent-list").append('<a class="lssearchitem" id="ls-search-item-'+i+'" href="#" onclick="clickSearch(this)">'+itemRecentSearch+'</a>');}}else{for(let i=0;i<recentlySearchTerms.length;i++){let itemRecentSearch=decodeURIComponent(recentlySearchTerms[i].term.replace(/</gi,'&lt;'));$(".ls-search-recent-list").append('<a class="lssearchitem" id="ls-search-item-'+i+'" href="#" onclick="clickSearch(this)">'+itemRecentSearch+'</a>');}}}
else{hideSearchDropdownList();}}
function clearAllSearch(){clearStorage('recentlySearchList');hideSearchRecentlyList();}
function clickSearch(clickClass){var idItemSearch=clickClass.id;var valueItemSearch=$("#"+idItemSearch+"").text();var itemSearchLength=valueItemSearch.length;$("#js-site-search-input").val(valueItemSearch);$("#js-site-search-input").change();$('.js_search_button').prop('disabled',false);$("#js-site-search-input").focus();$("#js-site-search-input")[0].setSelectionRange(itemSearchLength,itemSearchLength);}
function preSearchByKeyWord(e){let keyWordValue=e.text;hidePreSearchDropdownList();$("#js-site-search-input").val(keyWordValue);getFragmentPreSearch();}
$(window).click(function(){hideSearchDropdownList();hidePreSearchDropdownList();hidePreSearchDropdownListNoResult();});$(".search-box-container").click(function(e){e.stopPropagation();});$("#js-site-search-input").click(function(e){let sInputSearch=$("#js-site-search-input").val();let lensInputSearch=sInputSearch.length;if(lensInputSearch){$('.js_search_button').prop('disabled',false);}else{$('.js_search_button').prop('disabled',true);}
sInputSearch='"'+sInputSearch+'"';getRecentlySearchTerms();var $popover,$target=$(e.target);if($target.hasClass("popover")||$target.closest(".popover").length||$target.hasClass("ls-popup-outer")||$target.closest(".ls-popup-outer").length){return;}
$('[data-toggle="popover"]').each(function(){$popover=$(this);if(!$popover.is(e.target)&&$popover.has(e.target).length===0&&$(".popover").has(e.target).length===0){$popover.popover("hide");}else{$popover.popover("toggle");}});});$("#js-site-search-input").keyup(function(event){switch(event.which){case 9:return null;break;case 16:return null;break;case 17:return null;break;case 18:return null;break;case 20:return null;break;case 44:return null;break;case 255:return null;break;default:let sInputSearch=$("#js-site-search-input").val();if(sInputSearch){sInputSearch='"'+$("#js-site-search-input").val()+'"';}else{hidePreSearchDropdownListNoResult();hidePreSearchDropdownList()}}});ACC.carousel={_autoload:[["bindCarousel",$(".js-owl-carousel").length>0],"bindJCarousel","SetCarouselControlEvent"],carouselConfig:{"category":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,1],[660,2],[1320,4],[1780,4],[1919,4],[2200,5]],afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},},"video":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,2],[1068,3],[1500,4],[1780,4],[1919,4]],autoWidth:true,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"contentBlock":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,1],[660,2],[1320,3],[1780,4],[1919,4],[2200,5]],afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"product":{loop:true,navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,itemsCustom:[[0,1],[640,1],[660,2],[1320,3],[1780,4],[1919,4]],mouseDrag:false,touchDrag:false,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');if(this.$owlItems.find('.carousel__item').length>0){this.$owlItems.css('margin','0');}},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');if(this.$owlItems.find('.carousel__item').length>0){this.$owlItems.css('margin','0');}}},"recentlyViewedProduct":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,2],[640,2],[660,3],[1024,4],[1320,4],[1780,4],[1919,4],[2200,5]],mouseDrag:false,touchDrag:false,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"wishListCarousel":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon icon-arrow-wishlist'></span>","<span class='icon icon-next-circle carousel-nav-icon icon-arrow-wishlist'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,1]],afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"latestReleaseProducts":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,2],[750,2],[1290,3],[2200,4],[2800,4],[4100,5]],mouseDrag:false,touchDrag:false,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');if(this.$owlItems.find('.carousel__item').length>0){this.$owlItems.css('margin','0');}},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');if(this.$owlItems.find('.carousel__item').length>0){this.$owlItems.css('margin','0');}}},"latestReleaseCategory":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,2],[660,2],[1320,4],[1780,4],[1919,4],[2200,5]],afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"catalogue":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,1],[640,2],[660,2],[1024,3],[1320,4],[1780,4],[1919,4],[2200,5]],afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"default":{loop:true,navigation:true,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:false,itemsCustom:[[0,2],[640,4],[1024,5],[1400,7]]},"rotating-image":{loop:true,navigation:false,pagination:true,singleItem:true},"lazy-reference":{loop:true,navigation:true,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:false,itemsDesktop:[5000,7],itemsDesktopSmall:[1200,5],itemsTablet:[768,4],itemsMobile:[480,3],lazyLoad:true},"productBundles":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,2],[640,1],[660,1],[1024,2],[1320,3],[1780,3],[1919,3],[2200,3]],mouseDrag:false,touchDrag:false,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"cartBundles":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,2],[640,3],[660,3],[1024,3],[1320,4],[1780,5],[1919,5],[2200,7]],mouseDrag:false,touchDrag:false,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');}},"accordion":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,2],[640,2],[660,2],[1024,3],[1320,1],[1780,1],[1919,1],[2200,1]],mouseDrag:false,touchDrag:false,afterInit:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterUpdate:function(){this.$owlWrapper.css('display','flex');this.$owlWrapper.css('width',this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css('margin','0 auto');},afterMove:function(){if($(window).width()>=1366){this.reinit();}}},"playlist":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,2],[640,2],[660,2]],afterInit:function(){this.$owlWrapper.css("display","flex");this.$owlWrapper.css("width",this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css("margin","0 auto");},afterUpdate:function(){this.$owlWrapper.css("display","flex");this.$owlWrapper.css("width",this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css("margin","0 auto");}},"search":{navigation:true,navigationText:["<span class='icon icon-back-circle carousel-nav-icon'></span>","<span class='icon icon-next-circle carousel-nav-icon'></span>"],pagination:false,loop:true,itemsCustom:[[0,2],[420,4],[640,4],[660,5],[1320,8],[1780,8],[1919,6],[2200,6]],afterInit:function(){this.$owlWrapper.css("display","flex");this.$owlWrapper.css("width",this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css("margin","0 auto");},afterUpdate:function(){this.$owlWrapper.css("display","flex");this.$owlWrapper.css("width",this.$owlItems.width()*this.$owlItems.length);this.$owlWrapper.css("margin","0 auto");}}},bindCarousel:function(){$(".js-owl-carousel").each(function(){var $c=$(this);$.each(ACC.carousel.carouselConfig,function(key,config){if($c.hasClass("js-owl-"+key)){var $e=$(document).find(".js-owl-"+key);$e.owlCarousel(config);}});});},bindJCarousel:function()
{$('.svw').each(function(){$(this).waitForImages(function(){$(this).slideView({toolTip:true,ttOpacity:0.6,autoPlay:true,autoPlayTime:8000});});});},SetCarouselControlEvent:function(position,color){$("#ls-hero-banner-left-control").mouseover(function(){let mouseOverColor=$(this).attr("data-mouseOverColor");let carouselControlIcon=$(this).find(".icon");ACC.carousel.SetCarouselControlColor(carouselControlIcon,mouseOverColor);})
$("#ls-hero-banner-left-control").mouseout(function(){let mouseOutColor=$(this).attr("data-mouseOutColor");let carouselControlIcon=$(this).find(".icon");ACC.carousel.SetCarouselControlColor(carouselControlIcon,mouseOutColor);})
$("#ls-hero-banner-right-control").mouseover(function(){let mouseOverColor=$(this).attr("data-mouseOverColor");let carouselControlIcon=$(this).find(".icon");ACC.carousel.SetCarouselControlColor(carouselControlIcon,mouseOverColor);})
$("#ls-hero-banner-right-control").mouseout(function(){let mouseOutColor=$(this).attr("data-mouseOutColor");let carouselControlIcon=$(this).find(".icon");ACC.carousel.SetCarouselControlColor(carouselControlIcon,mouseOutColor);})},SetCarouselControlColor:function(carouselControlIcon,color){carouselControlIcon.css("color",color);}};ACC.cart={_autoload:["bindHelp","cartRestoration","bindCartPage","bindMultiDEntryRemoval","bindMultidCartProduct",["bindApplyVoucher",$("#js-voucher-apply-btn").length!=0],["bindToReleaseVoucher",$("#js-applied-vouchers").length!=0],["bindAutoComplete",$(".js-cart-location-select").length!=0]],bindHelp:function(){ACC.cart.hideEaUomCart();ACC.cart.getDefaultOption();var isCheckout=$(".js-cart-totals").data("checkout-flg");isCheckout=isCheckout!=undefined?isCheckout:true;ACC.minicart.isMaximunQty=!isCheckout;var maxQuantity=$(".js-cart-totals").data("max-quantity-order");var itemsAdded=$(".ls-header-container-cart-page").find(".ls-cart-item");ACC.cart.setCheckoutButtonState();if(itemsAdded.length>0){for(var i=0;i<itemsAdded.length;i++){var quantity=(+$(itemsAdded[i]).find(".js-qty-selector-input").val());if(quantity>maxQuantity){$(".js-cart-totals").find(".view-cart-product-price-empty").closest(".maximum-error").show();$(".ls-btn-checkout").find(".js-to-checkout-btn").attr("disabled",true);break;}}}
$(document).on("click",".js-cart-help",function(e){e.preventDefault();var title=$(this).data("help");ACC.colorbox.open(ACC.common.encodeHtml(title),{html:$(".js-help-popup-content").text(),width:"300px"});})},cartRestoration:function(){$('.cartRestoration').click(function(){var sCartUrl=$(this).data("cartUrl");window.location=sCartUrl;});},bindCartPage:function(){$(document).on("click",'.js-show-editable-grid',function(event){ACC.cart.populateAndShowEditableGrid(this,event);});},bindMultiDEntryRemoval:function(){$(document).on("click",'.js-submit-remove-product-multi-d',function(){var itemIndex=$(this).data("index");var $form=$(document).find('#updateCartForm'+itemIndex);var initialCartQuantity=$form.find('input[name=initialQuantity]');var cartQuantity=$form.find('input[name=quantity]');var entryNumber=$form.find('input[name=entryNumber]').val();var productCode=$form.find('input[name=productCode]').val();cartQuantity.val(0);initialCartQuantity.val(0);var method=$form.attr("method")?$form.attr("method").toUpperCase():"GET";$.ajax({url:$form.attr("action"),data:$form.serialize(),type:method,dataType:"text",success:function(data){location.reload();},error:function(){console.log("Failed to remove quantity. Error details ["+xht+", "+textStatus+", "+ex+"]");}});});},populateAndShowEditableGrid:function(element,event){var readOnly=$(element).data("readOnlyMultidGrid");var itemIndex=$(element).data("index");grid=$(document).find("#ajaxGrid"+itemIndex);var gridEntries=$(document).find('#grid'+itemIndex);var strSubEntries=gridEntries.data("sub-entries");var arrSubEntries=strSubEntries.split(',');var firstVariantCode=arrSubEntries[0].split(':')[0];$(element).toggleClass('open');var targetUrl=gridEntries.data("target-url");var mapCodeQuantity=new Object();for(var i=0;i<arrSubEntries.length;i++){var arrValue=arrSubEntries[i].split(":");mapCodeQuantity[arrValue[0]]=arrValue[1];}
if(grid.children('#cartOrderGridForm').length>0){grid.slideToggle("slow");}
else{var method="GET";$.ajax({url:targetUrl,data:{productCode:firstVariantCode,readOnly:readOnly},type:method,dataType:'html',success:function(data){grid.html(data);$("#ajaxGrid").removeAttr('id');var $gridContainer=grid.find(".product-grid-container");var numGrids=$gridContainer.length;for(var i=0;i<numGrids;i++){ACC.cart.getProductQuantity($gridContainer.eq(i),mapCodeQuantity,i);}
grid.slideDown("slow");ACC.cart.coreCartGridTableActions(element,mapCodeQuantity);ACC.productorderform.coreTableScrollActions(grid.children('#cartOrderGridForm'));},error:function(xht,textStatus,ex){console.log("Failed to get variant matrix. Error details ["+xht+", "+textStatus+", "+ex+"]");}});}},coreCartGridTableActions:function(element,mapCodeQuantity){ACC.productorderform.bindUpdateFutureStockButton(".update_future_stock_button");ACC.productorderform.bindVariantSelect($(".variant-select-btn"),'cartOrderGridForm');var itemIndex=$(element).data("index");var skuQuantityClass='.sku-quantity';var quantityBefore=0;var grid=$(document).find('#ajaxGrid'+itemIndex+" .product-grid-container");grid.on('focusin',skuQuantityClass,function(event){quantityBefore=jQuery.trim(this.value);$(this).parents('tr').next('.variant-summary').remove();if($(this).parents('table').data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=$(this).parents('table').data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
if(quantityBefore==""){quantityBefore=0;this.value=0;}});grid.on('focusout keypress',skuQuantityClass,function(event){var code=event.keyCode||event.which||event.charCode;if(code!=13&&code!=undefined){return;}
var quantityAfter=0;var gridLevelTotalPrice="";var indexPattern="[0-9]+";var currentIndex=parseInt($(this).attr("id").match(indexPattern));this.value=ACC.productorderform.filterSkuEntry(this.value);quantityAfter=jQuery.trim(this.value);var variantCode=$(document).find("input[id='cartEntries["+currentIndex+"].sku']").val();if(isNaN(jQuery.trim(this.value))){this.value=0;}
if(quantityAfter==""){quantityAfter=0;this.value=0;}
var $gridTotalValue=grid.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");var currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();if(quantityAfter>0){gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityAfter));}
$gridTotalValue.text(gridLevelTotalPrice);var _this=this;var priceSibling=$(this).siblings('.price');var propSibling=$(this).siblings('.variant-prop');var currentSkuId=$(this).next('.td_stock').data('sku-id');var currentBaseTotal=$(this).siblings('.data-grid-total');if(this.value!=quantityBefore){var newVariant=true;ACC.productorderform.selectedVariants.forEach(function(item,index){if(item.id===currentSkuId){newVariant=false;if(_this.value==='0'||_this.value===0){ACC.productorderform.selectedVariants.splice(index,1);}else{ACC.productorderform.selectedVariants[index].quantity=_this.value;ACC.productorderform.selectedVariants[index].total=ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal);}}});if(newVariant&&this.value>0){ACC.productorderform.selectedVariants.push({id:currentSkuId,size:propSibling.data('variant-prop'),quantity:_this.value,total:ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)});}}
ACC.productorderform.showSelectedVariant($(this).parents('table'));if(this.value>0&&this.value!=quantityBefore){$(this).parents('table').addClass('selected');}else{if(ACC.productorderform.selectedVariants.length===0){$(this).parents('table').removeClass('selected').find('.variant-summary').remove();}}
if(quantityBefore!=quantityAfter){var method="POST";$.ajax({url:ACC.config.encodedContextPath+'/cart/updateMultiD',data:{productCode:variantCode,quantity:quantityAfter,entryNumber:-1},type:method,success:function(data,textStatus,xhr){ACC.cart.refreshCartData(data,-1,quantityAfter,itemIndex);mapCodeQuantity[variantCode]=quantityAfter;},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});}});},refreshCartData:function(cartData,entryNum,quantity,itemIndex){if(cartData.entries.length==0){location.reload();}
else{var form;if(entryNum==-1)
{form=$(document).find('.js-qty-form'+itemIndex);var productCode=form.find('input[name=productCode]').val();var quantity=0;var entryPrice=0;for(var i=0;i<cartData.entries.length;i++){var entry=cartData.entries[i];if(entry.product.code==productCode){quantity=entry.quantity;entryPrice=entry.totalPrice;ACC.cart.updateEntryNumbersForCartMenuData(entry);break;}}
if(quantity==0){location.reload();}
else{form.find(".qtyValue").text(quantity);form.parent().parent().find(".js-item-total").text(entryPrice.formattedValue);}}
ACC.cart.refreshCartPageWithJSONResponse(cartData);}},refreshCartPageWithJSONResponse:function(cartData){ACC.minicart.updateMiniCartDisplay();$('.js-cart-top-totals').text($("#cartTopTotalSectionTemplate").tmpl(cartData));$('div .cartpotproline').remove();$('div .cartproline').remove();$('.js-cart-totals').remove();$('#ajaxCartPotentialPromotionSection').text($("#cartPotentialPromotionSectionTemplate").tmpl(cartData));$('#ajaxCartPromotionSection').text($("#cartPromotionSectionTemplate").tmpl(cartData));$('#ajaxCart').text($("#cartTotalsTemplate").tmpl(cartData));ACC.quote.bindQuoteDiscount();},updateEntryNumbersForCartMenuData:function(entry){var entryNumbers="";$.each(entry.entries,function(index,subEntry){if(index!=0){entryNumbers=entryNumbers+";";}
entryNumbers=entryNumbers+subEntry.entryNumber;});$('.js-execute-entry-action-button').data('actionEntryNumbers',entryNumbers);},getProductQuantity:function(gridContainer,mapData,i){var tables=gridContainer.find("table");$.each(tables,function(index,currentTable){var skus=jQuery.map($(currentTable).find("input[type='hidden'].sku"),function(o){return o.value});var quantities=jQuery.map($(currentTable).find("input[type='textbox'].sku-quantity"),function(o){return o});var selectedVariants=[];$.each(skus,function(index,skuId){var quantity=mapData[skuId];if(quantity!=undefined){quantities[index].value=quantity;var indexPattern="[0-9]+";var currentIndex=parseInt(quantities[index].id.match(indexPattern));var gridTotalValue=gridContainer.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");var gridLevelTotalPrice="";var currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();if(quantity>0){gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantity));}
gridTotalValue.text(gridLevelTotalPrice);selectedVariants.push({id:skuId,size:$(quantities[index]).siblings('.variant-prop').data('variant-prop'),quantity:quantity,total:gridLevelTotalPrice});}});if(selectedVariants.length!=0){$.tmpl(ACC.productorderform.$variantSummaryTemplate,{variants:selectedVariants}).appendTo($(currentTable).addClass('selected'));$(currentTable).find('.variant-summary .variant-property').text($(currentTable).find('.variant-detail').data('variant-property'));$(currentTable).data(ACC.productorderform.selectedVariantData,selectedVariants);}});},bindMultidCartProduct:function(){$(document).on("click",'.showQuantityProduct',function(event){ACC.multidgrid.populateAndShowGrid(this,event,true);});$(document).on("click",'.showQuantityProductOverlay',function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event);});},bindApplyVoucher:function(){$("#js-voucher-apply-btn").on("click",function(e){ACC.cart.handleApplyVoucher(e);});$("#js-voucher-code-text").on("keypress",function(e){var code=(e.keyCode?e.keyCode:e.which);if(code==13){ACC.cart.handleApplyVoucher(e);}});},handleApplyVoucher:function(e){var voucherCode=$.trim($("#js-voucher-code-text").val());if(voucherCode!=''&&voucherCode.length>0){$("#applyVoucherForm").submit();}},bindToReleaseVoucher:function(){$('.js-release-voucher-remove-btn').on("click",function(event){$(this).closest('form').submit();});},showCartTooltip:function(totalProduct,productCode){var favoritesChecked=$(".ls-product-checked:checked");var checkedImage=favoritesChecked.closest(".product-component").find("img.product-img");var productImages=(!productCode&&favoritesChecked.length===1)?checkedImage:$('.product-component[data-product-code="'+productCode+'"] img.product-img');if(productImages.length>0){if(window.parent.length>0){var tooltip=window.parent.$('.cart-tooltip-single');var imgSrc=productImages[0].src;tooltip.find('img')[0].src=imgSrc;tooltip.find('.added-quantity').text(totalProduct);tooltip.removeClass('hidden');setTimeout(function(){tooltip.addClass('hidden');tooltip.find('img')[0].src='';},3000);}else{var tooltip=$('.cart-tooltip-single');var imgSrc=productImages[0].src;tooltip.find('img')[0].src=imgSrc;tooltip.find('.added-quantity').text(totalProduct);tooltip.removeClass('hidden');setTimeout(function(){tooltip.addClass('hidden');tooltip.find('img')[0].src='';},3000);}}else{if(window.parent.length>0){var tooltipMultiple=window.parent.$('.cart-tooltip-multiple');tooltipMultiple.find('.added-quantity').text(totalProduct);tooltipMultiple.removeClass('hidden');setTimeout(function(){tooltipMultiple.addClass('hidden');},3000);}
else{var tooltipMultiple=$('.cart-tooltip-multiple');tooltipMultiple.find('.added-quantity').text(totalProduct);tooltipMultiple.removeClass('hidden');setTimeout(function(){tooltipMultiple.addClass('hidden');},3000);}}
window.scrollTo(0,0);},hideEaUomCart:function(){itemList=$(".uom-selector").find(".js-select-uom");itemList.each(function(){ACC.product.hideEaUom($(this).find("option"));})},bindAutoComplete:function(){var googleApiSrc='//maps.googleapis.com/maps/api/js?key='+
ACC.common.encodeHtml(ACC.config.googleApiKey)+'&libraries=places&callback=ACC.cart.initAutoComplete';$('head').append($('<script>').addClass('js-googlePlaceAPI-cart').attr('type','text/javascript').attr('src',googleApiSrc));},initAutoComplete:function(){var options={componentRestrictions:{country:'AU'},strictBounds:false,fields:['geometry'],types:['(regions)']};var autocomplete=new google.maps.places.Autocomplete(document.getElementById('cart-location-select'),options);google.maps.event.addListener(autocomplete,'place_changed',function(){var location=autocomplete.getPlace();if(!location.geometry){if($('.js-cart-location-alert').length<1){var emptySearchMessage=$('#cart-location-select').data('searchEmpty');$('.ls-cart-header').before($('<div>').addClass('js-cart-location-alert alert alert-danger alert-dismissable getAccAlert').text(emptySearchMessage).append($('<button>').addClass('close closeAccAlert').attr('type','button').attr('data-dismiss','alert').attr('aria-hidden','true').text('x')));$('.closeAccAlert').on('click',function(){$(this).parent('.getAccAlert').remove();});}
return;}
var geometry={latitude:location.geometry.location.lat(),longitude:location.geometry.location.lng()};ACC.productDetail.saveLocation(geometry,true);});},getDefaultOption:function(){var item=$(".ls-cart-item");item.each(function(){var defaultUnit=$(this).data("value");var optionList=$(this).find(".js-select-uom").find("option");ACC.product.removeEaOption(defaultUnit,optionList);})},setCheckoutButtonState:function(){var isEmpty=$(".ls-header-container-cart-page").find('.product-component').length===0;var obsolete=$(".ls-header-container-cart-page").find('.product-component').filter(function(){if((!$(this).data('obsolete')&&$(this).data('replacement'))||$(this).data('obsolete'))
return $(this);}).length>0;var noPrice=$(".ls-header-container-cart-page").find('.product-component').filter(function(){if(+$(this).data('entry-amount')===0||$(this).data('entry-amount')==='0.0'||$(this).find(".ls-view-cart-price").text().trim()=='$0.00'||$(this).find(".ls-view-cart-price").text().trim()=='...')
{const isGiveAway=$(this).data('give-away');return $(this)&&!isGiveAway;}}).length>0;if(isEmpty||obsolete||noPrice){$(".ls-btn-checkout").find(".js-to-checkout-btn").attr("disabled",true);}else{$(".ls-btn-checkout").find(".js-to-checkout-btn").attr("disabled",false);}}};ACC.cartitem={_autoload:["bindCartItem",['removeCartItem',$(".js-remove-cart-items").length!==0],'updateQtyItem','handleUnitCartItem','replacementProductInCart',"bindCloneCartItem"],submitTriggered:false,isClose:false,removeCartUrl:'/cart/entry/execute/REMOVE',updateQtyItem:'/cart/update',updateCart:'/cart/updatecart',addToCart:'/cart/add',addToCartBtn:'.btn .btn-primary .ls-button .js-add-to-cart .js-enable-btn .btn-large2 .addToCartButton',handleAddToCart:false,entryNumberReplace:'',timeoutToTriggerUpdateCart:300,currentTimeoutCartUpdateFunction:[],pendingCartUpdateRequest:0,cartItemClonePrefix:'CLONEFROMLS',bindCartItem:function(){$('.js-update-jobReference').on("change",function(e){$(".js-update-jobReference").attr("disabled","disabled").addClass("disabled");ACC.cartitem.updateJobReference(this,e);}).on("keyup",function(e){return ACC.cartitem.handleKeyEvent(this,e);}).on("keydown",function(e){return ACC.cartitem.handleKeyEvent(this,e);});$(document).on("click",".ls-cart-item .btn-view-replacement",function(e){var $modal=$("<div>",{class:"ls-popup-outer"});var $modalInner=$("<div>",{class:"ls-popup-inner"});var $modalContent=$("<div>",{class:"ls-popup-content product-replacement-popup",});var $close=$("<div>",{class:"ls-popup-close-container"}).html('<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>');var $content=$("<div>",{class:"ls-popup-data"}).append($($(e.target).parents("div").find(".product-replacement-container")[0]).clone());$modalContent.append($content);$modalContent.append($close);$modalInner.append($modalContent);$modal.append($modalInner);$("body").append($modal);$("body").addClass("ls-popup-open");ACC.cartitem.handleAddToCart=true;var item=$(this).closest(".ls-cart-item");ACC.cartitem.entryNumberReplace=item[0].attributes.getNamedItem('data-entry-number').value;});},handleKeyEvent:function(elementRef,event){if(event.which==13&&!ACC.cartitem.submitTriggered){$(".js-update-jobReference").attr("disabled","disabled").addClass("disabled");ACC.cartitem.updateJobReference(elementRef,event);return false;}else{if(ACC.cartitem.submitTriggered){return false;}}
return true;},handleUpdateQuantity:function(elementRef,event){var form=$(elementRef).closest('form');var initialCartQuantity=form.find('input[name=initialQuantity]').val();var newCartQuantity=form.find('input[name=quantity]').val();if(initialCartQuantity!==newCartQuantity){form.submit();return true;}
return false;},removeCartItem:function(){$(".js-remove-cart-items").not(".js-remove-blum-item").on("click",function(){var entryNumber=$(this).closest('.product-component').data("entry-number");var productCode=$(this).closest('.product-component').data("product-code");var entryInitialQuantity=$(this).closest('.product-component').data("entry-initial-quantity");var loadingAnimator=$(this).find('.ls-animate-spin');var removeIndicator=$(this).find('.remove-cart');var data={entryNumbers:entryNumber};var trackingData={productCode:productCode,quantity:Number(entryInitialQuantity),position:entryNumber};loadingAnimator.removeClass('hidden');removeIndicator.addClass('hidden');var optionRemoveCart={url:ACC.cartitem.removeCartUrl,data:data,type:'POST',beforeSend:function(){ACC.track.productRemoved(trackingData);},success:function(data,status,xhr){location.reload();},error:function(xhr,status,error){loadingAnimator.addClass('hidden');removeIndicator.removeClass('hidden');}};$.ajax(optionRemoveCart);});},updateCartItemCallback:function(arg,entryNumber,callback){if(this.currentTimeoutCartUpdateFunction[entryNumber]!=null){clearTimeout(this.currentTimeoutCartUpdateFunction[entryNumber]);}
this.currentTimeoutCartUpdateFunction[entryNumber]=setTimeout(callback,this.timeoutToTriggerUpdateCart);},updateQtyItem:function(){$(document).on("click",".ls-qty-content .btn-number",function(e){const item=$(this).closest(".product-component");this.updateCartItemCallback(e,item.data("entry-number"),function(){e.preventDefault();var fieldName=$(this).attr("data-field");var type=$(this).attr("data-type");var input=$("input[name='"+fieldName+"']");var value=parseInt(input.val());if(!isNaN(value)){if(type==="minus"){if(value>input.attr("min")){input.val(value-1).change();}
if(parseInt(input.val())===parseInt(input.attr("min"))){$(this).attr("disabled",true);}}else if(type==="plus"){input.val(value+1).change();}}else{input.val(parseInt(input.attr("min"))).change();}})});},handleUnitCartItem:function(){$(document).on("change",".header5 .js-select-uom",function(){let selector=$(this).closest(".ls-cart-item").find('.js-qty-selector .js-qty-selector-input');if($.isFunction(ACC.productDetail.updateUnitSelectionForCartPage)&&$.isFunction(ACC.productDetail.checkQtySelector)){var conversion=$(this).find(':selected').data('conversion');ACC.productDetail.updateUnitSelectionForCartPage(this,$(this).val(),parseFloat(conversion));ACC.productDetail.checkQtySelector(selector,"init");}
ACC.cartitem.updateCartItem(this);});},updateJobReference:function(elementRef,event){ACC.cartitem.updateCartItem(elementRef,undefined,true);},replacementProductInCart:function(){$(document).on("click",'.page-cartPage .ls-primary-button.js-add-to-cart',function(e){if(ACC.cartitem.handleAddToCart){e.preventDefault();const item=$(this).closest('.product-component');const productCodePost=$(item).data('product-code');const qty=item.find('.qty.js-qty-selector-input').val();const uomCode='';const data={productCodePost:productCodePost,qty:qty,uomCode:uomCode,}
const options={url:ACC.cartitem.addToCart,data:data,type:'POST',success:function(data,status,xhr){ACC.cartitem.closePopUpAddToCart(status);},error:function(xhr,status,error){console.log('error')}};$.ajax(options);}});},closePopUpAddToCart:function(status){if(status==='success'){$('.ls-popup-outer').remove();document.body.classList.remove('ls-popup-open');if(ACC.cartitem.entryNumberReplace!=undefined||ACC.cartitem.entryNumberReplace!=''){const data={entryNumbers:ACC.cartitem.entryNumberReplace};$.post(ACC.cartitem.removeCartUrl,data,undefined,'html').done(function(result,data,status){location.reload();}).fail(function(error){});}}},updateCartItem:function(itemElement,inputVal,isJobReferenceUpdate){if(itemElement!=undefined){const item=$(itemElement).closest(".product-component");const isCloneItem=(item.find('input[name=jName]').data('entry-value')||'').toString().startsWith(ACC.cartitem.cartItemClonePrefix);const data={entryNumber:item.data("entry-number"),productCode:item.data("product-code"),initialQuantity:item.data("entry-initial-quantity"),quantity:item.find('.pdp-quantity-input').val(),unit:item.find('.js-select-uom').val(),jobReference:isCloneItem&&!isJobReferenceUpdate?item.find('input[name=jName]').data('entry-value')||'':item.find('input[name=jName]').val()};var value=inputVal;var unitValue=item.find(".js-select-uom").val();var inputChange=item.find(".product-quantity-selector-content").find(".js-qty-selector").find(".js-qty-selector-input");var checkOrderIncrement=/(of 100)/g.test(item.text());if(checkOrderIncrement&&!value){var valueOder=unitValue=="EA"?ACC.expresscart.orderIncrement.EA:1;inputChange.val(valueOder);}else{inputChange.val(value);}
this.updateCartItemCallback(itemElement,data.entryNumber,function(){$(item).find(".promotion-price").html('<div class="loading"><span class="icon-f icon-f-spinner3 ls-animate-spin"></span></div>');$(item).find(".sub-total").text("...");$.ajax({url:ACC.cartitem.updateCart,data:data,type:"post",beforeSend:function(){ACC.cartitem.pendingCartUpdateRequest++;},success:function(response){$(item).find(".promotion-price").text(response.basePrice.formattedValue);$(item).find(".sub-total").text(response.itemPrice.formattedValue);},complete:function(){ACC.cartitem.pendingCartUpdateRequest--;if(ACC.cartitem.pendingCartUpdateRequest<=0){ACC.checkout.qtyTarget=null;var quantity=+$(item).find(".js-qty-selector-input").val();if(ACC.checkout.isCheckoutChange&&quantity<=25000){ACC.checkout.isCheckoutChange=false;ACC.checkout.bindCheckoutButton();}else{location.reload();}}}});})}},bindCloneCartItem:function(){$(document).on('click','.js-clone-cart-item',function(e){const productComponent=$(e.target).closest('.product-component');ACC.cartitem.cloneCartEntry(productComponent);});},showCloneCartLoading:function(productComponent){$(productComponent).find('.js-clone-cart-item .clone-cart-item').addClass('hidden');$(productComponent).find('.js-clone-cart-item .ls-animate-spin').removeClass('hidden');},cloneCartEntry:function(productComponent){const moq=productComponent.find('.js-qty-selector-input')?.data('min')||1;const stepSelector=productComponent.find('.uomStep');const roundingStep=stepSelector.data('step')||1;const roundingConversion=stepSelector?.data('roundingconversion');const defaultConversion=parseFloat(stepSelector.data("defaultconversion"))||1;const rule=stepSelector?.data('roundingrule')||'none';let step;let conversion=defaultConversion;if(rule!=='none'){step=parseFloat(roundingConversion);}else{const roundingUom=stepSelector?.data('roundinguom');if(roundingUom!=='none'){conversion=stepSelector?.data("conversion")}
step=conversion*roundingStep;}
const moqStep=ACC.productDetail.calculateStep(defaultConversion,step);const modular=moq%moqStep;const data={productCodePost:productComponent.data('product-code')||productComponent.data('entry-product-code'),qty:modular!==0?moq+(moqStep-modular):moq,jobReference:ACC.cartitem.cartItemClonePrefix,uomCode:productComponent.data('entry-unit')||productComponent.data('uom-code'),CSRFToken:ACC.config.CSRFToken,};$.ajax({url:ACC.cartitem.addToCart,data:data,type:"POST",beforeSend:function(){ACC.cartitem.showCloneCartLoading(productComponent);ACC.minicart.setCheckoutButtonState();},success:function(){ACC.cartitem.handleCartItemCloneResponse(productComponent);},error:function(e){ACC.cartitem.handleCartItemCloneResponse(productComponent);}});},handleCartItemCloneResponse:function(productComponent){if(productComponent.closest('.mini-cart__item').length>0){ACC.minicart.updateMiniCartDisplay(true);}else{window.location.reload();}}};$(document).ready(function(){$('.js-cartItemDetailBtn').click(function(event){event.stopPropagation();var thisDetailGroup=$(this).parent('.js-cartItemDetailGroup');$(thisDetailGroup).toggleClass('open');if($(thisDetailGroup).hasClass('open')){$('.js-cartItemDetailGroup').not(thisDetailGroup).removeClass('open');$('.js-cartItemDetailBtn').attr('aria-expanded','true');}else{$('.js-cartItemDetailBtn').attr('aria-expanded','false');}
$(document).click(function(){$(thisDetailGroup).removeClass('open');});});$('.js-entry-comment-button').click(function(event){event.preventDefault();const linkID=$(this).attr('href');$(linkID).toggleClass('in');$(thisDetailGroup).removeClass('open');});$('.js-remove-all-cart').click(function(event){const removeAllCartAction=$('#removeAllCartAction')
const cartEntries=$(this).data('entryItems')
const cartEntryItems=cartEntries.toString().split(';');cartEntryItems.forEach(function(entryNumber){const entryNumbersInput=$("<input>").attr("type","hidden").attr("name","entryNumbers").val(entryNumber);removeAllCartAction.append($(entryNumbersInput))});var products=[];const trackEntryItems=$(".ls-cart-item").closest(".ls-product-show-info").closest(".product-component-cart-stock-live-call");trackEntryItems.each(function(e){var product=ACC.product.handleTrackingData($(this),"cart-remove");products.push(product);});var trackingData={"cart_id":$(".js-cart-totals").data('cart-code')||"","products":products,"subtotal":$(".js-cart-totals").data("sub-total")}
ACC.track.allProductRemoved(trackingData);removeAllCartAction.submit();});var uomInput=$('.header5 .js-select-uom');uomInput.each(function(){var selector=$(this).closest(".ls-cart-item").find('.js-qty-selector .js-qty-selector-input');var selectorParent=selector.closest(".ls-cart-item");var step=selectorParent.find(".uomStep");if(step.length!=0&&selector.length!=0){let conversion=$(this).find(':selected').data("conversion");ACC.productDetail.updateUnitSelectionForCartPage($(this),$(this).val(),parseFloat(conversion));selector.find(".min-order-info .min-order").first().html(selector.val());};});});ACC.checkout={_autoload:['bindCheckO','bindForms','bindSavedPayments','getDataQtyInput',['bindNonePayment',$('.js-stripe-payment').length===0],['bindStripe',$('.js-stripe-payment').length!==0],['scrollToStripeError',$('.js-stripe-payment').length!==0],['bindGuestOrderMessage',$('.checkout-success.ls-order-confirm-container').length>0&&$('.guest-order-notice').length>0],['bindCheckoutMiniCart',$(".js-mini-cart-link").length>0&&$(".checkout-order-summary-list-items").length>0],['bindToCheckout',$('.page-cartPage').length>0]],qtyTarget:null,isCheckoutChange:false,bindForms:function(){$(document).on("click","#addressSubmit",function(e){e.preventDefault();$("#addressForm").submit();});$(document).on("click","#deliveryMethodSubmit",function(e){e.preventDefault();$("#selectDeliveryMethodForm").submit();});},bindSavedPayments:function(){$(document).on("click",".js-saved-payments",function(e){e.preventDefault();var title=$("#savedpaymentstitle").html();$.colorbox({href:"#savedpaymentsbody",inline:true,maxWidth:"100%",opacity:0.7,title:title,close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){},});});},bindCheckO:function(){ACC.checkout.setupAlgoliaCheckoutObject();var cartEntriesError=false;$(".doFlowSelectedChange").change(function(){if("multistep-pci"==$("#selectAltCheckoutFlow").val()){$("#selectPciOption").show();}else{$("#selectPciOption").hide();}});$(".js-continue-shopping-button").click(function(){var checkoutUrl=$(this).data("continueShoppingUrl");window.location=checkoutUrl;});$(".js-create-quote-button").click(function(){$(this).prop("disabled",true);var createQuoteUrl=$(this).data("createQuoteUrl");window.location=createQuoteUrl;});$(".expressCheckoutButton").click(function(){document.getElementById("expressCheckoutCheckbox").checked=true;});$(document).on("input",".confirmGuestEmail,.guestEmail",function(){var orginalEmail=$(".guestEmail").val();var confirmationEmail=$(".confirmGuestEmail").val();if(orginalEmail===confirmationEmail){$(".guestCheckoutBtn").removeAttr("disabled");}else{$(".guestCheckoutBtn").attr("disabled","disabled");}});$(".js-continue-checkout-button").click(function(e){localStorage.setItem("source_sm","Cart");ACC.checkout.isCheckoutChange=true;var checkoutUrl=$(this).data("checkoutUrl");cartEntriesError=ACC.pickupinstore.validatePickupinStoreCartEntires();if(ACC.track.isCheckPrice){$(".js-continue-checkout-button").attr("disabled",true);e.preventDefault();return;}
if(!cartEntriesError){localStorage.setItem("isCheckoutStarted",true);localStorage.setItem("cartId",$(".js-cart-totals").data("cart-code"));var expressCheckoutObject=$(".express-checkout-checkbox");if(expressCheckoutObject.is(":checked")){window.location=expressCheckoutObject.data("expressCheckoutUrl");}else{var flow=$("#selectAltCheckoutFlow").val();if(flow==undefined||flow==""||flow=="select-checkout"){if(ACC.checkout.qtyTarget){var value=(+ACC.checkout.qtyTarget.val());ACC.cartitem.updateCartItem(ACC.checkout.qtyTarget,value);}else{window.location.href=checkoutUrl;}}else{if("multistep-pci"==flow){flow="multistep";}
var pci=$("#selectPciOption").val();var redirectUrl=checkoutUrl+"/select-flow?flow="+flow+"&pci="+pci;window.location=redirectUrl;}}}});},bindNonePayment:function(){$(document).on("click","#ls-btn-place-order",function(){ACC.checkout.getOrderCreatedInfo();$("#ls-btn-place-order").attr("disabled",true);if($("input[type=radio][name=delivery-option]:checked").val()==="future-date"&&$("#ls-order-delivery-options-datepicker-input").val()===""){$(".delivery-options-datepicker-validation").show();return;}
var form=$("#placeOrderForm1");if(form.length){form.submit();}});},bindStripe:function(){var stripePublicKey=$("input[name=stripePublicKey]").val();var stripe=Stripe(stripePublicKey);var elements=stripe.elements();var style={base:{color:"#000000",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"14px",":-webkit-autofill":{color:"#757575",},"::placeholder":{color:"#757575",},},invalid:{fontFamily:"Arial, sans-serif",color:"#fa755a",iconColor:"#fa755a",},};var cardNumberElement=elements.create("cardNumber",{style:style,placeholder:"Card number",});cardNumberElement.mount("#card-number-element");var cardExpiryElement=elements.create("cardExpiry",{style:style,placeholder:"Exp. date (MM / YY)",});cardExpiryElement.mount("#card-expiry-element");var cardCvcElement=elements.create("cardCvc",{style:style,placeholder:"Security code",});cardCvcElement.mount("#card-cvc-element");var setOutcome=function(result){var errorElement=document.querySelector(".error");var backendErrorElement=document.querySelector(".backend-error");errorElement.classList.remove("visible");if(backendErrorElement){backendErrorElement.innerText="";}
if(result.paymentMethod&&result.paymentMethod.id){var form=document.querySelector("#placeOrderForm1");form.querySelector('input[name="paymentMethodId"]').setAttribute("value",result.paymentMethod.id);form.submit();}else if(result.error){errorElement.textContent=result.error.message;errorElement.classList.add("visible");$('#ls-btn-complete-order').prop('disabled',false);document.querySelector(".spinner").style.visibility="hidden";}};var nameElement=document.getElementById("name-element");nameElement.addEventListener("input",function(){var errorElement=document.querySelector(".error");errorElement.classList.remove("visible");if(!this.value){errorElement.textContent="You must enter Name on card.";errorElement.classList.add("visible");}});cardNumberElement.on("change",function(event){setOutcome(event);});cardExpiryElement.on("change",function(event){setOutcome(event);});cardCvcElement.on("change",function(event){setOutcome(event);});document.querySelector("#placeOrderForm1").addEventListener("submit",function(e){e.preventDefault();});document.querySelector("#payment-form").addEventListener("submit",function(e){e.preventDefault();ACC.checkout.getOrderCreatedInfo();if($("input[type=radio][name=delivery-option]:checked").val()==="future-date"&&$("#ls-order-delivery-options-datepicker-input").val()===""){$(".delivery-options-datepicker-validation").show();return;}
var name=document.getElementById("name-element").value;if(!name){var errorElement=document.querySelector(".error");errorElement.textContent="You must enter Name on card.";errorElement.classList.add("visible");return;}
document.querySelector(".spinner").style.visibility="visible";$('#ls-btn-complete-order').prop('disabled',true);stripe.createPaymentMethod({type:"card",card:cardNumberElement,billing_details:{name:name,},}).then(onAfterPaymentCreated);});function onAfterPaymentCreated(event){setOutcome(event);ACC.track.trackPaymentInfoEntered();}},getOrderCreatedInfo:function(){var deliveryOption=$(".delivery-options-radio-group").find("input[name=delivery-option]:checked").val().split("-").join(" ").trim();var products=[];$(".checkout-order-summary-list-items").find(".product-component").each(function(index,item){var product=ACC.product.handleTrackingData($(item),"complete-order");products.push(product);});var deliveryDate="";if($("input[name=preferDeliveryDate]").val()){var date=new Date($("input[name=preferDeliveryDate]").val());deliveryDate=date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();}
if($('.js-header-session-timeout').length>0){var pickupBranch=$("#pickup_address").val();var pickupBranchList=[];$("#pickup_address").find("option").closest(".ls-address-option").each(function(index,item){pickupBranchList.push([$(item).val().trim(),$(item).text().trim()]);})
for(var i=0;i<pickupBranchList.length;i++){for(var j=0;j<pickupBranchList[i].length;j++){if(pickupBranchList[i][j]==pickupBranch){pickupBranch=pickupBranchList[i][j+1];break;}}}
var address=$("#delivery_address").find(".ls-address-option").text().trim();var shipping=+$("#ls-freight-container").find(".shipping-tax-sm").text().trim().replace("$","");var tax=Number($("#taxAmount").find("span").text().trim().replace(/[^0-9.-]+/g,""));}else{if($("#pickup").closest(".active").length>0){var pickupBranch=$(".check-out-pickup-title").find(".checkout-title").find("span").text().trim();}
var address=$(".guest-address-details").text().trim();var shipping=ACC.checkoutsteps.deliveryCost;var tax=Number($("#guest-tax").find("span").text().trim().replace(/[^0-9.-]+/g,""));}
localStorage.setItem("orderInfo",JSON.stringify({cart_id:localStorage.getItem("cartId"),delivery_address:address||"",delivery_authority:!($('#ls-delivery-instruction').css("display")=="none")?$('#ls-authority-to-leave').prop('checked'):'',delivery_date:deliveryDate||"",delivery_option:ACC.global.capitalizeFirstLetter(deliveryOption)||"",order_id:"",payment_method:"Credit card",pickup_branch:pickupBranch||"",products:products,purchase_order_no:$("#PurchaseOrderNumber").val()||"",revenue:+$(".checkout-order-summary").find(".subtotal").data("revenue")||0,shipping:shipping||0,shipping_method:ACC.global.capitalizeFirstLetter($("#deliveryMethodPath").val())||"",source:localStorage.getItem("source_sm"),tax:tax||0,total:Number($("#ls-checkout-total-amount").text().trim().replace(/[^0-9.-]+/g,""))||0,coupon:$('.apply-coupon-container .voucher-code-input')?.val()||''}));},scrollToStripeError:function(){$(document).ready(function(){if($(".backend-error").text().length===0){return;}
setTimeout(function(){$("html, body").animate({scrollTop:$("#payment-container").offset().top,},"fast");},1000);});},setupAlgoliaCheckoutObject:function(){const _objectIds=[];const _objectDatas=[];for(var i=0;i<$(".checkout-order-summary-list-items").length;i++){var temp=$(".checkout-order-summary-list-items:eq("+i+")");const productQuantity=temp.find('.product-pdp-name').data('product-quantity')||0;const productPrice=temp.find('.checkout-price').data('checkout-price')||0;const productCode=temp.find('.product-component').data('product-code')||'';if(productCode){_objectIds.push(productCode.toString());_objectDatas.push({"price":productPrice?Number(productPrice):0,"quantity":productQuantity?Number(productQuantity):0});}}
if(_objectIds&&_objectIds.length>0){const checkoutOrderSummary=$(".checkout-order-summary");const revenue=checkoutOrderSummary.find(".subtotal").data("revenue")||0;const subTax=checkoutOrderSummary.find(".subtotal").data("sub-tax")||0;const _subTotal=(parseFloat(revenue)||0)+(parseFloat(subTax)||0);ACC.track._algoliaPayload={objectIds:_objectIds,objectDatas:_objectDatas,subTotal:_subTotal?.toFixed(2)};}},bindGuestOrderMessage:function(){$('.guest-order-notice').insertAfter('.checkout__confirmation__content--component:eq(1)');},getDataQtyInput:function(){$(document).on("keypress",".mini-cart-qty-input",function(){ACC.checkout.qtyTarget=$(document).find(".ls-header-container-cart-page").find(this).closest(".js-qty-selector-input");});},bindCheckoutMiniCart:function(){const miniCartCount=$('.checkout-order-summary-list-items .product-component').length;if(miniCartCount!==0){$(".js-mini-cart-link .js-mini-cart-count").empty();$(".js-mini-cart-link .js-mini-cart-count").append(miniCartCount);$(".js-mini-cart-link .js-mini-cart-count").addClass("nav-item-counter");}else{$(".js-mini-cart-link .js-mini-cart-count").empty();$(".js-mini-cart-link .js-mini-cart-count").removeClass("nav-item-counter");}},bindCheckoutButton:function(){const checkoutUrl='/checkout/recommend';$('.js-to-checkout-btn').prop('disabled',true);ACC.algoliaSearch.getCommerceCartBundle().then(response=>{const commerceBundleProducts=$(response).find('.ais-FrequentlyBoughtTogether-item');if(commerceBundleProducts.length>0){window.location.href=checkoutUrl;return;}
const commerceProductCode=($(response).find('.ls-cart-bundle-items').data('product-list').toString()).split(', ');ACC.algoliaSearch.checkAlgoliaBundle(commerceProductCode).then(algoliaFlag=>{if(algoliaFlag){window.location.href=checkoutUrl;return;}
window.location.href='/checkout';});});},bindToCheckout:function(){$(document).on('click','.ls-totals-checkout .js-to-checkout-btn',function(){ACC.checkout.bindCheckoutButton();});}};$("#PurchaseOrderNumber").keyup(function(){let iMaxLength=$(this).attr("maxlength");let iValueLength=$(this).val().length;let eErrorMessage=$("#error-maxlength");if(iValueLength==iMaxLength){eErrorMessage.removeClass("error-maxlength-hidden");eErrorMessage.addClass("error-maxlength-visible");}else{eErrorMessage.addClass("error-maxlength-hidden");eErrorMessage.removeClass("error-maxlength-visible");}
ACC.checkoutsteps.fnTogglePlaceOrderButton();});$("#delivery_instruction").keypress(function(e){if(validNote($(this).val())>=$(this).prop('maxlength')){$('.ls-error-messages-instruction').removeClass('hidden');$('.ls-error-messages-pickup').addClass('hidden');$('.ls-error-messages-instruction .max-length-allowed').text($(this).prop('maxlength'))
e.preventDefault();}})
$("#delivery_instruction").keyup(function(e){if(validNote($(this).val())<$(this).prop('maxlength')){$('.ls-error-messages-instruction').addClass('hidden');$('.ls-error-messages-pickup').addClass('hidden');}})
function validNote(str){let count=0;for(let i=0;i<str.length;i++){if(str.charAt(i)=="\n"){count++;}}
return str.length+count;}
$("#pickup_instruction").keypress(function(e){if(validNote($(this).val())>=255){$('.ls-error-messages-pickup').removeClass('hidden');$('.ls-error-messages-instruction').addClass('hidden');e.preventDefault();}})
$("#pickup_instruction").keyup(function(e){if(validNote($(this).val())<255){$('.ls-error-messages-pickup').addClass('hidden');$('.ls-error-messages-instruction').addClass('hidden');}})
$("#order-delivery").click(function(){localStorage.setItem("deliveryMode",'delivery');$('.ls-error-messages-pickup').addClass('hidden');})
$("#order-pickup").click(function(){localStorage.setItem("deliveryMode",'pickup');$('.ls-error-messages-instruction').addClass('hidden');});ACC.checkoutsteps={_autoload:[['permeateLinks',$('.ls-checkout-container .place-order-form').length>0],['fnTogglePlaceOrderButton',$('.ls-checkout-container .place-order-form').length>0],['handleDeliveryOptions',$('.ls-checkout-container .place-order-form').length>0]],deliveryCost:null,permeateLinks:function(){$(document).on("click",".js-checkout-step",function(e){e.preventDefault();window.location=$(this).closest("a").attr("href");});var currentUrl=window.location.pathname;var isCheckoutPage=currentUrl.indexOf("checkout")>=0;var deliveryMode=localStorage.getItem("deliveryMode");if(isCheckoutPage&&deliveryMode!="pickup"){ACC.checkoutsteps.fnGetPriceBaseOnDeliveryMethod("delivery");}else if(isCheckoutPage&&deliveryMode=="pickup"){$("#deliveryMethodPath").val("pickup");$("#order-pickup").parent().addClass("active");$("#order-delivery").parent().removeClass("active");$("#order-delivery").attr("aria-expanded",false);$("#order-pickup").attr("aria-expanded",true);$("#pickup").addClass("active in");$("#delivery").removeClass("active in");$('#delivery_address').prop('required',false);$('#pickup_address').prop('required',true);$("#delivery-order-summary").css("display","none");$("#pickup-order-summary").css("display","block");$("#ls-delivery-instruction").css("display","none");$("#ls-pickup-instruction").css("display","block");ACC.checkoutsteps.fnGetPriceBaseOnDeliveryMethod("pickup");}else{localStorage.removeItem("deliveryMode");}
$(document).on('change','.checkout-steps .ls-leave-authority',function(e){var textArea=$('textarea#delivery_instruction');if(e.target.checked){$('.checkout-steps .authority-to-leave-note').removeClass('hidden');$('textarea#delivery_instruction').prop('maxlength',235);textArea.val(textArea.val().slice(0,235));$('.ls-error-messages-instruction .max-length-allowed').text(235);$('.ls-error-messages-instruction').remove('hidden');if(textArea.val().length>=textArea.prop('maxlength')){$('.ls-error-messages-instruction').removeClass('hidden');}else{$('.ls-error-messages-instruction').addClass('hidden');}}else{$('.checkout-steps .authority-to-leave-note').addClass('hidden');$('textarea#delivery_instruction').prop('maxlength',255);if(textArea.val().length>=textArea.prop('maxlength')){$('.ls-error-messages-instruction').removeClass('hidden');}else{$('.ls-error-messages-instruction').addClass('hidden');}}});},fnTogglePlaceOrderButton:function(){let deliveryMethod=$("#deliveryMethodPath").val();let poNumber=$("#PurchaseOrderNumber").val();let selectedAddress=null;let btnPlaceOrder=$("#ls-btn-place-order");let btnCompleteOrder=$("#ls-btn-complete-order");let isInvalidUser=btnPlaceOrder.data("invaliduser");let isInvalidUserPayment=btnCompleteOrder.data("invaliduser");let lenOfProduct=$("#ls-len-product-checkout").val();var isLoggedIn=$('.js-header-session-timeout').length>0;let acceptedTermsConditions=$("input.terms-conditions-checkbox").prop("checked");if(isInvalidUser){btnPlaceOrder.prop("disabled",true);return;}
if(isInvalidUserPayment){btnCompleteOrder.prop("disabled",true);return;}
if(!acceptedTermsConditions){btnCompleteOrder.prop("disabled",true);}
if(lenOfProduct==0){btnPlaceOrder.prop("disabled",true);btnCompleteOrder.prop("disabled",true);}
switch(deliveryMethod){case"delivery":{selectedAddress=$("#delivery_address").children("option:selected:not([disabled])");break;}
case"pickup":{selectedAddress=$("#pickup_address").children("option:selected:not([disabled])");break;}}
var noSpaceRegex=/[^\s]/i;if(!isLoggedIn){btnPlaceOrder.prop("disabled",false);if(acceptedTermsConditions){btnCompleteOrder.prop("disabled",false);}}else{if(selectedAddress&&selectedAddress.length&&poNumber&&poNumber.match(noSpaceRegex)){btnPlaceOrder.prop("disabled",false);if(acceptedTermsConditions){btnCompleteOrder.prop("disabled",false);}}else{btnPlaceOrder.prop("disabled",true);btnCompleteOrder.prop("disabled",true);}}},fnGetPriceBaseOnDeliveryMethod:function(sDeliveryMethod){$.ajax({url:"/checkout/multi/summary/select?delivery_method="+sDeliveryMethod,type:"get",success:function(response){ACC.checkoutsteps.deliveryCost=response.freightCharge.value;if(!response){return;}
if(sDeliveryMethod==="delivery"){$("#ls-first-order-container").show();$("#ls-delivery-options").show();$("#ls-first-of-month-order").hide();if(response.isShowFirstOrder){$(".delivery-option-first-of-month").show();if($("input[type=radio][name=delivery-option]:checked").val()==="first-of-month"){$("input[name=isFirstOrder]").prop("checked",true);}else{$("input[name=isFirstOrder]").prop("checked",false);}}}else if(sDeliveryMethod==="pickup"){$("#ls-first-order-container").hide();$("#ls-delivery-options").hide();$(".delivery-option-first-of-month").hide();if(response.isShowFirstOrder&&$('#ls-first-of-month-order').length>0){$("#ls-first-order-container").show();$("#ls-first-of-month-order").show();}}
ACC.checkoutsteps.updateOrderSummaryState(sDeliveryMethod);},error:function(error){ACC.checkoutsteps.fnTogglePlaceOrderButton();},});},handleDeliveryOptions:function(){var preferredDeliveryDays=$("#ls-order-delivery-options-datepicker-input").data("preferredDeliveryDays");moment.fn.addBusinessDays=function(days){var increment=days/Math.abs(days);var date=this.clone().add(Math.floor(Math.abs(days)/5)*7*increment,"days");var remaining=days%5;while(remaining!=0){date.add(increment,"days");if(date.isoWeekday()!==6&&date.isoWeekday()!==7)
remaining-=increment;}
return date;};var startDate=moment().addBusinessDays(2).format("DD MMMM yyyy");var endDate=moment().add(preferredDeliveryDays,"days").format("DD MMMM yyyy");$("#ls-order-delivery-options-datepicker-input").datepicker({format:"dd MM yyyy",daysOfWeekDisabled:[0,6],startDate:startDate,endDate:endDate,});$(".delivery-options-datepicker-icon").click(function(){$("#ls-order-delivery-options-datepicker-input").datepicker("show");});$("input[type=radio][name=delivery-option]").change(function(){var selectedOption=this.value;if(selectedOption==="first-of-month"){$("input[name=isFirstOrder]").prop("checked",true);$("#ls-order-delivery-options-datepicker-input").val("").trigger("change");$(".delivery-options-datepicker-container").addClass("disabled");$("#ls-order-delivery-options-datepicker-input").prop("disabled",true);$(".delivery-options-datepicker-icon").prop("disabled",true);$(".delivery-options-datepicker-validation").hide();}else if(selectedOption==="as-soon-as-possible"){$("input[name=isFirstOrder]").prop("checked",false);$("#ls-order-delivery-options-datepicker-input").val("").trigger("change");$(".delivery-options-datepicker-container").addClass("disabled");$("#ls-order-delivery-options-datepicker-input").prop("disabled",true);$(".delivery-options-datepicker-icon").prop("disabled",true);$(".delivery-options-datepicker-validation").hide();}else if(selectedOption==="future-date"){$("input[name=isFirstOrder]").prop("checked",false);$(".delivery-options-datepicker-container").removeClass("disabled");$("#ls-order-delivery-options-datepicker-input").prop("disabled",false);$(".delivery-options-datepicker-icon").prop("disabled",false);}});$("#ls-order-delivery-options-datepicker-input").on("change",function(){$(".delivery-options-datepicker-validation").hide();if(!this.value){$("input[name=preferDeliveryDate]").val("");}else{var date=moment(this.value,"DD MMMM YYYY").format("MM/DD/YYYY");$("input[name=preferDeliveryDate]").val(date);}});},updateOrderSummaryState:function(method,state){$.ajax({url:'/checkout/multi/summary/view',cache:false,type:"GET",dataType:"html",success:function(response){$('.ls-checkout-container .checkout-order-summary').replaceWith($(response).find('.ls-checkout-container .checkout-order-summary'));if(method==='pickup'){$("#delivery-order-summary").hide();$("#pickup-order-summary").show();$("#ls-freight-container").hide();}
ACC.checkoutsteps.fnTogglePlaceOrderButton();},error:function(){window.location.reload();}});}};$("a.ls-checkout-tab").on("shown.bs.tab",function(e){var currOrderId=$(e.target).attr("id");var delivery=$("#delivery-order-summary");var pickup=$("#pickup-order-summary");if(currOrderId=="order-delivery"){delivery.css("display","block");pickup.css("display","none");$("#ls-pickup-instruction").hide();$("#ls-delivery-instruction").show();$("#deliveryMethodPath").val("delivery");ACC.checkoutsteps.fnGetPriceBaseOnDeliveryMethod("delivery");$("#pickup_address").prop("required",false);$("#delivery_address").prop("required",true);if($('#ls-authority-to-leave').prop('checked')){$('.authority-to-leave-note').removeClass('hidden');}else{$('.authority-to-leave-note').addClass('hidden');}}else{delivery.css("display","none");pickup.css("display","block");$("#ls-pickup-instruction").show();$("#ls-delivery-instruction").hide();$("#deliveryMethodPath").val("pickup");ACC.checkoutsteps.fnGetPriceBaseOnDeliveryMethod("pickup");$("#pickup_address").prop("required",true);$("#delivery_address").prop("required",false);$('.authority-to-leave-note').addClass('hidden');}
ACC.checkoutsteps.fnTogglePlaceOrderButton();});$("#pickup_address").change(function(e){ACC.checkoutsteps.fnTogglePlaceOrderButton();});$("#delivery_address").change(function(e){ACC.checkoutsteps.fnTogglePlaceOrderButton();});$("input.terms-conditions-checkbox").change(function(e){ACC.checkoutsteps.fnTogglePlaceOrderButton();});ACC.cms={loadComponent:function(id,type,target,onSuccess,onError){var self=this;if(id){$.ajax({url:ACC.config.contextPath+'/cms/component?componentUid='+encodeURIComponent(id),cache:false,type:'GET',dataType:'html',success:function(result){reprocess=result.indexOf('js-responsive-image')>-1;self.insertHtml(result,target,reprocess);if(onSuccess){onSuccess(result,id,type,target);}},error:function(result){if(onError){onError(result,id,type,target);}}});}},insertHtml:function(html,target,reprocess){if(target){$(target).html(html);if(reprocess){ACC.global.reprocessImages();}}}};var cboxOptions={width:'95%',height:'95%',maxWidth:'960px',maxHeight:'960px'};$('.cbox-link').colorbox(cboxOptions);$(window).resize(function(){if(!$('#colorbox').hasClass('variantSelectMobile')){$.colorbox.resize({width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height});}});ACC.colorbox={config:{maxWidth:"100%",opacity:0.7,width:"auto",transition:"none",close:'<span class="glyphicon glyphicon-remove"></span>',title:'<div class="headline"><span class="headline-text">{title}</span></div>',onComplete:function(){$.colorbox.resize();ACC.common.refreshScreenReaderBuffer();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}},open:function(title,config){var config=$.extend({},ACC.colorbox.config,config);config.title=config.title.replace(/{title}/g,title);return $.colorbox(config);},resize:function(){$.colorbox.resize();},close:function(){$.colorbox.close();}};ACC.common={currentCurrency:$("main").data('currencyIsoCode')||"USD",processingMessage:'',blockFormAndShowProcessingMessage:function(submitButton)
{var form=submitButton.parents('form:first');form.block({message:ACC.common.processingMessage});},refreshScreenReaderBuffer:function()
{$('#accesibility_refreshScreenReaderBufferField').attr('value',new Date().getTime());},checkAuthenticationStatusBeforeAction:function(actionCallback)
{$.ajax({url:ACC.config.authenticationStatusUrl,statusCode:{401:function(){location.href=ACC.config.loginUrl;}},dataType:'json',success:function(data){if(data=="authenticated"){actionCallback();}}});},encodeHtml:function(rawText)
{return rawText.toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;').replace(/\//g,'&#47;');}};jQuery.extend({postJSON:function(url,data,callback)
{return jQuery.post(url,data,callback,"json");}});$.ajaxPrefilter(function(options,originalOptions,jqXHR)
{if(options.type==="post"||options.type==="POST")
{var noData=(typeof options.data==="undefined");if(noData)
{options.data="CSRFToken="+ACC.config.CSRFToken;}
else
{var patt1=/application\/json/i;if(options.data instanceof window.FormData)
{options.data.append("CSRFToken",ACC.config.CSRFToken);}
else if(patt1.test(options.contentType))
{jqXHR.setRequestHeader('CSRFToken',ACC.config.CSRFToken);}
else if(options.data.indexOf("CSRFToken")===-1)
{options.data=options.data+"&"+"CSRFToken="+ACC.config.CSRFToken;}}}});ACC.forgottenpassword={_autoload:['bindLink'],bindLink:function(){$(document).on('click','.js-password-forgotten',function(e){e.preventDefault();$('#loginModal').modal('hide');ACC.forgottenpassword.preparePopup(null,e);});$(document).on('click','.password-forgotten-link',function(e){$('#loginModal').modal('show');$('.ls-popup-outer').remove();document.body.classList.remove('ls-popup-open');});$(document).on('click','a.ls-popup-close',function(e){$('.ls-popup-outer').remove();document.body.classList.remove('ls-popup-open');});$(document).on('click','.ls-popup-outer',function(e){const isPopupClicked=$(e.target).closest('.ls-popup-content').length<=0;if(isPopupClicked){document.body.classList.remove('ls-popup-open');$('.ls-popup-outer').remove();}});},preparePopup:function(targetUrl,event){const closeSpan=`<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>`
const modal=document.createElement('div');modal.classList.add('ls-popup-outer');const modalInner=document.createElement('div');modalInner.classList.add('ls-popup-inner','forgotten-password-position');const modalContent=document.createElement('div');const closeDiv=document.createElement('div');const contentDiv=document.createElement('div');contentDiv.classList.add('ls-popup-data');closeDiv.classList.add('ls-popup-close-container')
closeDiv.innerHTML=closeSpan;modalContent.appendChild(contentDiv);modalContent.appendChild(closeDiv);modalContent.classList.add('ls-popup-content','popup-default','forgotten-password-popup');modalInner.appendChild(modalContent);modal.appendChild(modalInner);document.body.appendChild(modal);document.body.classList.add('ls-popup-open');$.ajax({url:targetUrl?targetUrl:$(event.target).data('link'),success:function(res){contentDiv.innerHTML=res;modalContent.classList.remove('popup-default');$('form#forgottenPwdForm').ajaxForm({success:function(data){if($(data).closest('#validEmail').length){if($('#validEmail').length===0){$('.ls-popup-data').replaceWith(data);}}else{if($(data).find('.popup-header-success').length){$('.ls-popup-data').replaceWith(data);return;}
$('#forgottenPwdForm .control-group').replaceWith($(data).find('.control-group'));}}});}});}};ACC.global={_autoload:[["passwordStrength",$('.password-strength').length>0],"bindToggleOffcanvas","bindToggleXsSearch","bindHoverIntentMainNavigation","initImager","backToHome","bindDropdown","closeAccAlert","bindShowPassword","changeTagCategory","KITfirst","resetTrackingInfo","setPrototypeDsd4612","changeYform"],fieldProperties:{password:'password',text:'text',hidden:'hidden'},changeYform:function(){if($(".orbeon").length>0){var iconHTML=$(".fr-email-button").find("button").find("i").prop('outerHTML');$(".fr-email-button").find("button").text('');$(".fr-email-button").find("button").append(iconHTML+" Submit");}},resetTrackingInfo:function(){if($(".ls-confirm-order-number").length>0){var trackingData=JSON.parse(localStorage.getItem("orderInfo"));if(trackingData){var orderId=$(".ls-confirm-order-number").text().trim().replace(/\D/g,"");trackingData.order_id=orderId;window.dataLayer.push({event:'Order Created',...trackingData});}
localStorage.removeItem("cartId");localStorage.removeItem("source_sm");localStorage.removeItem("orderInfo");}
var isCheckoutStarted=localStorage.getItem("isCheckoutStarted");if($("#placeOrderForm1").length>0&&isCheckoutStarted){var products=[];$(".checkout-order-summary-list-items").find(".product-component").each(function(index,item){var product=ACC.product.handleTrackingData($(item),"complete-order");products.push(product);});var trackingData={cart_id:$(".checkout-order-summary").find(".subtotal").data("cart-code"),products:products,revenue:+$(".checkout-order-summary").find(".subtotal").data("revenue")||0,source:localStorage.getItem("source_sm"),tax:+$(".checkout-order-summary").find(".subtotal").data("sub-tax")||0}
window.dataLayer.push({event:'Checkout Started',...trackingData})
localStorage.removeItem("isCheckoutStarted");}},getFavouritesUpdateTime:function(wishlistId){var dsd3808Infor=JSON.parse(localStorage.getItem("dsd-3808"));if(!dsd3808Infor)dsd3808Infor=[];var dsd3808={wishLishId:wishlistId,dateLastUpdate:new Date().toISOString()};var wishLishIndex=dsd3808Infor.findIndex(x=>wishlistId===x.wishLishId);wishLishIndex==-1?dsd3808Infor.push(dsd3808):dsd3808Infor[wishLishIndex]=dsd3808;localStorage.setItem("dsd-3808",JSON.stringify(dsd3808Infor));},KITfirst:function(){if($('#collapse_LSKitComponent').length>0&&$(".accordion-container").length>1){$('.panel-group').prepend($('#collapse_LSKitComponent').parent());$('#collapse_LSKitComponent').parent().find(".pull-right").removeClass("icon-down-arrow");$('#collapse_LSKitComponent').parent().find(".pull-right").addClass("icon-up-arrow");$('#collapse_LSKitComponent').addClass('in');for(var i=$(".accordion-container").length-1;i>0;i--){var temp=$(".accordion-container:eq("+i+")");temp.find(".panel-collapse").removeClass("in");temp.find(".pull-right").removeClass("icon-up-arrow");temp.find(".pull-right").addClass("icon-down-arrow");}}},changeTagCategory:function(){if($(".category-title").length>0){$('.ls-product-show-info').find(".product-pdp-name").replaceWith(function(){var $newTag=$('<h3>').html($(this).html());$newTag.attr('class',$(this).attr('class'));$newTag.closest(".product-pdp-name").css("margin",0);return $newTag;});}},setPrototypeDsd4612:function(){var vertical=$(".product-carousel-container").find(".carousel-full-items").data("vertical");if(vertical){$(".product-component").find(".product-quantity-helper-text").find("p").css("white-space","nowrap");$(".product-component").find(".add-to-cart-form-container").find(".js-add-to-cart").css("white-space","nowrap");$(".carousel-full-items").find(".quantity-selector").css("width","35px");$(".carousel-full-items").find(".product-quantity-container").css("margin-right","0px");}},passwordStrength:function(){$('.password-strength').pstrength({verdicts:[ACC.pwdStrengthTooShortPwd,ACC.pwdStrengthVeryWeak,ACC.pwdStrengthWeak,ACC.pwdStrengthMedium,ACC.pwdStrengthStrong,ACC.pwdStrengthVeryStrong],minCharText:ACC.pwdStrengthMinCharText});},bindToggleOffcanvas:function(){ACC.global.breadcrumbListMarkup();window.location.origin=='https://prd-comm.lincolnsentry.com.au'?$('meta[name="robots"]').attr("content","noindex"):'';$(document).on("click",".js-toggle-sm-navigation",function(){ACC.global.toggleClassState($("main"),"offcanvas");ACC.global.toggleClassState($("html"),"offcanvas");ACC.global.toggleClassState($("body"),"offcanvas");ACC.global.resetXsSearch();});if($(".product-display-lg2-container").length>0){$(".product-display-lg2-container").find(".product-information-icon").remove();var isSmartEdit=new RegExp("^"+window.location.origin+"/preview-content.*$");var isPage=new RegExp("^"+window.location.origin+"/page/.*$");if(($(".carousel-full-items").data('vertical')&&isPage.test(window.location.href))||($(".wishlist-page-container").length>0&&$(".carousel-full-items").data('vertical')&&isSmartEdit.test(window.location.href))){$(".carousel__item").css("height",424);}}},bindToggleXsSearch:function(){$(document).on("click",".js-toggle-xs-search",function(){ACC.global.toggleClassState($(".site-search"),"active");ACC.global.toggleClassState($(".js-mainHeader .navigation--middle"),"search-open");});},resetXsSearch:function(){$('.site-search').removeClass('active');$(".js-mainHeader .navigation--middle").removeClass("search-open");},toggleClassState:function($e,c){$e.hasClass(c)?$e.removeClass(c):$e.addClass(c);return $e.hasClass(c);},capitalizeFirstLetter:function(s){if(!s)return'';return s.charAt(0).toUpperCase()+s.slice(1);},bindHoverIntentMainNavigation:function(){enquire.register("screen and (min-width:"+ACC.common.encodeHtml(screenMdMin)+")",{match:function(){$(".js-enquire-has-sub").hoverIntent(function(){var $this=$(this),itemWidth=$this.width();var $subNav=$this.find('.js_sub__navigation'),subNavWidth=$subNav.outerWidth();var $mainNav=$('.js_navigation--bottom'),mainNavWidth=$mainNav.width();var leftPos=$this.position().left+itemWidth/2-subNavWidth/2;var topPos=$this.position().top+$this.height();if(leftPos>0&&leftPos+subNavWidth<mainNavWidth){$subNav.css({"left":leftPos,"top":topPos,"right":"auto"});}else if(leftPos<0){$subNav.css({"left":0,"top":topPos,"right":"auto"});}else if(leftPos+subNavWidth>mainNavWidth){$subNav.css({"right":0,"top":topPos,"left":"auto"});}
$this.addClass("show-sub");},function(){$(this).removeClass("show-sub")});},unmatch:function(){$(".js_sub__navigation").removeAttr("style");$(".js-enquire-has-sub").hoverIntent(function(){});}});},initImager:function(elems){elems=elems||'.js-responsive-image';this.imgr=new Imager(elems);},reprocessImages:function(elems){elems=elems||'.js-responsive-image';if(this.imgr==undefined){this.initImager(elems);}else{this.imgr.checkImagesNeedReplacing($(elems));}},addGoogleMapsApi:function(callback){if(callback!=undefined&&$(".js-googleMapsApi").length==0){var googleApiSrc="//maps.googleapis.com/maps/api/js?key="+ACC.common.encodeHtml(ACC.config.googleApiKey)+'&sensor=false&callback='+ACC.common.encodeHtml(callback);$('head').append($("<script>").addClass("js-googleMapsApi").attr("type","text/javascript").attr("src",googleApiSrc));}else if(callback!=undefined){eval(callback+"()");}},backToHome:function(){$(".backToHome").on("click",function(){var sUrl=ACC.config.contextPath;window.location=sUrl;});},bindDropdown:function(){$(document).on("click",".dropdown-toggle",dropdownToggle);},closeAccAlert:function(){$(".closeAccAlert").on("click",function(){$(this).parent('.getAccAlert').remove();});},bindShowPassword:function(){$(document).on('click','.ls-password',function(e){var passwordInput=$(this).closest('.password-container').find('.lincolnsentryPwd');if(passwordInput.prop('type')===ACC.global.fieldProperties.password){passwordInput.prop('type',ACC.global.fieldProperties.text);$('.ls-password.ls-show-password').addClass('hidden');$('.ls-password.ls-hide-password').removeClass('hidden');}else{passwordInput.prop('type',ACC.global.fieldProperties.password);$('.ls-password.ls-show-password').removeClass('hidden');$('.ls-password.ls-hide-password').addClass('hidden');}})},breadcrumbListMarkup:function(){if($(".breadcrumb li").length>0){var itemList=[];for(var i=0;i<$(".breadcrumb li").length;i++){if(i==$(".breadcrumb li").length-1){itemList.push({"@type":"ListItem","position":i+1,"item":{"@id":window.location.href,"name":$(".breadcrumb li")[i].innerText}})}else{itemList.push({"@type":"ListItem","position":i+1,"item":{"@id":$(".breadcrumb li a")[i].href,"name":$(".breadcrumb li a")[i].innerText}})}}
var ele=document.createElement('script');ele.type="application/ld+json";ele.textContent=JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":itemList})
document.head.appendChild(ele);}}};function dropdownParent($this){var selector=$this.attr('href')
selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')
var $parent=selector&&$(selector)
return $parent&&$parent.length?$parent:$this.parent()};function dropdownClearMenus(e){if(e&&e.which===3)return
$('.dropdown-backdrop').remove()
$(".dropdown-toggle").each(function(){var $parent=dropdownParent($(this))
var relatedTarget={relatedTarget:this}
if(!$parent.hasClass('open'))return
if(e&&e.type=='click'&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return
$parent.removeClass('open')})};function dropdownToggle(e){var $this=$(this)
if($this.is('.disabled, :disabled'))return
var $parent=dropdownParent($this)
var isActive=$parent.hasClass('open')
dropdownClearMenus()
if(!isActive){if('ontouchstart'in document.documentElement&&!$parent.closest('.navbar-nav').length){$(document.createElement('div')).addClass('dropdown-backdrop').insertAfter($(this)).on('click',dropdownClearMenus)}
var relatedTarget={relatedTarget:this}
if(e.isDefaultPrevented())return
$this.trigger('focus').attr('aria-expanded','true')
$parent.toggleClass('open')}
return false};ACC.hopdebug={bindAll:function()
{this.bindShowDebugMode();},bindShowDebugMode:function()
{var debugModeEnabled=$('#hopDebugMode').data("hopDebugMode");if(!debugModeEnabled&&!$('#showDebugPage').val())
{$('#hostedOrderPagePostForm').submit();}}};$(document).ready(function()
{ACC.hopdebug.bindAll();});ACC.imagegallery={_autoload:["bindImageGallery"],bindImageGallery:function(){$(".js-gallery").each(function(){var $image=$(this).find(".js-gallery-image");var $carousel=$(this).find(".js-gallery-carousel");$image.owlCarousel({singleItem:true,pagination:true,navigation:true,lazyLoad:true,afterAction:function(){ACC.imagegallery.syncPosition($image,$carousel,this.currentItem);$image.data("zoomEnable",true);},startDragging:function(){$image.data("zoomEnable",false);},afterLazyLoad:function(e){var b=$image.data("owlCarousel")||{};if(!b.currentItem){b.currentItem=0;}
var $e=$($image.find("img.lazyOwl")[b.currentItem]);startZoom($e.parent());}});$carousel.owlCarousel({navigation:true,navigationText:[$("<span>").addClass("icon-back-circle"),$("<span>").addClass("icon-next-circle")],pagination:false,rewindNav:false,items:2,itemsDesktop:[5000,5],itemsDesktopSmall:[1200,5],itemsTablet:[768,5],itemsMobile:[480,5],lazyLoad:true,afterInit:function(){$carousel.find(".owl-wrapper").each(function(){var w=$(this).width()/2;$(this).width(w);$(this).css("margin","0 auto");});$carousel.find('.owl-item').eq(0).addClass('owl-item-active');},afterUpdate:function(){$carousel.find(".owl-wrapper").each(function(){var w=$(this).width()/2;$(this).width(w);$(this).css("margin","0 auto");});},afterAction:function(){}});$carousel.on("click","a.item",function(e){e.preventDefault();$(this).parents('.owl-wrapper').find('.owl-item').removeClass("owl-item-active");$(this).parents('.owl-item').addClass("owl-item-active");$image.trigger("owl.goTo",$(this).parent(".owl-item").data("owlItem"));});function startZoom(e){$(e).zoom({url:$(e).find("img.lazyOwl").data("zoomImage"),touch:true,on:"mouseover"});}});},syncPosition:function($image,$carousel,currentItem){$carousel.trigger("owl.goTo",currentItem);}};ACC.langcurrency={_autoload:["bindLangCurrencySelector"],bindLangCurrencySelector:function(){$('#lang-selector').change(function(){$('#lang-form').submit();});$('#currency-selector').change(function(){$('#currency-form').submit();});}};ACC.minicart={_autoload:[["repositionPopover",$(".js-mini-cart-link").length!==0],["bindMiniCart",$(".js-mini-cart-link").length!==0],["updateMiniCartDisplay",$(".js-mini-cart-link").length!==0&&$(".checkout-order-summary-list-items").length===0],["handleUnitMiniCartItem",$(".js-mini-cart-link").length!==0],["handleRemoveMiniCartItem",$(".js-mini-cart-link").length!==0],["handleAddReplacement",$(".js-mini-cart-link").length!==0],["checkItemMiniHasNoPrice",$(".js-mini-cart-link").length!==0],["getDataQtyInput",$(".js-mini-cart-link").length!==0],"bindJobReferenceChange"],selectedReplacementEntryNumber:-1,isMiniCart:false,qtyTarget:null,isUpdateCheckout:false,isMaximunQty:null,miniCartUrl:'/cart/rollover/MiniCart',miniCartUpdate:'/cart/rollover/updateMiniCart',miniCartItemRemove:'/cart/rollover/entry/execute/REMOVE',repositionPopover:function(){$.fn.popover.Constructor.prototype.reposition=function(){var $tip=this.tip();var autoPlace=true;var placement=typeof this.options.placement==="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var viewportDim=this.getPosition(this.$viewport);placement=placement==="bottom"&&pos.bottom+actualHeight>viewportDim.bottom?"top":placement==="top"&&pos.top-actualHeight<viewportDim.top?"bottom":placement==="right"&&pos.right+actualWidth>viewportDim.width?"left":placement==="left"&&pos.left-actualWidth<viewportDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement);}
var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);};},bindMiniCart:function(){var link=$(".js-mini-cart-link");link.popover({html:true,container:"body",placement:"bottom",content:'<div class="loading"><span class="glyphicon glyphicon-repeat"></span></div>',}).data("bs.popover").tip().addClass("mini-cart__popover");link.on("shown.bs.popover",function(){var content=$(".popover-content");var miniCartUrl=link.data("miniCartUrl");$.ajax({url:miniCartUrl,cache:false,type:"GET",dataType:"html",success:function(result){if(result.indexOf("js-mini-cart")!==-1){content.html(result);link.popover("reposition");ACC.minicart.hideEaUomMiniCart();ACC.minicart.getDefaultOption();var itemList=$(".mini-cart__item");itemList.each(function(){ACC.minicart.updateMiniCartFromFavorites($(this));})
if($.isFunction(ACC.productDetail.updateUnitSelectionForCart)&&$.isFunction(ACC.productDetail.checkQtySelector)){content.find(".select-uom").each(function(){var conversion=$(this).find(':selected').data('conversion');ACC.productDetail.updateUnitSelectionForCart(this,$(this).val(),parseFloat(conversion));});};var maxQuantity=$(".mini-cart").data("max-quantity-order");var itemsAdded=$(".mini-cart__item");if(itemsAdded.length>0){for(var i=0;i<itemsAdded.length;i++){var quantity=(+$(itemsAdded[i]).find(".js-qty-selector-input").val());if(quantity>maxQuantity){ACC.minicart.isMaximunQty=true;$(".mini-cart").find(".maximum-error").show();$(".mini-cart__footer-btn-checkout").attr("disabled",true);break;}else{ACC.minicart.isMaximunQty=false;}}}
ACC.minicart.setCheckoutButtonState();}else{location.reload();}},});});$(document).on("click",function(e){var $popover,$target=$(e.target);if($target.hasClass("popover")||$target.closest(".popover").length||$target.hasClass("ls-popup-outer")||$target.closest(".ls-popup-outer").length){return;}
$('.js-mini-cart-link[data-toggle="popover"]').each(function(){$popover=$(this);if(!$popover.is(e.target)&&$popover.has(e.target).length===0&&$(".popover").has(e.target).length===0){ACC.minicart.isMiniCart=false;$popover.popover("hide");}else{ACC.minicart.isMiniCart=true;$popover.popover("toggle");}});});$(document).on("click",".mini-cart__popover + .ls-popup-outer .js-add-to-cart",function(e){setTimeout(function(){ACC.minicart.updateMiniCartDisplay(true);},1000);});$(document).on("click",".mini-cart__item .btn-view-replacement",function(e){var item=$(this).closest(".mini-cart__item");ACC.minicart.selectedReplacementEntryNumber=item.data("entry-number");var $modal=$("<div>",{class:"ls-popup-outer"});var $modalInner=$("<div>",{class:"ls-popup-inner"});var $modalContent=$("<div>",{class:"ls-popup-content product-replacement-popup",});var $close=$("<div>",{class:"ls-popup-close-container"}).html('<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>');var $updatedContent=$(e.target).parents("div").find(".product-replacement-container");$updatedContent.find("form").removeAttr("action").removeAttr("method");$updatedContent.find('form.add_to_cart_form button').prop("disabled",false).removeClass("js-add-to-cart").addClass("js-add-to-mini-cart");var $content=$("<div>",{class:"ls-popup-data"}).append($($updatedContent[0]).clone());$modalContent.append($content);$modalContent.append($close);$modalInner.append($modalContent);$modal.append($modalInner);$("body").append($modal);$("body").addClass("ls-popup-open");ACC.product.bindToAddToCartForm($(".ls-popup-content .add_to_cart_form"));});},updateMiniCartDisplay:function(updatePopup){var miniCartRefreshUrl=$(".js-mini-cart-link").data("miniCartRefreshUrl");var miniCartRefreshUrlIframe=window.parent.$(".js-mini-cart-link").data("miniCartRefreshUrl")
var miniCartUrl=$(".js-mini-cart-link").data("miniCartUrl");var miniCartUrlIframe=window.parent.$(".js-mini-cart-link").data("miniCartUrl");var content=$(".popover-content");$.ajax({url:miniCartRefreshUrl?miniCartRefreshUrl:miniCartRefreshUrlIframe,cache:false,type:"GET",dataType:"json",success:function(jsonData){if(jsonData.miniCartCount!==0){if(window.parent.length>0){window.parent.$(".js-mini-cart-link .js-mini-cart-count").empty();window.parent.$(".js-mini-cart-link .js-mini-cart-count").append(jsonData.miniCartCount);window.parent.$(".js-mini-cart-link .js-mini-cart-count").addClass("nav-item-counter");}else{$(".js-mini-cart-link .js-mini-cart-count").empty();$(".js-mini-cart-link .js-mini-cart-count").append(jsonData.miniCartCount);$(".js-mini-cart-link .js-mini-cart-count").addClass("nav-item-counter");}}else{if(window.parent.length>0){window.parent.$(".js-mini-cart-link .js-mini-cart-count").empty();window.parent.$(".js-mini-cart-link .js-mini-cart-count").removeClass("nav-item-counter");}else{$(".js-mini-cart-link .js-mini-cart-count").empty();$(".js-mini-cart-link .js-mini-cart-count").removeClass("nav-item-counter");}}},});if(updatePopup){$.ajax({url:miniCartUrl?miniCartUrl:miniCartUrlIframe,cache:false,type:"GET",dataType:"html",success:function(result){if(result.indexOf("js-mini-cart")!==-1){content.html(result);var maxQuantity=$(".mini-cart").data("max-quantity-order");var itemsAdded=$(".mini-cart__item");if(itemsAdded.length>0){for(var i=0;i<itemsAdded.length;i++){var quantity=(+$(itemsAdded[i]).find(".js-qty-selector-input").val());if(quantity>maxQuantity){ACC.minicart.isMaximunQty=true;$(".mini-cart").find(".maximum-error").show();$(".mini-cart__footer-btn-checkout").attr("disabled",true);break;}else{ACC.minicart.isMaximunQty=false;}}}
ACC.minicart.setCheckoutButtonState();$(".mini-cart__item .select-uom").each(function(){ACC.minicart.updateUoM($(this));ACC.product.hideEaUom($(this).find("option"));});}else{location.reload();}
ACC.minicart.hideEaWhenRefresh();},});}},updateMiniCartItem:function(target,isJobReferenceUpdate){var element=$(target);var item=$(element).closest(".product-component");const isCloneItem=(item.find('.js-mini-cart-job-ref').data('entry-value')||'').toString().startsWith(ACC.cartitem.cartItemClonePrefix);var data={entryNumber:item.data("entry-number"),productCode:item.data("entry-product-code"),initialQuantity:item.data("entry-initial-quantity"),quantity:item.find('.js-qty-selector-input').val(),jobReference:isCloneItem&&!isJobReferenceUpdate?item.find('.js-mini-cart-job-ref').data('entry-value')||'':item.find('.js-mini-cart-job-ref').val()};var type=$(".mini-cart");var items=type.find(".mini-cart__item");var btnCheckout=$(".mini-cart__footer-btn-checkout");ACC.product.checkItemMiniMaximumQty(type,items,btnCheckout);ACC.minicart.setCheckoutButtonState();ACC.cartitem.updateCartItemCallback(element,data.entryNumber,function(){item.find(".sub-total").text("...");btnCheckout.prop('disabled',true);$('.mini-cart__footer-btn-view-cart').attr('disabled',true);ACC.minicart.disableQuantitySelect();$.ajax({url:ACC.minicart.miniCartUpdate,data:data,type:"post",success:function(response){ACC.minicart.updateCartPopup(response);ACC.minicart.qtyTarget=null;},error:function(){ACC.minicart.enableQuantitySelect();}});});},getDataQtyInput:function(){$(document).on("keypress",".mini-cart-qty-input",function(){ACC.minicart.qtyTarget=$(document).find(".mini-cart").find(this).closest(".js-qty-selector-input");if(ACC.minicart.qtyTarget!==null){ACC.minicart.qtyTarget.length===0?ACC.minicart.qtyTarget=null:"";}});},handleUnitMiniCartItem:function(){$(document).on("change",".mini-cart__item .select-uom",function(){var item=$(".mini-cart__item:eq("+ACC.productDetail.changeMiniUnit+")");var unitValue=item.find(".select-uom").val();var inputChange=item.find(".product-quantity-selector-content").find(".js-qty-selector").find(".js-qty-selector-input");var checkOrderIncrement=/(of 100)/g.test(item.text());if(checkOrderIncrement){var valueOder=unitValue==="EA"?ACC.expresscart.orderIncrement.EA:1;inputChange.val(valueOder);}
var element=$(this);var item=$(element).closest(".product-component");var number=item.find(".js-qty-selector-input");var validation=item.find(".quantity-validation");ACC.minicart.updateUoM($(this));var data={entryNumber:item.data("entry-number"),productCode:item.data("entry-product-code"),initialQuantity:item.data("entry-initial-quantity"),quantity:number.val(),unit:$(element).val(),};ACC.cartitem.updateCartItemCallback(element,data.entryNumber,function(){validation.css("display","none");$.ajax({url:ACC.minicart.miniCartUpdate,data:data,type:"post",beforeSend:function(){ACC.minicart.toggleLoadingIndicator();},complete:function(){ACC.minicart.toggleLoadingIndicator(true);},success:function(response){ACC.minicart.updateCartPopup(response);},});})});},updateUoM:function(self){if($.isFunction(ACC.productDetail.updateUnitSelectionForCart)&&$.isFunction(ACC.productDetail.checkQtySelector)){var conversion=$(self).find(':selected').data('conversion');ACC.productDetail.updateUnitSelectionForCart($(self),$(self).val(),parseFloat(conversion));var selector=$(self).closest(".product-information-container").find('.js-qty-selector .js-qty-selector-input');if(selector.length!=null){ACC.productDetail.checkQtySelector(selector,"change");}}},handleRemoveMiniCartItem:function(){$(document).on("click",".mini-cart__item .close",function(){var entryNumber=$(this).closest('.product-component').data("entry-number");var productCode=$(this).closest('.product-component').data("entry-product-code");var entryInitialQuantity=$(this).closest('.product-component').data("entry-initial-quantity");var data={entryNumbers:entryNumber,};var trackingData={productCode:productCode,quantity:Number(entryInitialQuantity),position:entryNumber,};$.ajax({url:ACC.minicart.miniCartItemRemove,data:data,type:"post",beforeSend:function(){ACC.track.productRemoved(trackingData);ACC.minicart.toggleLoadingIndicator();},complete:function(){ACC.minicart.toggleLoadingIndicator(true);},success:function(response){ACC.minicart.updateCartPopup(response);var type=$(response).find(".mini-cart");var items=$(type).find(".mini-cart__item");var btnCheckout=$(response).find(".mini-cart__footer-btn-checkout");ACC.product.checkItemMiniMaximumQty(type,items,btnCheckout);},});});},handleAddReplacement:function(){$(document).on("click",".js-add-to-mini-cart",function(e){e.preventDefault();var form=$(this).closest("form");var removeItemUrl="/cart/rollover/entry/execute/REMOVE";var replaceItemUrl="/cart/add";var miniCartUrl=$(".js-mini-cart-link").data("miniCartUrl");var removeData={entryNumbers:ACC.minicart.selectedReplacementEntryNumber,};var replacementData={productCodePost:form.find("input[name=productCodePost]").val(),qty:form.find("input[name=qty]").val(),uomCode:form.find("input[name=uomCode]").val(),};var removeHandler=function(){$(".ls-popup-outer").remove();$("body").removeClass("ls-popup-open");$.ajax({url:replaceItemUrl,data:replacementData,type:"post",success:function(){$.ajax({url:miniCartUrl,cache:false,type:"GET",dataType:"html",success:function(result){if(result.indexOf("js-mini-cart")!==-1){var content=$(".popover-content");content.html(result);ACC.minicart.setCheckoutButtonState();}else{location.reload();}},});},});};$.ajax({url:ACC.minicart.miniCartItemRemove,data:removeData,type:"post",success:function(){removeHandler();},});});},toggleLoadingIndicator:function(forceRemove){var popoverContent=$(".popover-content");var busyContent=$(".mini-cart");if(forceRemove||busyContent.hasClass("busy")){busyContent.removeClass("busy");$(".content-loading").remove();}else{busyContent.addClass("busy");popoverContent.prepend('<div class="loading content-loading"><span class="glyphicon glyphicon-repeat"></span></div>');}},hideEaUomMiniCart:function(){var itemList=$(".mini-cart__item").find(".select-uom");itemList.each(function(){ACC.product.hideEaUom($(this).find("option"));})},hideEaWhenRefresh:function(){var items=$(".mini-cart__item");for(var i=0;i<items.length;i++){var defaultUnit=$(items[i]).data("value");var optionList=$(items[i]).find(".select-uom").find("option");if(defaultUnit){for(var j=0;j<optionList.length;j++){if($(optionList[j]).val()==='EA'){$(optionList[j]).addClass('hidden');}}}}},getDefaultOption:function(){var item=$(".mini-cart__item");item.each(function(){var defaultUnit=$(this).data("value");var optionList=$(this).find(".select-uom").find("option");ACC.product.removeEaOption(defaultUnit,optionList);})},checkItemMiniHasNoPrice:function(){$(document).on('click','.mini-cart__footer-btn-checkout',function(e){e.preventDefault();localStorage.setItem("source_sm","Cart");localStorage.setItem("cartId",$(".mini-cart").data("cart-code"));localStorage.setItem("isCheckoutStarted",true);ACC.minicart.isUpdateCheckout=true;var item=$(".js-mini-cart .product-component");var isNoPrice=false;for(var i=0;i<item.length;i++){var hasPrice=$(item[i]).find(".cart-item-total-price").data("has-price");var price=$(item[i]).find(".cart-item-total-price").text();const isGiveAway=$(item[i]).data('give-away');if(!isGiveAway&&(hasPrice==='no'||price==='...'||price==='$0'||price==='0'||!price)){isNoPrice=true;$(this).closest(".mini-cart").find(".ls-checkout-error").find(".note").show();$(".mini-cart__footer-btn-checkout").attr("disabled",true);break;}}
if(isNoPrice===false){var data={products:[],};$.each(item,function(key,value){data.products.push({product_id:$(value).data("entry-product-code").toString(),name:$(value).find(".name").text().trim(),quantity:parseInt($(value).find("[name=pdpAddtoCartInput]").val()),url:window.location.origin+$(value).find(".name").attr("href"),});});if(!ACC.minicart.qtyTarget){ACC.checkout.bindCheckoutButton();}}})},updateMiniCartFromFavorites:function(target){var defaultUnit=target.data("value");if(defaultUnit&&target.find(".select-uom").val()=='EA'){var selectUom=target.find(".select-uom");var options=selectUom.find("option");for(var i=0;i<options.length;i++){if(!$(options[i]).hasClass("hidden")){$(options[i]).attr('selected','selected');break;}}
target.find(".js-qty-selector-input").val(1);var element=target;var item=$(element).closest(".product-component");var number=item.find(".js-qty-selector-input");var validation=item.find(".quantity-validation");ACC.minicart.updateUoM(selectUom);var data={entryNumber:item.data("entry-number"),productCode:item.data("entry-product-code"),initialQuantity:item.data("entry-initial-quantity"),quantity:number.val(),unit:target.find(".select-uom").val(),};ACC.cartitem.updateCartItemCallback(element,data.entryNumber,function(){validation.css("display","none");$.ajax({url:ACC.minicart.miniCartUpdate,data:data,type:"post",beforeSend:function(){ACC.minicart.toggleLoadingIndicator();},complete:function(){ACC.minicart.toggleLoadingIndicator(true);},success:function(response){ACC.minicart.updateCartPopup(response);},});})}},setCheckoutButtonState:function(){var isEmpty=$(".js-mini-cart .product-component").length===0;var obsolete=$(".js-mini-cart").find('.product-component').filter(function(){if((!$(this).data('obsolete')&&$(this).data('replacement'))||$(this).data('obsolete')){const isGiveAway=$(this).data('give-away');return $(this)&&!isGiveAway;}}).length>0;if(isEmpty||obsolete||ACC.minicart.isMaximunQty===true){$(".mini-cart__footer-btn-checkout").attr("disabled",true);}else{$(".mini-cart__footer-btn-checkout").attr("disabled",false);}},updateCartPopup:function(response){$('.mini-cart__popover .js-mini-cart').replaceWith(response);ACC.minicart.updateMiniCartDisplay();},disableQuantitySelect:function(){const miniCartItems=$('.js-mini-cart .product-component').toArray().filter(item=>!$(item).data('give-away'));miniCartItems.forEach(item=>{$(item).find('select').prop('disabled',true);$(item).find('.js-qty-selector-input').prop('disabled',true);$(item).find('.quantity-selector').prop('disabled',true);$(item).find('.js-mini-cart-job-ref').prop('disabled',true);});$('.js-mini-cart .close').prop("disabled",true);},enableQuantitySelect:function(){const miniCartItems=$('.js-mini-cart .product-component').toArray().filter(item=>!$(item).data('give-away'));miniCartItems.forEach(item=>{$(item).find('select').prop('disabled',false);$(item).find('.js-qty-selector-input').prop('disabled',false);$(item).find('.quantity-selector').prop('disabled',false);$(item).find('.close').prop('disabled',false);});},bindJobReferenceChange:function(){$(document).on('change','.mini-cart-job-reference-container .js-mini-cart-job-ref',function(e){ACC.minicart.updateMiniCartItem($(e.target),true);});}};ACC.expresscart={_autoload:[["repositionPopover",$(".js-express-cart-link").length!==0],["bindExpressCart",$(".js-express-cart-link").length!==0],["updateExpressCartDisplay",$(".js-express-cart-link").length!==0],["handleProductCodeBlankItem",$(".js-express-cart-link").length!==0],["handleQuantityBlankItem",$(".js-express-cart-link").length!==0],["handleJobReferenceItem",$(".js-express-cart-link").length!==0],["handleUnitItem",$(".js-express-cart-link").length!==0],["handleRemoveItem",$(".js-express-cart-link").length!==0],["handleAddReplacement",$(".js-express-cart-link").length!==0],["handleAddProductRows",$(".js-express-cart-link").length!==0],["handleAddToCart",$(".js-express-cart-link").length!==0],["handleCheckout",$(".js-express-cart-link").length!==0]],selectedReplacementEntryNumber:-1,isExpressCart:false,orderIncrement:{"HND":1,"KIT":1,"EA":100},repositionPopover:function(){$.fn.popover.Constructor.prototype.reposition=function(){var $tip=this.tip();var autoPlace=true;var placement=typeof this.options.placement==="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var viewportDim=this.getPosition(this.$viewport);placement=placement==="bottom"&&pos.bottom+actualHeight>viewportDim.bottom?"top":placement==="top"&&pos.top-actualHeight<viewportDim.top?"bottom":placement==="right"&&pos.right+actualWidth>viewportDim.width?"left":placement==="left"&&pos.left-actualWidth<viewportDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement);}
var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);};},bindExpressCart:function(){var link=$(".js-express-cart-link");link.popover({html:true,container:"body",placement:"bottom",content:'<div class="loading"><span class="glyphicon glyphicon-repeat"></span></div>',}).data("bs.popover").tip().addClass("express-cart__popover");link.on("shown.bs.popover",function(){var content=$(".popover-content");var expressCartUrl=link.data("expressCartUrl");$.ajax({url:expressCartUrl,cache:false,type:"GET",dataType:"html",success:function(result){if(result.indexOf("js-express-cart")!==-1){content.html(result);link.popover("reposition");ACC.expresscart.setCheckoutButtonState(content);ACC.expresscart.toggleLicenseProductNotice(content);ACC.expresscart.hideEaUomExpressCart();ACC.expresscart.loadAsyncPrices();ACC.expresscart.handleRemoveAllModal();ACC.expresscart.getDefaultOption();if($.isFunction(ACC.productDetail.updateUnitSelectionForCart)&&$.isFunction(ACC.productDetail.checkQtySelector)){content.find(".select-uom").each(function(){var conversion=$(this).find(':selected').data('conversion');ACC.productDetail.updateUnitSelectionForCart(this,$(this).val(),parseFloat(conversion));});}
if(ACC.minicart.isMaximunQty==true){$(".express-cart").find(".maximum-express-error").show();$(".express-cart__footer-btn-checkout").attr("disabled",true);}else{var maxQuantity=$(".express-cart").data("max-quantity-order");var itemsAdded=$(".express-cart__item").closest(".express-cart__added-item");if(itemsAdded.length>0){for(var i=0;i<itemsAdded.length;i++){var quantity=(+$(itemsAdded[i]).find(".js-qty-selector-input").val());if(quantity>maxQuantity){$(".express-cart").find(".maximum-error").show();$(".express-cart__footer-btn-checkout").attr("disabled",true);break;}}}}}else{location.reload();}},});});$(document).on("click",function(e){var $popover,$target=$(e.target);if($target.hasClass("popover")||$target.closest(".popover").length||$target.hasClass("ls-popup-outer")||$target.closest(".ls-popup-outer").length){return;}
$('.js-express-cart-link[data-toggle="popover"]').each(function(){$popover=$(this);if(!$popover.is(e.target)&&$popover.has(e.target).length===0&&$(".popover").has(e.target).length===0){ACC.expresscart.isExpressCart=false;$popover.popover("hide");}else{ACC.expresscart.isExpressCart=true;$popover.popover("toggle");}});});$(document).on("click",".express-cart__added-item .btn-view-replacement",function(e){var item=$(this).closest(".express-cart__added-item");ACC.expresscart.selectedReplacementEntryNumber=item.data("entry-number");var $modal=$("<div>",{class:"ls-popup-outer"});var $modalInner=$("<div>",{class:"ls-popup-inner"});var $modalContent=$("<div>",{class:"ls-popup-content product-replacement-popup",});var $close=$("<div>",{class:"ls-popup-close-container"}).html('<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>');var $updatedContent=$(e.target).parents("div").find(".product-replacement-container");$updatedContent.find("form").removeAttr("action").removeAttr("method");$updatedContent.find('button[type="submit"]').prop("disabled",false).removeClass("js-add-to-cart").addClass("js-add-to-express-cart");var $content=$("<div>",{class:"ls-popup-data"}).append($($updatedContent[0]).clone());$modalContent.append($content);$modalContent.append($close);$modalInner.append($modalContent);$modal.append($modalInner);$("body").append($modal);$("body").addClass("ls-popup-open");});},updateExpressCartDisplay:function(){var expressCartRefreshUrl=$(".js-express-cart-link").data("expressCartRefreshUrl");$.ajax({url:expressCartRefreshUrl,cache:false,type:"GET",dataType:"json",success:function(jsonData){if(jsonData.expressCartCount!==0){$(".js-express-cart-link .js-express-cart-count").empty();$(".js-express-cart-link .js-express-cart-count").append(jsonData.expressCartCount);$(".js-express-cart-link .js-express-cart-count").addClass("nav-item-counter");}else{$(".js-express-cart-link .js-express-cart-count").empty();$(".js-express-cart-link .js-express-cart-count").removeClass("nav-item-counter");}
ACC.expresscart.getDefaultOption();},});},handleProductCodeBlankItem:function(){var productCodeHandler=function(productCode,item){var searchProductCodeUrl="/cart/rollover/ExpressCart/updatecart";var quantity=item.find(".input-number");var jobReference=item.find(".job-reference");var validation=item.find(".product-code-validation");var data={entryNumber:item.data("entry-number"),productCode:productCode,quantity:quantity.val(),jobReference:jobReference.val(),};var update=function(response){var $response=$($.parseHTML(response));var searchStatus=$response.find(".express-cart__search-status span").text();ACC.expresscart.toggleLicenseProductNotice($response);if(searchStatus==="SUCCESSFUL"){var $itemContent=$response.find("[data-entry-number="+item.data("entry-number")+"]");item.replaceWith($itemContent);var defaultUnit=$itemContent.closest(".express-cart__item").data("value");var optionList=$itemContent.closest(".express-cart__item").find(".select-uom").find("option");ACC.product.removeEaOption(defaultUnit,optionList);var uomInput=$('.select .select-uom');uomInput.each(function(){var selector=$(this).closest(".express-cart__item").find('.js-qty-selector .js-qty-selector-input');var selectorParent=selector.closest(".express-cart__item");var step=selectorParent.find(".uomStep");if(step.length!=0&&selector.length!=0){let conversion=$(this).find(':selected').data("conversion");ACC.productDetail.updateUnitSelectionForCart($(this),$(this).val(),parseFloat(conversion));selector.find(".min-order-info .min-order").first().html(selector.val());}});ACC.expresscart.setCheckoutButtonState($response);ACC.expresscart.updateExpressCartDisplay();ACC.expresscart.loadAsyncPrices($itemContent);}else{validation.css("display","inline-block");}};$.ajax({url:searchProductCodeUrl,data:data,type:"post",success:function(response){update(response);},});};$(document).on("keydown",".express-cart__blank-item .product-code",function(e){var productCode=$(this).val();if(productCode.length===0){return;}
if(e.keyCode===13){var item=$(this).closest(".express-cart__blank-item");productCodeHandler(productCode,item);}});$(document).on("blur",".express-cart__blank-item .product-code",function(){var productCode=$(this).val();if(productCode.length===0){return;}
var item=$(this).closest(".express-cart__blank-item");productCodeHandler(productCode,item);});},handleQuantityBlankItem:function(){$(document).on("click",".express-cart__blank-item .btn-number",function(e){e.preventDefault();var fieldName=$(this).attr("data-field");var type=$(this).attr("data-type");var input=$("input[name='"+fieldName+"']");var value=parseInt(input.val());if(!isNaN(value)){if(type==="minus"){if(value>input.attr("min")){input.val(value-1).change();}
if(parseInt(input.val())===parseInt(input.attr("min"))){$(this).attr("disabled",true);}}else if(type==="plus"){input.val(value+1).change();}}else{input.val(parseInt(input.attr("min"))).change();}});$(document).on("change",".express-cart__blank-item .input-number",function(){var minValue=parseInt($(this).attr("min"));var value=parseInt($(this).val());var name=$(this).attr("name");var validation=$(this).parent().parent().find(".quantity-validation");var minusButton=$(".btn-number[data-type='minus'][data-field='"+name+"']");if(!isNaN(value)){if(value<minValue){validation.css("display","inline-block");minusButton.attr("disabled",true);$(this).val(minValue);}else if(value===minValue){validation.css("display","none");minusButton.attr("disabled",true);}else{validation.css("display","none");minusButton.attr("disabled",false);}}else{$(this).val(minValue);}});$(document).on("focus",".express-cart__blank-item .input-number",function(){var validation=$(this).parent().parent().find(".quantity-validation");validation.css("display","none");});$(document).on("keydown",".express-cart__blank-item .input-number",function(e){if($.inArray(e.keyCode,[46,8,9,27,13])!==-1||(e.keyCode===65&&e.ctrlKey===true)||(e.keyCode>=35&&e.keyCode<=39)){return;}
if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault();}});},handleJobReferenceItem:function(){$(document).on("change",".express-cart__added-item .job-reference",function(){var jobReference=$(this).val();var item=$(this).closest(".express-cart__added-item");var quantity=item.find(".input-number");var updateJobReferenceUrl="/cart/rollover/ExpressCart/updatecart";var data={entryNumber:item.data("entry-number"),quantity:quantity.val(),jobReference:jobReference,};$.ajax({url:updateJobReferenceUrl,data:data,type:"post",success:function(){var trackingData=ACC.product.handleTrackingData(item,"express-cart-update");window.dataLayer.push({event:'Express Cart Product Updated',...trackingData});}});});},updateExpressCartItem:function(target){var updateQuantityUrl="/cart/rollover/ExpressCart/updatecart";var item=$(target).closest(".product-component");var data={entryNumber:item.data("entry-number"),quantity:$(target).val(),};if(ACC.minicart.isMaximunQty==false){$(".express-cart").find(".maximum-express-error").hide();var itemsAdded=$(".express-cart__item").closest(".express-cart__added-item");var type=$(".express-cart");var btnCheckout=$(".express-cart__footer-btn-checkout");ACC.expresscart.checkItemMiniMaximumQtyExpress(type,itemsAdded,btnCheckout);}
ACC.expresscart.setCheckoutButtonState($(".js-express-cart"));$.ajax({url:updateQuantityUrl,data:data,type:"post",success:function(){var trackingData=ACC.product.handleTrackingData(item,"express-cart-update");window.dataLayer.push({event:'Express Cart Product Updated',...trackingData});}});},checkItemMiniMaximumQtyExpress:function(type,items,btnCheckout){if(items.length===0){type.find(".maximum-error").hide();}else{var maxQuantityOrder=(+type.data("max-quantity-order"));for(var i=0;i<items.length;i++){var quantity=(+$(items[i]).find(".js-qty-selector-input").val());if(quantity>maxQuantityOrder){type.find(".maximum-error").show();btnCheckout.attr("disabled",true);break;}else{type.find(".maximum-error").hide();btnCheckout.attr("disabled",false);}}}},handleUnitItem:function(){$(document).on("change",".express-cart__added-item .select-uom",function(){var updateUnitUrl="/cart/rollover/ExpressCart/updatecart";var uomSelector=$(this);var item=$(this).closest(".express-cart__added-item");var validation=item.find(".quantity-validation");var data={entryNumber:item.data("entry-number"),unit:$(this).val(),};validation.css("display","none");var update=function(response,currentQty){var $response=$($.parseHTML(response));var $itemContent=$response.find("[data-entry-number="+item.data("entry-number")+"]");ACC.expresscart.setCheckoutButtonState($response);ACC.expresscart.toggleLicenseProductNotice($response);$itemContent.find(".pdp-quantity-input").val(item.find(".pdp-quantity-input").val());item.replaceWith($itemContent);ACC.expresscart.loadAsyncPrices();$(".express-cart__added-item .select-uom").each(function(){ACC.expresscart.updateUoM($(this));});};$.ajax({url:updateUnitUrl,data:data,type:"post",success:function(response){update(response);}});});},updateUoM:function(self){if($.isFunction(ACC.productDetail.updateUnitSelectionForCart)&&$.isFunction(ACC.productDetail.checkQtySelector)){var conversion=$(self).find(':selected').data('conversion');ACC.productDetail.updateUnitSelectionForCart($(self),$(self).val(),parseFloat(conversion));var selector=$(self).closest(".product-information-container").find('.js-qty-selector .js-qty-selector-input');if(selector.length!=null){ACC.productDetail.checkQtySelector(selector,"change");}}},handleRemoveAllModal:function(){$("#removeAllExpressCartModal").on("show.bs.modal",function(){var $backdrop=$("<div>",{id:"expressCartBackdrop",class:"modal-backdrop fade in",});$(".express-cart__popover").append($backdrop);});$("#removeAllExpressCartModal").on("hide.bs.modal",function(){$(".express-cart__popover #expressCartBackdrop").remove();});$(document).on("click","#removeAllExpressCartModal .btn-confirm",function(){$(".has-no-price").hide();$(".js-continue-checkout-button").attr("disabled",false);var removeAllUrl="/cart/rollover/ExpressCart/removeall";var items=$(".express-cart__items");var update=function(response){var $response=$($.parseHTML(response));ACC.expresscart.toggleLicenseProductNotice($response);var $itemContent=$response.find(".express-cart__items");items.replaceWith($itemContent);ACC.expresscart.setCheckoutButtonState($response);ACC.expresscart.updateExpressCartDisplay();$("#removeAllExpressCartModal").modal("hide");if(ACC.minicart.isMaximunQty==false){$(".express-cart").find(".maximum-express-error").hide();$(".express-cart").find(".maximum-error").hide();$(".express-cart__footer-btn-checkout").attr("disabled",false);}};$.ajax({url:removeAllUrl,type:"post",success:function(response){update(response);}});});},handleRemoveItem:function(){$(document).on("click",".express-cart__item .close",function(){var removeItemUrl="/cart/rollover/ExpressCart/remove";var item=$(this).closest(".express-cart__item");var data={entryNumber:item.data("entry-number"),};var items=$(".express-cart__items");var update=function(response){item.remove();var $response=$(".express-cart").html(response)
if($(".express-cart__item").length===0){var $itemContent=$response.find(".express-cart__items");items.replaceWith($itemContent);}
ACC.expresscart.toggleLicenseProductNotice($response);ACC.expresscart.updateExpressCartDisplay();ACC.expresscart.loadAsyncPrices();if(ACC.expresscart.checkItemHasNoPrice()==false){$(".has-no-price").hide();if(ACC.minicart.isMaximunQty==false){$(".express-cart").find(".maximum-express-error").hide();var itemsAdded=$(".express-cart__item").closest(".express-cart__added-item");var type=$(".express-cart");var btnCheckout=$(".express-cart__footer-btn-checkout");ACC.expresscart.checkItemMiniMaximumQtyExpress(type,itemsAdded,btnCheckout);}}
ACC.expresscart.setCheckoutButtonState($response);};$.ajax({url:removeItemUrl,data:data,type:"post",success:function(response){update(response);},});});},handleAddReplacement:function(){$(document).on("click",".js-add-to-express-cart",function(e){e.preventDefault();var form=$(this).closest("form");var items=$(".express-cart__items");var replaceItemUrl="/cart/rollover/ExpressCart/replacecart";var data={entryNumber:ACC.expresscart.selectedReplacementEntryNumber,productCode:form.find("input[name=productCodePost]").val(),quantity:form.find("input[name=qty]").val(),unit:form.find("input[name=uomCode]").val(),};var update=function(response){var $response=$($.parseHTML(response));ACC.expresscart.setCheckoutButtonState($response);ACC.expresscart.toggleLicenseProductNotice($response);var $itemContent=$response.find(".express-cart__items");items.replaceWith($itemContent);ACC.expresscart.updateExpressCartDisplay();ACC.expresscart.loadAsyncPrices();};$(".ls-popup-outer").remove();$("body").removeClass("ls-popup-open");$.ajax({url:replaceItemUrl,data:data,type:"post",success:function(response){update(response);},});});},handleAddProductRows:function(){$(document).on("click",".express-cart .btn-add-product-rows",function(){var addProductRowsUrl="/cart/rollover/ExpressCart/addproducts";var items=$(".express-cart__items");var update=function(response){var $response=$($.parseHTML(response));ACC.expresscart.setCheckoutButtonState($response);ACC.expresscart.toggleLicenseProductNotice($response);var $itemContent=$response.find(".express-cart__items");items.replaceWith($itemContent);};$.ajax({url:addProductRowsUrl,type:"post",success:function(response){update(response);},});});},handleAddToCart:function(){$(document).on("click",".express-cart .express-cart__footer-btn-add-to-cart",function(){var addToCartUrl="/cart/rollover/ExpressCart/addtocart";var update=function(){ACC.minicart.updateMiniCartDisplay();window.location.href="/cart";};$.ajax({url:addToCartUrl,type:"post",beforeSend:function(){ACC.expresscart.toggleLoadingIndicator();},complete:function(){ACC.expresscart.toggleLoadingIndicator();$('.js-express-cart-link[data-toggle="popover"]').popover("hide");},success:function(res){const expressCartItem=$(".express-cart__added-item");const objectIs=[];const objectDatas=[];if(expressCartItem.length>0){localStorage.setItem("source_sm","Express cart");localStorage.setItem("cartId",res.cartCode);for(const element of expressCartItem){const data=ACC.product.handleTrackingData($(element),"express-cart",res.cartCode);objectIs.push(data.product_id);objectDatas.push({"price":data.price,"quantity":data.quantity});window.mediator.publish("productAdded_sm",data);}
if(objectIs&&objectIs.length>0){ACC.algoliaEvent.objectDatas=objectDatas;ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',objectIs,ACC.algoliaSearch.defaultCurrency);}}
update();},});});},handleCheckout:function(){$(document).on("click",".express-cart .express-cart__footer-btn-checkout",function(){if(ACC.expresscart.checkItemHasNoPrice()==true){$(".has-no-price").show();$(".express-cart__footer-btn-checkout").attr("disabled",true);return;}
var notAllowLicense=$('.express-cart .cart-licensed-product-warning');if(notAllowLicense.length>0){return;}
var checkoutUrl="/cart/rollover/ExpressCart/checkout";var update=function(res){localStorage.setItem("source_sm","Express cart");localStorage.setItem("isCheckoutStarted",true);ACC.checkout.bindCheckoutButton();};$.ajax({url:checkoutUrl,type:"post",beforeSend:function(){ACC.expresscart.toggleLoadingIndicator();},complete:function(){ACC.expresscart.toggleLoadingIndicator();},success:function(res){update(res);},error:function(res){if(res.responseJSON.message=="maxQuantityError"){$(".express-cart").find(".maximum-express-error").show();$(".express-cart__footer-btn-checkout").attr("disabled",true);}},});});},toggleLoadingIndicator:function(){var popoverContent=$(".popover-content");var busyContent=$(".express-cart");if(busyContent.hasClass("busy")){busyContent.removeClass("busy");$(".content-loading").remove();}else{busyContent.addClass("busy");popoverContent.prepend('<div class="loading content-loading"><span class="glyphicon glyphicon-repeat"></span></div>');}},loadAsyncPrices:function(target){if(!ACC.config.livePriceCallEnabled){return;}
var url="/pricingfactory/getPrice";var codes=[];$(".express-cart__added-item").each(function(){var item=$(this);if(item.find(".loading-price").length!==0&&item.find(".loading-price").text()===""){item.find(".loading-price").html('<div class="loading small"><span class="icon-f icon-f-spinner3 ls-animate-spin"></span></div>');var code=$.trim(item.data("entry-product-code"));codes.push(code);}});if(codes.length>0){codes.sort();var uniqueCodes=codes.filter((x,i)=>codes.indexOf(x)===i);var slidedArrays=ACC.expresscart.slideArray(uniqueCodes,ACC.config.livePriceCallMaxProductsPerRequest);$.each(slidedArrays,function(slidedIndex,slidedValues){var codesAsString=slidedValues.join(":");ACC.expresscart.invokePriceService(url,target,codesAsString,slidedIndex);});}},invokePriceService:function(url,target,codesAsString){var data={CSRFToken:ACC.config.CSRFToken,"productCodes":codesAsString};$.ajax({url:url,type:"POST",data:data,dataType:'json',success:function(data){$.each(data.productPrices,function(index,value){var item=$(".express-cart__added-item[data-entry-product-code="+
value.productCode+"]");$.each(item,function(i,v){var unit=$(v).data("entry-unit");var price=$(v).find(".loading-price");var nonGSTTag=$(v).find('.non-gst-price');$.each(value.prices,function(priceIndex,priceValue){if(unit&&priceValue.unitCode===unit){var priceTracking=0;if(nonGSTTag.length>0){priceTracking=priceValue.grossAmount;price.text(priceValue.formattedGrossAmount);}else{priceTracking=priceValue.netAmount;price.text(priceValue.formattedNetAmount);}
if(!target){return;}
var trackingData=ACC.product.handleTrackingData(target,"express-cart-added");if(trackingData.price){trackingData.price=priceTracking;localStorage.setItem("source_sm","Express cart");window.dataLayer.push({event:'Express Cart Product Added',...trackingData});}}});});});},});},slideArray:function(dataArray,maxLength){var slidedArrays=[];while(dataArray.length>0){slidedArrays.push(dataArray.splice(0,maxLength));}
return slidedArrays;},checkItemHasNoPrice:function(){for(var i=0;i<$(".express-cart__item").length;i++){var item=$(".express-cart__item:eq("+i+")");if(item.data('entryProductCode')!==undefined&&item.find(".product-container").find(".details").find(".price").find(".cart-item-base-price").text()==''){return true;}}
return false;},hideEaUomExpressCart:function(){var itemList=$(".express-cart__item").find(".select-uom");itemList.each(function(){ACC.product.hideEaUom($(this).find("option"));})},getDefaultOption:function(){var item=$(".express-cart__added-item");item.each(function(){var defaultUnit=$(this).data("value");var optionList=$(this).find(".select-uom").find("option");ACC.product.removeEaOption(defaultUnit,optionList);})},toggleLicenseProductNotice:function(dom){var isNotAllowLicense=dom.find('.cart-licensed-product-warning');if(isNotAllowLicense.length>0){$('.express-cart .license-product-notice-container').replaceWith(dom.find('.license-product-notice-container'));}else{$('.express-cart .license-product-notice-container').empty();}},setCheckoutButtonState:function(dom){var expressComp=$(".express-cart.js-express-cart");var isEmpty=expressComp.find('.product-component').length===0;var isNotAllowLicense=expressComp.find('.cart-licensed-product-warning');var obsolete=expressComp.find('.product-component').filter(function(){if((!$(this).data('obsolete')&&$(this).data('replacements'))||$(this).data('obsolete'))
return $(this);});if(obsolete.length>0){$('.express-cart__footer-btn-checkout').prop('disabled',true);$('.express-cart__footer-btn-add-to-cart').prop('disabled',true);return;}
if(isNotAllowLicense.length>0){$('.express-cart__footer-btn-checkout').prop('disabled',true);$('.express-cart__footer-btn-add-to-cart').prop('disabled',true);return;}
if(isEmpty){var cartCount=$('.js-mini-cart-count').text();if(parseInt(cartCount)>0){if(ACC.minicart.isMaximunQty==true){$(".express-cart").find(".maximum-express-error").show();$(".express-cart").find(".maximum-error").hide();$(".express-cart__footer-btn-checkout").attr("disabled",true);}else{$('.express-cart__footer-btn-checkout').prop('disabled',false);}}else{$('.express-cart__footer-btn-checkout').prop('disabled',true);}
$('.express-cart__footer-btn-add-to-cart').prop('disabled',true);}else{if(ACC.minicart.isMaximunQty==true){$(".express-cart").find(".maximum-express-error").show();$(".express-cart").find(".maximum-error").hide();$(".express-cart__footer-btn-checkout").attr("disabled",true);}else{var itemsAdded=$(".express-cart__item").closest(".express-cart__added-item");var type=$(".express-cart");var btnCheckout=$(".express-cart__footer-btn-checkout");ACC.expresscart.checkItemMiniMaximumQtyExpress(type,itemsAdded,btnCheckout);}
$('.express-cart__footer-btn-add-to-cart').prop('disabled',false);}}};var oDoc=document;ACC.navigation={_autoload:["reduceDomFromProduct","offcanvasNavigation","myAccountNavigation","orderToolsNavigation","bindMegaMenuNavigation","navigationBox","resizeTopNav",["bindProductNavigation",$('.product-navigation-bar').length>0]],scrollHistory:[],reduceDomFromProduct:function(){$('.ls-nav-item.ls-nav-item-left').each(function(){var title=$(this).find('.nav-item-text.nav-item-left').text().trim();if(title==='Products'){localStorage.removeItem('clonedMenu');var clonedMenu=$(this).find('.ls-mega-menu-items').clone().prop('outerHTML');var trimmedContent=clonedMenu.replaceAll('\t','');localStorage.setItem('clonedMenu',trimmedContent);$(this).find('.ls-mega-menu-items').remove();}});$('.nav-item-text.nav-item-left').hover(function(){var title=$(this).text().trim();var clonedMenu=localStorage.getItem('clonedMenu');if(title==='Products'&&clonedMenu){$(this).parent().parent().append(clonedMenu);$(this).find('.mega-menu-block').css('text-transform','none');localStorage.removeItem('clonedMenu');}});$('.nav-icon-more').click(function(){var title=$(this).parent().find(".nav-item-text").text().trim();var clonedMenu=localStorage.getItem('clonedMenu');if(title==='Products'&&clonedMenu){$(this).parent().parent().append(clonedMenu);$(this).find('.mega-menu-block').css('text-transform','none');localStorage.removeItem('clonedMenu');}});},resizeTopNav:function(){window.addEventListener('resize',function(e){if(window.innerWidth>640){$('.navigation').removeClass('nav-item-active');}});},offcanvasNavigation:function(){enquire.register("screen and (max-width:"+ACC.common.encodeHtml(screenSmMax)+")",{match:function(){$(document).on("click",".js-enquire-offcanvas-navigation .js-enquire-has-sub .js_nav__link--drill__down",function(e){e.preventDefault();$(".js-userAccount-Links").hide();$(".js-enquire-offcanvas-navigation ul.js-offcanvas-links").addClass("active");$(".js-enquire-offcanvas-navigation .js-enquire-has-sub").removeClass("active");$(this).parent(".js-enquire-has-sub").addClass("active");});$(document).on("click",".js-enquire-offcanvas-navigation .js-enquire-sub-close",function(e){e.preventDefault();$(".js-userAccount-Links").show();$(".js-enquire-offcanvas-navigation ul.js-offcanvas-links").removeClass("active");$(".js-enquire-offcanvas-navigation .js-enquire-has-sub").removeClass("active");});},unmatch:function(){$(".js-userAccount-Links").show();$(".js-enquire-offcanvas-navigation ul.js-offcanvas-links").removeClass("active");$(".js-enquire-offcanvas-navigation .js-enquire-has-sub").removeClass("active");$(document).off("click",".js-enquire-offcanvas-navigation .js-enquire-has-sub > a");$(document).off("click",".js-enquire-offcanvas-navigation .js-enquire-sub-close");}});},myAccountNavigation:function(){$('.js-mobile-logo').html($('.js-site-logo a').clone());$('.nav-form').append($("<span>").addClass("glyphicon glyphicon-list-alt"));var aAcctData=[];var sSignBtn="";var oMyAccountData=$(".accNavComponent");var oMMainNavDesktop=$(".js-secondaryNavAccount > ul");var oMainNav=$(".navigation--bottom > ul.nav__links.nav__links--products");if(oMyAccountData){var aLinks=oMyAccountData.find("a");for(var i=0;i<aLinks.length;i++){aAcctData.push({link:aLinks[i].href,text:aLinks[i].title});}}
var navClose=$("<div>").addClass("close-nav").append($("<button>").attr("type","button").addClass("js-toggle-sm-navigation btn").append($("<span>").addClass("glyphicon glyphicon-remove")));if($(".liOffcanvas a")&&$(".liOffcanvas a").length>0){sSignBtn=$("<li>").addClass("auto liUserSign").append($("<a>").addClass("userSign").attr("href",$(".liOffcanvas a")[0].href).text(" "));}
var oUserInfo=$(".nav__right ul li.logged_in");if(oUserInfo&&oUserInfo.length===1){var sUserBtn=$("<li>").addClass("auto").append($("<div>").addClass("userGroup").append($("<span>").addClass("glyphicon glyphicon-user myAcctUserIcon")).append($("<div>").addClass("userName").html(oUserInfo[0].innerHTML)));if(aAcctData.length>0){$(sUserBtn).find(".userGroup").append($("<a>").addClass("collapsed js-nav-collapse").attr("id","signedInUserOptionsToggle").attr("data-toggle","collapse").attr("data-target",".offcanvasGroup1").append($("<span>").addClass("glyphicon glyphicon-chevron-up myAcctExp")));}
sUserBtn.append(navClose);$('.js-sticky-user-group').html(sUserBtn);$('.js-userAccount-Links').append(sSignBtn);$('.js-userAccount-Links').append($("<li>").addClass("auto").append($("<div>").addClass("myAccountLinksContainer js-myAccountLinksContainer")));var myAccountHook=$("<div>").addClass("myAccountLinksHeader js-myAccount-toggle").attr("data-toggle","collapse").attr("data-parent",".nav__right").text(oMyAccountData.data("title"));myAccountHook.insertBefore(oMyAccountData);$('.myAccountLinksHeader').click(function(){$(this).toggleClass('show');$(".js-secondaryNavAccount").slideToggle(400);if($(this).hasClass('show')){$('.myCompanyLinksHeader').removeClass('show');$('.js-secondaryNavCompany').slideUp(400);}
return false;});var myAccountHook=$("<div>").addClass("sub-nav").append($("<a>").attr("id","signedInUserAccountToggle").addClass("myAccountLinksHeader collapsed js-myAccount-toggle").attr("data-toggle","collapse").attr("data-target",".offcanvasGroup2").text(oMyAccountData.data("title")).append($("<span>").addClass("glyphicon glyphicon-chevron-down myAcctExp")));$('.js-myAccountLinksContainer').append(myAccountHook);$('.js-myAccountLinksContainer').append($("<ul>").attr("data-trigger","#signedInUserAccountToggle").addClass("offcanvasGroup2 offcanvasNoBorder collapse js-nav-collapse-body subNavList js-myAccount-root sub-nav"));$('#signedInUserAccountToggle').click(function(){$(this).toggleClass('show');$(".offcanvasGroup2").slideToggle(400);if($(this).hasClass('show')){$(this).find('span').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');$('#signedInCompanyToggle').removeClass('show');$('#signedInCompanyToggle').find('span').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');$('.offcanvasGroup3').slideUp(400);}else{$(this).find('span').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');}});for(var i=aAcctData.length-1;i>=0;i--){var oLink=oDoc.createElement("a");oLink.title=aAcctData[i].text;oLink.href=aAcctData[i].link;oLink.innerHTML=ACC.common.encodeHtml(aAcctData[i].text);var oListItem=oDoc.createElement("li");oListItem.appendChild(oLink);oListItem=$(oListItem);oListItem.addClass("auto ");$('.js-myAccount-root').append(oListItem);}}else{if(sSignBtn){var navButtons=sSignBtn.append(navClose);$('.js-sticky-user-group').append(navButtons);}}
for(var i=0;i<aAcctData.length;i++){var oLink=oDoc.createElement("a");oLink.title=aAcctData[i].text;oLink.href=aAcctData[i].link;oLink.innerHTML=ACC.common.encodeHtml(aAcctData[i].text);var oListItem=oDoc.createElement("li");oListItem.appendChild(oLink);oListItem=$(oListItem);oListItem.addClass("auto col-md-4");oMMainNavDesktop.get(0).appendChild(oListItem.get(0));}
$('.js-secondaryNavAccount').on('shown.bs.collapse',function(){if($('.js-secondaryNavCompany').hasClass('in')){$('.js-myCompany-toggle').click();}});$('.js-secondaryNavCompany').on('shown.bs.collapse',function(){if($('.js-secondaryNavAccount').hasClass('in')){$('.js-myAccount-toggle').click();}});$('.js-nav-collapse-body').on('hidden.bs.collapse',function(e){var target=$(e.target);var targetSpanSelector=target.attr('data-trigger')+' > span';if(target.hasClass('in')){$(document).find(targetSpanSelector).removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');}else{$(document).find(targetSpanSelector).removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');}});$('.js-nav-collapse-body').on('show.bs.collapse',function(e){var target=$(e.target);var targetSpanSelector=target.attr('data-trigger')+' > span';if(target.hasClass('in')){$(document).find(targetSpanSelector).removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');}else{$(document).find(targetSpanSelector).removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');}});},orderToolsNavigation:function(){$('.js-nav-order-tools').on('click',function(e){$(this).toggleClass('js-nav-order-tools--active');});},bindClickNavigation:function(e){$(document).on('mouseenter','.ls-l1-mega-menu>.flexbox',function(e){let parentDiv=$(this).parents('.ls-l1-mega-menu');if(parentDiv.hasClass('mega-menu-no-children')){$('.l3-mega-menu-item-container').addClass('hidden');$('.l2-mega-menu-item-container').addClass('hidden');setTimeout(function(){$('.ls-l1-mega-menu').removeClass('mega-menu-item-active');},10);return;}
let l2Items=$(parentDiv).find('.mega-menu-l2-content-holder>.mega-menu-content').clone();$('.l2-mega-menu-item-container').find('.l2-mega-menu-items .mega-menu-content').replaceWith(l2Items);if(!parentDiv.hasClass('mega-menu-item-active')){$('.l3-mega-menu-item-container').addClass('hidden');$('.l2-mega-menu-item-container').removeClass('hidden');setTimeout(function(){$('.ls-l1-mega-menu').removeClass('mega-menu-item-active');$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');$(parentDiv).addClass('mega-menu-item-active');},10);$('.ls-l1-mega-menu .icon-up-arrow').off();$('.ls-l1-mega-menu .icon-up-arrow').on('click',function(e){var menu=$(this).closest('.ls-l1-mega-menu');if(menu.hasClass('mega-menu-item-active')){menu.removeClass('mega-menu-item-active');$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');}});}});$(document).on('mouseenter','.ls-l2-mega-menu>.flexbox',function(e){let parentL2=$(this).parents('.ls-l2-mega-menu');if(parentL2.hasClass('mega-menu-no-children')){parentL2.removeClass('mega-menu-item-active');$('.l3-mega-menu-item-container').addClass('hidden');setTimeout(function(){$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');;},10);return;}
if(!parentL2.hasClass('mega-menu-item-active')){let l3Items=$(this).parents('.ls-l2-mega-menu').find('.mega-menu-l3-content-holder>.mega-menu-content').clone();$('.l3-mega-menu-item-container').find('.l3-mega-menu-items .mega-menu-content').replaceWith(l3Items);$('.l3-mega-menu-item-container').removeClass('hidden');setTimeout(function(){$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');parentL2.addClass('mega-menu-item-active');},10);$('.ls-l2-mega-menu .icon-up-arrow').off();$('.ls-l2-mega-menu .icon-up-arrow').on('click',function(e){var l2Menu=$(this).closest('.ls-l2-mega-menu');if(l2Menu.hasClass('mega-menu-item-active')){l2Menu.removeClass('mega-menu-item-active');}});}});$('.ls-l1-mega-menu .icon-down-arrow').on('click',function(e){var menu=$(this).closest('.ls-l1-mega-menu');if(!menu.hasClass('mega-menu-item-active')){menu.addClass('mega-menu-item-active');}});$('.ls-l2-mega-menu .icon-down-arrow').on('click',function(e){var l2Menu=$(this).closest('.ls-l2-mega-menu');if(!l2Menu.hasClass('mega-menu-item-active')){l2Menu.addClass('mega-menu-item-active');}});$('.ls-nav-item-search .nav-item-link').on('click',function(){$('.ls-nav-header').addClass('search-box-active');});$('.menu-icon-container').on('click',function(){$('.ls-nav-header').removeClass('search-box-active');$('.ls-nav-header').toggleClass('nav-item-active');$('body').addClass('overflow-y-hidden-xs');});$(".ls-nav-item-left").hover(function(e){e.preventDefault();e.stopPropagation();const targetClick=$(e.target).hasClass('.ls-nav-item')?$(e.target):$(e.target).closest('.sub-mega-menu-item-container').length>0||$(e.target).closest('.mega-menu-content').length>0?$(e.target):$(e.target).closest('.ls-nav-item');const isClose=$(e.target).hasClass('.mega-menu-close')||$(e.target).closest('.mega-menu-close').length>0;const navItem=targetClick.find('.nav-item-link');if(!isClose&&navItem.length>0){$('.l3-mega-menu-item-container').addClass('hidden');$('.l2-mega-menu-item-container').addClass('hidden');$('.ls-l1-mega-menu').removeClass('mega-menu-item-active');$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');setTimeout(function(){navItem.addClass('ls-nav-item-active');},10);$('.nav-item-link .nav-item-info .icon-up-arrow').off();$('.nav-item-link .nav-item-info .icon-up-arrow').on('click',function(e){var menu=$(this).closest('.nav-item-link');if(menu.hasClass('ls-nav-item-active')){setTimeout(function(){menu.removeClass('ls-nav-item-active');$(menu).find('.ls-l2-mega-menu').removeClass('mega-menu-item-active');$(menu).find('.ls-l1-mega-menu').removeClass('mega-menu-item-active');},10);}else{setTimeout(function(){menu.addClass('ls-nav-item-active');},10);}});}},function(e){const targetClick=$(e.currentTarget).hasClass('.ls-nav-item')?$(e.currentTarget):$(e.currentTarget).closest('.sub-mega-menu-item-container').length>0||$(e.currentTarget).closest('.mega-menu-content').length>0?$(e.currentTarget):$(e.currentTarget).closest('.ls-nav-item');const navItem=targetClick.find('.nav-item-link');navItem.removeClass('ls-nav-item-active');});$(".nav-item-link .nav-item-info .icon-down-arrow").click(function(e){e.preventDefault();e.stopPropagation();const targetClick=$(e.target).hasClass('.ls-nav-item')?$(e.target):$(e.target).closest('.sub-mega-menu-item-container').length>0||$(e.target).closest('.mega-menu-content').length>0?$(e.target):$(e.target).closest('.ls-nav-item');const isClose=$(e.target).hasClass('.mega-menu-close')||$(e.target).closest('.mega-menu-close').length>0;const navItem=targetClick.find('.nav-item-link');if(!isClose&&navItem.length>0){$('.l3-mega-menu-item-container').addClass('hidden');$('.l2-mega-menu-item-container').addClass('hidden');$('.ls-l1-mega-menu').removeClass('mega-menu-item-active');$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');setTimeout(function(){navItem.addClass('ls-nav-item-active');},10);$('.nav-item-link .nav-item-info .icon-up-arrow').off();$('.nav-item-link .nav-item-info .icon-up-arrow').on('click',function(e){var menu=$(this).closest('.nav-item-link');if(menu.hasClass('ls-nav-item-active')){setTimeout(function(){menu.removeClass('ls-nav-item-active');$(menu).find('.ls-l2-mega-menu').removeClass('mega-menu-item-active');$(menu).find('.ls-l1-mega-menu').removeClass('mega-menu-item-active');},10);}else{setTimeout(function(){menu.addClass('ls-nav-item-active');},10);}});}});$('.ls-nav-links-right').on('click',function(e){if(!(e.target.matches('.ls-mega-menu-items')||e.target.matches('.ls-mega-menu-items-content'))){const targetClick=$(e.target).hasClass('.ls-nav-item')?$(e.target):$(e.target).closest('.sub-mega-menu-item-container').length>0||$(e.target).closest('.mega-menu-content').length>0?$(e.target):$(e.target).closest('.ls-nav-item');const isClose=$(e.target).hasClass('.mega-menu-close')||$(e.target).closest('.mega-menu-close').length>0;const navItem=targetClick.find('.nav-item-link');if(!isClose&&navItem.length>0){$('.l3-mega-menu-item-container').addClass('hidden');$('.l2-mega-menu-item-container').addClass('hidden');$('.ls-l1-mega-menu').removeClass('mega-menu-item-active');$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');if(navItem.hasClass('ls-nav-item-active')){navItem.removeClass('ls-nav-item-active');}else{ACC.navigation.deactiveNavLink();navItem.addClass('ls-nav-item-active');}}}});$('.mega-menu-close').on('click',function(e){ACC.navigation.closeMegaDropdown();e.stopPropagation();})
$('.ls-mega-menu').on('click',function(e){const targetClick=$(e.target).hasClass('.ls-mega-menu')?$(e.target):$(e.target).closest('.ls-mega-menu');const isClose=$(e.target).hasClass('.mega-menu-close')||$(e.target).closest('.mega-menu-close').length>0;if(!isClose){targetClick.addClass('mega-menu-active');}});$('.ls-mega-menu-items').on('click',function(e){if(e.target.matches('.ls-mega-menu-items')||e.target.matches('.ls-mega-menu-items-content')||e.target.matches('.mega-menu-item-container')){ACC.navigation.closeMegaDropdown();}});window.onclick=function(e){if(!(e.target.matches('.search-box-container')||$(e.target).closest('.search-box-container').length>0||e.target.matches('.ls-nav-item-search')||$(e.target).closest('.ls-nav-item-search').length>0)){ACC.navigation.closeSearchBox();}
if(!(e.target.matches('.ls-mega-menu-items')||$(e.target).closest('.ls-mega-menu-items').length>0||e.target.matches('.menu-icon-container')||$(e.target).closest('.menu-icon-container').length>0||e.target.matches('.nav-item-link')||$(e.target).closest('.nav-item-link').length>0)){ACC.navigation.closeMegaDropdown();}
if(!(e.target.matches('.nav-item-link')||$(e.target).closest('.nav-item-link').length>0)){ACC.navigation.deactiveNavLink();}
if(!($(e.target).hasClass('category-sort')||$(e.target).closest('.category-sort').length>0)){$('.category-sort').removeClass('sort-active');}
if(e.target.offsetParent&&e.target.offsetParent.className!=="input-group-btn"){let afterInputChange=sessionStorage.getItem("qty-input-change");if(afterInputChange){sessionStorage.removeItem("qty-input-change");}
else{$('.dialog-favorite-container').fadeOut("fast");}}}},closeMegaDropdown:function(){if($('.ls-nav-header').hasClass('nav-item-active')){$('.ls-nav-header').removeClass('nav-item-active');$('body').removeClass('overflow-y-hidden-xs');}
$('.l3-mega-menu-item-container').addClass('hidden');$('.l2-mega-menu-item-container').addClass('hidden');$('.ls-nav-item-left .nav-item-link').removeClass('ls-nav-item-active');$('.ls-nav-item-left .nav-item-link').removeClass('mega-menu-active');$('.ls-l1-mega-menu').removeClass('mega-menu-item-active');$('.ls-l2-mega-menu').removeClass('mega-menu-item-active');},closeSearchBox:function(){if($('.ls-nav-header').hasClass('search-box-active')){$('.ls-nav-header').removeClass('search-box-active');}},deactiveNavLink:function(e){$('.nav-item-link').removeClass('ls-nav-item-active')},bindMegaMenuNavigation:function(){$(document).ready(function(){ACC.navigation.bindClickNavigation();});},navigationBox:function(){$(".ls-navbox-block-container:gt(3)").css("display","none");},bindProductNavigation:function(){$(document).on('click','.product-nav-pre',function(e){ACC.navigation.scrollProductNavigation(e,false);});$(document).on('click','.product-nav-next',function(e){ACC.navigation.scrollProductNavigation(e,true);});let navDebounceTimeout;$('.product-navigation-item').hover(function(){const that=this;navDebounceTimeout=setTimeout(()=>{$(this).addClass('active');},300);},function(){clearTimeout(navDebounceTimeout);$(this).removeClass('active');});ACC.navigation.displayNextNavigation();},displayNextNavigation:function(){const navigationBar=$('.product-navigation-bar');const navigationBarContainer=$('.product-nav-holder');if(navigationBar.get(0).scrollWidth>navigationBarContainer.get(0).offsetWidth){$('.product-nav-next').show();navigationBar.css('padding-right','40px');}},scrollProductNavigation:function(event,toRight){const productNavItems=$('.product-navigation-item');if(toRight){const scrollIndex=ACC.navigation.calculateScrollIndex();for(let i=0;i<=scrollIndex;i++){$(productNavItems.get(i)).hide();}
ACC.navigation.toggleProductNavigationButton(toRight);ACC.navigation.scrollHistory.push(scrollIndex);}else{const scrollHistory=ACC.navigation.scrollHistory.pop();const scrollTarget=ACC.navigation.scrollHistory?.[ACC.navigation.scrollHistory.length-1]||-1;for(let i=scrollTarget+1;i<=scrollHistory;i++){$(productNavItems.get(i)).show();}
ACC.navigation.toggleProductNavigationButton();}},toggleProductNavigationButton:function(toRight){const navigationBar=$('.product-navigation-bar');const navigationBarRoot=$('.product-navigation-bar-root');const rootRect=navigationBarRoot.get(0).getBoundingClientRect();if(toRight){const remainingVisibleItems=$('.product-navigation-item:visible');const visibleWidth=remainingVisibleItems.toArray().reduce((a,c)=>a+c.getBoundingClientRect().width,0);navigationBar.css('padding-left','32px');if(visibleWidth<=rootRect.width){navigationBar.css('padding-right','0');$('.product-nav-next').hide();}else{navigationBar.css('padding-right','32px');$('.product-nav-next').show();}
$('.product-nav-pre').show();}else{if(ACC.navigation.scrollHistory.length===0){navigationBar.css('padding-left','0');$('.product-nav-pre').hide();}else{navigationBar.css('padding-left','32px');$('.product-nav-pre').show();}
$('.product-nav-next').show();}},calculateScrollIndex:function(){const navigationBarRoot=$('.product-navigation-bar-root');const rootRect=navigationBarRoot.get(0).getBoundingClientRect();const productNavItems=$('.product-navigation-item');let scrollOffset=0;let currentIndex=0;for(let i=0;i<productNavItems.length;i++){if($(productNavItems.get(i)).is(':visible')){if(scrollOffset+productNavItems.get(i).getBoundingClientRect().width<rootRect.width-32){scrollOffset+=productNavItems.get(i).getBoundingClientRect().width;currentIndex=i;}else{break;}}}
return currentIndex;}};ACC.order={_autoload:[['backToOrderHistory',$('.ls-account-order-history-container').length>0],['bindMultidProduct',$('.ls-account-order-history-container').length>0],['orderHistory',$('.ls-account-order-history-container').length>0],['bindPopularProducts',$('.ls-account-popular-products-container').length>0],['bindCheckboxState',$('.ls-account-popular-products-container').length>0]],addPopularProductToCartUrl:'/my-account/popularProducts-cart-add',viewOrderHistoryList:function(){var check=$(".ls-account-order-history-container");if(check.length>0){var orders=[];var items=$(".account-order-history").find(".responsive-table-item");items.each(function(index,item){var status=$(item).find(".status-column").find(".ls-data-status-filter").text().trim().charAt(0).toUpperCase();var orderDate=$(item).find(".date-column").text().trim().split("/");if(orderDate.length>0){orderDate=orderDate[2]+'-'+orderDate[1]+'-'+orderDate[0];}
orders.push({account_number:$(item).find(".account-column").text().trim()||"",order_date:$(item).find(".date-column")?new Date(orderDate).toISOString()+"":"",order_id:$(item).find(".order-column").text().trim()||"",order_status:status?status+$(item).find(".status-column").find(".ls-data-status-filter").text().trim().slice(1):"",purchase_order_no:$(item).find(".purchase-column").text().trim()||"",total:+($(item).find(".amount-column").text().trim().replace(/[^0-9.-]+/g,""))||"",})});var trackingData={orders:orders}
window.dataLayer.push({event:'View order history list',...trackingData});}},backToOrderHistory:function(){$(".orderBackBtn > button").on("click",function(){var sUrl=$(this).data("backToOrders");window.location=sUrl;});},bindMultidProduct:function(){$(document).on("click",'.js-show-multiD-grid-in-order',function(event){ACC.multidgrid.populateAndShowGrid(this,event,true);return false;});$(document).on("click",'.showMultiDGridInOrderOverlay',function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event);});},orderHistory:function(){const urlPrefix="/my-account/orders?";let pageValue=0;let orderHistory={searchValue:"",statusValue:"",fromDateValue:"",toDateValue:"",fromDateFormatStr:"",toDateFormatStr:"",limitDay:"",pageValueOrigin:"",sortValue:""};function getURLParam(){let searchParam="",statusParam="",fromDateParam="",toDateParam="",pageParam="",sortParam="";if(orderHistory.searchValue){searchParam="searchValue="+escape(orderHistory.searchValue);}
if(orderHistory.statusValue&&orderHistory.statusValue!=="all"){statusParam="&status="+orderHistory.statusValue;}
if(orderHistory.fromDateFormatStr){fromDateParam="&startDate="+orderHistory.fromDateFormatStr;}
if(orderHistory.toDateFormatStr){toDateParam="&endDate="+orderHistory.toDateFormatStr;}
if(orderHistory.pageValueOrigin){pageParam="&page="+orderHistory.pageValueOrigin;}
if(orderHistory.sortValue){sortParam="&sort="+orderHistory.sortValue;}
return urlPrefix+searchParam+statusParam+fromDateParam+toDateParam+pageParam+sortParam;}
$(document).ready(function(){$('.b2b-no-orders-tilte').removeClass("ls-order-history-custom-display-orders");$('.search-no-orders-title').addClass("ls-order-history-custom-display-orders");if(window.location.pathname==="/my-account/orders"&&window.location.search===""){handleSetDefaultDate();sessionStorage.removeItem('orderHistory');}
if(window.location.pathname==="/my-account/orders"){if(sessionStorage.orderHistory){orderHistory=JSON.parse(sessionStorage.orderHistory);}
if(orderHistory.searchValue){$("#ls-order-history-text-search").val(orderHistory.searchValue);}
if(orderHistory.statusValue){$("#ls-order-history-btn-status-filter").val(orderHistory.statusValue);if(orderHistory.statusValue==="open"||orderHistory.statusValue==="closed"||orderHistory.statusValue==="pending"){$("#ls-order-history-btn-status-filter-button").css({"color":"#F8971D"});}
else{$("#ls-order-history-btn-status-filter-button").css({"color":"#003767"});}}
if(orderHistory.pageValueOrigin){$("#ls-order-history-pagination-container").pagination(+orderHistory.pageValueOrigin+1);}
if(orderHistory.sortValue){$("#ls-order-history-btn-date-sorting-responsive").val(orderHistory.sortValue);$("#ls-order-history-btn-date-sorting").val(orderHistory.sortValue);}
if(window.location.search.includes("sort=asc")){$(".ls-filter-date").removeClass("glyphicon-triangle-top");$(".ls-filter-date").addClass("glyphicon-triangle-bottom");}else{$(".ls-filter-date").addClass("glyphicon-triangle-top");$(".ls-filter-date").removeClass("glyphicon-triangle-bottom");}
var isCheckInput=$("#ls-order-history-text-search").val();if(isCheckInput.trim()===""){$('.ls-order-history-search-button').addClass('ls-icon-search');$('.ls-order-history-search-button').removeClass('glyphicon glyphicon-remove-circle');$('.ls-search-order').addClass('ls-order-history-btn-search');$('.ls-search-order').removeClass('ls-order-history-btn-search-remove');}else{$('.ls-order-history-search-button').removeClass('ls-icon-search');$('.ls-order-history-search-button').addClass('glyphicon glyphicon-remove-circle');$('.ls-search-order').removeClass('ls-order-history-btn-search');$('.ls-search-order').addClass('ls-order-history-btn-search-remove');}
$('.ls-order-history-btn-search-remove').click(function(){$("#ls-order-history-text-search").val('');orderHistory.searchValue="";orderHistory.pageValueOrigin=0;$('.ls-order-history-search-button').addClass('ls-icon-search');$('.ls-order-history-search-button').removeClass('glyphicon glyphicon-remove-circle');sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();})
$('.ls-order-history-btn-search-remove').keypress(function(){$("#ls-order-history-text-search").val('');orderHistory.searchValue="";orderHistory.pageValueOrigin=0;$('.ls-order-history-search-button').addClass('ls-icon-search');$('.ls-order-history-search-button').removeClass('glyphicon glyphicon-remove-circle');sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();})}
if(orderHistory.fromDateValue&&orderHistory.toDateValue){let dateParams=new URLSearchParams(window.location.search),startDate=new Date(dateParams.get('startDate')),today=new Date(),limitDay=new Date(orderHistory.limitDay);var limitedDateRangeAttr=$("#ls-order-history-datepicker-2").data('title');var startDateFormat=moment().add(-limitedDateRangeAttr+1,"months").startOf('month').format("DD/MM/YYYY");if(orderHistory.limitDay&&startDate.setHours(0,0,0,0)<limitDay.setHours(0,0,0,0)){orderHistory.fromDateValue=limitDay.toLocaleDateString('fr');orderHistory.fromDateFormatStr=limitDay.toLocaleDateString();orderHistory.toDateValue=today.toLocaleDateString('fr');orderHistory.toDateFormatStr=today.toLocaleDateString();orderHistory.pageValueOrigin=0;sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}
$("#ls-order-history-datepicker-1").off("change");$("#ls-order-history-datepicker-1").datepicker("setStartDate",startDateFormat);$("#ls-order-history-datepicker-1").datepicker("setDate",moment(orderHistory.fromDateValue,"DD/MM/YY").format("DD/MM/YYYY"));$("#ls-order-history-datepicker-2").off("change");$("#ls-order-history-datepicker-2").datepicker("setDate",moment(orderHistory.toDateValue,"DD/MM/YY").format("DD/MM/YYYY"));$("#ls-order-history-datepicker-1").change(onChangeOrderFromDate);$("#ls-order-history-datepicker-2").change(onChangeOrderToDate);}else{handleSetDefaultDate();}});var isCheckLength=$('.order-column').length;if(isCheckLength==0){$('.ls-order-sort').removeClass('ls-order-filter');$('.lsOrderIcon').removeClass('glyphicon-triangle-bottom');}
$("#ls-order-history-text-search").keypress(function(event){var keycode=(event.keyCode?event.keyCode:event.which);if(keycode=='13'){orderHistory.searchValue=$(this).val();orderHistory.pageValueOrigin=0;orderHistory.fromDateValue=$("#ls-order-history-datepicker-1").val();orderHistory.fromDateFormatStr=moment($("#ls-order-history-datepicker-1").val(),"DD/MM/YY").format("M/D/YYYY");orderHistory.toDateValue=$("#ls-order-history-datepicker-2").val();orderHistory.toDateFormatStr=moment($("#ls-order-history-datepicker-2").val(),"DD/MM/YY").format("M/D/YYYY");if($('.glyphicon-triangle-top').length==1){orderHistory.sortValue="desc";}else{orderHistory.sortValue="asc";}
sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}});$("#ls-order-history-text-search").change(function(){orderHistory.searchValue=$(this).val();orderHistory.pageValueOrigin=0;orderHistory.fromDateValue=$("#ls-order-history-datepicker-1").val();orderHistory.fromDateFormatStr=moment($("#ls-order-history-datepicker-1").val(),"DD/MM/YY").format("M/D/YYYY");orderHistory.toDateValue=$("#ls-order-history-datepicker-2").val();orderHistory.toDateFormatStr=moment($("#ls-order-history-datepicker-2").val(),"DD/MM/YY").format("M/D/YYYY");if($('.glyphicon-triangle-top').length==1){orderHistory.sortValue="desc";}else{orderHistory.sortValue="asc";}
sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));if($(this).val()===""){window.location.href=getURLParam();return;}
let strParam=getURLParam();$(".ls-order-history-btn-search").attr("href",strParam);});$('.input-daterange').datepicker({format:"dd/mm/yy",keepEmptyValues:true,orientation:"bottom auto"});var onChangeOrderFromDate=function(){let fromDateObject=$(this).datepicker('getDate');if(fromDateObject){orderHistory.fromDateValue=$(this).datepicker().val();let dd=fromDateObject.getDate();let mm=fromDateObject.getMonth()+1;let yyyy=fromDateObject.getFullYear();orderHistory.fromDateFormatStr=mm+'/'+dd+'/'+yyyy;orderHistory.pageValueOrigin=0;orderHistory.toDateValue=$("#ls-order-history-datepicker-2").val();orderHistory.toDateFormatStr=moment($("#ls-order-history-datepicker-2").val(),"DD/MM/YY").format("M/D/YYYY");if($('.glyphicon-triangle-top').length==1){orderHistory.sortValue="desc";}else{orderHistory.sortValue="asc";}
sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}}
$("#ls-order-history-datepicker-1").change(onChangeOrderFromDate);var onChangeOrderToDate=function(){let toDateObject=$(this).datepicker('getDate');if(toDateObject){orderHistory.toDateValue=$(this).datepicker().val();let dd=toDateObject.getDate();let mm=toDateObject.getMonth()+1;let yyyy=toDateObject.getFullYear();orderHistory.toDateFormatStr=mm+'/'+dd+'/'+yyyy;orderHistory.pageValueOrigin=0;orderHistory.fromDateValue=$("#ls-order-history-datepicker-1").val();orderHistory.fromDateFormatStr=moment($("#ls-order-history-datepicker-1").val(),"DD/MM/YY").format("M/D/YYYY");if($('.glyphicon-triangle-top').length==1){orderHistory.sortValue="desc";}else{orderHistory.sortValue="asc";}
sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}}
$("#ls-order-history-datepicker-2").change(onChangeOrderToDate);$("#ls-order-history-btn-status-filter").selectmenu({icons:{button:"glyphicon glyphicon-triangle-bottom"},open:function(event,ui){$(":first-child",$("#ls-order-history-btn-status-filter-button")).removeClass("glyphicon glyphicon-triangle-bottom")
$(":first-child",$("#ls-order-history-btn-status-filter-button")).addClass("glyphicon glyphicon-triangle-top")
$("#filter-status-title").css({"color":"#F8971D"})
$(".ui-state-active").css({'padding':'3px 1em 3px 10px'})
if($("#ls-order-history-btn-status-filter-menu").find(".ui-state-active").parent().children(".ls-js-status-filter").length<1){$("#ls-order-history-btn-status-filter-menu").find(".ui-state-active").parent().prepend('<span class="ls-js-status-filter ls-icon-tick"></span>')}
$(".ls-icon-tick").attr('style',"background: #F7F7F7 !important")
$(".ui-menu-item").on("mouseover",function(){$(".ls-icon-tick").attr('style',"background: #FFFFFF !important")
$(".ui-menu-item").attr('style',"background: #FFFFFF !important")
$(this).attr('style',"background: #F7F7F7 !important")
$(this).children(".ls-icon-tick").attr('style',"background: #F7F7F7 !important")});},close:function(event,ui){$(":first-child",$("#ls-order-history-btn-status-filter-button")).removeClass("glyphicon glyphicon-triangle-top")
$(":first-child",$("#ls-order-history-btn-status-filter-button")).addClass("glyphicon glyphicon-triangle-bottom")
$("#filter-status-title").css({"color":"#003767"})},change:function(event,data){$(":first-child",$(".ui-state-active").parent()).remove()
$(".ui-menu-item-wrapper").css({'padding-left':'28px'})
orderHistory.statusValue=data.item.value;orderHistory.pageValueOrigin=0;orderHistory.fromDateValue=$("#ls-order-history-datepicker-1").val();orderHistory.fromDateFormatStr=moment($("#ls-order-history-datepicker-1").val(),"DD/MM/YY").format("M/D/YYYY");orderHistory.toDateValue=$("#ls-order-history-datepicker-2").val();orderHistory.toDateFormatStr=moment($("#ls-order-history-datepicker-2").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}});$(".ls-order-filter").click(function(){orderHistory.pageValueOrigin=(pageValue-1).toString();if(window.location.search.includes("&sort=desc")){orderHistory.sortValue="asc";}else{orderHistory.sortValue="desc";}
orderHistory.fromDateValue=$("#ls-order-history-datepicker-1").val();orderHistory.fromDateFormatStr=moment($("#ls-order-history-datepicker-1").val(),"DD/MM/YY").format("M/D/YYYY");orderHistory.toDateValue=$("#ls-order-history-datepicker-2").val();orderHistory.toDateFormatStr=moment($("#ls-order-history-datepicker-2").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();});$("#ls-order-history-btn-date-sorting").selectmenu({icons:{button:"glyphicon glyphicon-triangle-bottom"},open:function(event,ui){$(":first-child",$("#ls-order-history-btn-date-sorting-button")).removeClass("glyphicon glyphicon-triangle-bottom")
$(":first-child",$("#ls-order-history-btn-date-sorting-button")).addClass("glyphicon glyphicon-triangle-top")
$("#ls-order-history-header4").css({"color":"#F8971D"})
$(".ui-state-active").css({'padding':'3px 1em 3px 10px'})
if($("#ls-order-history-btn-date-sorting-menu").find(".ui-state-active").parent().children(".ls-js-date-sorting").length<1){$("#ls-order-history-btn-date-sorting-menu").find(".ui-state-active").parent().prepend('<span class="ls-js-date-sorting ls-icon-tick"></span>')}
$(".ls-icon-tick").attr('style',"background: #F7F7F7 !important")
$(".ui-menu-item").on("mouseover",function(){$("#ls-order-history-btn-date-sorting-menu .ls-icon-tick").attr('style',"background: #FFFFFF !important")
$("#ls-order-history-btn-date-sorting-menu .ui-menu-item").attr('style',"background: #FFFFFF !important")
$(this).attr('style',"background: #F7F7F7 !important")
$(this).children(".ls-icon-tick").attr('style',"background: #F7F7F7 !important")});},close:function(event,ui){$(":first-child",$("#ls-order-history-btn-date-sorting-button")).removeClass("glyphicon glyphicon-triangle-top")
$(":first-child",$("#ls-order-history-btn-date-sorting-button")).addClass("glyphicon glyphicon-triangle-bottom")
$("#ls-order-history-header4").css({"color":"white"})},change:function(event,data){$(":first-child",$(".ui-state-active").parent()).remove()
$(".ui-menu-item-wrapper").css({'padding-left':'28px'})
orderHistory.sortValue=data.item.value;orderHistory.pageValueOrigin=0;sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}});$("#ls-order-history-btn-date-sorting-responsive").selectmenu({icons:{button:"glyphicon glyphicon-triangle-bottom"},open:function(event,ui){$(":first-child",$("#ls-order-history-btn-date-sorting-responsive-button")).removeClass("glyphicon glyphicon-triangle-bottom")
$(":first-child",$("#ls-order-history-btn-date-sorting-responsive-button")).addClass("glyphicon glyphicon-triangle-top")
$("#date-sort-title").css({"color":"#F8971D"})
$(".ui-state-active").css({'padding':'3px 1em 3px 10px'})
if($("#ls-order-history-btn-date-sorting-responsive-menu").find(".ui-state-active").parent().children(".ls-js-date-sorting-res").length<1){$("#ls-order-history-btn-date-sorting-responsive-menu").find(".ui-state-active").parent().prepend('<span class="ls-js-date-sorting-res ls-icon-tick"></span>')}
$(".ls-icon-tick").attr('style',"background: #F7F7F7 !important")
$(".ui-menu-item").on("mouseover",function(){$("#ls-order-history-btn-date-sorting-menu .ls-icon-tick").attr('style',"background: #FFFFFF !important")
$("#ls-order-history-btn-date-sorting-menu .ui-menu-item").attr('style',"background: #FFFFFF !important")
$(this).attr('style',"background: #F7F7F7 !important")
$(this).children(".ls-icon-tick").attr('style',"background: #F7F7F7 !important")});},close:function(event,ui){$(":first-child",$("#ls-order-history-btn-date-sorting-responsive-button")).removeClass("glyphicon glyphicon-triangle-top")
$(":first-child",$("#ls-order-history-btn-date-sorting-responsive-button")).addClass("glyphicon glyphicon-triangle-bottom")
$("#date-sort-title").css({"color":"#003767"})},change:function(event,data){$(":first-child",$(".ui-state-active").parent()).remove()
$(".ui-menu-item-wrapper").css({'padding-left':'28px'})
orderHistory.sortValue=data.item.value;orderHistory.pageValueOrigin=0;sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();}});let numberOfPages=$("#hidden-total-number-results").val();if(numberOfPages&&numberOfPages!==0){let options={dataSource:Array(+numberOfPages*12),pageSize:12,pageRange:null,showPageNumbers:true,hideWhenLessThanOnePage:true,callback:function(response,pagination){pageValue=pagination.pageNumber;}};$("#ls-order-history-pagination-container").pagination(options);$("#ls-order-history-pagination-container").addHook('afterPageOnClick',function(){orderHistory.pageValueOrigin=(pageValue-1).toString();sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();});$("#ls-order-history-pagination-container").addHook('afterPreviousOnClick',function(){orderHistory.pageValueOrigin=(pageValue-1).toString();sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();});$("#ls-order-history-pagination-container").addHook('afterNextOnClick',function(){orderHistory.pageValueOrigin=(pageValue-1).toString();sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();});}
$(".ls-order-history-btn-reset-filter-date").click(function(){$("#ls-order-history-datepicker-1").datepicker().val(null);$("#ls-order-history-datepicker-2").datepicker().val(null);orderHistory.fromDateValue="";orderHistory.toDateValue="";orderHistory.fromDateFormatStr="";orderHistory.toDateFormatStr="";orderHistory.sortValue="";orderHistory.searchValue="";orderHistory.statusValue="";orderHistory.pageValueOrigin=0;sessionStorage.setItem("orderHistory",JSON.stringify(orderHistory));window.location.href=getURLParam();});function handleSetDefaultDate(){var defaultDateRangeAttr=$("#ls-order-history-datepicker-1").data('title');var limitedDateRangeAttr=$("#ls-order-history-datepicker-2").data('title');var startDate=moment().add(-limitedDateRangeAttr+1,"months").startOf('month').format("DD/MM/YYYY");var fromDate=moment().add(-defaultDateRangeAttr+1,"months").startOf('month').format("DD/MM/YYYY");var toDate=moment().format("DD/MM/YYYY");$("#ls-order-history-datepicker-1").datepicker({format:"dd/mm/yy",});$("#ls-order-history-datepicker-2").datepicker({format:"dd/mm/yy"});$("#ls-order-history-datepicker-2").off("change");$("#ls-order-history-datepicker-2").datepicker("setDate",toDate);$("#ls-order-history-datepicker-2").change(onChangeOrderToDate);$("#ls-order-history-datepicker-1").datepicker("setStartDate",startDate);$("#ls-order-history-datepicker-1").off("change");$("#ls-order-history-datepicker-1").datepicker("setDate",fromDate);$("#ls-order-history-datepicker-1").change(onChangeOrderFromDate);}
ACC.order.viewOrderHistoryList();},bindPopularProducts:function(){const sortParams=new URL(window.location.href).searchParams.get('sort');const pageParams=new URL(window.location.href).searchParams.get('page');if(!sortParams||sortParams==='asc'){$('.product-date-sort .glyphicon-triangle-top').removeClass('hidden');}else{$('.product-date-sort .glyphicon-triangle-bottom').removeClass('hidden');}
let numberOfPages=$("#hidden-total-number-results").val();const paginationContainer=$("#ls-popular-product-pagination-container");let pageValue=pageParams?+pageParams+1:1;if(numberOfPages&&numberOfPages!==0){let options={dataSource:Array(+numberOfPages*12),pageSize:12,pageRange:null,showPageNumbers:true,hideWhenLessThanOnePage:true,callback:function(response,pagination){pageValue=pagination.pageNumber;}};paginationContainer.pagination(options);paginationContainer.pagination(pageParams?+pageParams+1:1);paginationContainer.addHook('afterPageOnClick',function(){const targetPage=(pageValue-1).toString();const searchParams=new URLSearchParams(window.location.search);searchParams.set('page',targetPage);window.location.search=searchParams.toString();});paginationContainer.addHook('afterPreviousOnClick',function(){const targetPage=(pageValue-1).toString();const searchParams=new URLSearchParams(window.location.search);searchParams.set('page',targetPage);window.location.search=searchParams.toString();});paginationContainer.addHook('afterNextOnClick',function(){const targetPage=(pageValue-1).toString();const searchParams=new URLSearchParams(window.location.search);searchParams.set('page',targetPage);window.location.search=searchParams.toString();});$(document).on('click','.product-date-sort',function(e){ACC.order.handlePurchasedDateSort(sortParams);});$(document).on('change','.ls-account-popular-products-container .select-product',function(e){ACC.order.handleSelectProduct(e);});$(document).on('click','.add-popular-product-to-cart',function(){ACC.order.addPopularProductsToCart();});}},handlePurchasedDateSort:function(sortParams){const sort=!sortParams||sortParams==='asc'?'desc':'asc';const urlParams=new URLSearchParams(window.location.search);urlParams.set('sort',sort);window.location.search=urlParams.toString();},handleSelectProduct:function(event){const favoriteBtn=$('.add-popular-product-to-favourite');const cartBtn=$('.add-popular-product-to-cart');const productComponent=$(event.target).closest('.product-component');const productData={product:{code:$(productComponent).data('product-code').toString()},quantity:$(productComponent).find('.js-qty-selector-input').val(),unit:{code:$(productComponent).data('unit-code').toString()||'EA'},price:parseFloat($(productComponent).find('.ls-display-promo-price').text()?.slice(1))||0}
const storeProducts=JSON.parse(localStorage.getItem('selectedPopularProducts'))||[];const productInStorage=storeProducts.findIndex(item=>item.product.code===productData.product.code);if(!event.target.checked&&productInStorage>=0){storeProducts.splice(productInStorage,1);}else{if(productInStorage<0){storeProducts.push(productData);}}
if(storeProducts.length>0){favoriteBtn.attr('disabled',false);cartBtn.prop('disabled',false);favoriteBtn.removeClass('disabled');}else{favoriteBtn.attr('disabled',true);cartBtn.prop('disabled',true);favoriteBtn.addClass('disabled');}
localStorage.setItem('selectedPopularProducts',JSON.stringify(storeProducts));},addPopularProductsToCart:function(){const storeProducts=JSON.parse(localStorage.getItem('selectedPopularProducts'))||[];const objectDatas=[];const productsData=storeProducts.map(product=>{objectDatas.push({price:product.price||0,quantity:product.quantity});return{product:{code:product.product.code},quantity:product.quantity,unit:{code:product.unit.code}};});const objectIds=productsData.map(item=>item.product.code);$.ajax({type:'POST',url:ACC.order.addPopularProductToCartUrl,data:JSON.stringify(productsData),dataType:'json',contentType:'application/json',beforeSend:function(){ACC.order.showLoadingIcon();if(objectIds&&objectIds.length>0){ACC.algoliaEvent.objectDatas=objectDatas;ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',objectIds,ACC.algoliaSearch.defaultCurrency);}},success:function(res){localStorage.setItem("cartId",res.cartCode);ACC.order.removeLoadingIcon();ACC.cart.showCartTooltip(res.totalProduct);ACC.minicart.updateMiniCartDisplay();$('input.select-product').prop('checked',false);localStorage.removeItem('selectedPopularProducts');$('.add-popular-product-to-cart').prop('disabled',true);$('.add-popular-product-to-favourite').prop('disabled',true);},error:function(){ACC.order.removeLoadingIcon();}});},showLoadingIcon:function(){$('.add-popular-product-to-cart .cart-icon').addClass('hidden');$('.add-popular-product-to-cart .waiting-icon').removeClass('hidden');$('.add-popular-product-to-cart').prop('disabled',true);$('.add-popular-product-to-favourite').prop('disabled',true);},removeLoadingIcon:function(){$('.add-popular-product-to-cart .cart-icon').removeClass('hidden');$('.add-popular-product-to-cart .waiting-icon').addClass('hidden');$('.add-popular-product-to-cart').prop('disabled',false);$('.add-popular-product-to-favourite').prop('disabled',false);},setBackOrderDefaultDate:function(){const fromDateEle=$("#ls-backorder-datepicker-from");const toDateEle=$("#ls-backorder-datepicker-to");const defaultMonth=fromDateEle.data('months');const limitedDate=toDateEle.data('months');const startDate=moment().add(-limitedDate+1,"months").startOf('month').format("DD/MM/YYYY");const fromDate=moment().add(-defaultMonth+1,"months").startOf('month').format("DD/MM/YYYY");const toDate=moment().format("DD/MM/YYYY");fromDateEle.datepicker({format:"dd/mm/yy",});toDateEle.datepicker({format:"dd/mm/yy"});toDateEle.off("change");toDateEle.datepicker("setDate",toDate);fromDateEle.datepicker("setStartDate",startDate);fromDateEle.off("change");fromDateEle.datepicker("setDate",fromDate);},bindCheckboxState:function(){const pageParams=new URL(window.location.href).searchParams.get('page');if(!pageParams){localStorage.removeItem('selectedPopularProducts');return;}
const storeProducts=JSON.parse(localStorage.getItem('selectedPopularProducts'))||[];storeProducts?.forEach(product=>{const selector=`.responsive-table-item.product-component[data-product-code=${product.product.code}]`;$(selector).find('input.select-product').prop('checked',true);});const favoriteBtn=$('.add-popular-product-to-favourite');const cartBtn=$('.add-popular-product-to-cart');if(storeProducts?.length>0){favoriteBtn.attr('disabled',false);cartBtn.prop('disabled',false);favoriteBtn.removeClass('disabled');}else{favoriteBtn.attr('disabled',true);cartBtn.prop('disabled',true);favoriteBtn.addClass('disabled');}}};ACC.paginationsort={downUpKeysPressed:false,bindAll:function()
{this.bindPaginationSort();},bindPaginationSort:function()
{ACC.paginationsort.bindSortForm($('#sortForm1'));ACC.paginationsort.bindSortForm($('#sortForm2'));},bindSortForm:function(sortForm)
{sortForm.change(function()
{if(!ACC.paginationsort.downUpPressed)
{this.submit();}
ACC.paginationsort.downUpPressed=false;});},sortFormIEFix:function(sortOptions,selectedOption)
{sortOptions.keydown(function(e)
{if(e.keyCode===38||e.keyCode===40)
{ACC.paginationsort.downUpPressed=true;}
else if(e.keyCode===13&&selectedOption!==$(this).val())
{$(this).parent().submit();}
else
{ACC.paginationsort.downUpPressed=false;}});}};$(document).ready(function()
{ACC.paginationsort.bindAll();});ACC.payment={activateSavedPaymentButton:function(){$(document).on("click",".js-saved-payments",function(e){e.preventDefault();var titleHtml=$("#savedpaymentstitle").html();$.colorbox({href:"#savedpaymentsbody",inline:true,maxWidth:"100%",opacity:0.7,width:"320px",title:titleHtml,close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){}});})},bindPaymentCardTypeSelect:function()
{ACC.payment.filterCardInformationDisplayed();$("#card_cardType").change(function()
{var cardType=$(this).val();if(cardType=='024')
{$('#startDate, #issueNum').show();}
else
{$('#startDate, #issueNum').hide();}});},filterCardInformationDisplayed:function()
{var cardType=$('#card_cardType').val();if(cardType=='024')
{$('#startDate, #issueNum').show();}
else
{$('#startDate, #issueNum').hide();}}}
$(document).ready(function(){ACC.payment.activateSavedPaymentButton();ACC.payment.bindPaymentCardTypeSelect();});ACC.paymentDetails={_autoload:["showRemovePaymentDetailsConfirmation"],showRemovePaymentDetailsConfirmation:function()
{$(document).on("click",".removePaymentDetailsButton",function()
{var paymentId=$(this).data("paymentId");var popupTitle=$(this).data("popupTitle");ACC.colorbox.open(ACC.common.encodeHtml(popupTitle),{inline:true,href:"#popup_confirm_payment_removal_"+paymentId,onComplete:function()
{$(this).colorbox.resize();}});})}};ACC.pickupinstore={_autoload:["bindClickPickupInStoreButton","bindPickupButton","bindPickupClose","bindPickupInStoreSearch"],storeId:"",unbindPickupPaginationResults:function()
{$(document).off("click","#colorbox .js-pickup-store-pager-prev")
$(document).off("click","#colorbox .js-pickup-store-pager-next")},bindPickupPaginationResults:function()
{var listHeight=$("#colorbox .js-pickup-store-list").height();var $listitems=$("#colorbox .js-pickup-store-list > li");var listItemHeight=$listitems.height();var displayCount=5;var totalCount=$listitems.length;var curPos=0
var pageEndPos=(((totalCount/displayCount)-1)*(displayCount*listItemHeight))*-1;$("#colorbox .js-pickup-store-pager-item-all").text(totalCount);$("#colorbox .store-navigation-pager").show();checkPosition()
$(document).on("click","#colorbox .js-pickup-store-pager-prev",function(e){e.preventDefault();$listitems.css("transform","translateY("+(curPos+listHeight)+"px)")
curPos=curPos+listHeight;checkPosition("prev");})
$(document).on("click","#colorbox .js-pickup-store-pager-next",function(e){e.preventDefault();$listitems.css("transform","translateY("+(curPos-listHeight)+"px)")
curPos=curPos-listHeight;checkPosition("next");})
function checkPosition(){var curPage=Math.ceil((curPos/(displayCount*listItemHeight))*-1)+1;$("#colorbox .js-pickup-store-pager-item-from").text(curPage*displayCount-4);var tocount=(curPage*displayCount>totalCount)?totalCount:curPage*displayCount;if(curPage*displayCount-4==1){$("#colorbox .js-pickup-store-pager-prev").hide()}else{$("#colorbox .js-pickup-store-pager-prev").show()}
if(curPage*displayCount>=totalCount){$("#colorbox .js-pickup-store-pager-next").hide()}else{$("#colorbox .js-pickup-store-pager-next").show()}
$("#colorbox .js-pickup-store-pager-item-to").text(tocount);}},bindPickupInStoreQuantity:function(){$('.pdpPickupQtyPlus').click(function(e){e.preventDefault();var inputQty=$('.js-add-pickup-cart #pdpPickupAddtoCartInput');var currentVal=parseInt(inputQty.val());var maxVal=inputQty.data('max');if(!isNaN(currentVal)&&currentVal<maxVal){inputQty.val(currentVal+1);inputQty.change();}});$('.pdpPickupQtyMinus').click(function(e){e.preventDefault();var inputQty=$('.js-add-pickup-cart #pdpPickupAddtoCartInput');var currentVal=parseInt(inputQty.val());var minVal=inputQty.data('min');if(!isNaN(currentVal)&&currentVal>minVal){inputQty.val(currentVal-1);inputQty.change();}});$("body").on("keyup",".js-add-pickup-cart #pdpPickupAddtoCartInput",function(event){var input=$(event.target);input.val(this.value.match(/[0-9]*/));var value=input.val();});},bindPickupInStoreSearch:function()
{$(document).on('click','#pickupstore_location_search_button',function(e)
{ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(),$('#atCartPage').val(),$('#entryNumber').val(),$(this).parents('form').attr('action'));return false;});$(document).on('keypress','#locationForSearch',function(e)
{if(e.keyCode===13)
{e.preventDefault();ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(),$('#atCartPage').val(),$('input.entryNumber').val(),$(this).parents('form').attr('action'));return false;}});},bindPickupHereInStoreButtonClick:function()
{$(document).on('click','.pickup_add_to_bag_instore_button',function(e){$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());});$(document).on('click','.pickup_here_instore_button',function(e){$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());ACC.colorbox.close();});},locationSearchSubmit:function(location,cartPage,entryNumber,actionUrl,latitude,longitude)
{$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");$.post({url:actionUrl,data:{locationQuery:location,cartPage:cartPage,entryNumber:entryNumber,latitude:latitude,longitude:longitude},dataType:"text",success:function(response)
{ACC.pickupinstore.refreshPickupInStoreColumn(response);}});},createListItemHtml:function(data,id){var $rdioEl=$("<input>").attr("type","radio").attr("name","storeNamePost").attr("id","pickup-entry-"+id).attr("data-id",id).addClass("js-pickup-store-input").val(data.displayName);var $spanElStInfo=$("<span>").addClass("pickup-store-info").append($("<span>").addClass("pickup-store-list-entry-name").text(data.displayName)).append($("<span>").addClass("pickup-store-list-entry-address").text(data.line1+" "+data.line2)).append($("<span>").addClass("pickup-store-list-entry-city").text(data.town));var $spanElStAvail=$("<span>").addClass("store-availability").append($("<span>").addClass("available").append(document.createTextNode(data.formattedDistance)).append("<br>").append(data.stockPickupHtml));var $lblEl=$("<label>").addClass("js-select-store-label").attr("for","pickup-entry-"+id).append($spanElStInfo).append($spanElStAvail);return $("<li>").addClass("pickup-store-list-entry").append($rdioEl).append($lblEl);},refreshPickupInStoreColumn:function(data){data=$.parseJSON(data);var $storeList=$('#colorbox .js-pickup-store-list');$storeList.empty();$("#colorbox .js-pickup-component").data("data",data);for(i=0;i<data["data"].length;i++){$storeList.append(ACC.pickupinstore.createListItemHtml(data["data"][i],i));}
ACC.pickupinstore.unbindPickupPaginationResults()
ACC.pickupinstore.bindPickupPaginationResults()
var firstInput=$("#colorbox .js-pickup-store-input")[0];$(firstInput).click();$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").removeAttr("disabled");},bindClickPickupInStoreButton:function()
{$(document).on("click",".js-pickup-in-store-button",function(e){e.preventDefault();var ele=$(this);var productId="pickupModal_"+$(this).attr('id');var cartItemProductPostfix='';var productIdNUM=$(this).attr('id');productIdNUM=productIdNUM.split("_");productIdNUM=productIdNUM[1];if(productId!==null)
{cartItemProductPostfix='_'+productId;}
var boxContent=$("#popup_store_pickup_form > #pickupModal").clone();var titleHeader=$('#pickupTitle > .pickup-header').html();ACC.colorbox.open(titleHeader,{html:boxContent,width:"960px",onComplete:function(){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");boxContent.show();ACC.pickupinstore.pickupStorePager();var tabs=$("#colorbox .js-pickup-tabs").accessibleTabs({tabhead:'.tabhead',tabbody:'.tabbody',fx:'show',fxspeed:0,currentClass:'active',autoAnchor:true,cssClassAvailable:true});$("#colorbox #pickupModal *").each(function()
{if($(this).attr("data-id")!=undefined)
{$(this).attr("id",$(this).attr("data-id"));$(this).removeAttr("data-id");}});$("#colorbox input#locationForSearch").focus();$("#colorbox #pickupModal").attr("id",productId);$("#colorbox #"+productId+" .thumb").html(ele.data("imgHtml"));$("#colorbox #"+productId+" .js-pickup-product-price").html(ele.data("productcart"));var variants=ele.data("productcartVariants");var variantsBox=$("#colorbox #"+productId+" .js-pickup-product-variants");$.each(variants,function(key,value){variantsBox.append($("<span>").text(value));});$("#colorbox  #"+productId+" .js-pickup-product-info").html(ele.data("productnameHtml"))
$("#colorbox #"+productId+" form.searchPOSForm").attr("action",ele.data("actionurl"));$("#colorbox #"+productId+" form.searchPOSForm").attr("id","pickup_in_store_search_form_product_"+productIdNUM);$("#colorbox #"+productId+" #pdpPickupAddtoCartInput").attr("value",($('#pdpPickupAddtoCartInput').val()!==undefined?$('#pdpPickupAddtoCartInput').val():ele.data("value")));$("#colorbox #"+productId+" input#entryNumber").attr("value",ele.data("entrynumber"));$("#colorbox #"+productId+" input#atCartPage").attr("value",ele.data("cartpage"));if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.pickupinstore.locationSearchSubmit('',$('#atCartPage').val(),ele.data("entrynumber"),ele.data("actionurl"),position.coords.latitude,position.coords.longitude);},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message);});}
ACC.product.bindToAddToCartStorePickUpForm();}});})},pickupStorePager:function()
{$(document).on("change","#colorbox .js-pickup-store-input",function(e){e.preventDefault();$("#colorbox .js-pickup-tabs li.first a").click();var storeData=$("#colorbox .js-pickup-component").data("data");storeData=storeData["data"];var storeId=$(this).data("id");var $ele=$("#colorbox .display-details");$.each(storeData[storeId],function(key,value){if(key=="url"){$ele.find(".js-store-image").empty();if(value!=""){$ele.find(".js-store-image").append($("<img>").attr("src",value).attr("alt",""));}}else if(key=="productcode"){$ele.find(".js-store-productcode").val(value);}
else if(key=="openings"){var $oele=$ele.find(".js-store-"+key);$oele.empty();if(value!=""){$.each(value,function(key2,value2){$oele.append($("<dt>").text(key2));$oele.append($("<dd>").text(value2));});}}
else if(key=="specialOpenings")
{}
else{if(value!=""){$ele.find(".js-store-"+key).text(value);}else{$ele.find(".js-store-"+key).empty();}}})
$(document).one("click","#colorbox .js-pickup-map-tab",function(){ACC.pickupinstore.storeId=storeData[storeId];ACC.global.addGoogleMapsApi("ACC.pickupinstore.drawMap");})
var e=$("#colorbox .pickup-store-list-entry input:checked");$("#add_to_cart_storepickup_form .js-store-id").attr("id",e.attr("id"))
$("#add_to_cart_storepickup_form .js-store-id").attr("name",e.attr("name"))
$("#add_to_cart_storepickup_form .js-store-id").val(e.val())
if(storeData[storeId]["stockLevel"]>0||storeData[storeId]["stockLevel"]=="")
{var input=$("#add_to_cart_storepickup_form .js-qty-selector-input");input.data("max",storeData[storeId]["stockLevel"]);ACC.productDetail.checkQtySelector(input,"reset");$("#add_to_cart_storepickup_form").show()}else{$("#add_to_cart_storepickup_form").hide()}})
$(document).on("click",".js-select-store-label",function(e){$("#colorbox .js-pickup-component").addClass("show-store");$("#colorbox #cboxTitle .headline-inner").addClass('hidden-xs hidden-sm');$("#colorbox #cboxTitle .back-to-storelist").removeClass('hidden-xs hidden-sm');})
$(document).on("click",".js-back-to-storelist",function(e){$("#colorbox .js-pickup-component").removeClass("show-store");$("#colorbox #cboxTitle .headline-inner").removeClass('hidden-xs hidden-sm');$("#colorbox #cboxTitle .back-to-storelist").addClass('hidden-xs hidden-sm');})},bindPickupButton:function(){$(document).on("click",".js-pickup-button",function(e){e.preventDefault();$e=$(this).parent().nextAll(".js-inline-layer")
$e.addClass("open")
var h=$e.height()
$e.removeClass("open")
$e.animate({height:h})})},bindPickupClose:function(){$(document).on("click",".js-close-inline-layer",function(e){e.preventDefault();$e=$(this).parents(".js-inline-layer")
$e.animate({height:0})})},checkIfPointOfServiceIsEmpty:function(cartEntryDeliveryModeForm)
{return(!cartEntryDeliveryModeForm.find('.pointOfServiceName').text().trim().length);},validatePickupinStoreCartEntires:function()
{var validationErrors=false;$("form.cartEntryShippingModeForm").each(function()
{var formid="#"+$(this).attr('id');if($(formid+' input[value=pickUp][checked]').length&&ACC.pickupinstore.checkIfPointOfServiceIsEmpty($(this)))
{$(this).addClass("shipError");validationErrors=true;}});if(validationErrors)
{$('div#noStoreSelected').show().focus();$(window).scrollTop(0);}
return validationErrors;},drawMap:function(){storeInformation=ACC.pickupinstore.storeId;if($("#colorbox .js-map-canvas").length>0)
{$("#colorbox .js-map-canvas").attr("id","pickup-map")
var centerPoint=new google.maps.LatLng(storeInformation["storeLatitude"],storeInformation["storeLongitude"]);var mapOptions={zoom:13,zoomControl:true,panControl:true,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,center:centerPoint}
var map=new google.maps.Map(document.getElementById("pickup-map"),mapOptions);var marker=new google.maps.Marker({position:new google.maps.LatLng(storeInformation["storeLatitude"],storeInformation["storeLongitude"]),map:map,title:storeInformation["name"],icon:"https://maps.google.com/mapfiles/marker"+'A'+".png"});var infowindow=new google.maps.InfoWindow({content:ACC.common.encodeHtml(storeInformation["name"]),disableAutoPan:true});google.maps.event.addListener(marker,'click',function(){infowindow.open(map,marker);});}}};ACC.product={_autoload:['bindProductAddToCart','enableStorePickupButton','enableVariantSelectors','bindFacets','getSource3785','adjustFirstPage','displayNumberOfProduct','bindRecommendationClickEvent'],getSource3785:function(){$('.product-display-lg2-container').find('a').click(function(){if($(".ls-results-title").length>0){localStorage.setItem("source3785","Search");}});$(".ls-search-all-dropdown").click(function(){if($(".ls-display-product-pre-search-style").length>0){localStorage.setItem("source3785","Search");}});},bindFacets:function(){$(document).on("click",".js-show-facets",function(e){e.preventDefault();var selectRefinementsTitle=$(this).data("selectRefinementsTitle");var colorBoxTitleHtml=ACC.common.encodeHtml(selectRefinementsTitle);ACC.colorbox.open(colorBoxTitleHtml,{href:".js-product-facet",inline:true,width:"480px",onComplete:function(){$(document).on("click",".js-product-facet .js-facet-name",function(e){e.preventDefault();$(".js-product-facet .js-facet").removeClass("active");$(this).parents(".js-facet").addClass("active");$.colorbox.resize()})},onClosed:function(){$(document).off("click",".js-product-facet .js-facet-name");}});});enquire.register("screen and (min-width:"+screenSmMax+")",function(){$("#cboxClose").click();});},enableAddToCartButton:function(){$('.js-enable-btn').each(function(){var allowToBuy=$(this).data('allow-to-buy');if(allowToBuy&&(!($(this).hasClass('outOfStock')||$(this).hasClass('out-of-stock')))){$(this).prop("disabled",false);}});},enableVariantSelectors:function(){$('.variant-select').prop("disabled",false);},bindToAddToCartForm:function(event){const form=$(event.target).closest('.add_to_cart_form');const productCode=$(event.target).closest('.product-component').data('product-code')||'';const recommendationQueryId=$(event.target).closest('.product-component')?.data('queryid')||'';const quantity=$(form).find("input[name*='qty']").val()||0;if(ACC.product.isHomePage()){sessionStorage.setItem("algolia-search","false");}
ACC.product.getProductQuantityAndPrice(event,productCode,quantity);const checkIsAlgoliaSearch=sessionStorage.getItem("algolia-search");if(productCode){if(checkIsAlgoliaSearch==='true'||recommendationQueryId){ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDsAfterSearch',[productCode.toString()],ACC.algoliaSearch.defaultCurrency,recommendationQueryId);}else{ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',[productCode.toString()],ACC.algoliaSearch.defaultCurrency);}
form.ajaxForm({beforeSubmit:ACC.product.showRequest,success:ACC.product.displayAddToCartPopup,error:ACC.product.errorCartHandler});form.submit();}},bindProductAddToCart:function(){$(document).on("click",".add-to-cart-form-container .js-add-to-cart",function(e){e.preventDefault();e.stopPropagation();if($(e.target).closest('.ls-al-result-item').length>0){return;}
ACC.product.bindToAddToCartForm(e);});},showRequest:function(arr,$form,options){var indicator=$($form).find('.waiting-icon');var cartIcon=$($form).find('.cart-icon');var extraIcon=$($form).find('.icon-plus');indicator.removeClass('hidden');cartIcon.addClass('hidden');extraIcon.addClass('hidden');var cartButton=cartIcon&&cartIcon.length?cartIcon.closest('.js-add-to-cart'):indicator.closest('.js-add-to-cart');cartButton.prop('disabled',true);},bindToAddToCartStorePickUpForm:function(){var addToCartStorePickUpForm=$('#colorbox #add_to_cart_storepickup_form');addToCartStorePickUpForm.ajaxForm({success:ACC.product.displayAddToCartPopup});},enableStorePickupButton:function(){$('.js-pickup-in-store-button').prop("disabled",false);},updateCalculatedCartEntry:function(cartResult){var cartAnalyticsData=cartResult.cartAnalyticsData;if(!cartAnalyticsData.cartCode||!cartAnalyticsData.entryNumber){return;}
var cartItemBasePriceEle=$(".cart-item-base-price[data-entry-number="+(cartAnalyticsData.entryNumber||0)+"]");var cartItemTotalPriceEle=$(".cart-item-total-price[data-entry-number="+(cartAnalyticsData.entryNumber||0)+"]");var miniCartPriceSubTotalEle=$(".mini-cart__price .total-price");var subTotal=0;$(".cart-item-total-price").each(function(){var totalPriceItem=$(this).data("total-price");if(totalPriceItem){subTotal=(+subTotal)+(+parseFloat(totalPriceItem));}});if(cartItemBasePriceEle.length>0){$(cartItemBasePriceEle).text(cartAnalyticsData.basePrice);}
if(cartItemTotalPriceEle.length>0){$(cartItemTotalPriceEle).data("total-price",cartAnalyticsData.totalPriceValue);$(cartItemTotalPriceEle).text(cartAnalyticsData.totalPrice);}
if(miniCartPriceSubTotalEle.length>0){subTotal=(+subTotal)+(+cartAnalyticsData.totalPriceValue);$(miniCartPriceSubTotalEle).text("$"+subTotal.toLocaleString('en-US'));}},displayAddToCartPopup:function(cartResult,statusText,xhr,formElement){localStorage.setItem("cartId",cartResult.cartAnalyticsData.cartCode);var source=localStorage.getItem("source3785")?localStorage.getItem("source3785"):"Navigation";if($(".ls-results-title").length>0){source="Search";}
var product=$(document).find(formElement).closest(".product-component");var data={brand:cartResult.cartAnalyticsData.productBrandName||"",cart_id:cartResult.cartAnalyticsData.cartCode,category:cartResult.cartAnalyticsData.productCategoryName||"",image_url:product.closest(".product-component").find("img").attr('src')||"",name:product.find(".product-pdp-name").text().trim()||"",price:Number(product.find(".promo-price").text().trim().replace(/[^0-9.-]+/g,""))||"",product_code:product.find(".product-code-label").data("product-display-code")||"",product_id:product.data("product-code"),promo:product.find(".runout-clearance").find("span").text().replace(/\/$/,"").trim()||"",quantity:+product.find(".js-qty-selector-input").val(),source:source,unit:'1 '+product.find(".product-quantity-helper-text").data("unit-name")};window.mediator.publish("productAdded_sm",data);localStorage.removeItem("source3785");const isCartPage=$('.page-cartPage').length>0;const isRecommendationProduct=$(formElement).closest('.js-owl-cartBundles').length>0;if(isCartPage&&isRecommendationProduct){window.location.reload();return;}
ACC.product.updateCalculatedCartEntry(cartResult);ACC.minicart.updateMiniCartDisplay();$ajaxCallEvent=true;var productCode=$(formElement).find("[name='productCodePost']").val(),quantityValue=$(formElement).find("[name='qty']").val();ACC.cart.showCartTooltip(quantityValue,productCode);var indicator=$(formElement).find('.waiting-icon');var cartIcon=$(formElement).find('.cart-icon');var cartExtraIcon=$(formElement).find('.icon-plus');var cartButton=cartIcon&&cartIcon.length?cartIcon.closest('.js-add-to-cart'):indicator.closest('.js-add-to-cart');indicator.addClass('hidden');cartIcon.removeClass('hidden');cartExtraIcon.removeClass('hidden');cartButton.prop('disabled',false);var productComponent=$(formElement).closest('.product-component');var isBundle=productComponent.find('.product-bundles-content').length>0;if(isBundle||ACC.config.algoliaBundleConfig){if($('.ls-popup-outer').length>0){document.body.classList.remove('ls-popup-open');$('.ls-popup-outer').remove();}
var productCode=$(formElement).find("[name='productCodePost']").val(),url="/pbundle/atcview?code="+productCode,showProductBundleATCPopup={url:url,cache:false,type:"GET",dataType:"html",success:function(response){ACC.product.showProductBundleATCPopup(response,quantityValue);$('.ls-popup-outer')?.hide();ACC.algoliaSearch.initAlgoliaProductBundleItems([productCode.toString()],response,'productBundles',productCode.toString());}};$.ajax(showProductBundleATCPopup);}},errorCartHandler:function(){var indicator=$('.waiting-icon').not('.hidden');var cartIcon=$('.cart-icon.hidden');var cartExtraIcon=$('.icon-plus.hidden');var cart=cartIcon&&cartIcon.length?cartIcon.closest('.js-add-to-cart'):indicator.closest('.js-add-to-cart');cart.prop('disabled',false);indicator.addClass('hidden');cartIcon.removeClass('hidden');cartExtraIcon.removeClass('hidden');},imageFullScreenNavigation:function(action,component){var targetComponent=$(component);var imageContainer=targetComponent.find('.image-fullscreen-img-content .image-fullscreen-img-container');if(imageContainer.length<=1){targetComponent.find('.image-fullscreen-next').addClass('control-disabled');targetComponent.find('.image-fullscreen-prev').addClass('control-disabled');return;}
var imgIndex=targetComponent.find('.image-fullscreen-img-container').not('.hidden');imgIndex.addClass('hidden');targetComponent.find('.image-fullscreen-thumbnail').removeClass('thumbnail-active');if(action==='next'){if(imgIndex.index()===targetComponent.find('.image-fullscreen-img-container').length-1){targetComponent.find('.image-fullscreen-img-container').eq(0).removeClass('hidden');targetComponent.find('.image-fullscreen-thumbnail').eq(0).addClass('thumbnail-active');}else{targetComponent.find('.image-fullscreen-img-container').eq(imgIndex.index()+1).removeClass('hidden');targetComponent.find('.image-fullscreen-thumbnail').eq(imgIndex.index()+1).addClass('thumbnail-active');}}else{if(imgIndex.index()===0){var imgFullScreenContainer=targetComponent.find('.image-fullscreen-img-container');targetComponent.find('.image-fullscreen-img-container').eq(imgFullScreenContainer.length-1).removeClass('hidden');targetComponent.find('.image-fullscreen-thumbnail').eq(imgFullScreenContainer.length-1).addClass('thumbnail-active');}else{targetComponent.find('.image-fullscreen-img-container').eq(imgIndex.index()-1).removeClass('hidden');targetComponent.find('.image-fullscreen-thumbnail').eq(imgIndex.index()-1).addClass('thumbnail-active');}}},bindActionClick:function(){$('.image-fullscreen-thumbnail').on('click',function(e){var target=$(this).index();var component=$(this).closest('.product-component');var imgContainer=component.find('.image-fullscreen-img-container');imgContainer.addClass('hidden');imgContainer.eq(target).removeClass('hidden');});$('.image-fullscreen-close').on('click',function(){var component=$(this).closest('.product-component');component.find('.image-fullscreen').addClass('hidden');});$('.item.product-image').on('click',function(e){var parentIndex=$(this).closest('.owl-item').index();var component=$(this).closest('.product-component');var imageContainer=component.find('.image-fullscreen .image-fullscreen-img-container');imageContainer.addClass('hidden');imageContainer.eq(parentIndex).removeClass('hidden');var imageThumbnail=component.find('.image-fullscreen-thumbnail');imageThumbnail.removeClass('thumbnail-active');imageThumbnail.eq(parentIndex).addClass('thumbnail-active');component.find('.image-fullscreen').removeClass('hidden');});$('.image-fullscreen-next').on('click',function(event){var component=$(this).closest('.product-component');ACC.product.imageFullScreenNavigation('next',component);});$('.image-fullscreen-prev').on('click',function(event){var component=$(this).closest('.product-component');ACC.product.imageFullScreenNavigation('prev',component);});},setDisplayMode:function(mode){$.cookie("isGrid",mode,{path:'/'});location.reload()},showProductBundleATCPopup(result,quantity){const closeSpan=`<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>`
const modal=document.createElement('div');modal.classList.add('ls-popup-outer');const modalInner=document.createElement('div');modalInner.classList.add('ls-popup-inner');const modalContent=document.createElement('div');const closeDiv=document.createElement('div');const contentDiv=document.createElement('div');contentDiv.classList.add('ls-popup-data');closeDiv.classList.add('ls-popup-close-container')
closeDiv.innerHTML=closeSpan;modalContent.appendChild(contentDiv);modalContent.appendChild(closeDiv);modalContent.classList.add('ls-popup-content','product-bundle-atc-popup');modalInner.appendChild(modalContent);modal.appendChild(modalInner);document.body.appendChild(modal);document.body.classList.add('ls-popup-open');contentDiv.innerHTML=result;$(contentDiv).find('.xs-quantity').text(quantity);var $e=$(document).find(".js-owl-productBundles");$e.owlCarousel(ACC.carousel.carouselConfig.productBundles);$(".owl-wrapper").css("margin","15px auto");$('.js-continue-shopping-button').click(function(){window.location=$(this).data("continueShoppingUrl");});$('.js-continue-checkout-button').click(function(){localStorage.setItem("source_sm","Cart");window.location=$(this).data("checkoutUrl");});$('.js-add-to-cart-bundle').each(function(){var allowToBuy=$(this).data('allow-to-buy');if(allowToBuy){$(this).prop("disabled",false);}});},checkItemMiniMaximumQty:function(type,items,btnCheckout){if(items.length===0){type.find(".maximum-error").hide();ACC.minicart.isMaximunQty=false;}else{var maxQuantityOrder=(+type.data("max-quantity-order"));for(var i=0;i<items.length;i++){var quantity=(+$(items[i]).find(".js-qty-selector-input").val());if(quantity>maxQuantityOrder){type.find(".maximum-error").show();btnCheckout.attr("disabled",true);ACC.minicart.isMaximunQty=true;break;}else{type.find(".maximum-error").hide();btnCheckout.attr("disabled",false);ACC.minicart.isMaximunQty=false;}}}},hideEaUom:function(cateOption){var optionList=cateOption;var checkKIT;var eaIndex;if(optionList.length>0){for(var i=0;i<optionList.length;i++){if(optionList[i].getAttribute("value")==='EA'){eaIndex=i;}
if(optionList[i].getAttribute("value")==='KIT'){checkKIT=optionList[i].getAttribute("value");}}
if(eaIndex>=0){checkKIT?$(optionList[eaIndex]).detach():optionList[eaIndex].classList.remove("hidden");}}},removeEaOption:function(defaultUnit,optionList){if(defaultUnit){optionList.each(function(){if($(this).val()==='EA'){$(this).detach();}})}},changeSize:function(){$(".product-component").each(function(){if($(this).find(".obsolete-product").length>0){$(this).find(".obsolete-product").css("font-size",15);}})},handleTrackingData:function(element,sourceName,cartId){var job_reference={"express-cart-update":element.find(".job-reference").val()||"","reorder":element.find(".product-job-ref").data("job-ref")||"",};var productId={"mini-cart":element.data("entry-product-code")+"","cart":element.data("product-code")+"","express-cart":element.data("entry-product-code")+"","express-cart-added":element.data("entry-product-code")+"","express-cart-update":element.data("entry-product-code")+"","express-cart-checkout":element.data("entry-product-code")+"","favourites":element.data("product-code")+"","favourites-remove":element.data("product-code")+"","cart-remove":element.closest(".product-component").data("product-code")+"","complete-order":element.closest(".product-component").data("product-code")+"","reorder":element.closest(".product-component").data("product-code")+""};var productCode={"mini-cart":element.find(".code").data("product-display-code")+"","cart":element.data("product-display-code")+"","express-cart":element.find(".code").data("product-display-code")+"","express-cart-added":element.find(".code").data("product-display-code")+"","express-cart-checkout":element.find(".code").data("product-display-code")+"","favourites":element.find(".product-code-label").data("product-display-code")+"","favourites-remove":element.find(".product-code-label").data("product-display-code")+"","cart-remove":element.closest(".product-component").data("product-display-code")+"","complete-order":element.closest(".product-component").data("product-display-code")+"","reorder":element.closest(".product-component").find(".product-code-label").data("product-display-code")+""};var brand={"mini-cart":element.closest(".product-component").data("brand-name")||"","cart":element.data("brand-name")||"","express-cart":element.closest(".product-component").data("brand-name")||"","express-cart-added":element.closest(".product-component").data("brand-name")||"","express-cart-checkout":element.closest(".product-component").data("brand-name")||"","favourites":element.data("brand-name")||"","favourites-remove":element.data("brand-name")||"","cart-remove":element.data("brand-name")||"","complete-order":element.data("brand-name")||"","reorder":element.closest(".product-component").data("brand-name")||""}
var category={"mini-cart":element.closest(".product-component").data("category-name")||"","cart":element.data("category-name")||"","express-cart":element.closest(".product-component").data("category-name")||"","express-cart-added":element.closest(".product-component").data("category-name")||"","express-cart-checkout":element.closest(".product-component").data("category-name")||"","favourites":element.data("category-name")||"","favourites-remove":element.data("category-name")||"","cart-remove":element.data("category-name")||"","complete-order":element.data("category-name")||"","reorder":element.closest(".product-component").data("category-name")||"",}
var imageUrl={"mini-cart":element.closest(".product-component").find("img").attr('src')||"","cart":element.find("img").attr('src')||"","express-cart":element.closest(".product-component").find("img").attr('src')||"","express-cart-added":element.closest(".product-component").find("img").attr('src')||"","express-cart-checkout":element.closest(".product-component").find("img").attr('src')||"","favourites":element.find("img").attr('src')||"","favourites-remove":element.find("img").attr('src')||"","cart-remove":element.find(".ls-custom-obsolete-img").find("img").attr('src')||"","complete-order":element.closest(".product-component").find("img").attr('src')||"","reorder":element.closest(".product-component").find("img").attr('src')||"",}
var name={"mini-cart":element.find(".name").text()||"","cart":element.find(".name").text()||"","express-cart":element.find(".details").find(".name").text()||"","express-cart-added":element.find(".details").find(".name").text()||"","express-cart-checkout":element.find(".details").find(".name").text()||"","favourites":element.find(".product-display-name").find("a").text().trim()||"","favourites-remove":element.find(".product-display-name").find("a").text().trim()||"","cart-remove":element.find(".name").text().trim()||"","complete-order":element.closest(".product-component").data("product-name")||"","reorder":element.find(".product-pdp-name").find("a").text().trim()||""};var promo={"mini-cart":element.find(".runout").text().trim()||"","cart":element.find(".runout").find("span:eq(0)").text().trim()||"","express-cart":element.find(".runout").text().trim()||"","express-cart-added":element.find(".runout").text().trim()||"","express-cart-checkout":element.find(".runout").text().trim()||"","favourites":element.data("promotion-name")||"","favourites-remove":element.data("promotion-name")||"","cart-remove":element.data("promotion-name")||"","complete-order":element.data("promotion-name")||"","reorder":element.find(".runout").text().trim()||""};var quantity={"mini-cart":+element.find(".js-qty-selector-input").val()||"","cart":+element.find(".js-qty-selector-input").val()||"","express-cart":+element.find(".js-qty-selector-input").val()||"","express-cart-update":+element.find(".js-qty-selector-input").val()||"","express-cart-checkout":+element.find(".js-qty-selector-input").val()||"","favourites":+element.find(".js-qty-selector-input").val()||"","favourites-remove":+element.find(".js-qty-selector-input").val()||"","cart-remove":+element.find(".js-qty-selector-input").val()||"","complete-order":+element.find(".product-pdp-name").data("product-quantity")||"","reorder":+element.find(".reorder-qty").text().trim()||""};var price={"mini-cart":Number(element.find(".promotion-price").text().trim().replace(/[^0-9.-]+/g,""))||"","cart":Number(element.find(".promotion-price").text().trim().replace(/[^0-9.-]+/g,""))||"","express-cart":Number(element.find(".promotion-price").text().trim().replace(/[^0-9.-]+/g,""))||"","express-cart-added":Number(element.find(".promotion-price").text().trim().replace(/[^0-9.-]+/g,""))||"","express-cart-update":Number(element.find(".promotion-price").text().trim().replace(/[^0-9.-]+/g,""))||"","express-cart-checkout":Number(element.find(".promotion-price").text().trim().replace(/[^0-9.-]+/g,""))||"","favourites":element.find(".promo-price").text().trim()?Number(element.find(".promo-price").text().trim().replace(/[^0-9.-]+/g,"")):"","favourites-remove":Number(element.find(".promo-price").text().trim().replace(/[^0-9.-]+/g,""))||"","cart-remove":Number(element.find(".promo-price").text().trim().replace(/[^0-9.-]+/g,""))||"","complete-order":+element.find(".checkout-price").data("checkout-price")||"","reorder":Number(element.find(".promo-price").text().trim().replace(/[^0-9.-]+/g,""))||""};var source={"express-cart":localStorage.getItem("source_sm")||undefined,"express-cart-checkout":localStorage.getItem("source_sm")||undefined,"cart":localStorage.getItem("source_sm")||undefined,"reorder":"Reorder",};var unit={"mini-cart":element.find(".uom-text").data("unit-name")?'1 '+element.find(".uom-text").data("unit-name"):"","cart":element.find(".uom-text").data("unit-name")?'1 '+element.find(".uom-text").data("unit-name"):"","express-cart":element.find(".uom-text").data("unit-name")?'1 '+element.find(".uom-text").data("unit-name"):"","express-cart-added":element.find(".uom-text").data("unit-name")?'1 '+element.find(".uom-text").data("unit-name"):"","express-cart-checkout":element.find(".uom-text").data("unit-name")?'1 '+element.find(".uom-text").data("unit-name"):"","favourites":element.find(".product-quantity-helper-text").data("unit-name")?'1 '+element.find(".product-quantity-helper-text").data("unit-name"):"","favourites-remove":element.find(".product-quantity-helper-text").data("unit-name")?'1 '+element.find(".product-quantity-helper-text").data("unit-name"):"","cart-remove":element.find(".uom-text").data("unit-name")?'1 '+element.find(".uom-text").data("unit-name"):"","complete-order":element.find(".uom-label").data("unit-name")?'1 '+element.find(".uom-label").data("unit-name"):"","reorder":element.find(".product-quantity-helper-text").data("unit-name")?'1 '+element.find(".product-quantity-helper-text").data("unit-name"):"",};var favourites_list_id={"favourites-remove":$(".wishlist-owner-container").find(".update-notes-favorite-class").find("#uiList").val(),};var favourites_list_name={"favourites-remove":$(".wishlist-owner-container").find(".wishlist-title").text().trim(),};var data={};productId[sourceName]!==undefined?data.product_id=productId[sourceName]:"";productCode[sourceName]!==undefined?data.product_code=productCode[sourceName]:"";brand[sourceName]!==undefined?data.brand=brand[sourceName]:"";cartId!==undefined?data.cart_id=cartId:"";job_reference[sourceName]!==undefined?data.job_reference=job_reference[sourceName]:"",category[sourceName]!==undefined?data.category=category[sourceName]:"";favourites_list_id[sourceName]!==undefined?data.favourites_list_id=favourites_list_id[sourceName]:"";favourites_list_name[sourceName]!==undefined?data.favourites_list_name=favourites_list_name[sourceName]:"";imageUrl[sourceName]!==undefined?data.image_url=imageUrl[sourceName]:"";name[sourceName]!==undefined?data.name=name[sourceName]:"";price[sourceName]!==undefined?data.price=price[sourceName]:"";promo[sourceName]!==undefined?data.promo=promo[sourceName]:"";quantity[sourceName]!==undefined?data.quantity=quantity[sourceName]:"";source[sourceName]!==undefined?data.source=source[sourceName]:"";unit[sourceName]!==undefined?data.unit=unit[sourceName]:"";return data;},adjustFirstPage:function(){$(".pagination-item-link:eq(2)").click(function(e){if($(".pagination-item-link:eq(2)").text().trim()=='1'){return;}
if($(".pagination-item-link:eq(3)").length>0){e.preventDefault();var path=$(".pagination-item-link:eq(3)").attr("href");var updatedPage=path.match(/page=(\d+)/)[1]-1;var updatedUrl=path.replace(/page=\d+/,`page=${updatedPage}`);window.location.href=updatedUrl;}})},displayNumberOfProduct:function(){if($(".category-top-controller").length==0){return;}
var pageNumber=+(new URLSearchParams(window.location.search).get('page'));var lastPageNumber=+(new URLSearchParams($(".pagination-item-link:eq("+($(".pagination-item-link").length-1)+")").attr("href")).get('page'));var productCount=+(new URLSearchParams(window.location.search).get('pageSize'))===0?$(".product-display-lg2-container").length:+(new URLSearchParams(window.location.search).get('pageSize'));var currentPageNumber=+$(".current-page").text().trim();var fromNumber=pageNumber*productCount+1;var toNumber;pageNumber===lastPageNumber?toNumber=+$(".category-control-total").text():toNumber=currentPageNumber*productCount;$(".category-control-result").text(fromNumber+" - "+toNumber);},getProductQuantityAndPrice:function(event,productCode,quantity){let divProductCode=document.querySelector('[data-product-code="'+productCode+'"]');let priceDiv=$(divProductCode).find('.promo-price.ls-display-promo-price');let price;if(priceDiv.length>0){price=$(priceDiv)[0].outerText;}
ACC.algoliaEvent.objectDatas=[{"price":price?Number(price.replaceAll("$","").replaceAll(",","")):0,"quantity":quantity?Number(quantity):0}];},isHomePage:function(){return window.location.pathname==="/";},bindRecommendationClickEvent:function(){$(document).on('click','.ais-FrequentlyBoughtTogether .product-component',function(){const queryID=$(this).data('queryid');const objectId=$(this).data('product-code').toString();if(queryID){ACC.algoliaEvent.sendAlgoliaEvent('clickedObjectIDsAfterSearch',[objectId],ACC.algoliaSearch.defaultCurrency,queryID);}});}};$(document).ready(function(){$(".ls-recently-view-products-container").length>0?$(".product-display-md1-container").find(".replacement-info-unavailable").removeClass("replacement-fav-btn"):"";!$(".product-display-xs1-container").length>0?$(".product-delivery-only-label").remove():"";$ajaxCallEvent=true;ACC.product.enableAddToCartButton();ACC.product.bindActionClick();ACC.product.hideEaUom($(".js-uom-selector select option"));ACC.product.changeSize();});$("a#listView").click(function(){ACC.product.setDisplayMode(false);});$("a#gridView").click(function(){ACC.product.setDisplayMode(true);});ACC.productDetail={_autoload:["initPageEvents","isPDP","getDefaultOption","bindVariantOptions","storeViewedProduct","addPDPBundle",["loadCartStock",$(".product-component-cart-stock-live-call").length!==0||$(".product-component-blum-part-stock-live-call").length!==0,],["loadPdpStock",$(".product-component-pdp-stock-live-call").length!==0&&!localStorage.getItem('LocationSaved')],["bindExistingLocation",($(".product-component-pdp-stock-live-call").length!==0||$(".product-component-cart-stock-live-call").length!==0)],['bindAutoComplete',$('.guest-location-select').length>0],"addNewStylePromo",["bindPackSize",$(".pack-size-container .pack-size-input").length>0]],addToCart:'/cart/add',invokedCartStockService:false,invokedPdpStockService:false,loadAsynPdpStockService:false,isUomInitial:false,changeExpressUnit:null,unit:null,changeMiniUnit:null,changePDPunit:false,loadCartStock:function(){var stockComponent=".product-component-blum-part-stock-live-call";if($(".product-component-cart-stock-live-call").length>0){stockComponent=".product-component-cart-stock-live-call"}
ACC.productDetail.loadAsyncCartStock(stockComponent);},loadPdpStock:function(){ACC.productDetail.loadAsyncPdpStock(".product-component-pdp-stock-live-call");$(document).on("click",".ls-pdp-popup-location",function(e){e.preventDefault();var productDetailEle=$(".product-component-pdp-stock-live-call");var productCode=$.trim(productDetailEle.data("product-code"));var url="/productstock/stockavailability/"+productCode;var inputUserInput=$(productDetailEle).find(".js-qty-selector-input");var inputUser=parseFloat(inputUserInput.val());var conversionUoM=$(productDetailEle).find(":selected").data("conversion");var calculatorQuantity=inputUser*conversionUoM;const inputQuantity=conversionUoM?calculatorQuantity:inputUser;$.ajax({url:url,cache:false,type:"GET",dataType:"html",success:function(response){var numberOfLocation=$(response).find(".ls-location-name").length;if(numberOfLocation>1){if(response.indexOf("stock-location-form-container")!==-1){var $response=$("<div />").append(response);var stockDataLocation=$response.find(".ls-location-items");$('.stock-info-container .loading').addClass('hidden');$.each(stockDataLocation,function(index,value){var quantity=parseFloat($(value).find("input[name='locationStock']").val());var futureQuantity=parseFloat($(value).find("input[name='locationStock']").data('future-quantity'))||0;if(quantity===0){$(value).find(".product-stock-available").addClass("hidden");$(value).find(".product-stock-unavailable").removeClass("hidden");$(value).find(".product-stock-partial").addClass("hidden");$(value).find(".ls-location-leadTime").addClass("hidden");$(value).find(".ls-location-deliveryTime").addClass("hidden");$(value).find(".stock-due-date").removeClass("hidden");if(futureQuantity>0){$(value).find(".stock-due-date").addClass('hidden');$(value).find(".stock-due-date-quantity").removeClass('hidden');}else{$(value).find(".stock-due-date").removeClass('hidden');$(value).find(".stock-due-date-quantity").addClass('hidden');}}else if(inputQuantity>quantity){$(value).find(".product-stock-partial").removeClass("hidden");$(value).find(".product-stock-available").addClass("hidden");$(value).find(".product-stock-unavailable").addClass("hidden");$(value).find(".ls-location-leadTime").addClass("hidden");$(value).find(".ls-location-deliveryTime").addClass("hidden");$(value).find(".stock-due-date").removeClass("hidden");if(futureQuantity>0){$(value).find(".stock-due-date").addClass('hidden');$(value).find(".stock-due-date-quantity").removeClass('hidden');}else{$(value).find(".stock-due-date").removeClass('hidden');$(value).find(".stock-due-date-quantity").addClass('hidden');}}else{$(value).find(".product-stock-available").removeClass("hidden");$(value).find(".product-stock-partial").addClass("hidden");$(value).find(".product-stock-unavailable").addClass("hidden");$(value).find(".ls-location-leadTime").removeClass("hidden");$(value).find(".ls-location-deliveryTime").removeClass("hidden");$(value).find(".stock-due-date").addClass("hidden");$(value).find(".stock-due-date-quantity").addClass('hidden');}});ACC.productDetail.showLocationStock($response.html());}}}});});},loadAsyncCartStock:function(elementComponent){var url="/productstock/";var productCodes=[];$(elementComponent).each(function(){var productDetailEle=$(this);var productCode=$.trim(productDetailEle.data("product-code"));productCodes.push(productCode);});if(productCodes.length<=0){return;}
productCodes.sort();var slidedArrays=ACC.priceFactory.slideArray(productCodes,12);$.each(slidedArrays,function(slidedIndex,slidedValues){var productCodesAsString=slidedValues.join(",");ACC.productDetail.invokeStockService(url+productCodesAsString,elementComponent);});},invokeStockService:function(url,elementComponent){$.ajax({url:url,type:"GET",dataType:"json",success:function(data){ACC.productDetail.invokedCartStockService=true;$('.stock-info-container .loading').addClass('hidden');$.each(data,function(index,value){var productComponent=$(elementComponent+"[data-product-code="+value.productCode+"]");$.each(productComponent,function(i,v){var inputUserInput=$(v).find(".js-qty-selector-input");var inputUser=parseFloat($(v).data("entry-initial-quantity"))||0;if(inputUserInput?.length>0){inputUserInput.data("level",value.quantity);inputUserInput.data("stock-date",value.stockDueDate);inputUserInput.data("display-date",value.showStockAvailabilityDate);inputUserInput.data("future-quantity",value.futureQuantity);inputUserInput.data("alternative",value.isAlternativeUnit);inputUserInput.data("alternative-quantity",value.alternativeQuantity);inputUser=parseFloat(inputUserInput.val());}
var conversionUoM=$(v).find(":selected").data("conversion");var calculatorQuantity=inputUser*conversionUoM;const selectedQuantity=conversionUoM?calculatorQuantity:inputUser;ACC.productDetail.setStockState(productComponent,value.quantity,selectedQuantity,value.showStockAvailabilityDate,value.stockDueDate,value.futureQuantity,value.isAlternativeUnit?value.alternativeQuantity:null);});});var cartStoreLocation=$('.guest-location-container .current-location-value');if(cartStoreLocation.length>0&&data.length>0){var location=data[0];cartStoreLocation.text(location.warehouseName||'');$('.guest-location-container .current-location').removeClass('hidden');}else{cartStoreLocation.text('');$('.guest-location-container .current-location').addClass('hidden');}},});},loadAsyncPdpStock:function(elementComponentPDP){var url="/productstock/";var productCodes=[];var productDetailEle=$(elementComponentPDP);var productCode=$.trim(productDetailEle.data("product-code"));if(productCode){productCodes.push(productCode);}
if(productCodes.length<=0){return;}
productCodes.sort();var slidedArrays=ACC.priceFactory.slideArray(productCodes,12);$.each(slidedArrays,function(slidedIndex,slidedValues){var productCodesAsString=slidedValues.join(",");ACC.productDetail.invokePdpStockService(url+productCodesAsString,elementComponentPDP);});},invokePdpStockService(url,elementComponentPDP){var isLocationSaved=localStorage.getItem('LocationSaved');var isLoggedIn=$('.js-header-session-timeout').length>0;$.ajax({url:url,type:"GET",dataType:"json",success:function(data){ACC.productDetail.invokedPdpStockService=true;$('.stock-info-container .loading').addClass('hidden');if(!isLocationSaved&&!isLoggedIn){$('.ls-pdp-stock-location').addClass('hidden');$('.product-stock-unavailable').addClass('hidden');$('.product-stock-available').addClass('hidden');$('.product-stock-partial').addClass('hidden');return;}
if(data.length==0){$('.ls-pdp-stock-location').addClass('hidden');if(isLocationSaved){$('.product-stock-unavailable').removeClass('hidden');}
$('.product-stock-available').addClass('hidden');return;}
$.each(data,function(index,value){ACC.productDetail.loadAsynPdpStockService=true;var productComponent=$(elementComponentPDP+"[data-product-code="+
value.productCode+"]");var inputUserInput=$(productComponent).find(".js-qty-selector-input:first");inputUserInput.data("level",value.quantity);inputUserInput.data("stock-date",value.stockDueDate);inputUserInput.data("display-date",value.showStockAvailabilityDate);inputUserInput.data("future-quantity",value.futureQuantity);inputUserInput.data("alternative",value.isAlternativeUnit);inputUserInput.data("alternative-quantity",value.alternativeQuantity);var inputUser=parseFloat(inputUserInput.val());var conversionUoM=$(productComponent).find(":selected").data("conversion");var calculatorQuantity=inputUser*conversionUoM;const stockCheckValue=conversionUoM?calculatorQuantity:inputUser;ACC.productDetail.setStockState(productComponent,value.quantity,stockCheckValue,value.showStockAvailabilityDate,value.stockDueDate,value.futureQuantity,value.isAlternativeUnit?value.alternativeQuantity:null);$(".ls-pdp-stock-delivery-time").html(value.deliveryTime);if(value.isPickup){$(".ls-pdp-stock-lead-time").html(value.leadTime);}else{$(".ls-pdp-stock-lead-time").html("Unavailable for pick up");}
if(value.warehouseName){$(".ls-stock-location").html(value.warehouseName);$(".ls-stock-location").removeClass('hidden');$(".ls-pdp-stock-location").removeClass('hidden');$(".ls-pdp-stock-store").removeClass('hidden');}
if(value.hasSecondary){$(".ls-pdp-popup-location").removeClass("hidden");}});},});},checkQtySelector:function(self,mode,event){var qtySelector=$(document).find(self).closest(".js-qty-selector");var input=qtySelector.find(".js-qty-selector-input");var min=input.data("min")||1
var currentValue=input.val();var inputVal=parseFloat(currentValue||min);var max=Number.MAX_SAFE_INTEGER;var minusBtn=qtySelector.find(".js-qty-selector-minus");var plusBtn=qtySelector.find(".js-qty-selector-plus");var validateInfo=$(self).closest(".ls-product-show-info").find(".pdp-value-validation-default");var validateInfoAlt=$(self).closest(".ls-product-show-info").find(".pdp-value-validation-alt");var minOrderText=$(self).closest(".ls-product-show-info").find(".min-order-info:visible");var maxAvailable=input.data("level")||0;const stockDueDate=input.data("stock-date")||null;const displayDate=input.data("display-date")||false;const isAlternative=input.data("alternative")||false;const alternativeQty=input.data("alternative-quantity")||undefined;const stockFutureQuantity=input.data("future-quantity")||0;var roundingStep=1;var roundingStepInput=qtySelector.find(".uomStep");var roundingRule="none";if(roundingStepInput.length!=0){roundingRule=roundingStepInput.data("roundingrule");let step=parseFloat(roundingStepInput.data("step"));let eaStep=1.0;let defaultConversion=parseFloat(roundingStepInput.data("defaultconversion"));if(defaultConversion>1){min=Math.ceil(min/defaultConversion);}
if(roundingRule!=="none"){step=parseFloat(roundingStepInput.data("roundingconversion"));roundingStep=ACC.productDetail.calculateStep(defaultConversion,step);}else{let conversion=1.0;if(roundingStepInput.data("roundinguom")==="none"){conversion=defaultConversion;}else{conversion=parseFloat(roundingStepInput.data("conversion"));}
eaStep=step*conversion;roundingStep=ACC.productDetail.calculateStep(defaultConversion,eaStep);}
if(roundingStep!=1){let modular=min%roundingStep;min=modular!==0?min+(roundingStep-modular):min;let minOrderInfoRow=input.closest(".ls-product-show-info");let minOrderInfo=minOrderInfoRow.find(".min-order-info .min-order").first();minOrderInfo.html(min);}else{let minOrderInfoRow=input.closest(".ls-product-show-info");let minOrderInfo=minOrderInfoRow.find(".min-order-info .min-order").first();minOrderInfo.html(min);}}
const isGiveAway=qtySelector.closest('.product-component').data('give-away')||false;if(!isGiveAway){qtySelector.find(".btn").removeAttr("disabled");qtySelector.find(".quantity-selector").removeAttr("disabled");}
switch(mode){case"minus":if(inputVal!=min){if(inputVal<min||inputVal<0){ACC.productDetail.updateQtyValue(self,min,roundingStep,'',"minus");minusBtn.attr("disabled","disabled");}else{ACC.productDetail.updateQtyValue(self,inputVal-roundingStep,roundingStep,'',"plus");}
if(inputVal-roundingStep===min){minusBtn.attr("disabled","disabled");}}else{minusBtn.attr("disabled","disabled");}
break;case"reset":ACC.productDetail.updateQtyValue(self,min,roundingStep);break;case"plus":validateInfo.hide();validateInfoAlt.hide();if(max==="FORCE_IN_STOCK"){ACC.productDetail.updateQtyValue(self,inputVal+roundingStep,roundingStep,'',"plus");}else if(inputVal<=max){ACC.productDetail.updateQtyValue(self,inputVal+roundingStep,roundingStep,'',"plus");if(inputVal+roundingStep===max){plusBtn.attr("disabled","disabled");}}else{plusBtn.attr("disabled","disabled");}
break;case"change":validateInfo.hide();validateInfoAlt.hide();if(inputVal===min){minusBtn.attr("disabled","disabled");ACC.productDetail.updateQtyValue(self,inputVal,roundingStep,roundingRule,mode);}else if(inputVal<min){ACC.productDetail.updateQtyValueAndButton(self,min,roundingStep,minusBtn,roundingRule,mode);if(minOrderText.length>0){ACC.productDetail.showAltValidateInfo(validateInfo,validateInfoAlt,roundingStep,min);}else{validateInfo.hide();validateInfoAlt.hide();}}else if(max==="FORCE_IN_STOCK"&&inputVal>0){ACC.productDetail.updateQtyValue(self,inputVal,roundingStep,roundingRule,mode);}else if(inputVal===max){plusBtn.attr("disabled","disabled");}else if(inputVal>max){ACC.productDetail.updateQtyValue(self,max,roundingStep,roundingRule,mode);plusBtn.attr("disabled","disabled");}else{ACC.productDetail.updateQtyValue(self,inputVal,roundingStep,roundingRule,mode);}
break;case"focusout":if(isNaN(inputVal)){ACC.productDetail.updateQtyValueAndButton(self,min,roundingStep,minusBtn,roundingRule);}else if(inputVal>=max){plusBtn.attr("disabled","disabled");}else if(inputVal===min){minusBtn.attr("disabled","disabled");}
break;case"paste":let clipboardData=event.originalEvent.clipboardData;event.preventDefault();inputVal=parseFloat(clipboardData.getData("text/plain"));validateInfo.hide();validateInfoAlt.hide();if(isNaN(inputVal)){ACC.productDetail.updateQtyValueAndButton(self,min,roundingStep,minusBtn,roundingRule);ACC.productDetail.showAltValidateInfo(validateInfo,validateInfoAlt,roundingStep,min);}else if(inputVal===min){minusBtn.attr("disabled","disabled");}else if(inputVal<min){ACC.productDetail.updateQtyValueAndButton(self,min,roundingStep,minusBtn,roundingRule);if(minOrderText.length>0){ACC.productDetail.showAltValidateInfo(validateInfo,validateInfoAlt,roundingStep,min);}else{validateInfo.hide();validateInfoAlt.hide();}}else if(max==="FORCE_IN_STOCK"&&inputVal>0){ACC.productDetail.updateQtyValue(self,inputVal,roundingStep,roundingRule);}else if(inputVal===max){plusBtn.attr("disabled","disabled");}else if(inputVal>max){ACC.productDetail.updateQtyValue(self,max,roundingStep,roundingRule);plusBtn.attr("disabled","disabled");}else{ACC.productDetail.updateQtyValue(self,inputVal,roundingStep,roundingRule);}
break;case"init":if(isNaN(inputVal)){ACC.productDetail.updateQtyValueAndButton(self,min,roundingStep,minusBtn,roundingRule);}else if(roundingStep!=1){ACC.productDetail.updateQtyValue(self,inputVal,roundingStep,roundingRule);}
default:break;}
if(!currentValue){validateInfo.show();}
var newInputVal=parseFloat(input.val());var productComponent=input.closest(".product-component");if(productComponent.hasClass("ls-cart-item")&&((newInputVal!==inputVal)||mode==="change")){ACC.cartitem.updateCartItem(input,newInputVal);}
if(productComponent.hasClass("mini-cart__item")&&(newInputVal!==inputVal||mode==="change")){ACC.minicart.updateMiniCartItem(input);}
if(productComponent.hasClass("express-cart__item")&&(newInputVal!==inputVal||mode==="change")){ACC.expresscart.updateExpressCartItem(input);}
ACC.productDetail.setPackSize(productComponent,newInputVal);if(mode!=='init'){ACC.priceFactory.invokeScalePricing(productComponent,newInputVal);}
if(!ACC.productDetail.invokedCartStockService&&ACC.productDetail.invokedPdpStockService&&!ACC.productDetail.loadAsynPdpStockService){return;}
var conversionUoM=$(".js-uom-selector-input option:selected").data("conversion");const stockCheckValue=conversionUoM?(newInputVal*parseFloat(conversionUoM)):newInputVal;if(mode!=='init'){ACC.productDetail.setStockState(productComponent,maxAvailable,stockCheckValue,displayDate,stockDueDate,stockFutureQuantity,isAlternative?alternativeQty:null);}},uomList:[],uom:function(value,unit){var isDup=false;for(var i=0;i<ACC.productDetail.uomList.length;i++){if(ACC.productDetail.uomList[i].includes(unit)){isDup=true;break;}}
isDup===false?ACC.productDetail.uomList.push([unit,value]):"";},updateQtyValue:function(self,value,step,roundingRule,mode){var input=$(self.closest(".product-component")).find(".js-qty-selector-input");var addtocartQty=$(self.closest(".ls-product-show-info")).find("form.add_to_cart_form").find(".js-qty-selector-input");var configureQty=$(self.closest(".ls-product-show-info")).find("form.configure_form").find(".js-qty-selector-input");var modularValue=parseFloat(value)%parseFloat(step);var uom=$(self.closest(".product-component")).find(".js-uom-selector-input").find(".option-item:selected");if(modularValue==0&&ACC.productDetail.isUomInitial==false){ACC.productDetail.uom(value,uom.text());input.val(value);addtocartQty.val(value);configureQty.val(value);}
else if(modularValue==0&&mode!="change"&&ACC.productDetail.isUomInitial==true){if(mode=="plus"||mode=="minus"){input.val(value);addtocartQty.val(value);configureQty.val(value);}else{if(ACC.expresscart.isExpressCart){var item=$(".express-cart__item:eq("+ACC.productDetail.changeExpressUnit+")");var unitValue=item.find(".select-uom").val();var inputChange=item.find(".product-quantity-selector-content").find(".js-qty-selector").find(".js-qty-selector-input");var checkOrderIncrement=/(of 100)/g.test(item.text());if(checkOrderIncrement){var valueOder=unitValue=="EA"?ACC.expresscart.orderIncrement.EA:1;inputChange.val(valueOder);}else{input.val(value);addtocartQty.val(value);configureQty.val(value);}}}}
else if(modularValue==0&&mode=="change"&&ACC.productDetail.isUomInitial==true){if(ACC.expresscart.isExpressCart||ACC.minicart.isMiniCart){input.val(value);addtocartQty.val(value);configureQty.val(value);ACC.expresscart.updateExpressCartItem(input);}else{var orderIncrement=/(Order increments)/g.test($(".rounding-profile-info").text());if(orderIncrement&&ACC.productDetail.changePDPunit){var item=$(".product-details-content");var unitValue=item.find(".js-uom-selector-input").val();var valueOder=unitValue=="EA"?ACC.expresscart.orderIncrement.EA:1;input.val(valueOder);ACC.productDetail.changePDPunit=false;}else{input.val(value);addtocartQty.val(value);configureQty.val(value);}}}
else{if(typeof roundingRule=="undefined"){ACC.productDetail.roundValuesUp(step,modularValue,value,input,addtocartQty,configureQty);}else{if(roundingRule==="I3"||roundingRule==="O3"){if(modularValue<step/2){ACC.productDetail.roundValuesDown(step,modularValue,value,input,addtocartQty,configureQty);}else{ACC.productDetail.roundValuesUp(step,modularValue,value,input,addtocartQty,configureQty);}}else{ACC.productDetail.roundValuesUp(step,modularValue,value,input,addtocartQty,configureQty);}}}},setStockState:function(component,quantity,stockCheckValue,showFlag,dueDate,futureQuantity,alternativeQty){if(quantity===0){component.find(".product-stock-available").addClass("hidden");component.find(".product-stock-unavailable").removeClass("hidden");component.find(".product-stock-partial").addClass("hidden");if(dueDate&&showFlag){component.find(".product-stock-unavailable .backorder-icon").removeClass('hidden');component.find(".product-stock-partial .backorder-icon").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon .out-of-stock").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon .back-order").removeClass('hidden');if(futureQuantity>0){component.find(".stock-due-date").addClass('hidden');component.find(".stock-due-date-quantity").removeClass('hidden');component.find(".stock-due-date .due-date-value").text('');component.find(".stock-due-date-quantity .due-date-value").text(dueDate);component.find(".stock-due-date-quantity .quantity-text").text(futureQuantity);}else{component.find(".stock-due-date").removeClass('hidden');component.find(".stock-due-date .due-date-value").text(dueDate);component.find(".stock-due-date-quantity").addClass('hidden');component.find(".stock-due-date-quantity .quantity-text").text('');component.find(".stock-due-date-quantity .due-date-value").text('');}}else{if(!showFlag){component.find(".product-stock-unavailable .backorder-icon .out-of-stock").removeClass('hidden');component.find(".product-stock-unavailable .backorder-icon .back-order").addClass('hidden');}else{component.find(".product-stock-unavailable .backorder-icon .back-order").removeClass('hidden');component.find(".product-stock-unavailable .backorder-icon .out-of-stock").addClass('hidden');}
component.find(".stock-due-date").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon").removeClass('hidden');component.find(".product-stock-partial .backorder-icon").addClass('hidden');component.find(".stock-due-date .due-date-value").text('');component.find(".stock-due-date-quantity").addClass('hidden');component.find(".stock-due-date-quantity .quantity-text").text('');component.find(".stock-due-date-quantity .due-date-value").text('');}}
else if(stockCheckValue>quantity){component.find(".product-stock-available").addClass("hidden");component.find(".product-stock-unavailable").addClass("hidden");component.find(".product-stock-partial").removeClass("hidden");component.find(".product-stock-unavailable .backorder-icon .out-of-stock").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon .back-order").addClass('hidden');const stockText=component.find(".product-stock-partial .stock-text");const stockContent=stockText.data('text');const newText=stockContent.replaceAll("#count",alternativeQty||quantity);stockText.text(newText);if(dueDate&&showFlag){component.find(".product-stock-partial .backorder-icon").removeClass('hidden');component.find(".product-stock-unavailable .backorder-icon").addClass('hidden');component.find(".product-stock-partial .backorder-icon .back-order").removeClass('hidden');if(futureQuantity>0){component.find(".stock-due-date").addClass('hidden');component.find(".stock-due-date-quantity").removeClass('hidden');component.find(".stock-due-date .due-date-value").text('');component.find(".stock-due-date-quantity .due-date-value").text(dueDate);component.find(".stock-due-date-quantity .quantity-text").text(futureQuantity);}else{component.find(".stock-due-date").removeClass('hidden');component.find(".stock-due-date .due-date-value").text(dueDate);component.find(".stock-due-date-quantity").addClass('hidden');component.find(".stock-due-date-quantity .quantity-text").text('');component.find(".stock-due-date-quantity .due-date-value").text('');}}else{component.find(".stock-due-date").addClass('hidden');component.find(".product-stock-partial .backorder-icon").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon").addClass('hidden');component.find(".stock-due-date .due-date-value").text('');component.find(".stock-due-date-quantity").addClass('hidden');component.find(".stock-due-date-quantity .quantity-text").text('');component.find(".stock-due-date-quantity .due-date-value").text('');}}else{component.find(".product-stock-available").removeClass("hidden");component.find(".product-stock-unavailable").addClass("hidden");component.find(".product-stock-partial").addClass("hidden");component.find(".product-stock-partial .backorder-icon").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon").addClass('hidden');component.find(".stock-due-date").addClass('hidden');component.find(".stock-due-date .due-date-value").text('');component.find(".stock-due-date-quantity").addClass('hidden');component.find(".stock-due-date-quantity .quantity-text").text('');component.find(".stock-due-date-quantity .due-date-value").text('');component.find(".product-stock-unavailable .backorder-icon .out-of-stock").addClass('hidden');component.find(".product-stock-unavailable .backorder-icon .back-order").addClass('hidden');}},roundValuesUp:function(step,modularValue,value,input,addtocartQty,configureQty){ACC.productDetail.isUomInitial=true;$(input).val(parseFloat(value)+parseFloat(step-modularValue));$(addtocartQty).val(parseFloat(value)+parseFloat(step-modularValue));$(configureQty).val(parseFloat(value)+parseFloat(step-modularValue));},roundValuesDown:function(step,modularValue,value,input,addtocartQty,configureQty){ACC.productDetail.isUomInitial=true;$(input).val(parseFloat(value)-modularValue);$(addtocartQty).val(parseFloat(value)-modularValue);$(configureQty).val(parseFloat(value)-modularValue);},updateQtyValueAndButton:function(element,value,roundingStep,btn,roundingRule,mode){ACC.productDetail.updateQtyValue(element,value,roundingStep,roundingRule,mode);btn.attr("disabled","disabled");},showAltValidateInfo:function(validateInfo,validateInfoAlt,roundingStep,min){if(validateInfo.length!=0&&roundingStep!="undefined"){if(roundingStep===1){validateInfo.show();}else{if(validateInfoAlt.length!=0){var info=validateInfoAlt.html();var expression=/\d+/;var currentMin=String(info.match(expression)[0]);validateInfoAlt.html(info.replace(currentMin,String(min)));validateInfoAlt.show();}}}},calculateStep:function(conversion,step){if(conversion>step){if(conversion%step==0){return 1;}else{return step;}}else if(conversion==step){return 1;}else if(conversion<step){if(step%conversion==0){return step/conversion;}else{return step;}}
return 1;},updateUnitSelection:function(self,value,conversion){$(self).closest(".product-information-container").find(".unit-price-toggle").addClass("hide");$(self).closest(".product-information-container").find(".unit-price-toggle.unit-"+value).first().removeClass("hide");$(self).closest(".product-information-container").find("form.add_to_cart_form input[name=uomCode]").val(value);var priceDisplayEle=$(self).closest(".product-information-container").find(".ls-display-promo-price");var priceExGSTEle=$(self).closest(".product-information-container").find(".non-gst-price .price-desc");var priceBySelectedUnit=$(priceDisplayEle).data("unit-price-unit-"+value);if(typeof priceBySelectedUnit!=="undefined"){if(priceExGSTEle.length>0){var grossPrice=$(priceDisplayEle).data("unit-gross-price-unit-"+value);priceDisplayEle.text(grossPrice);}else{priceDisplayEle.text(priceBySelectedUnit);}}
var selector=$(self).closest(".product-information-container").find(".js-qty-selector .js-qty-selector-input");var roundingProfile=selector.closest(".js-qty-selector").find(".uomStep");if(roundingProfile.length!=0&&selector.length!=0){if(conversion!=undefined){roundingProfile.data("defaultconversion",parseFloat(conversion));let roundingRule="none";roundingRule=roundingProfile.data("roundingrule");let step=1.0;switch(roundingRule){case"none":step=ACC.productDetail.calculateStep(roundingProfile.data("defaultconversion"),roundingProfile.data("step"));break;default:step=ACC.productDetail.calculateStep(roundingProfile.data("defaultconversion"),1.0);break;}
ACC.productDetail.updateQtyValue(selector,parseFloat(selector.val()),step);}}},updateUnitSelectionForCart:function(self,value,conversion){var selector=$(self).closest(".custom-gutter").find(".js-qty-selector .js-qty-selector-input");var roundingProfile=selector.closest(".js-qty-selector").find(".uomStep");if(roundingProfile.length!=0&&selector.length!=0){if(conversion!=undefined){roundingProfile.data("defaultconversion",parseFloat(conversion));let roundingRule="none";roundingRule=roundingProfile.data("roundingrule");let step=1.0;switch(roundingRule){case"none":step=ACC.productDetail.calculateStep(roundingProfile.data("defaultconversion"),roundingProfile.data("step"));break;default:step=ACC.productDetail.calculateStep(roundingProfile.data("defaultconversion"),1.0);break;}
ACC.productDetail.updateQtyValue(selector,parseFloat(selector.val()),step);}}},updateUnitSelectionForCartPage:function(self,value,conversion){var selector=$(self).closest(".ls-cart-item").find(".js-qty-selector .js-qty-selector-input");var roundingProfile=selector.closest(".js-qty-selector").find(".uomStep");if(roundingProfile.length!=0&&selector.length!=0){if(conversion!=undefined){roundingProfile.data("defaultconversion",parseFloat(conversion));let roundingRule="none";roundingRule=roundingProfile.data("roundingrule");let step=1.0;switch(roundingRule){case"none":step=ACC.productDetail.calculateStep(roundingProfile.data("defaultconversion"),roundingProfile.data("step"));break;default:step=ACC.productDetail.calculateStep(roundingProfile.data("defaultconversion"),1.0);break;}
ACC.productDetail.updateQtyValue(selector,parseFloat(selector.val()),step);}}},initPageEvents:function(){if(document.getElementsByClassName("product-component-pdp-stock-live-call").length>0){var link=!!document.querySelector("link[rel='canonical']")?document.querySelector("link[rel='canonical']"):document.createElement('link');link.setAttribute('rel','canonical');link.setAttribute('href',location.protocol+'//'+location.host+location.pathname);document.head.appendChild(link);}
if(!$(".product-details").closest(".product-component-pdp-stock-live-call").data("obsolete")&&$(".replacement-data").length>0){$(".product-details").closest(".product-component-pdp-stock-live-call").find(".product-display-price-container").addClass("display-none");$(".product-details").closest(".product-component-pdp-stock-live-call").find(".product-display-quantity-container").addClass("display-none");}
$(".document-guide-block-content").click(function(){var trackingData={brand:$("#pdp-tabs").find("#pdp-attributes").find("#brand-name-attr").text()||"",category:$(".breadcrumb").find("li:eq(2)").find("a").text()||"",document_name:$(this).find(".docs-block-name").text().trim()||"",download_path:$(this).closest(".document-guide-docs-block").find("a").attr("href")||"",product_id:$(".product-component-pdp-stock-live-call").data("product-code")||"",};window.dataLayer.push({event:'Document Download',...trackingData});});$(document).on("change",".js-uom-selector-input",function(e){var conversion=$(this).find(":selected").data("conversion");ACC.productDetail.updateUnitSelection(this,$(this).val(),parseFloat(conversion));var selector=$(this).closest(".product-information-container").find(".js-qty-selector .js-qty-selector-input");if(selector.length!=null){ACC.productDetail.checkQtySelector(selector,"change");}});$(document).on("click",".js-qty-selector .js-qty-selector-minus",function(){ACC.productDetail.checkQtySelector(this,"minus");});$(document).on("click",".js-qty-selector .js-qty-selector-plus",function(){ACC.productDetail.checkQtySelector(this,"plus");});$(document).on("keydown",".js-qty-selector .js-qty-selector-input",function(e){if(($(this).val()!=" "&&((e.which>=48&&e.which<=57)||(e.which>=96&&e.which<=105)))||e.which==8||e.which==46||e.which==37||e.which==39||e.which==9){}else if(e.which==38){ACC.productDetail.checkQtySelector(this,"plus");}else if(e.which==40){ACC.productDetail.checkQtySelector(this,"minus");}else{e.preventDefault();}});$(document).on("change",".js-qty-selector .js-qty-selector-input",function(e){ACC.productDetail.checkQtySelector(this,"change");});$(".product-display-lg1-container").find(".hidden-xs").find(".product-quantity-selector-content").find(".js-qty-selector-input").on('input',function(){ACC.productDetail.checkQtySelector(this,"change");});$(".product-display-lg2-container").find(".product-quantity-container").find(".product-quantity-selector-content").find(".js-qty-selector-input").on('input',function(){ACC.productDetail.checkQtySelector(this,"change");});$(document).on("focusout",".js-qty-selector .js-qty-selector-input",function(e){ACC.productDetail.checkQtySelector(this,"focusout");});$(document).on("paste",".js-qty-selector .js-qty-selector-input",function(e){ACC.productDetail.checkQtySelector(this,"paste",e);});$(document).on("change",".express-cart__item",function(){ACC.productDetail.changeExpressUnit=$(this).index();});$(document).on("click",".mini-cart__item",function(){ACC.productDetail.changeMiniUnit=$(this).index();});$(document).on("click",".select-uom",function(){ACC.productDetail.unit=$(this);});$("#Size").change(function(){changeOnVariantOptionSelection($("#Size option:selected"));});$("#variant").change(function(){changeOnVariantOptionSelection($("#variant option:selected"));});$(".selectPriority").change(function(){window.location.href=$(this[this.selectedIndex]).val();});function changeOnVariantOptionSelection(optionSelected){window.location.href=optionSelected.attr("value");}
const readMoreLink=$(".js-read-more-summary");const readLessLink=$(".js-read-less-summary");if(getRows(".signinDescription.visible-xs p")>=3){$(".js-read-more-summary").show();$(".signinDescription.visible-xs p").height("3em");}
readMoreLink.on("click",function(){$(".signinDescription.visible-xs p").height("auto");readMoreLink.hide();readLessLink.show();});readLessLink.on("click",function(){readMoreLink.show();readLessLink.hide();$(".signinDescription.visible-xs p").height("3em");});function getRows(selector){var height=$(selector).height();var line_height=$(selector).css("line-height");line_height=parseFloat(line_height);var rows=height/line_height;return Math.round(rows);}
$(document).on("click",".product-media .playlist-item",function(){var videoId=$(this).data("id");var videoTitle=$(this).data("title");var videoDescription=$(this).data("description");$(".product-media .selected-video .video-player iframe").attr("src","https://www.youtube.com/embed/"+videoId);$(".product-media .selected-video .title").text(videoTitle);$(".product-media .selected-video .description").text(videoDescription);$(".playlist-item-thumbnail img").removeClass("selected");$(this).find("img").addClass("selected");});},bindVariantOptions:function(){ACC.productDetail.bindCurrentStyle();ACC.productDetail.bindCurrentSize();ACC.productDetail.bindCurrentType();},bindCurrentStyle:function(){var currentStyle=$("#currentStyleValue").data("styleValue");var styleSpan=$(".styleName");if(currentStyle!=null){styleSpan.text(": "+currentStyle);}},bindCurrentSize:function(){var currentSize=$("#currentSizeValue").data("sizeValue");var sizeSpan=$(".sizeName");if(currentSize!=null){sizeSpan.text(": "+currentSize);}},bindCurrentType:function(){var currentSize=$("#currentTypeValue").data("typeValue");var sizeSpan=$(".typeName");if(currentSize!=null){sizeSpan.text(": "+currentSize);}},bindSeeMore:function(){const vw=document.documentElement.clientWidth;const docsNo=$(".document-guide-docs-block").length;if((vw<640&&docsNo>4)||(vw<1024&&docsNo>6)||(vw>1024&&docsNo>9)){$(".document-guide-toggle").show();}else{$(".document-guide-toggle").hide();}},handlePopup:function(e){const closeSpan=`<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>`;const modal=document.createElement("div");modal.classList.add("ls-popup-outer");const modalInner=document.createElement("div");modalInner.classList.add("ls-popup-inner");const modalContent=document.createElement("div");const closeDiv=document.createElement("div");const contentDiv=document.createElement("div");contentDiv.classList.add("ls-popup-data");closeDiv.classList.add("ls-popup-close-container");closeDiv.innerHTML=closeSpan;modalContent.appendChild(contentDiv);modalContent.appendChild(closeDiv);modalContent.classList.add("ls-popup-content","product-replacement-popup");modalInner.appendChild(modalContent);modal.appendChild(modalInner);const popupContent=$(contentDiv);popupContent.append($($(e.target).parents(".replacement-info").parent("div").find(".product-replacement-container")[0]).clone());document.body.appendChild(modal);document.body.classList.add("ls-popup-open");ACC.product.bindToAddToCartForm($(".ls-popup-content .add_to_cart_form"));},storeViewedProduct:function(){let productCode=$("#viewedProduct").val();if(productCode){const checkIsAlgoliaSearch=sessionStorage.getItem("algolia-search");if(checkIsAlgoliaSearch==='false'||checkIsAlgoliaSearch===null){ACC.algoliaEvent.sendAlgoliaEvent('viewedObjectIDs',[productCode],ACC.algoliaSearch.defaultCurrency);}
$.ajax({url:`/search/view/product?productCode=${productCode}`,type:"POST",success:function(){},});}},showProductBundlePDP:function(result){const closeSpan=`<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>`;const modal=document.createElement("div");modal.classList.add("ls-popup-outer");const modalInner=document.createElement("div");modalInner.classList.add("ls-popup-inner");const modalContent=document.createElement("div");const closeDiv=document.createElement("div");const contentDiv=document.createElement("div");contentDiv.classList.add("ls-popup-data");closeDiv.classList.add("ls-popup-close-container");closeDiv.innerHTML=closeSpan;modalContent.appendChild(contentDiv);modalContent.appendChild(closeDiv);modalContent.classList.add("ls-popup-content","product-bundle-pdp-popup");modalInner.appendChild(modalContent);modal.appendChild(modalInner);document.body.appendChild(modal);document.body.classList.add("ls-popup-open");contentDiv.innerHTML=result;var $e=$(document).find(".js-owl-productBundles");$e.owlCarousel(ACC.carousel.carouselConfig.productBundles);$(".owl-wrapper").css("margin","15px auto");$('.js-add-to-cart-bundle').each(function(){var allowToBuy=$(this).data('allow-to-buy');if(allowToBuy){$(this).prop("disabled",false);}});},showLocationStock:function(value){const closeSpan=`<a href="#" class="ls-popup-close"><span class="icon icon-close"></span></a>`;const modal=document.createElement("div");modal.classList.add("ls-popup-outer");const modalInner=document.createElement("div");modalInner.classList.add("ls-popup-inner");const modalContent=document.createElement("div");const closeDiv=document.createElement("div");const contentDiv=document.createElement("div");contentDiv.classList.add("ls-popup-data");closeDiv.classList.add("ls-popup-close-container");closeDiv.innerHTML=closeSpan;modalContent.appendChild(contentDiv);modalContent.appendChild(closeDiv);modalContent.classList.add("ls-popup-content","product-bundle-pdp-popup");modalInner.appendChild(modalContent);modal.appendChild(modalInner);document.body.appendChild(modal);document.body.classList.add("ls-popup-open");contentDiv.innerHTML=value;},bindAutoComplete:function(){var googleApiSrc='//maps.googleapis.com/maps/api/js?key='+
ACC.common.encodeHtml(ACC.config.googleApiKey)+'&libraries=places&callback=ACC.productDetail.initAutoComplete';$('head').append($('<script>').addClass('js-googlePlaceAPI-pdp').attr('type','text/javascript').attr('src',googleApiSrc));},initAutoComplete:function(){var options={componentRestrictions:{country:'AU'},strictBounds:false,fields:['geometry'],types:['(regions)']};var autocomplete=new google.maps.places.Autocomplete(document.getElementById('pdp-guest-location-select'),options);var autocompleteMobile=new google.maps.places.Autocomplete(document.getElementById('pdp-guest-location-select-m'),options);ACC.productDetail.handlePlaceSelect(autocomplete);ACC.productDetail.handlePlaceSelect(autocompleteMobile);},handlePlaceSelect:function(control){google.maps.event.addListener(control,'place_changed',function(){var location=control.getPlace();if(!location.geometry){$('.product-display-cart-container .location-error').removeClass('hidden');return;}
var geometry={latitude:location.geometry.location.lat(),longitude:location.geometry.location.lng()};ACC.productDetail.saveLocation(geometry,false,false);});},saveLocation:function(geometry,isCart,loadNewPrice){localStorage.removeItem('LocationSaved');var data={latitude:geometry.latitude,longitude:geometry.longitude}
var url='/pricingfactory/updatelocation';$.ajax({url:url,type:'get',data:data,dataType:'json',success:function(response){localStorage.setItem('LocationSaved','true');localStorage.setItem('Location',JSON.stringify(data));if(isCart){window.location.reload();}else{$(document).off('click','.ls-pdp-popup-location');ACC.productDetail.loadPdpStock();$('.js-pdp-location-select').val('');$('.js-pdp-change-location').removeClass('hidden');$('.change-location-container').removeClass('hidden');$('.location-select').addClass('hidden');$('.guest-location').addClass('hidden');$('.product-display-cart-container .location-error').addClass('hidden');if(loadNewPrice){ACC.priceFactory.loadAsyncPrices();}}}});},bindExistingLocation:function(){var locationSaved=localStorage.getItem('LocationSaved');var location=localStorage.getItem('Location');if(locationSaved&&location){ACC.productDetail.saveLocation(JSON.parse(location),false,false);}},isPDP:function(){$(".js-uom-selector-input").change(function(){ACC.productDetail.changePDPunit=true;})},getDefaultOption:function(){var defaultunit=$(".product-details").data("value");var uomList=$("[name='pdpUoMInput']").find("option");ACC.product.removeEaOption(defaultunit,uomList);},addNewStylePromo:function(){if($('.promotion-text span:not([style])').text()){$('.promotion-text span:not([style])').each(function(){var promoMessage=$('<div class="promo-product-message"></div>').css({'font-size':'75%','padding':'5px 10px','background-color':'#dcdcdc'});$(this).before(promoMessage);promoMessage.append($(this).contents());$(this).remove();});}},addPDPBundle:function(){$(document).on("click",'.ls-third-button.js-add-to-cart-bundle',function(e){e.preventDefault();const productCode=$(this).data('product-code');const uomCode=$(this).data('bundle-unit');const data={productCodePost:productCode,qty:1,uomCode:uomCode,}
const options={url:ACC.productDetail.addToCart,data:data,type:'POST',success:function(){ACC.cart.showCartTooltip(1);ACC.minicart.updateMiniCartDisplay();},error:function(){}};const checkIsAlgoliaSearch=sessionStorage.getItem("algolia-search");if(productCode){ACC.algoliaEvent.objectDatas=[{"price":0,"quantity":1}];if(checkIsAlgoliaSearch==='true'){ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDsAfterSearch',[productCode.toString()],ACC.algoliaSearch.defaultCurrency);}else{ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',[productCode.toString()],ACC.algoliaSearch.defaultCurrency);}}
$.ajax(options);});},bindPackSize:function(){$(document).on('change','.pack-size-container .pack-size-input',function(e){ACC.productDetail.onChangePackSize(e);});},onChangePackSize:function(event){const selectedQty=event.target.value;const productComponent=$(event.target).closest('.product-component');const quantitySelector=productComponent.find('.js-qty-selector-input');quantitySelector.val(parseInt(selectedQty));quantitySelector.trigger('change');},setPackSize:function(productComponent,newInputVal){const packSizeElement=productComponent.find('.pack-size-input');packSizeElement.prop("checked",false);const packSizeItems=packSizeElement.toArray();packSizeItems.forEach(item=>{$(item).prop("checked",parseInt($(item).val())===parseInt(newInputVal));});}};$(document).ready(function(){ACC.productDetail.bindSeeMore();$(window).resize(function(){if($('.document-guide-container').length>0){ACC.productDetail.bindSeeMore();}});$(document).on('click','.replacement-info-btn',function(e){ACC.productDetail.handlePopup(e);});$(document).on('click','a.ls-popup-close',function(e){ACC.saveFavorite.createProductReplacementData();$('.ls-popup-outer').remove();document.body.classList.remove('ls-popup-open');});$(document).on('click','.ls-popup-outer',function(e){const isPopupClicked=$(e.target).closest('.ls-popup-content').length<=0;if(isPopupClicked){document.body.classList.remove('ls-popup-open');$('.ls-popup-outer').remove();}});$('.ls-thumbnail.js-gallery-carousel').removeClass('hidden');$('.item.product-image').removeClass('hidden');$('.js-qty-selector').each(function(){let selectorInput=$(this).find('.js-qty-selector-input');let input=$(this).find('.uomStep');let hasDefaultUoM=input.data('hasdefaultconversion');if(hasDefaultUoM==='false'){let baseUoM=input.data('baseconversion');input.data('defaultconversion',baseUoM);}
if(input.length!=0&&selectorInput.length!=0){ACC.productDetail.checkQtySelector($(this),'init');$(this).find('.min-order-info .min-order').first().html(selectorInput.val());}});var uomInput=$('.js-uom-selector-input');var selector=uomInput.closest('.product-information-container').find('.js-qty-selector .js-qty-selector-input');var selectorParent=selector.closest('.product-information-container');var step=selectorParent.find('.uomStep');if(uomInput.length!=0&&step.length!=0&&selector.length!=0){let conversion=uomInput.find(':selected').data('conversion');ACC.productDetail.updateUnitSelection(uomInput,uomInput.val(),parseFloat(conversion));selector.find('.min-order-info .min-order').first().html(selector.val());}
$(document).on('click','.pdp-product-bundle',function(e){e.preventDefault();const productCode=$(this).data('productCode');var url='/pbundle/pdpview?code='+$(this).data('productCode');$.ajax({url:url,cache:false,type:'GET',dataType:'html',success:function(response){$('.ls-popup-outer').remove();document.body.classList.remove('ls-popup-open');ACC.productDetail.showProductBundlePDP(response);$('.ls-popup-outer').hide();ACC.algoliaSearch.initAlgoliaProductBundleItems([productCode.toString()],response,'productBundles');}});});var isLocationSaved=localStorage.getItem('LocationSaved');var isLoggedIn=$('.js-header-session-timeout').length>0;if(!isLoggedIn){if(isLocationSaved){$('.location-select').addClass('hidden');$('.js-pdp-change-location').removeClass('hidden');$('.change-location-container').removeClass('hidden');$('.guest-location').addClass('hidden');}else{$('.js-pdp-change-location').addClass('hidden');$('.change-location-container').addClass('hidden');$('.location-select').removeClass('hidden');$('.guest-location').removeClass('hidden');}}
$(document).on('click','.js-pdp-change-location',function(e){e.preventDefault();$('.js-pdp-change-location').addClass('hidden');$('.change-location-container').addClass('hidden');$('.location-select').removeClass('hidden');$('.guest-location').removeClass('hidden');$('.product-display-quantity-container .product-display-stock').removeClass('hidden');$('.product-display-quantity-container .guest-location').addClass('hidden');$('.stock-time .product-stock-change-location').addClass('hidden');});$(document).on('click','.product-pdp-name',function(e){const productDisplay=$(this).closest('.product-component').data('live-price-bucket')||'';if(productDisplay==='large1'){sessionStorage.setItem("algolia-search","false");}});$(document).on('click','.product-item-image',function(e){const productDisplay=$(this).closest('.product-component').data('live-price-bucket')||'';if(productDisplay==='large1'){sessionStorage.setItem("algolia-search","false");}});});ACC.quickview={_autoload:["bindToUiCarouselLink"],initQuickviewLightbox:function(){ACC.product.enableAddToCartButton();ACC.product.bindToAddToCartForm();ACC.product.enableStorePickupButton();},refreshScreenReaderBuffer:function()
{$('#accesibility_refreshScreenReaderBufferField').attr('value',new Date().getTime());},bindToUiCarouselLink:function()
{var titleHeaderHtml=$('#quickViewTitle').html();$(".js-owl-carousel-reference .js-reference-item").colorbox({close:'<span class="glyphicon glyphicon-remove"></span>',title:titleHeaderHtml,maxWidth:"100%",onComplete:function()
{ACC.quickview.refreshScreenReaderBuffer();ACC.quickview.initQuickviewLightbox();ACC.ratingstars.bindRatingStars($(".quick-view-stars"));},onClosed:function()
{ACC.quickview.refreshScreenReaderBuffer();}});}};ACC.ratingstars={_autoload:[["bindRatingStars",$(".js-ratingCalc").length>0],["bindRatingStarsSet",$(".js-ratingCalcSet").length>0]],bindRatingStars:function(){$(".js-ratingCalc").each(function(){var rating=$(this).data("rating");$(this).find(".js-greenStars").width($(this).width()*(parseFloat(rating.rating,10)/rating.total))})},bindRatingStarsSet:function(){$('.js-writeReviewStars').on({mouseleave:function mouseleave(){clearReviewState();var sV=(parseFloat($(".js-ratingSetInput").val(),10))*2;(typeof sV==="number"&&!isNaN(sV))?setReviewState(sV):clearReviewState();}});var ratingIcons=$('.js-writeReviewStars .js-ratingIcon');var setReviewState=function(index){ratingIcons.slice(0,parseFloat(index,10)).addClass('active').addClass('icon-fill-star').removeClass('icon-star');};var clearReviewState=function(){ratingIcons.removeClass('active').removeClass('icon-fill-star').addClass('icon-star');};ratingIcons.on({mouseenter:function mouseenter(){clearReviewState();setReviewState($(this).index()+1);},mouseleave:function mouseleave(){$(this).removeClass('active');},click:function click(){$(".js-ratingSetInput").val(($(this).index()+1)/2);}});}};ACC.refinements={_autoload:[["bindMoreLessToggles",$(".js-facet-form").length!==0],["bindMoreStoresToggles",$(".js-facet-form").length!==0],["init",$(".js-facet-form").length!==0],["bindSearch",$(".js-facet-form").length!==0]],coords:{},storeSearchData:{},init:function(){navigator.geolocation.getCurrentPosition(function(position){ACC.refinements.coords=position.coords;},function(error)
{console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message);});},bindSearch:function(){$(document).on("submit",'#user_location_form',function(e){e.preventDefault();var q=$(".js-shop-stores-facet .js-shop-store-search-input").val();if(q.length>0){ACC.refinements.getInitStoreData(q);}});$(document).on("click",'#findStoresNearMeAjax',function(e){e.preventDefault();ACC.refinements.getInitStoreData(null,ACC.refinements.coords.latitude,ACC.refinements.coords.longitude);});},getInitStoreData:function(q,latitude,longitude){$(".alert").remove();data={"q":"","page":"0"};if(q!=null){data.q=q;}
if(latitude!=null){data.latitude=latitude;}
if(longitude!=null){data.longitude=longitude;}
ACC.refinements.storeSearchData=data;ACC.refinements.getStoreData();},getStoreData:function(){url=$(".js-facet-form").data("url");$.ajax({url:url,data:ACC.refinements.storeSearchData,type:"get",dataType:'text',success:function(response){window.location.reload();}});},bindMoreLessToggles:function(){$(document).on("click",".js-shop-stores-facet .js-facet-change-link",function(e){e.preventDefault();$(".js-shop-stores-facet .js-facet-container").hide();$(".js-shop-stores-facet .js-facet-form").show();});$(document).on("change",".js-product-facet .js-facet-checkbox",function(){$(this).parents("form").submit();});$(document).on("click",".js-product-facet .js-more-facet-values-link",function(e){e.preventDefault();$(this).parents(".js-facet").find(".js-facet-top-values").hide();$(this).parents(".js-facet").find(".js-facet-list-hidden").show();$(this).parents(".js-facet").find(".js-more-facet-values").hide();$(this).parents(".js-facet").find(".js-less-facet-values").show();});$(document).on("click",".js-product-facet .js-less-facet-values-link",function(e){e.preventDefault();$(this).parents(".js-facet").find(".js-facet-top-values").show();$(this).parents(".js-facet").find(".js-facet-list-hidden").hide();$(this).parents(".js-facet").find(".js-more-facet-values").show();$(this).parents(".js-facet").find(".js-less-facet-values").hide();});},bindMoreStoresToggles:function()
{$(document).on("click",".js-shop-stores-facet .js-more-stores-facet-values",function(e){e.preventDefault();$(".js-shop-stores-facet ul.js-facet-list li.hidden").slice(0,5).removeClass('hidden').first().find('.js-facet-checkbox').focus();if($(".js-shop-stores-facet ul.js-facet-list li.hidden").length===0){$(".js-shop-stores-facet .js-more-stores-facet-values").hide();}});}};DOMPurify.addHook('uponSanitizeAttribute',function(node,event){if(node.nodeName.toLowerCase()!=='em'||event.attrName.toLowerCase()!=='class')
{node.removeAttribute(event.attrName);}});ACC.sanitizer={config:{ALLOWED_TAGS:['pre','address','em','hr',"p","div","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote",'b','i','s','o','sup','sub','ins','del','strong','strike','tt','code','big','small','br','span']},sanitize:function(dirty){return DOMPurify.sanitize(dirty,ACC.sanitizer.config);}};ACC.silentorderpost={spinner:'',bindUseDeliveryAddress:function()
{$('#useDeliveryAddress').on('change',function()
{if($('#useDeliveryAddress').is(":checked"))
{var options={'countryIsoCode':$('#useDeliveryAddressData').data('countryisocode'),'useDeliveryAddress':true};ACC.silentorderpost.enableAddressForm();ACC.silentorderpost.displayCreditCardAddressForm(options,ACC.silentorderpost.useDeliveryAddressSelected);ACC.silentorderpost.disableAddressForm();}
else
{ACC.silentorderpost.clearAddressForm();ACC.silentorderpost.enableAddressForm();}});if($('#useDeliveryAddress').is(":checked"))
{var options={'countryIsoCode':$('#useDeliveryAddressData').data('countryisocode'),'useDeliveryAddress':true};ACC.silentorderpost.enableAddressForm();ACC.silentorderpost.displayCreditCardAddressForm(options,ACC.silentorderpost.useDeliveryAddressSelected);ACC.silentorderpost.disableAddressForm();}},bindSubmitSilentOrderPostForm:function()
{$('.submit_silentOrderPostForm').click(function()
{ACC.common.blockFormAndShowProcessingMessage($(this));$('.billingAddressForm').filter(":hidden").remove();ACC.silentorderpost.enableAddressForm();$('#silentOrderPostForm').submit();});},bindCycleFocusEvent:function()
{$('#lastInTheForm').blur(function()
{$('#silentOrderPostForm [tabindex$="10"]').focus();})},isEmpty:function(obj)
{if(typeof obj=='undefined'||obj===null||obj==='')return true;return false;},disableAddressForm:function()
{$('input[id^="address\\."]').prop('disabled',true);$('select[id^="address\\."]').prop('disabled',true);},enableAddressForm:function()
{$('input[id^="address\\."]').prop('disabled',false);$('select[id^="address\\."]').prop('disabled',false);},clearAddressForm:function()
{$('input[id^="address\\."]').val("");$('select[id^="address\\."]').val("");},useDeliveryAddressSelected:function()
{if($('#useDeliveryAddress').is(":checked"))
{var countryIsoCode=$('#address\\.country').val($('#useDeliveryAddressData').data('countryisocode')).val();if(ACC.silentorderpost.isEmpty(countryIsoCode))
{$('#useDeliveryAddress').click();$('#useDeliveryAddress').parent().hide();}
else
{ACC.silentorderpost.disableAddressForm();}}
else
{ACC.silentorderpost.clearAddressForm();ACC.silentorderpost.enableAddressForm();}},bindCreditCardAddressForm:function()
{$('#billingCountrySelector :input').on("change",function()
{var countrySelection=$(this).val();var options={'countryIsoCode':countrySelection,'useDeliveryAddress':false};ACC.silentorderpost.displayCreditCardAddressForm(options);})},displayCreditCardAddressForm:function(options,callback)
{$.ajax({url:ACC.config.encodedContextPath+'/checkout/multi/sop/billingaddressform',async:true,data:options,dataType:"html",beforeSend:function()
{$('#billingAddressForm').html(ACC.silentorderpost.spinner);}}).done(function(data)
{$("#billingAddressForm").html(data);if(typeof callback=='function')
{callback.call();}});}}
$(document).ready(function()
{ACC.silentorderpost.bindUseDeliveryAddress();ACC.silentorderpost.bindSubmitSilentOrderPostForm();ACC.silentorderpost.bindCreditCardAddressForm();$("#useDeliveryAddress").click();});ACC.tabs={_autoload:["childContentPageViewTab",["bindTabs",$(".js-tabs").length>0],"hideReviewBtn","determineToDisplayReviews","parentContentPageViewTab"],childContentPageViewTab:function(){$(document).ready(function(){var childTabLink=$(".ls-tabs .ls-child-tab-link");var childTabContent=$(".ls-tab-row .ls-child-tab-content");childTabLink.each(function(i,x){$(this).attr("data-tab","tab-"+i);});childTabContent.each(function(i,x){$(this).attr("id","tab-"+i);});var index=$('#childContentPageIndex').val();var target=index>=0&&index<=childTabContent.length?index:1;if(index){$(".ls-child-tab-link").eq(target-1).addClass("current");$(".ls-child-tab-content").eq(target-1).addClass("current");var iframes=$('.ls-child-iframe-content');iframes.on('load',function(){var contents=$(this).contents();contents.find('header').remove();contents.find('footer').remove();$(this).css('height',contents.find('html')[0].scrollHeight);});}});},bindTabs:function(){$e=$(".js-tabs");var tabs=$e.accessibleTabs({tabhead:'.tabhead',tabbody:'.tabbody',fx:'show',fxspeed:0,currentClass:'active',autoAnchor:true});$e.on("click",".tabhead",function(e){e.preventDefault();if($(this).hasClass("active")){$(this).removeClass("active");}else{$(this).parents(".js-tabs").children(".tabs-list").find("a[href='"+"#"+$(this).attr("id")+"']").click();var offset=$(this).offset().top;$("body,html").scrollTop(offset);}});$e.on("click","#tabreview",function(e){e.preventDefault();ACC.tabs.showReviewsAction("reviews");});$e.on("click",".all-reviews-btn",function(e){e.preventDefault();ACC.tabs.showReviewsAction("allreviews");ACC.tabs.hideReviewBtn(".all-reviews-btn");ACC.tabs.showReviewBtn(".less-reviews-btn");});$e.on("click",".less-reviews-btn",function(e){e.preventDefault();ACC.tabs.showReviewsAction("reviews");ACC.tabs.hideReviewBtn(".less-reviews-btn");ACC.tabs.showReviewBtn(".all-reviews-btn");});$(document).on("click",'.js-writeReviewTab',function(e){e.preventDefault();tabs.showAccessibleTabSelector($(this).attr("href"));$(".js-review-write").show();$('#reviewForm input[name=headline]').focus();});$(document).on("click",".js-review-write-toggle",function(e){e.preventDefault();if($(".js-review-write:visible").length<1){$(".js-review-write").show();}else{$(".js-review-write").hide();}});$(document).on("click",".js-openTab",function(){tabs.showAccessibleTabSelector($(this).attr("href"));});},showReviewsAction:function(s){$.get($("#reviews").data(s),undefined,function(result){$('#reviews').html(ACC.sanitizer.sanitize(result));if($(".js-ratingCalc").length>0){ACC.ratingstars.bindRatingStars();ACC.tabs.showingAllReviews();}},'html');},hideReviewBtn:function(btnClass){btnClass=(btnClass===undefined)?".less-reviews-btn":btnClass;$(btnClass).hide();},showReviewBtn:function(btnClass){$(btnClass).show();},showingAllReviews:function(){var isShowingAllReviews=$("#showingAllReviews").data("showingallreviews");if(isShowingAllReviews){ACC.tabs.hideReviewBtn(".all-reviews-btn");$(".tab-review").css({"margin-bottom":"0px"});}},determineToDisplayReviews:function(){if(location.hash==="#tabreview"){ACC.tabs.showReviewsAction('reviews');}},parentContentPageViewTab:function(){$(".ls-tabs .ls-child-tab-link").click(function(){var tab_id=$(this).attr("data-tab");$(".ls-tabs .ls-child-tab-link").removeClass("current");$(".ls-child-tab-content").removeClass("current");$(this).addClass("current");$("#"+tab_id).addClass("current");var selectedFrame=$("#"+tab_id).children(".ls-child-iframe-content");var iframeName=selectedFrame.attr('name');var iframes=document.getElementsByName(iframeName);var iframe=document.getElementById(iframeName);if(iframe){iframes[0].style.height=iframe.contentWindow.document.scrollingElement.scrollHeight+"px";}});}};ACC.termsandconditions={bindTermsAndConditionsLink:function(){$(document).on("click",".termsAndConditionsLink",function(e){e.preventDefault();$.colorbox({maxWidth:"100%",maxHeight:"80%",width:"870px",scrolling:true,href:$(this).attr("href"),close:'<span class="glyphicon glyphicon-remove"></span>',title:'<div class="headline"><span class="headline-text">Terms and Conditions</span></div>',onComplete:function(){ACC.common.refreshScreenReaderBuffer();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});},handleRegisterChkTermsConditionsChange:function(){$("#registerChkTermsConditions").change(function(e){e.preventDefault();var form=$(this).parents('form:first');var btnSubmit=form.find(':submit');if($(this).is(':checked'))
{btnSubmit.prop('disabled',false);}
else
{btnSubmit.prop('disabled',true);}});},bindLsTermsAndConditions:function(){$("#ls-agree-checkbox").change(function(){if(this.checked){$("#ls-button-activate").prop('disabled',false);}
else{$("#ls-button-activate").prop('disabled',true);}});}}
$(function(){ACC.termsandconditions.bindTermsAndConditionsLink();ACC.termsandconditions.handleRegisterChkTermsConditionsChange();ACC.termsandconditions.bindLsTermsAndConditions();$("#registerChkTermsConditions").removeAttr("disabled");$('[name="consentForm.consentGiven"]').removeAttr("disabled");});ACC.track={_autoload:["bindtItem"],isCheckPrice:false,_algoliaPayload:{},bindtItem:function(){$(document).on("click",".product-component a",function(){var item=$(this).closest(".product-component");var productCode=item.data("product-code").toString();var name=item.find(".product-pdp-name").text().trim();var position=item.index()+1;var url=window.location.origin+$(this).attr("href");var data={productCode:productCode,name:name,position:position,url:url,};window.mediator.publish("productClicked_sm",data);});$(document).on("submit","form.add_to_cart_form",function(){});$(document).on("click",".ls-checkout-container .js-btn-complete-order",function(){var context=$(this).closest(".ls-checkout-container");var checkoutId=context.find("#PurchaseOrderNumber").val();var shippingMethod=context.find("#deliveryMethodPath").val().replace(/\b[a-z]/g,function(letter){return letter.toUpperCase();});var data={checkout_id:checkoutId,step:2,shipping_method:shippingMethod,payment_method:"Cash",};ACC.track.checkoutStepCompleted(data);ACC.algoliaEvent.objectDatas=ACC.track._algoliaPayload.objectDatas;ACC.algoliaEvent.subTotal=ACC.track._algoliaPayload.subTotal;if(ACC.track._algoliaPayload.objectIds&&ACC.track._algoliaPayload.objectIds.length>0){const checkIsAlgoliaSearch=sessionStorage.getItem("algolia-search");if(checkIsAlgoliaSearch==='true'){ACC.algoliaEvent.sendAlgoliaEvent('purchasedObjectIDsAfterSearch',ACC.track._algoliaPayload.objectIds,ACC.algoliaSearch.defaultCurrency);}else{ACC.algoliaEvent.sendAlgoliaEvent('purchasedObjectIDs',ACC.track._algoliaPayload.objectIds,ACC.algoliaSearch.defaultCurrency);}}});$(document).on("click",".page-lincolnSentryPromotions .ls-latestrelease-toggle a",function(){var item=$(this).closest(".ls-latestrelease-toggle");var promotionId=item.attr("id").replace("-section","");var name=item.find(".lincolnsentry-latestrelease-name").text().trim();var position=item.index()+1;var data={promotionId:promotionId,creative:promotionId,name:name,position:position,};window.mediator.publish("promotionClicked_sm",data);});},productRemoved:function(data){window.mediator.publish("productRemoved_sm",data);},allProductRemoved:function(data){window.dataLayer.push({event:'All Products Removed from Cart',...data});},checkoutStepCompleted:function(data){window.mediator.publish("checkoutStepCompleted_sm",data);},productAddedToWishlist:function(wishlistId,context,resData){ACC.global.getFavouritesUpdateTime(wishlistId);var item=context.parents().find(".product-container");var trackingPrice=localStorage.getItem("tracking_price_fav");if(trackingPrice){var data={brand:resData.brandName||"",category:resData.h1Category||"",favourites_list_id:wishlistId||"",favourites_list_name:item.parents().find(".save-wishlist-name").text()||"",image_url:(resData.images!==null&&resData.images.length>0)?resData.images[0].url:"",name:resData.name||"",price:Number(trackingPrice.replace(/[^0-9.-]+/g,""))||"",product_code:resData.displayCode||"",product_id:resData.code||"",promo:resData.promotionName||"",quantity:+item.find(".number-indicator").val()||0,unit:resData.defaultUnit?"1 "+resData.defaultUnit.name:"1 "+resData.baseUnit.name||"",};window.dataLayer.push({event:'Product added to favourites',...data});localStorage.removeItem("tracking_price_fav");}},productRemovedFromWishlist:function(wishlistId,context){var item=context.parents().closest(".ls-fav-entry-container").find(".product-component");var data={wishlist_id:wishlistId,product_id:item.data("product-code").toString(),name:item.find(".item-name").text().trim(),quantity:parseInt(item.find("[name=pdpAddtoCartInput]").val()),};window.mediator.publish("productRemovedFromWishlist_sm",data);},trackCategoryView:function(){const category=$('.ls-al-product-category-page').data('category-name');const products=ACC.algoliaSearch.itemList.slice().map((item,index)=>{return{product_id:item.code||item.objectID,name:item.name||item.identifier,position:index+1};});window.dataLayer.push({event:'Product List Viewed',category,products});},trackSearch:function(){const category=$("#ls-select-search-by").text().trim()||"";const urlParams=new URLSearchParams(window.location.search);const query=urlParams.get('q');window.dataLayer.push({event:'Product searched',category,searchTerm:query,query});},trackCouponEntered:function(couponCode,cartId){window.dataLayer.push({event:'Coupon Entered',cartId,couponId:couponCode});},trackCouponRemoved:function(couponCode,cartId){window.dataLayer.push({event:'Coupon Removed',cartId,couponId:couponCode});},trackAppliedCoupon:function(couponCode,cartId,discount){window.dataLayer.push({event:'Coupon Applied',cartId,couponId:couponCode,discount:discount||0});},trackDeniedCoupon:function(couponCode,cartId,reason){window.dataLayer.push({event:'Coupon Denied',cartId,couponId:couponCode,reason});},trackPaymentInfoEntered:function(){const trackingData=JSON.parse(localStorage.getItem("orderInfo"));window.dataLayer.push({event:'Payment Info Entered',...trackingData});},removeAllFromWishlist:function(){window.mediator.publish("removeAllFromWishlist_sm");},};ACC.accordion={_autoload:[["bindAccordion",$("#lsaccordion").length>0]],bindAccordion:function(){$e=$("#lsaccordion");$e.on("click",".panel-heading",function(e){ACC.accordion.handleArrowDisplay($(this));ACC.accordion.toggleCollapse($(this));if($(window).scrollTop()==0){$(window).scrollTop(0);}
else{var offset=$(this).offset().top;$("body,html").scrollTop(offset);}});$(document).ready(function(){$(".panel-default").find(".panel-collapse").removeClass("in");$($(".panel-default:visible").get(0)).find(".panel-collapse").addClass("in");$($(".panel-default:visible").get(0)).find(".icon-down-arrow").addClass("icon-up-arrow").removeClass("icon-down-arrow");var $summaryElement=$('.item-summary');$summaryElement.each(function(){var $c=$(this).clone().css({display:'inline',width:'auto',visibility:'hidden'}).appendTo('body');if(!($c.width()>$(this).width())){$(this).removeAttr("title");}
$c.remove();});$(".accordion-title").click(function(event){var currentElem=$(event.target);if(currentElem.hasClass('accordion-title')){var accArrowIcon=$(event.target).find('.dropdown-icon');var accContent=$(event.target).next();if(accContent.hasClass('in')){accArrowIcon.removeClass('icon-up-arrow').addClass('icon-down-arrow');}
else{accArrowIcon.removeClass('icon-down-arrow').addClass('icon-up-arrow');}}
else{var accArrowIcon=$(event.target).parent().find('.dropdown-icon');var accContent=$(event.target).parent().next();if(accContent.hasClass('in')){accArrowIcon.removeClass('icon-up-arrow').addClass('icon-down-arrow');}
else{accArrowIcon.removeClass('icon-down-arrow').addClass('icon-up-arrow');}}})});},handleArrowDisplay:function(panelHeading){if(panelHeading.next().hasClass("in")&&panelHeading.find(".icon-up-arrow").length==1){panelHeading.find(".icon-up-arrow").addClass("icon-down-arrow").removeClass("icon-up-arrow");}
else if(panelHeading.find(".icon-down-arrow").length==1){panelHeading.find(".icon-down-arrow").addClass("icon-up-arrow").removeClass("icon-down-arrow");}
else{panelHeading.find(".icon-up-arrow").addClass("icon-down-arrow").removeClass("icon-up-arrow");}},toggleCollapse:function(panelHeading){$panelSiblings=panelHeading.parent().siblings(".panel-default");$panelSiblings.each(function(){$panelCollapse=$(this).find(".panel-collapse");if($panelCollapse.hasClass("in")){$panelCollapse.removeClass("in");ACC.accordion.handleArrowDisplay($panelCollapse.prev(".panel-heading"));}});}};ACC.storefinder={_autoload:[["init",$(".js-store-finder").length!==0],["bindSearch",$(".js-store-finder").length!==0],["bindFilter",$(".js-store-finder").length!==0],],storeData:"",coords:{},searchCoords:{},storeSearchData:{},selectedState:"",$storeListContainer:$("#store-list-container"),$storeTemplate:$("#store-template"),$stateOptionContainer:$("#selectCurrentState"),$stateOptionTemplate:$("#state-option-template"),$stateListContainer:$("#listCurrentState"),$stateListItemTemplate:$("#state-list-item-template"),createListItemHtml:function(data,id){data["id"]=id;data["address"]=this.generateAddress(data);ACC.storefinder.$storeTemplate.tmpl(data).appendTo(ACC.storefinder.$storeListContainer);},generateAddress:function(item){var address=item.line2+" "+item.line1;return[address,item.town,item.postalCode].filter(function(val){return val;}).join(", ");},refreshNavigation:function(){var listitems="";var data=ACC.storefinder.storeData;if(data){for(var i=0;i<data["data"].length;i++){listitems+=ACC.storefinder.createListItemHtml(data["data"][i],i);}
$(".js-store-finder-navigation-list").html(listitems);}
$(".js-store-finder").removeClass("show-store");$(".loading").hide();},bindSearch:function(){$(document).on("submit","#storeFinderForm",function(e){e.preventDefault();var q=$(".js-store-finder-search-input").val();if(q.length>0&&ACC.storefinder.searchCoords.latitude&&ACC.storefinder.searchCoords.longitude){ACC.storefinder.resetStateFilter();ACC.storefinder.getInitStoreData("Sub",null,null,ACC.storefinder.searchCoords.latitude,ACC.storefinder.searchCoords.longitude);}else{if($(".js-storefinder-alert").length<1){var emptySearchMessage=$(".search-button").data("searchEmpty");$(".js-store-finder").hide();$("#storeFinder").before($("<div>").addClass("js-storefinder-alert alert alert-danger alert-dismissable getAccAlert").text(emptySearchMessage).append($("<button>").addClass("close closeAccAlert").attr("type","button").attr("data-dismiss","alert").attr("aria-hidden","true").text("x")));$(".closeAccAlert").on("click",function(){$(this).parent(".getAccAlert").remove();});}}});$(document).on("click","#findStoresNearMe",function(e){e.preventDefault();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.storefinder.coords=position.coords;ACC.storefinder.getInitStoreData("NearByMe",null,null,ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude);},function(){$("#storeFinder_permission_modal").modal("show");});}});$(".js-store-finder-search-input").on("input",function(){ACC.storefinder.searchCoords={};});$(".js-store-finder-search-input").on("click",function(){$("#findStoresNearMe").removeAttr("disabled");});$(".js-store-finder").hide();},bindFilter:function(){$(document).on("click","#viewAllStoreLocations",function(e){e.preventDefault();$(".js-store-finder-search-input").val("");ACC.storefinder.resetStateFilter();ACC.storefinder.getInitStoreData("All",null,null,null,null);});$(document).on("click","#listCurrentState a",function(e){e.preventDefault();$(".js-store-finder-search-input").val("");ACC.storefinder.selectedState=$(this).text();ACC.storefinder.getInitStoreData("State",null,ACC.storefinder.selectedState,null,null);$("#listCurrentState a").removeClass("active");$(this).addClass("active");});$(document).on("change","#selectCurrentState",function(){$(".js-store-finder-search-input").val("");ACC.storefinder.selectedState=this.value;ACC.storefinder.getInitStoreData("State",null,ACC.storefinder.selectedState,null,null);});},resetStateFilter:function(){$("#selectCurrentState").val("");$("#listCurrentState a").removeClass("active");ACC.storefinder.selectedState="";},getStoreData:function(page){$("#store-list-container").empty();$(".loading").show();ACC.storefinder.storeSearchData.page=page;url=$(".js-store-finder").data("url");$.ajax({url:url,data:ACC.storefinder.storeSearchData,type:"get",dataType:"json",success:function(response){ACC.storefinder.storeData=response;ACC.storefinder.refreshNavigation();ACC.storefinder.schemaStoreFinderList(ACC.storefinder.storeData);},});},getStateData:function(){var url=$(".js-store-finder").data("url")+"/state";$.ajax({url:url,type:"get",dataType:"json",success:function(response){var data={state:[],};for(var i=0;i<response.length;i++){data.state.push(response[i].isocodeShort);}
ACC.storefinder.$stateOptionTemplate.tmpl(data).appendTo(ACC.storefinder.$stateOptionContainer);ACC.storefinder.$stateListItemTemplate.tmpl(data).appendTo(ACC.storefinder.$stateListContainer);},});},getInitStoreData:function(searchMode,q,state,latitude,longitude){$(".alert").remove();var data={searchMode:"All",q:"",page:0,};if(searchMode!==null){data.searchMode=searchMode;}
if(q!==null){data.q=q;}
if(state!==null){data.state=state;}
if(latitude!==null){data.latitude=latitude;}
if(longitude!==null){data.longitude=longitude;}
ACC.storefinder.storeSearchData=data;ACC.storefinder.getStoreData(data.page);$(".js-store-finder").show();},schemaStoreFinderList:function(storeSearchData){for(var i=0;i<storeSearchData.data.length;i++){var ele=document.createElement('script');ele.type="application/ld+json";ele.textContent=JSON.stringify({"@context":"https://schema.org","@type":"LocalBusiness","address":{"@type":"PostalAddress","addressLocality":storeSearchData.data[i].town,"addressRegion":"VIC","postalCode":storeSearchData.data[i].postalCode,"streetAddress":storeSearchData.data[i].line2+' '+storeSearchData.data[i].line1},"name":"Lincoln Sentry "+storeSearchData.data[i].displayName,"openingHours":storeSearchData.data[i].openings,"email":storeSearchData.data[i].email,"telephone":storeSearchData.data[i].phone})
document.head.appendChild(ele);}},addGooglePlacesApi:function(callback){if(callback!==undefined&&$(".js-googleMapsApi-suggestion").length===0){var googleApiSrc="//maps.googleapis.com/maps/api/js?key="+
ACC.common.encodeHtml(ACC.config.googleApiKey)+"&libraries=places&callback="+
ACC.common.encodeHtml(callback);$("head").append($("<script>").addClass("js-googleMapsApi-suggestion").attr("type","text/javascript").attr("src",googleApiSrc));}else if(callback!==undefined){eval(callback+"()");}},bindSearchSuggestions:function(){var options={fields:["geometry"],types:["(regions)"],componentRestrictions:{country:"au"},};var autocomplete=new google.maps.places.Autocomplete(document.getElementById("storelocator-query"),options);google.maps.event.addListener(autocomplete,"place_changed",function(){var location=autocomplete.getPlace().geometry.location;ACC.storefinder.searchCoords={latitude:location.lat(),longitude:location.lng(),};ACC.storefinder.getInitStoreData("Sub",null,null,ACC.storefinder.searchCoords.latitude,ACC.storefinder.searchCoords.longitude);ACC.storefinder.resetStateFilter();});},init:function(){ACC.storefinder.addGooglePlacesApi("ACC.storefinder.bindSearchSuggestions");ACC.storefinder.getStateData();$("#findStoresNearMe").attr("disabled","disabled");if(window.location.href.indexOf("allStores")===-1){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.storefinder.coords=position.coords;ACC.storefinder.getInitStoreData("NearByMe",null,null,ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude);},function(){$("#findStoresNearMe").removeAttr("disabled");ACC.storefinder.getInitStoreData("All",null,null,null,null);});}}else{setTimeout(function(){$("#viewAllStoreLocations").trigger("click");},200);}},};ACC.futurelink={_autoload:["bindFutureStockLink"],bindFutureStockLink:function(){$(document).on("click",".futureStockLink",function(e){e.preventDefault();var url=$(this).attr("href");var title=$(this).attr("title");ACC.colorbox.open(ACC.common.encodeHtml(title),{href:url,maxWidth:"100%",width:"320px",height:"320px",initialWidth:"320px"});})}};ACC.productorderform={_autoload:["headerActions","coreTableActions","addToCartOrderGridForm"],$addToCartOrderForm:$("#AddToCartOrderForm"),$addToCartBtn:$('#addToCartBtn'),$omsErrorMessageContainer:$("#globalMessages"),$emptySkuQuantityInputs:$(".sku-quantity[value]"),$nonEmptySkuQuantityInputs:$(".sku-quantity[value]"),$totalGridValues:$("[data-grid-total-id]"),$futureTooltipTemplate:$("#future-stock-template"),$futureTooltipErrorTemplate:$("#future-tooltip-error-template"),$omsErrorMessageTemplate:$("#oms-error-message-template"),$variantSummaryTemplate:$("#variant-summary"),selectedVariantData:'selected-variant',selectedVariants:[],quantityTotal:0,scrollTopPos:0,headerActions:function(){ACC.productorderform.bindProductDetailToggle($(".product-details-toggle"));},coreTableActions:function(){ACC.productorderform.coreTableScrollActions(ACC.productorderform.$addToCartOrderForm);ACC.productorderform.bindUpdateFutureStockButton(".update_future_stock_button");ACC.productorderform.bindHideFutureStockInfo(".hide_future_stock_info");ACC.productorderform.bindVariantSelect($(".variant-select-btn"),'AddToCartOrderForm');ACC.productorderform.cancelVariantModal(".closeVariantModal");ACC.productorderform.checkLimitExceed(".sku-quantity");var skuQuantityClass='.sku-quantity';var skuVariantQuantityClass='#cboxContent .sku-quantity';var quantityBefore=0;var quantityAfter=0;ACC.productorderform.$addToCartOrderForm.on('click',skuQuantityClass,function(event){$(this).select();});ACC.productorderform.$addToCartOrderForm.on('focusin',skuQuantityClass,function(event){quantityBefore=jQuery.trim(this.value);$(this).parents('tr').next('.variant-summary').remove();if($(this).parents('table').data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=$(this).parents('table').data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
if(quantityBefore==""){quantityBefore=0;this.value=0;}});$(document).find(skuQuantityClass).on('blur keypress',function(event){var code=event.keyCode||event.which||event.charCode;if(code!=13&&code!=undefined){return;}
var indexPattern="[0-9]+";var currentIndex=parseInt($(this).attr("id").match(indexPattern));var totalPrice=0;var _this=this;var currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();this.value=ACC.productorderform.filterSkuEntry(this.value);var $currentTotalItems=$('.js-total-items-count');var currentTotalItemsValue=$currentTotalItems.html();var currentTotalPrice=$('.js-total-price-value').val();var $gridGroup=$(this).parents('.orderForm_grid_group');if(isNaN(jQuery.trim(this.value))){this.value=0;}
quantityAfter=jQuery.trim(this.value);if(quantityAfter==""){quantityAfter=0;this.value=0;}
if(ACC.orderform){if(sessionStorage.totalItems!==undefined&&sessionStorage.totalPriceVal!==undefined){currentTotalItemsValue=sessionStorage.totalItems;currentTotalPrice=sessionStorage.totalPriceVal;}
if(quantityBefore==0){$currentTotalItems.html(parseInt(currentTotalItemsValue)+parseInt(quantityAfter));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*parseInt(quantityAfter);}else{$currentTotalItems.html(parseInt(currentTotalItemsValue)+(parseInt(quantityAfter)-parseInt(quantityBefore)));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore));}
sessionStorage.totalPrice=ACC.productorderform.formatTotalsCurrency(totalPrice);sessionStorage.totalItems=$currentTotalItems.html();sessionStorage.totalPriceVal=totalPrice;ACC.orderform.addToSkuQtyInput(_this);}else if($gridGroup&&$gridGroup.length>0){var $closestQuantityValue=$gridGroup.find('#quantityValue');var $closestAvgPriceValue=$gridGroup.find('#avgPriceValue');var $closestSubtotalValue=$gridGroup.find('#subtotalValue');var currentQuantityValue=$closestQuantityValue.val();var currentSubtotalValue=$closestSubtotalValue.val();if(quantityBefore==0){$closestQuantityValue.val(parseInt(currentQuantityValue)+parseInt(quantityAfter));$closestSubtotalValue.val(parseFloat(currentSubtotalValue)+parseFloat(currentPrice)*parseInt(quantityAfter));$currentTotalItems.html(parseInt(currentTotalItemsValue)+parseInt(quantityAfter));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*parseInt(quantityAfter);}else{$closestQuantityValue.val(parseInt(currentQuantityValue)+(parseInt(quantityAfter)-parseInt(quantityBefore)));$closestSubtotalValue.val(parseFloat(currentSubtotalValue)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore)));$currentTotalItems.html(parseInt(currentTotalItemsValue)+(parseInt(quantityAfter)-parseInt(quantityBefore)));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore));}
ACC.productorderform.enableBeforeUnloadEvent(quantityAfter,$currentTotalItems.text());if($currentTotalItems.length!=0&&$currentTotalItems.text()==0){ACC.productorderform.$addToCartBtn.attr('disabled','disabled');$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler);}else{ACC.productorderform.$addToCartBtn.removeAttr('disabled');}
if(parseInt($closestQuantityValue.val())>0){$closestAvgPriceValue.val(parseFloat($closestSubtotalValue.val())/parseInt($closestQuantityValue.val()));}else{$closestAvgPriceValue.val(0);}}
if($gridGroup&&$gridGroup.length>0)
{var gridLevelTotalPrice="";var $gridTotalValue=$gridGroup.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");if(quantityAfter>0){gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityAfter));}
$gridTotalValue.html(gridLevelTotalPrice);ACC.productorderform.updateSelectedVariantGridTotal(this,quantityBefore,false,false);}
$('.js-total-price').html(ACC.productorderform.formatTotalsCurrency(totalPrice));$('.js-total-price-value').val(totalPrice);});$('body').on('focusin',skuVariantQuantityClass,function(){quantityBefore=jQuery.trim(this.value);var currentVariantId=$(this).data('variant-id');var currentBaseInput=$("#AddToCartOrderForm, #cartOrderGridForm").find("[data-variant-id='"+currentVariantId+"']");currentBaseInput.trigger('focusin');currentBaseInput.parents('table').find('.variant-summary').remove();if(currentBaseInput.parents('table').data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=currentBaseInput.parents('table').data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
if(quantityBefore==""){quantityBefore=0;this.value=0;}});$('body').on('blur',skuVariantQuantityClass,function(){var priceSibling=$(this).siblings('.price');var totalSibling=$(this).siblings('.data-grid-total');var currentVariantId=$(this).data('variant-id');var currentBaseInput=$("#AddToCartOrderForm, #cartOrderGridForm").find("[data-variant-id='"+currentVariantId+"']");this.value=ACC.productorderform.filterSkuEntry(this.value);if(isNaN(jQuery.trim(this.value))||this.value<0||this.value==""){this.value=0;}
currentBaseInput.val(this.value);currentBaseInput.trigger('blur');ACC.productorderform.updateVariantTotal(priceSibling,this.value,totalSibling);if(this.value>0&&this.value!=quantityBefore){currentBaseInput.parents('table').addClass('selected');currentBaseInput.trigger('change');}else{if(ACC.productorderform.selectedVariants.length===0){currentBaseInput.parents('table').removeClass('selected');}}});},updateSelectedVariantGridTotal:function(_this,quantityBefore,isFillQty,resetSummary){var priceSibling=$(_this).siblings('.price');var propSibling=$(_this).siblings('.variant-prop');var currentSkuId=$(_this).next('.td_stock').data('sku-id');var currentBaseTotal=$(_this).siblings('.data-grid-total');if(isFillQty){ACC.productorderform.selectedVariants=[];}
if(_this.value!=quantityBefore){var newVariant=true;ACC.productorderform.selectedVariants.forEach(function(item,index){if(item.id===currentSkuId){newVariant=false;if(_this.value==='0'||_this.value===0){ACC.productorderform.selectedVariants.splice(index,1);}else{ACC.productorderform.selectedVariants[index].quantity=_this.value;ACC.productorderform.selectedVariants[index].total=ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal);}}});if(newVariant&&_this.value>0){ACC.productorderform.selectedVariants.push({id:currentSkuId,size:propSibling.data('variant-prop'),quantity:_this.value,total:ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)});}}
if(resetSummary){$(_this).parents('table').find('.variant-summary').remove();}
ACC.productorderform.showSelectedVariant($(_this).parents('table'));if(_this.value>0&&_this.value!=quantityBefore){$(_this).parents('table').addClass('selected');}else{if(ACC.productorderform.selectedVariants.length===0){$(_this).parents('table').removeClass('selected').find('.variant-summary').remove();}}},updateVariantTotal:function(priceSibling,quantity,totalElement){var variantTotal=parseFloat(priceSibling.data('variant-price'))*parseInt(quantity);totalElement.html(ACC.productorderform.formatTotalsCurrency(variantTotal));return ACC.productorderform.formatTotalsCurrency(variantTotal);},bindUpdateFutureStockButton:function(updateFutureStockButton){$('body').on('click',updateFutureStockButton,function(event){event.preventDefault();var $gridContainer=$(this).parents('.orderForm_grid_group').find(".product-grid-container");var $skus=jQuery.map($gridContainer.find("input[type='hidden'].sku"),function(o){return o.value});var skusId=$(this).data('skusId');var futureStockUrl=$(this).data('skusFutureStockUrl');var postData={skus:$skus,productCode:skusId};var hideFutureStockInfo=$(this).parent().find(".hide_future_stock_info");var showFutureStockLink=$(this);$.ajax({url:futureStockUrl,type:'POST',data:postData,traditional:true,dataType:'json',success:function(data){ACC.productorderform.updateFuture($gridContainer,$skus,data,skusId,showFutureStockLink,hideFutureStockInfo);},error:function(xht,textStatus,ex){console.log("Failed to get delivery modes. Error details ["+xht+", "+textStatus+", "+ex+"]");}});});},bindHideFutureStockInfo:function(hideFutureStockInfoLink){$('body').on('click',hideFutureStockInfoLink,function(event){event.preventDefault();var gridContainer=$(this).parent().parent().find(".product-grid-container");var updateFutureStockInfo=$(this).parent().find(".update_future_stock_button");updateFutureStockInfo.show();$(this).hide();var cell=gridContainer.find("[data-sku-id]");cell.children(".future_stock, .out-of-stock").remove();});},updateFuture:function(gridContainer,skus,freshData,callerId,showFutureStockInfoLink,hideFutureStockInfo){ACC.productorderform.$omsErrorMessageContainer.find("div").remove();function isEmpty(obj){return(Object.keys(obj).length<=0);}
if(freshData!==null&&typeof freshData['basket.page.viewFuture.unavailable']!=='undefined'){$.tmpl(ACC.productorderform.$omsErrorMessageTemplate,{errorMessage:freshData['basket.page.viewFuture.unavailable']}).appendTo(ACC.productorderform.$omsErrorMessageContainer);}
else{if(!isEmpty(freshData)){showFutureStockInfoLink.hide();hideFutureStockInfo.css("display","block");$.each(skus,function(index,skuId){var stocks=freshData[skuId];var cell=gridContainer.find("[data-sku-id='"+skuId+"']");var isCurrentlyInStock=cell[0].attributes['class'].nodeValue.indexOf("in-stock")!=-1;var futureStockPresent=typeof stocks!=='undefined'&&stocks!==null&&stocks[0]!==null&&typeof stocks[0]!=='undefined';cell.children(".future_stock, .out-of-stock").remove();if(futureStockPresent){if(!isCurrentlyInStock){cell.addClass("future-stock");}
$.tmpl(ACC.productorderform.$futureTooltipTemplate,{formattedDate:stocks[0].formattedDate,availabilities:stocks}).appendTo(cell);}else{if(!isCurrentlyInStock){cell[0].attributes['class'].nodeValue="td_stock out-of-stock";}}});}}},toJSON:function(gridForm,skipZeroQuantity){var skus=gridForm.find("input.sku").map(function(index,element){return element.value}),skuQuantities=gridForm.find("input.sku-quantity").map(function(index,element){return parseInt(element.value)}),skusAsJSON=[];for(var i=0;i<skus.length;i++){if(!(skipZeroQuantity&&skuQuantities[i]===0)){skusAsJSON.push({"product":{"code":skus[i]},"quantity":skuQuantities[i]});}}
return JSON.stringify({"cartEntries":skusAsJSON});},formatTotalsCurrency:function(amount){return Currency.formatMoney(Number(amount).toFixed(2),Currency.money_format[ACC.common.currentCurrency]);},cleanValues:function(){if($(".orderForm_grid_group").length!==0){var formattedTotal=ACC.productorderform.formatTotalsCurrency('0.00');$('.js-total-price').html(formattedTotal);$('#quantity, .js-total-items-count').html(0);$('#quantityValue, #avgPriceValue, #subtotalValue, .js-total-price-value').val(0);ACC.productorderform.$emptySkuQuantityInputs.val(0);ACC.productorderform.$totalGridValues.html("");}},calculateGrid:function(){ACC.productorderform.$nonEmptySkuQuantityInputs.trigger('focusout');},bindProductDetailToggle:function(productDetailToggle){productDetailToggle.on("click",function(event){event.preventDefault();$(this).parents('.product-details').toggleClass('open');});},showSelectedVariant:function(currentVariant){$.tmpl(ACC.productorderform.$variantSummaryTemplate,{variants:ACC.productorderform.selectedVariants}).appendTo(currentVariant);$('.variant-summary .variant-property').text($('.variant-detail').data('variant-property'));currentVariant.data(ACC.productorderform.selectedVariantData,ACC.productorderform.selectedVariants);currentVariant.removeClass('currentVariant');},bindVariantSelect:function(variantSelectBtn,parentId){variantSelectBtn.on("click",function(event){event.preventDefault();var currentVariant=$(this).parents('table');if(currentVariant.data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=currentVariant.data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
var titleHeader=variantSelectBtn.html();var tableWrap=$(document).find('#'+parentId).clone().empty().attr('id',ACC.common.encodeHtml(parentId)+'Variant');currentVariant.addClass('currentVariant');var popupContent=$(this).parents('.orderForm_grid_group').clone();currentVariant.removeClass('currentVariant');$(popupContent).find('.currentVariant').siblings().remove();tableWrap.html(popupContent);tableWrap.find('.hidden-xs').removeClass('hidden-xs');tableWrap.find('.hide').removeClass('hide');scrollTopPos=$('body').scrollTop();$('body').scrollTop(0);ACC.colorbox.open(titleHeader,{html:tableWrap,width:"100%",reposition:false,className:'variantSelectMobile',onCleanup:function(){if(ACC.productorderform.$addToCartOrderForm.find('.selected').length>0){ACC.productorderform.$addToCartBtn.removeAttr('disabled');}else{ACC.productorderform.$addToCartBtn.attr('disabled','disabled');}
$('body').scrollTop(scrollTopPos);}});});},cancelVariantModal:function(closeVariantModal){$('body').on('click',closeVariantModal,function(event){event.preventDefault();ACC.colorbox.close();});},checkLimitExceed:function(closeVariantModal1){$('body').on('keyup blur',closeVariantModal1,function(event){var input=Number($(this).val());var stock_amt=Number($(this).attr('data-instock'));if(input>stock_amt)
$(this).val(stock_amt);});},resetSelectedVariant:function(){ACC.productorderform.selectedVariants=[];$('.product-grid-container table').removeData(ACC.productorderform.selectedVariantData).removeClass('selected').removeClass('currentVariant');},addToCartOrderGridForm:function addToCartOrderGridForm(){$("#AddToCartOrderForm").keypress(function(event){if(event.which=='13'){event.preventDefault();}});ACC.productorderform.$addToCartBtn.click(function(){ACC.productorderform.$addToCartBtn.attr('disabled','disabled');$.ajax({url:ACC.productorderform.$addToCartOrderForm.attr("action"),type:'POST',dataType:'json',contentType:'application/json',data:ACC.productorderform.toJSON(ACC.productorderform.$addToCartOrderForm,true),async:false,success:function(response){$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler);ACC.product.displayAddToCartPopup(response);ACC.productorderform.cleanValues();ACC.productorderform.resetSelectedVariant();},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});});},beforeUnloadHandler:function(){return ACC.productorderform.$addToCartOrderForm.attr('data-grid-confirm-message');},enableBeforeUnloadEvent:function(quantityAfter,currentTotalItems){if(!ACC.orderform)
{if(quantityAfter>0&&currentTotalItems>0)
{$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler).on('beforeunload',ACC.productorderform.beforeUnloadHandler);}}},filterSkuEntry:function(quantityInput){var filteredQty=0;if(/\D/g.test(quantityInput)){filteredQty=quantityInput.replace(/\D/g,'');}
else
{filteredQty=quantityInput;}
return filteredQty;},coreTableScrollActions:function($scrollContent){if($scrollContent.hasClass('visible')){ACC.productorderform.orderGridScroll($scrollContent);var scrollRight=$scrollContent.parent().find('.order-form-scroll.right'),scrollLeft=$scrollContent.parent().find('.order-form-scroll.left'),scrollUp=$scrollContent.parent().find('.order-form-scroll.up'),scrollDown=$scrollContent.parent().find('.order-form-scroll.down');var widthReference=$scrollContent.find('.widthReference').outerWidth(),heightReference=$scrollContent.find('.product-grid-container table').eq(0).height()/2;var maxWidth=0,maxHeight=0;var widthDiff=0,heightDiff=0;$scrollContent.find('.product-grid-container table').each(function(){if($(this).outerWidth()>maxWidth){maxWidth=$(this).outerWidth();}});$scrollContent.find('.orderForm_grid_group').each(function(){maxHeight+=$(this).height();});widthDiff=maxWidth-$scrollContent.outerWidth();heightDiff=maxHeight-$scrollContent.height()+14;$scrollContent.scroll(function(){if($(this).scrollLeft()>0){scrollLeft.show();}else{scrollLeft.hide();}
if($(this).scrollLeft()>=widthDiff){scrollRight.hide();}else{scrollRight.show();}
if($(this).scrollTop()>0){scrollUp.show();}else{scrollUp.hide();}
if($(this).scrollTop()>=heightDiff){scrollDown.hide();}else{scrollDown.show();}
$scrollContent.find('.update-future-stock').css('margin-right',-$(this).scrollLeft());});$scrollContent.parent().find('.order-form-scroll').click(function(){var pos={left:$scrollContent.scrollLeft(),top:$scrollContent.scrollTop()};if($(this).hasClass('right')){$scrollContent.scrollLeft(pos.left+widthReference);}
else if($(this).hasClass('left')){$scrollContent.scrollLeft(pos.left-widthReference);}
else if($(this).hasClass('up')){$scrollContent.scrollTop(pos.top-heightReference);}
else{$scrollContent.scrollTop(pos.top+heightReference);}});}},orderGridScroll:function(scrollContent){var showRight=false;var calcHeight=0;var maxWidth=$(scrollContent).find('.orderForm_grid_group').innerWidth();var maxHeight=$(scrollContent).innerHeight()-18;$(scrollContent).find('.product-grid-container table').each(function(){if($(this).width()>maxWidth){showRight=true;}
calcHeight+=$(this).height();});if(showRight){$(scrollContent).parent().find('.order-form-scroll.right').show();}
if(calcHeight>maxHeight){$(scrollContent).parent().find('.order-form-scroll.down').show();}},calculateVariantTotal:function(_this,quantityToAdd){var $gridGroup=_this.parents('.orderForm_grid_group');var indexPattern="[0-9]+";var currentIndex=parseInt(_this.attr("id").match(indexPattern));var currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();var $gridTotalValue=$gridGroup.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");if(quantityToAdd>0)
$gridTotalValue.html(ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityToAdd)));}};ACC.savedcarts={_autoload:[["bindRestoreSavedCartClick",$(".js-restore-saved-cart").length!=0],["bindDeleteSavedCartLink",$('.js-delete-saved-cart').length!=0],["bindDeleteConfirmLink",$('.js-savedcart_delete_confirm').length!=0],["bindSaveCartForm",$(".js-save-cart-link").length!=0||$(".js-update-saved-cart").length!=0],["bindUpdateUploadingSavedCarts",$(".js-uploading-saved-carts-update").length!=0]],$savedCartRestoreBtn:{},$currentCartName:{},bindRestoreSavedCartClick:function(){$(".js-restore-saved-cart").click(function(event){event.preventDefault();var popupTitle=$(this).data('restore-popup-title');var cartId=$(this).data('savedcart-id');var url=ACC.config.encodedContextPath+'/my-account/saved-carts/'+encodeURIComponent(cartId)+'/restore';var popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.common.checkAuthenticationStatusBeforeAction(function(){$.get(url,undefined,undefined,'html').done(function(data){ACC.colorbox.open(popupTitleHtml,{html:data,width:500,onComplete:function(){ACC.common.refreshScreenReaderBuffer();ACC.savedcarts.bindRestoreModalHandlers();ACC.savedcarts.bindPostRestoreSavedCartLink();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});});});},bindRestoreModalHandlers:function(){ACC.savedcarts.$savedCartRestoreBtn=$('.js-save-cart-restore-btn');ACC.savedcarts.$currentCartName=$('.js-current-cart-name');$(".js-prevent-save-active-cart").on('change',function(event){if($(this).prop('checked')===true){ACC.savedcarts.$currentCartName.attr('disabled','disabled');ACC.savedcarts.$savedCartRestoreBtn.removeAttr('disabled');}else{ACC.savedcarts.$currentCartName.removeAttr('disabled');var inputVal=ACC.savedcarts.$currentCartName.val();if(inputVal==""&&inputVal.length===0){ACC.savedcarts.$savedCartRestoreBtn.attr('disabled','disabled');}}});ACC.savedcarts.$currentCartName.on('focus',function(event){$('.js-restore-current-cart-form').removeClass('has-error');$('.js-restore-error-container').html('');});ACC.savedcarts.$currentCartName.on('blur',function(event){if(this.value==""&&this.value.length===0){ACC.savedcarts.$savedCartRestoreBtn.attr('disabled','disabled');}else{ACC.savedcarts.$savedCartRestoreBtn.removeAttr('disabled');}});},bindPostRestoreSavedCartLink:function(){var keepRestoredCart=true;var preventSaveActiveCart=false;$(document).on("click",'.js-keep-restored-cart',function(event){keepRestoredCart=$(this).prop('checked');});$(document).on("click",'.js-prevent-save-active-cart',function(event){preventSaveActiveCart=$(this).prop('checked');});$(document).on("click",'.js-save-cart-restore-btn',function(event){event.preventDefault();var cartName=$('#activeCartName').val();var url=$(this).data('restore-url');var postData={preventSaveActiveCart:preventSaveActiveCart,keepRestoredCart:keepRestoredCart,cartName:cartName};ACC.common.checkAuthenticationStatusBeforeAction(function(){$.post(url,postData,undefined,'html').done(function(result,data,status){result=ACC.sanitizer.sanitize(result);if(result=="200 OK"){var url=ACC.config.encodedContextPath+"/cart"
window.location.replace(url);}else{var errorMsg=status.responseText.slice(1,-1);$('.js-restore-current-cart-form').addClass('has-error');$('.js-restore-error-container').html(errorMsg);$('.js-savedcart_restore_confirm_modal').colorbox.resize();}});});});$(document).on("click",'.js-cancel-restore-btn',function(event){ACC.colorbox.close();});},bindDeleteSavedCartLink:function(){$(document).on("click",'.js-delete-saved-cart',function(event){event.preventDefault();var cartId=$(this).data('savedcart-id');var popupTitle=$(this).data('delete-popup-title');var popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.colorbox.open(popupTitleHtml,{inline:true,className:"js-savedcart_delete_confirm_modal",href:"#popup_confirm_savedcart_delete_"+cartId,width:'500px',onComplete:function(){$(this).colorbox.resize();}});});},bindDeleteConfirmLink:function(){$(document).on("click",'.js-savedcart_delete_confirm',function(event){event.preventDefault();var cartId=$(this).data('savedcart-id');var url=ACC.config.encodedContextPath+'/my-account/saved-carts/'+encodeURIComponent(cartId)+'/delete';ACC.common.checkAuthenticationStatusBeforeAction(function(){$.ajax({url:url,type:'DELETE',success:function(response){ACC.colorbox.close();var url=ACC.config.encodedContextPath+"/my-account/saved-carts"
window.location.replace(url);}});});});$(document).on("click",'.js-savedcart_delete_confirm_cancel',function(event){ACC.colorbox.close();});},bindSaveCartForm:function()
{ACC.savedcarts.charactersLeftInit();var form=$('#saveCartForm');var saveCart=false;var showSaveCartFormCallback=function(){var title=$('#saveCart').data("saveCartTitle");var titleHtml=ACC.common.encodeHtml(title);ACC.colorbox.open(titleHtml,{href:"#saveCart",inline:true,width:"620px",onOpen:function(){if($('#saveCartName').val()){ACC.savedcarts.disableSaveCartButton(false);}},onComplete:function(){$(this).colorbox.resize();saveCart=false;},onClosed:function(){if(saveCart){form.submit();}
document.getElementById("saveCartForm").reset();ACC.savedcarts.disableSaveCartButton(true);ACC.savedcarts.charactersLeftInit();}});};$(document).on("click",".js-save-cart-link, .js-update-saved-cart",function(e){e.preventDefault();ACC.common.checkAuthenticationStatusBeforeAction(showSaveCartFormCallback);});$(document).on("click",'#saveCart #cancelSaveCartButton',function(e){e.preventDefault();$.colorbox.close();});$('#saveCartName').keyup(function(){$('#saveCart #saveCartButton').prop('disabled',this.value.trim()==""?true:false);var maxchars=255;var value=$('#localized_val').attr('value');var tlength=$(this).val().length;remain=maxchars-parseInt(tlength);$('#remain').text(value+' : '+remain);});$('#saveCartDescription').keyup(function(){var maxchars=255;var value=$('#localized_val').attr('value');var tlength=$(this).val().length;remain=maxchars-parseInt(tlength);$('#remainTextArea').text(value+' : '+remain);});$(document).on("click",'#saveCart #saveCartButton',function(e){e.preventDefault();saveCart=true;$.colorbox.close();});},charactersLeftInit:function(){$('#remain').text($('#localized_val').attr('value')+' : 255');$('#remainTextArea').text($('#localized_val').attr('value')+' : 255');},disableSaveCartButton:function(value){$('#saveCart #saveCartButton').prop('disabled',value);},bindUpdateUploadingSavedCarts:function(){var cartIdRowMapping=$(".js-uploading-saved-carts-update").data("idRowMapping");var refresh=$(".js-uploading-saved-carts-update").data("refreshCart");if(cartIdRowMapping&&refresh){var interval=$(".js-uploading-saved-carts-update").data("refreshInterval");var arrCartIdAndRow=cartIdRowMapping.split(',');var mapCartRow=new Object();var cartCodes=[];for(i=0;i<arrCartIdAndRow.length;i++){var arrValue=arrCartIdAndRow[i].split(":");if(arrValue!=""){mapCartRow[arrValue[0]]=arrValue[1];cartCodes.push(arrValue[0]);}}
if(cartCodes.length>0){setTimeout(function(){ACC.savedcarts.refreshWorker(cartCodes,mapCartRow,interval)},interval);}}},refreshWorker:function(cartCodes,mapCartRow,interval){$.ajax({dataType:"json",url:ACC.config.encodedContextPath+'/my-account/saved-carts/uploadingCarts',data:{cartCodes:cartCodes},type:"GET",traditional:true,success:function(data){if(data!=undefined){var hidden="hidden";var rowId="#row-";for(i=0;i<data.length;i++){var cart=data[i];var index=$.inArray(cart.code,cartCodes);if(index>-1){cartCodes.splice(index,1)}
var rowIdIndex=mapCartRow[cart.code];if(rowIdIndex!=undefined){var rowSelector=rowId+rowIdIndex;$(document).find(rowSelector+" .js-saved-cart-name").removeClass("not-active");$(document).find(rowSelector+" .js-saved-cart-date").removeClass("hidden");$(document).find(rowSelector+" .js-file-importing").remove();$(document).find(rowSelector+" .js-saved-cart-description").text(cart.description);var numberOfItems=cart.entries.length;$(document).find(rowSelector+" .js-saved-cart-number-of-items").text(numberOfItems);$(document).find(rowSelector+" .js-saved-cart-total").text(cart.totalPrice.formattedValue);if(numberOfItems>0){$(document).find(rowSelector+" .js-restore-saved-cart").removeClass(hidden);}
$(document).find(rowSelector+" .js-delete-saved-cart").removeClass(hidden);}}};if(cartCodes.length>0){setTimeout(function(){ACC.savedcarts.refreshWorker(cartCodes,mapCartRow,interval)},interval);}}})}};ACC.multidgrid={populateAndShowGridOverlay:function(element,event)
{event.preventDefault();var itemIndex=$(element).data("index");var gridEntries=$(document).find('#grid'+itemIndex);var strSubEntries=gridEntries.data("sub-entries");var productName=gridEntries.data("product-name");var arrSubEntries=strSubEntries.split(',');var firstVariantCode=arrSubEntries[0].split(':')[0];var targetUrl=gridEntries.data("target-url")+'?productCode='+encodeURIComponent(firstVariantCode);ACC.colorbox.open(ACC.common.encodeHtml(productName),{href:targetUrl,className:'read-only-grid',close:'<span class="glyphicon glyphicon-remove"></span>',width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height,onComplete:function(){$('body').addClass('offcanvas');var oH=$('#cboxLoadedContent').height();$('#cboxLoadedContent').height((oH-$('#cboxTitle').height())+'px');},onClosed:function(){$('body').removeClass('offcanvas');}});},populateAndShowGrid:function(element,event,readOnly)
{var itemIndex=$(element).data("index");grid=$(document).find("#ajaxGrid"+itemIndex);var gridEntries=$(document).find('#grid'+itemIndex);$(element).toggleClass('open');if(!grid.is(":hidden")){grid.slideUp();return;}
if(grid.html()!=""){grid.slideToggle("slow");return;}
var strSubEntries=gridEntries.data("sub-entries");var arrSubEntries=strSubEntries.split(',');var firstVariantCode=arrSubEntries[0].split(':')[0];var targetUrl=gridEntries.data("target-url");var method="GET";$.ajax({url:targetUrl,data:{productCode:firstVariantCode},type:method,dataType:'html',success:function(data)
{grid.html(data);grid.slideDown("slow");},error:function(xht,textStatus,ex)
{console.log("Failed to get variant matrix. Error details ["+xht+", "+textStatus+", "+ex+"]");}});}};var ACC=ACC||{};if($("#quickOrder").length>0){ACC.quickorder={_autoload:["bindClearQuickOrderRow","bindAddSkuInputRow","bindResetFormBtn","bindAddToCartClick","bindCompileTemplate"],$quickOrderContainer:$('.js-quick-order-container'),$quickOrderMinRows:Number($('.js-quick-order-container').data('quickOrderMinRows')),$quickOrderMaxRows:Number($('.js-quick-order-container').data('quickOrderMaxRows')),$productExistsInFormMsg:$('.js-quick-order-container').data('productExistsInFormMsg'),$quickOrderLeavePageMsg:$('#quickOrder').data('gridConfirmMessage'),$hiddenSkuInput:'input.js-hidden-sku-field',$addToCartBtn:$('#js-add-to-cart-quick-order-btn-top, #js-add-to-cart-quick-order-btn-bottom'),$resetFormBtn:$('#js-reset-quick-order-form-btn-top, #js-reset-quick-order-form-btn-bottom'),$productInfoContainer:'.js-product-info',$skuInputField:'.js-sku-input-field',$qtyInputField:'.js-quick-order-qty',$jsLiContainer:'li.js-li-container',$removeQuickOrderRowBtn:'.js-remove-quick-order-row',$skuValidationContainer:'.js-sku-validation-container',$qtyValidationContainer:'.js-qty-validation-container',$productItemTotal:'.js-quick-order-item-total',$classHasError:'has-error',$templateAlias:'quickOrderRowTemplate',bindResetFormBtn:function(){ACC.quickorder.$resetFormBtn.on("click",ACC.quickorder.clearForm);},bindAddToCartClick:function(){ACC.quickorder.$addToCartBtn.on("click",ACC.quickorder.addToCart);},bindAddSkuInputRow:function(){$(ACC.quickorder.$skuInputField).on("focusin",ACC.quickorder.addInputRow).on("focusout keydown",ACC.quickorder.handleFocusOutOnSkuInput);},bindClearQuickOrderRow:function(){$(ACC.quickorder.$removeQuickOrderRowBtn).on("mousedown",ACC.quickorder.clearQuickOrderRow);},bindCompileTemplate:function(){$.template(ACC.quickorder.$templateAlias,$("#quickOrderRowTemplate"));},addToCart:function(){$.ajax({url:ACC.quickorder.$quickOrderContainer.data('quickOrderAddToCartUrl'),type:'POST',dataType:'json',contentType:'application/json',data:ACC.quickorder.getJSONDataForAddToCart(),async:false,success:function(response){ACC.quickorder.handleAddToCartSuccess(response);},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occurred: "+textStatus,errorThrown);}});},handleAddToCartSuccess:function(response){if($(response.quickOrderErrorData).length>0){ACC.quickorder.disableBeforeUnloadEvent();}
var lookup={};response.quickOrderErrorData.forEach(function(el){lookup[el.sku]=el.errorMsg;});$(ACC.quickorder.$qtyInputField).each(function(){var parentLi=ACC.quickorder.getCurrentParentLi(this);var sku=ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuInputField).val();var errorMsg=lookup[sku];if(errorMsg){ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(errorMsg);}
else{ACC.quickorder.clearGivenQuickOrderRow(parentLi);}});ACC.quickorder.handleBeforeUnloadEvent();ACC.product.displayAddToCartPopup(response);},getJSONDataForAddToCart:function(){var skusAsJSON=[];$(ACC.quickorder.$qtyInputField).each(function(){var qty=Number($(this).val());if(qty>0){var sku=jQuery.trim(ACC.quickorder.findElementInCurrentParentLi(this,ACC.quickorder.$skuInputField).val());skusAsJSON.push({"product":{"code":sku},"quantity":qty});}});return JSON.stringify({"cartEntries":skusAsJSON});},handleFocusOutOnSkuInput:function(event){var key=event.charCode?event.charCode:event.keyCode?event.keyCode:0;if(key==13){$(event.target).focusout();}
if(event.type=="focusout"){ACC.quickorder.handleGetProduct(event);ACC.quickorder.handleBeforeUnloadEvent();}},handleFocusOutOnQtyInput:function(event){var key=event.charCode?event.charCode:event.keyCode?event.keyCode:0;if(key==13){event.preventDefault();var parentLi=ACC.quickorder.getCurrentParentLi(event.target);parentLi.next().find(ACC.quickorder.$skuInputField).focus();$(event.target).focusout();}
if(event.type=="focusout"){ACC.quickorder.validateAndUpdateItemTotal(event);ACC.quickorder.enableDisableAddToCartBtn();}},clearForm:function(){window.location.reload();},validateAndUpdateItemTotal:function(event){var parentLi=ACC.quickorder.getCurrentParentLi(event.target);var qtyValue=jQuery.trim(ACC.productorderform.filterSkuEntry($(event.target).val()));if(isNaN(qtyValue)||qtyValue==""){qtyValue=0;$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer).text('');$(event.target).val(0);}
else{qtyValue=Number(qtyValue);$(event.target).val(qtyValue);var maxQty=jQuery.trim(ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField).data('maxProductQty'));var stockLevelStatus=jQuery.trim(ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField).data('stockLevelStatus'));maxQty=($.isEmptyObject(maxQty)&&stockLevelStatus=="inStock")?"FORCE_IN_STOCK":Number(maxQty);if(!isNaN(maxQty)&&qtyValue>maxQty){$(event.target).addClass(ACC.quickorder.$classHasError);var qtyValidationContainer=ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer);qtyValidationContainer.text(qtyValidationContainer.data('maxProductQtyMsg'));qtyValue=maxQty;$(event.target).val(maxQty);}
else{$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer).text('');}}
if(qtyValue>0){var itemPrice=parseFloat(ACC.quickorder.findElement(parentLi,'.js-product-price').data('productPrice'));ACC.quickorder.findElement(parentLi,ACC.quickorder.$productItemTotal).html(ACC.productorderform.formatTotalsCurrency(itemPrice*qtyValue));}
else{ACC.quickorder.findElement(parentLi,ACC.quickorder.$productItemTotal).text('');}},clearQuickOrderRow:function(){var parentLi=ACC.quickorder.getCurrentParentLi(this);ACC.quickorder.clearGivenQuickOrderRow(parentLi);},clearGivenQuickOrderRow:function(parentLi){var quickOrderMinRows=ACC.quickorder.$quickOrderMinRows;if($('.js-ul-container li.js-li-container').length>quickOrderMinRows){parentLi.remove();}
else{ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove();ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text('');ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuInputField).val('');ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val('');}
ACC.quickorder.enableDisableAddToCartBtn();ACC.quickorder.handleBeforeUnloadEvent();},addInputRow:function(event){if($('.js-quick-order-container li.js-li-container:last-child').find(ACC.quickorder.$skuInputField).is($(event.target))&&$(ACC.quickorder.$jsLiContainer).length<ACC.quickorder.$quickOrderMaxRows){var liClone=$('.js-quick-order-container li.js-li-container:first').clone();ACC.quickorder.findElement(liClone,ACC.quickorder.$productInfoContainer).remove();ACC.quickorder.findElement(liClone,ACC.quickorder.$skuValidationContainer).text('');ACC.quickorder.findElement(liClone,ACC.quickorder.$hiddenSkuInput).val('');var currentSkuInputField=ACC.quickorder.findElement(liClone,ACC.quickorder.$skuInputField);currentSkuInputField.val('');currentSkuInputField.focusin(ACC.quickorder.addInputRow).focusout(ACC.quickorder.handleFocusOutOnSkuInput).keydown(ACC.quickorder.handleFocusOutOnSkuInput);ACC.quickorder.findElement(liClone,ACC.quickorder.$removeQuickOrderRowBtn).click(ACC.quickorder.clearQuickOrderRow);$('.js-ul-container').append(liClone);}},handleGetProduct:function(event){var parentLi=ACC.quickorder.getCurrentParentLi(event.target);var productCode=$.trim(event.target.value);$(event.target).val(productCode);if(!ACC.quickorder.isCurrentSkuSameAsPrevious(parentLi,productCode)){if(productCode.length>0){ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove();if(ACC.quickorder.isDuplicateSku(event.target,productCode)){ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(ACC.quickorder.$productExistsInFormMsg);}
else{ACC.quickorder.getAndDisplayProductInfo(event,parentLi,productCode);}
ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val(productCode);}
else{$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text('');ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove();}}},isCurrentSkuSameAsPrevious:function(parentLi,productCode){return ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val()==productCode;},isDuplicateSku:function(currentInput,productCode){var exists=false;$(ACC.quickorder.$skuInputField).each(function(){if($(this).val()==productCode&&!$(this).is($(currentInput))){exists=true;return false}});return exists;},getAndDisplayProductInfo:function(event,parentLi,productCode){var url=ACC.config.encodedContextPath+'/quickOrder/productInfo?code='+encodeURIComponent(productCode);$.getJSON(url,function(result){if(result.errorMsg!=null&&result.errorMsg.length>0){$(event.target).addClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(result.errorMsg);}
else{$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text('');$.tmpl(ACC.quickorder.$templateAlias,result.productData).insertAfter(ACC.quickorder.findElement(parentLi,'.js-sku-container'));var qtyInputField=ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField);qtyInputField.focusout(ACC.quickorder.handleFocusOutOnQtyInput).keydown(ACC.quickorder.handleFocusOutOnQtyInput);var stockLevelStatus=result.productData.stock.stockLevelStatus.code;if(stockLevelStatus=="outOfStock"){qtyInputField.val(0);qtyInputField.prop('disabled',true);}
else{qtyInputField.focus().select();}
ACC.quickorder.enableDisableAddToCartBtn();}});},handleBeforeUnloadEvent:function(){if(ACC.quickorder.isAnySkuPresent()){ACC.quickorder.disableBeforeUnloadEvent();ACC.quickorder.enableBeforeUnloadEvent();}
else{ACC.quickorder.disableBeforeUnloadEvent();}},disableBeforeUnloadEvent:function(){$(window).off('beforeunload',ACC.quickorder.beforeUnloadHandler);},enableBeforeUnloadEvent:function(){$(window).on('beforeunload',ACC.quickorder.beforeUnloadHandler);},beforeUnloadHandler:function(){return ACC.quickorder.$quickOrderLeavePageMsg;},enableDisableAddToCartBtn:function(){var addToCartButtonEnabled=ACC.quickorder.shouldAddToCartBeEnabled();if(addToCartButtonEnabled){ACC.quickorder.$addToCartBtn.removeAttr('disabled');}else{ACC.quickorder.$addToCartBtn.attr('disabled','disabled');}},shouldAddToCartBeEnabled:function(){var sum=0;var enable=false;$(ACC.quickorder.$qtyInputField).each(function(){var str=this.value.trim();if(str){sum+=parseInt(str,10);}
if(sum>=1){enable=true;return false;}});return enable;},isAnySkuPresent:function(){var present=false;$(ACC.quickorder.$skuInputField).each(function(){var str=jQuery.trim(this.value);if(str){present=true;return false;}});return present;},getCurrentParentLi:function(currentElement){return $(currentElement).closest(ACC.quickorder.$jsLiContainer);},findElement:function(currentElement,toFind){return $(currentElement).find(toFind);},findElementInCurrentParentLi:function(currentElement,toFind){return $(currentElement).closest(ACC.quickorder.$jsLiContainer).find(toFind);}};};ACC.quote={_autoload:[["bindAddComment",$("#js-quote-comments").length!==0],["bindAddEntryComment",$(".js-quote-entry-comments").length!==0],["toggleMoreComments",$("#js-quote-comments").length!==0],["toggleLessComments",$("#js-quote-comments").length!==0],["displayLessComments",$("#js-quote-comments").length!==0],["quoteDetailsNavigation",$(".js-quote-actions").length!==0],["bindQuoteButtons",$(".js-btn-quote").length!==0],["bindEditQuoteButton",$(".js-quote-edit-btn").length!==0],["bindSubmitConfirmation",$(".js-quote-submit-btn").length!==0],["bindCancelConfirmation",$(".js-quote-cancel-btn").length!==0],["bindName",$("#js-quote-name").length!==0],["bindDescription",$("#js-quote-description").length!==0],["bindExpirationTime",$("#js-quote-expiration-time").length!==0],["bindCheckoutConfirmation",$(".js-quote-checkout-btn").length!==0],["bindEditConfirmation",$(".js-quote-warning-btn").length!==0],["bindQuoteDiscount",$(".js-quote-discount-link").length!==0],["bindNewCartClick",$(".new__cart--link").length!==0]],bindEditQuoteButton:function(){$(".js-quote-edit-btn").on("click",function(){var sUrl=$(this).data("quoteEditUrl");window.location=sUrl;});},bindNewCartClick:function(){$(".new__cart--link").bind("click",function(event){$(this).unbind(event);});},bindAddComment:function(){$(document).on("keypress",'#js-quote-comments #comment',function(event){var key=event.keyCode;if(key===13){if($('#comment').val().trim()===''){return false;}
event.preventDefault();ACC.quote.quoteCommentSubmit($('#comment').val());$('#comment').val("");return false;}else{return true;}});},bindAddEntryComment:function(){$(document).on("keypress",".js-quote-entry-comments",function(event){var key=event.keyCode;if(key===13){event.preventDefault();ACC.quote.quoteEntryCommentSubmit($(this).val(),$(this).data("entry-number"));return false;}else{return true;}});},bindQuoteButtons:function(){$('.js-save-quote-btn').click(function(){var url=$(this).data("saveQuoteUrl");$('#quoteForm').attr('action',url).submit();});$('.js-submit-quote-btn').click(function(){var url=$(this).data("submitQuoteUrl");$('#quoteForm').attr('action',url).submit();});$('.js-accept-quote-btn').click(function(){var url=$(this).data("acceptQuoteUrl");$('#quoteForm').attr('action',url).submit();});},quoteCommentSubmit:function(comment){var quoteComments=$("#js-quote-comments");var addCommentUrl=quoteComments.data("quote-base-link")+"comment";var showAllComments=quoteComments.data("show-all-comments");$.ajax({url:addCommentUrl,data:{comment:comment},type:"post",success:function(response){ACC.quote.onCommentSuccess(showAllComments);}});},quoteEntryCommentSubmit:function(comment,entryNumber){if(!comment||!comment.length){return;}
var quoteComments=$("#js-quote-comments");var addEntryCommentUrl=quoteComments.data("quote-base-link")+"entry/comment";$.ajax({url:addEntryCommentUrl,data:{comment:comment,entryNumber:entryNumber},type:"post",success:function(){ACC.quote.onEntryCommentSuccess(entryNumber);}});},onCommentSuccess:function(showAllComments){$("#commentListDiv").load(location.href+" #commentListDiv",function(){ACC.quote.displayComments(""+showAllComments);});},onEntryCommentSuccess:function(entryNumber){var entryNumberHtml=ACC.common.encodeHtml(entryNumber);$("#entryCommentListDiv_"+entryNumberHtml).load(location.href+" #entryCommentListDiv_"+entryNumberHtml,function(){ACC.quote.displayEntryComments(entryNumberHtml);});$("#entryComment_"+entryNumberHtml).val("");},toggleMoreComments:function(){$(document).on('click','#moreCommentsAnchor',ACC.quote.displayMoreComments);$(document).on('click','.js-more-entry-comments-anchor',ACC.quote.displayMoreEntryComments);},toggleLessComments:function(){$(document).on('click','#lessCommentsAnchor',ACC.quote.displayLessComments);$(document).on('click','.js-less-entry-comments-anchor',ACC.quote.displayLessEntryComments);},displayMoreComments:function(e){e.preventDefault();ACC.quote.displayComments("true");},displayMoreEntryComments:function(e){e.preventDefault();ACC.quote.displayEntryComments($(this).data("entry-number"),"true");},displayLessComments:function(e){if(e!==undefined){e.preventDefault();}
ACC.quote.displayComments("false");},displayLessEntryComments:function(e){e.preventDefault();ACC.quote.displayEntryComments($(this).data("entry-number"),"false");},displayComments:function(showAll){var quoteComments=$("#js-quote-comments");var currentCommentsShown=quoteComments.data("current-comments-shown");var comments=$('[id^="comment_"]');for(var i=0;i<comments.length;i++){if(showAll==="true"){$(comments[i]).show();}else{if(i<currentCommentsShown){$(comments[i]).show();}else{$(comments[i]).hide();}}}
if(showAll==="false"){$('#moreCommentsAnchor').show();$('#lessCommentsAnchor').hide();quoteComments.data("show-all-comments",false);}else{$('#moreCommentsAnchor').hide();$('#lessCommentsAnchor').show();quoteComments.data("show-all-comments",true);}
return false;},displayEntryComments:function(entryNumber,showAll){var entryNumberHtml=ACC.common.encodeHtml(entryNumber);var quoteEntryComments=$("#entryCommentListDiv_"+entryNumberHtml);var comments=quoteEntryComments.find('[id^="entryComment_'+entryNumberHtml+'"]');showAll=showAll||""+quoteEntryComments.data("show-all-entry-comments");for(var i=0;i<comments.length;i++){if(showAll==="true"){$(comments[i]).show();}else{if(i<4){$(comments[i]).show();}else{$(comments[i]).hide();}}}
if(showAll==="false"){quoteEntryComments.find(".js-more-entry-comments-anchor").show();quoteEntryComments.find(".js-less-entry-comments-anchor").hide();quoteEntryComments.data("show-all-entry-comments",false);}else{quoteEntryComments.find(".js-more-entry-comments-anchor").hide();quoteEntryComments.find(".js-less-entry-comments-anchor").show();quoteEntryComments.data("show-all-entry-comments",true);}
return false;},quoteDetailsNavigation:function(){$('.js-quote-actions').on('click',function(e){$(this).parent().find('nav').toggleClass('display-none');});},bindSubmitConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-submit-btn",modalWindowSelector:"#js-quote-submit-modal",modalTitleDataAttributeName:"submit-confirmation-modal-title",cancelButtonSelector:"#js-quote-submit-modal #submitNoButton"});$("#quoteSubmitForm").submit(function(event){var quoteForm=$("#quoteForm");if(quoteForm.is("form")){event.preventDefault();var submitUrl=$(this).prop("action");quoteForm.prop("action",submitUrl);quoteForm.submit();}});},bindCheckoutConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-checkout-btn",modalWindowSelector:"#js-quote-checkout-modal",modalTitleDataAttributeName:"submit-confirmation-modal-title",cancelButtonSelector:"#js-quote-checkout-modal #submitNoButton"});},bindCancelConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-cancel-btn",modalWindowSelector:"#js-quote-cancel-modal",modalTitleDataAttributeName:"cancel-confirmation-modal-title",cancelButtonSelector:"#js-quote-cancel-modal #cancelNoButton"});},bindEditConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-warning-btn",modalWindowSelector:"#js-quote-edit-modal",modalTitleDataAttributeName:"edit-confirmation-modal-title",cancelButtonSelector:"#js-quote-edit-modal #cancelEditNoButton",confirmButtonSelector:"#js-quote-edit-modal #cancelEditYesButton"});},handleConfirmationModal:function(options){var $actionButtonSelector=$(document).find(options.actionButtonSelector);$actionButtonSelector.click(function(e){e.preventDefault();var modalWindow=$(document).find(options.modalWindowSelector);var title=modalWindow.data(options.modalTitleDataAttributeName);if(options.initializeCallback){options.initializeCallback();}
ACC.colorbox.open(ACC.common.encodeHtml(title),{inline:true,href:modalWindow,width:"480px",escKey:false,overlayClose:false,onComplete:function(){ACC.colorbox.resize();}});});var $cancelButtonSelector=$(document).find(options.cancelButtonSelector);$cancelButtonSelector.click(function(e){e.preventDefault();ACC.colorbox.close();});var $confirmButtonSelector=$(document).find(options.confirmButtonSelector);$confirmButtonSelector.click(function(e){e.preventDefault();ACC.colorbox.close();var sUrl=$actionButtonSelector.data("quoteEditUrl");window.location=sUrl;});},bindQuoteDiscount:function(e){ACC.quote.handleDiscountModal({actionButtonSelector:".js-quote-discount-link",modalWindowSelector:"#js-quote-discount-modal",modalTitleDataAttributeName:"quote-modal-title",modalTotalDataAttributeName:"quote-modal-total",modalQuoteDiscountDataAttributeName:"quote-modal-quote-discount",modalCurrencyDataAttributeName:"quote-modal-currency",cancelButtonSelector:"#js-quote-discount-modal #cancelButton"});},handleDiscountModal:function(options){var modalWindow=$(document).find(options.modalWindowSelector);var total=parseFloat(modalWindow.data(options.modalTotalDataAttributeName));var quoteDiscount=parseFloat(modalWindow.data(options.modalQuoteDiscountDataAttributeName));var currency=modalWindow.data(options.modalCurrencyDataAttributeName);$(document).find(options.actionButtonSelector).click(function(e){e.preventDefault();var title=modalWindow.data(options.modalTitleDataAttributeName);if(options.initializeCallback){options.initializeCallback();}
ACC.colorbox.open(ACC.common.encodeHtml(title),{inline:true,href:modalWindow,width:"480px",onComplete:function(){ACC.colorbox.resize();var percent=(quoteDiscount/total)*100;var adjustTotal=(total-quoteDiscount).toFixed(2);$("#js-quote-discount-by-percentage").val(percent.toFixed(2));$("#js-quote-discount-by-amount").val(quoteDiscount.toFixed(2));$("#js-quote-discount-adjust-total").val(adjustTotal);}});});$(document).find(options.cancelButtonSelector).click(function(e){e.preventDefault();ACC.colorbox.close();});function enableSubmit(){$("#js-quote-discount-by-percentage").css('border-color','#cccccc');$("#js-quote-discount-by-amount").css('border-color','#cccccc');$("#js-quote-discount-adjust-total").css('border-color','#cccccc');$("#submitButton").prop("disabled",false);}
function resetIntial(val)
{if(isNaN(parseFloat(val))){val=0.00;val=val.toFixed(2);}
return val;}
function updateByPercentage()
{var percent=parseFloat($("#js-quote-discount-by-percentage").val());if(percent>100||percent<0){$("#js-quote-discount-by-percentage").css('border-color','red');$("#submitButton").prop("disabled",true);}else{enableSubmit();}
var discountAmount=total*percent/100;var discountAmount=discountAmount.toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));var remainTotal=total-discountAmount;var remainTotal=remainTotal.toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal));$("#js-quote-discount-rate").val(resetIntial(percent));$("#js-quote-discount-type").val("PERCENT");updateNewTotal(remainTotal);}
$('#js-quote-discount-by-percentage').keyup(updateByPercentage);$('#js-quote-discount-by-percentage').change(updateByPercentage);$('#js-quote-discount-by-percentage').blur(reset);$('#js-quote-discount-by-percentage').keypress(holdPreviousValue);function reset()
{var per=$('#js-quote-discount-by-percentage').val();var amt=$('#js-quote-discount-by-amount').val();var tot=$('#js-quote-discount-adjust-total').val();if(per==='')
$('#js-quote-discount-by-percentage').val('0.00');if(amt==='')
$('#js-quote-discount-by-amount').val('0.00');if(tot===''||tot===0.00)
$('#js-quote-discount-adjust-total').val(total);}
function holdPreviousValue(event)
{var $this=$(this);if((event.which!==46||$this.val().indexOf('.')!==-1))
{if(((event.which<48||event.which>57)&&(event.which!==0&&event.which!==8))){event.preventDefault();}}
var text=$(this).val();if((event.which===46)&&(text.indexOf('.')===-1)){setTimeout(function(){if($this.val().substring($this.val().indexOf('.')).length>3){$this.val($this.val().substring(0,$this.val().indexOf('.')+3));}},1);}
if((text.indexOf('.')!==-1))
{if((text.substring(text.indexOf('.')).length>2)&&(event.which!==0&&event.which!==8)&&($(this)[0].selectionStart>=text.length-2)){event.preventDefault();}}}
function updateByAmount()
{var discountAmount=parseFloat($("#js-quote-discount-by-amount").val());if(discountAmount>total||discountAmount<0){$("#js-quote-discount-by-amount").css('border-color','red');$("#submitButton").prop("disabled",true);}else{enableSubmit();}
var percent=(discountAmount/total)*100;var percent=percent.toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));var remainTotal=total-discountAmount;var remainTotal=remainTotal.toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal));$("#js-quote-discount-rate").val(resetIntial(discountAmount));$("#js-quote-discount-type").val("ABSOLUTE");updateNewTotal(remainTotal);}
$('#js-quote-discount-by-amount').keyup(updateByAmount);$('#js-quote-discount-by-amount').change(updateByAmount);$('#js-quote-discount-by-amount').keypress(holdPreviousValue);$('#js-quote-discount-by-amount').blur(reset);function updateByAdjustTotal()
{var adujstTotal=parseFloat($("#js-quote-discount-adjust-total").val());if(adujstTotal>total||adujstTotal<0){$("#js-quote-discount-adjust-total").css('border-color','red');$("#submitButton").prop("disabled",true);}else{enableSubmit();}
var discountAmount=total-adujstTotal;var discountAmount=discountAmount.toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));var percent=(discountAmount/total)*100;var percent=percent.toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));$("#js-quote-discount-rate").val(resetIntial(adujstTotal));$("#js-quote-discount-type").val("TARGET");updateNewTotal(adujstTotal);}
$('#js-quote-discount-adjust-total').keyup(updateByAdjustTotal);$('#js-quote-discount-adjust-total').change(updateByAdjustTotal);$('#js-quote-discount-adjust-total').keypress(holdPreviousValue);$('#js-quote-discount-adjust-total').blur(reset);function updateNewTotal(newTotal){if(isNaN(parseFloat(newTotal))){newTotal=total;}
var newTotal=parseFloat(newTotal).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,'$1,');$("#js-quote-discount-new-total").text(currency.concat(newTotal));}},bindName:function(){$("#js-quote-name").on("focusout",function(){ACC.quote.updateMetadata();});},bindDescription:function(){$("#js-quote-description").on("focusout",function(){ACC.quote.updateMetadata();});},updateMetadata:function(){var quoteForm=$("#quoteFormDiv");var updateMetadataUrl=quoteForm.data("metadata-url");var name=$("#js-quote-name").val().trim();var description=$("#js-quote-description").val();var nameWrapperElement=$("#js-quote-name-wrapper")
if(name&&name.length){nameWrapperElement.removeClass("has-error");$.ajax({url:updateMetadataUrl,data:{name:name,description:description},type:"POST",success:function(){$(".js-modal-quote-description").text(description);$(".js-modal-quote-name").text(name);}});}else{if(!nameWrapperElement.hasClass("has-error")){nameWrapperElement.addClass("has-error");}}},bindExpirationTime:function(e){var expirationTimeWrapperElement=$("#js-quote-expiration-time");var dateFormatForDatePicker=expirationTimeWrapperElement.data("date-format-for-date-picker");var minOfferValidityPeriodDays=expirationTimeWrapperElement.data("min-offer-validity-period-days");var minDate=new Date();minDate.setDate(minDate.getDate()+minOfferValidityPeriodDays);$("#expirationTime").datepicker({dateFormat:dateFormatForDatePicker,constrainInput:true,minDate:minDate,onSelect:function(){ACC.quote.handleExpirationTimeUpdate(expirationTimeWrapperElement,dateFormatForDatePicker,minOfferValidityPeriodDays);}});$("#expirationTime").change(function(){ACC.quote.handleExpirationTimeUpdate(expirationTimeWrapperElement,dateFormatForDatePicker,minOfferValidityPeriodDays);});$(document).on("click",".js-open-datepicker-quote-expiration-time",function(){$("#expirationTime").datepicker('show');});},handleExpirationTimeUpdate:function(expirationTimeWrapperElement,dateFormat,minOfferValidityPeriodDays){var expirationTimeElement=$("#expirationTime");var expirationTime=expirationTimeElement.val();if(ACC.quote.validateExpirationTime(dateFormat,expirationTime,minOfferValidityPeriodDays)){ACC.quote.updateExpirationTime(expirationTime.trim());expirationTimeWrapperElement.removeClass("has-error");}else{if(!expirationTimeWrapperElement.hasClass("has-error")){expirationTimeWrapperElement.addClass("has-error");}}},validateExpirationTime:function(dateFormat,value,minOfferValidityPeriodDays){try{if(value){var selectedDate=$.datepicker.parseDate(dateFormat,value);var validDate=new Date();validDate.setHours(0,0,0,0);validDate.setDate(validDate.getDate()+minOfferValidityPeriodDays);if(selectedDate>=validDate){return true;}else{return false;}}else{return true;}}catch(error){return false;}},updateExpirationTime:function(expirationTime){var url=$("#js-quote-expiration-time").data("expiration-time-url");$.ajax({url:url,type:'POST',data:{expirationTime:expirationTime},error:function(jqXHR){var expirationTimeWrapperElement=$("#js-quote-expiration-time");if(!expirationTimeWrapperElement.hasClass("has-error")){expirationTimeWrapperElement.addClass("has-error");}}});}};$(document).ready(function(){$('.js-quote-toggle-btn').click(function(){$(this).toggleClass('open');$("#quote__form--collapse").slideToggle(400);if($(this).hasClass('open')){$(this).addClass('collapsed');}else{$(this).removeClass('collapsed');}});$('.js-quote-comments-btn').click(function(){$(this).toggleClass('open');$("#comments__collapse").slideToggle(400);if($(this).hasClass('open')){$(this).addClass('collapsed');}else{$(this).removeClass('collapsed');}});});ACC.consent={_autoload:[["bindSendConsent",$("#consent-management-form").length!=0],["bindToggleConsentTemplateDescription",$("#consent-management-form").length!=0],"bindConsentClick","bindConsentManagementAlertBar"],bindSendConsent:function()
{var consentCheckbox=$('#consent-management-form').find('input.toggle-button__input');consentCheckbox.removeAttr('disabled');consentCheckbox.click(function()
{var consentId=$(this).prop('id');var isConsentGiven=$(this).is(':checked');var buttonId=(isConsentGiven?'#give-consent-button-':'#withdraw-consent-button-')+consentId;var $consentBtn=$(document).find(buttonId);$consentBtn.trigger('click');consentCheckbox.attr('disabled','disabled');$consentBtn.on('keydown',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();$consentBtn.trigger('click');consentCheckbox.attr('disabled','disabled');}});});},bindToggleConsentTemplateDescription:function(){var accordion=$('#consent-management-form').find('[data-behavior="accordion"]');var expandedClass='is-expanded';$.each(accordion,function(){var accordionItems=$(this).find('[data-binding="expand-accordion-item"]');$.each(accordionItems,function(){var $this=$(this);var triggerBtn=$this.find('[data-binding="expand-accordion-trigger"]');var setHeight=function(nV){var innerContent=nV.find('.consent-management-list__content-inner')[0],maxHeight=$(innerContent).outerHeight(),content=nV.find('.consent-management-list__content')[0];if(!content.style.height||content.style.height==='0px'){$(content).css('height',maxHeight);}else{$(content).css('height','0px');}};var toggleClasses=function(event){var clickedItem=event.currentTarget;var currentItem=$(clickedItem).parent();var clickedContent=$(currentItem).find('.consent-management-list__content')
$(currentItem).toggleClass(expandedClass);setHeight(currentItem);if($(currentItem).hasClass('is-expanded')){$(clickedItem).attr('aria-selected','true');$(clickedItem).attr('aria-expanded','true');$(clickedContent).attr('aria-hidden','false');}else{$(clickedItem).attr('aria-selected','false');$(clickedItem).attr('aria-expanded','false');$(clickedContent).attr('aria-hidden','true');}}
triggerBtn.on('click',function(event){event.preventDefault();toggleClasses(event);});$(triggerBtn).on('keydown',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();toggleClasses(event);}});});});},bindConsentClick:function(){$('.consent-accept').on("click",function(){ACC.consent.changeConsentState(this,"GIVEN");});$('.consent-reject').on("click",function(){ACC.consent.changeConsentState(this,"WITHDRAWN");});},changeConsentState:function(element,consentState){var consentCode=($(element).closest('.consentmanagement-bar').data('code'));$.ajax({url:ACC.config.encodedContextPath+"/anonymous-consent/"+encodeURIComponent(consentCode)+"?consentState="+encodeURIComponent(consentState),type:'POST',success:function(){$(element).closest('.consentmanagement-bar').hide();}});},bindConsentManagementAlertBar:function(){var accordion=$('#consent-management-alert').find('[data-behavior="accordion"]');var expandedClass='is-expanded';$.each(accordion,function(){var accordionItems=$(this).find('[data-binding="expand-accordion-item"]');$.each(accordionItems,function(){var $this=$(this);var triggerBtn=$this.find('[data-binding="expand-accordion-trigger"]');var setHeight=function(nV){var innerContent=nV.find('.consent-management-list__content-inner')[0],maxHeight=$(innerContent).outerHeight(),content=nV.find('.consent-management-list__content')[0];if(!content.style.height||content.style.height==='0px'){$(content).css('height',maxHeight);}else{$(content).css('height','0px');}};var toggleClasses=function(event){var clickedItem=event.currentTarget;var currentItem=$(clickedItem).parent();var clickedContent=$(currentItem).find('.consent-management-list__content')
$(currentItem).toggleClass(expandedClass);setHeight(currentItem);if($(currentItem).hasClass('is-expanded')){$(clickedItem).attr('aria-selected','true');$(clickedItem).attr('aria-expanded','true');$(clickedContent).attr('aria-hidden','false');}else{$(clickedItem).attr('aria-selected','false');$(clickedItem).attr('aria-expanded','false');$(clickedContent).attr('aria-hidden','true');}}
triggerBtn.on('click',function(event){event.preventDefault();toggleClasses(event);});$(triggerBtn).on('keydown',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();toggleClasses(event);}});});});}};ACC.coookienotification={_autoload:[["bindCookieNotificationClick",$(".js-cookie-notification-accept").length!=0,],],bindCookieNotificationClick:function(){$(".js-cookie-notification-accept").on("click",function(){$.cookie("cookie-notification","ACCEPTED",{path:"/",secure:true});$("#js-cookie-notification").hide();});},};ACC.close={_autoload:[["bindCloseAccountModalButtons",$(".js-close-account-popup-button").length!=0],["bindCloseAccountButton",$(".js-close-account-popup-button").length!=0]],bindCloseAccountModalButtons:function(){$('.js-close-account-popup-button').click(function(event){event.preventDefault();var popupTitle=$('.js-close-account-popup-button').data("popupTitle");var popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.colorbox.open(popupTitleHtml,{inline:true,href:"#popup_confirm_account_removal",className:"js-close-account-popup",width:'500px',onComplete:function(){$(this).colorbox.resize();}})});},bindCloseAccountButton:function(){$(document).on("click",'.js-close-account-action',function(event){event.preventDefault();var url=ACC.config.encodedContextPath+'/my-account/close-account';$.ajax({url:url,type:'POST',success:function(response){ACC.colorbox.close();var url=ACC.config.encodedContextPath+'/logout?closeAcc=true'
window.location.replace(url);},error:function(jqXHR,textStatus,errorThrown){console.log("Failed to close account. Error: ["+errorThrown+"]");window.location.reload();}});});}};ACC.login={_autoload:["bindLoginForm"],bindLoginForm:function(){$("#ls-header-favourites-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-header-favourites-link").data("url")+'" />');});$("#ls-header-expresscart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-header-expresscart-link").data("url")+'" />');});$("#ls-header-cart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-header-cart-link").data("url")+'" />');});$("#ls-mobileheader-favourites-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-mobileheader-favourites-link").data("url")+'" />');});$("#ls-mobileheader-expresscart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-mobileheader-expresscart-link").data("url")+'" />');});$("#ls-mobileheader-cart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-mobileheader-cart-link").data("url")+'" />');});$("#ls-header-cart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-header-cart-link").data("url")+'" />');});$("#ls-mobileheader-favourites-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-mobileheader-favourites-link").data("url")+'" />');});$("#ls-mobileheader-expresscart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-mobileheader-expresscart-link").data("url")+'" />');});$("#ls-mobileheader-cart-link").click(function(){$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+$("#ls-mobileheader-cart-link").data("url")+'" />');});$("#j_password").on("input",function(){enableBtn();});$(document).ready(function(){$("#loginModal-sessionTimeout").hide();if($(".loginData").data("show")&&window.location.href.indexOf('/login')===-1){$('#loginModal').modal('show');}
const sessionTimeout=$('.js-header-session-timeout');if(sessionTimeout.length){var time=sessionTimeout.val()*1000;setTimeout(function(){sessionStorage.setItem('SessionTimeoutDetected',true);sessionStorage.setItem('SessionTimeoutPreviousURL',window.location.href)},time);}
if(sessionStorage.getItem('SessionTimeoutDetected')){ACC.login.sessionTimeoutLoginPopup();}
var isResetPassword=$('#isResetPassword');if(isResetPassword&&isResetPassword.val()){ACC.forgottenpassword.preparePopup('/login/pw/request');}});$(document).ajaxSuccess(function(event,request,settings){const sessionTimeout=$('.js-header-session-timeout');if(sessionTimeout.length>0&&request.getResponseHeader('REQUIRES_AUTH')==='1'&&settings.url.includes("/cart/add")){ACC.login.sessionTimeoutLoginPopup();}});$(document).ajaxError(function(event,jqxhr,settings,thrownError){if(settings.url.includes("/cart/add")&&jqxhr.status==405){location.reload();}});$('#loginModal').on('hidden.bs.modal',function(){$('#loginModal-loginInformation').show();$('form#loginForm').trigger('reset');$('.ls-login-global-alerts').hide();$('#loginModal-sessionTimeout').hide();$('form#loginForm .lincolnsentryPwd').prop('type',ACC.global.fieldProperties.password);$('form#loginForm .ls-password.ls-show-password').removeClass('hidden');$('form#loginForm .ls-password.ls-hide-password').addClass('hidden');$('#loginForm').find('.form-control').removeClass('field-invalid');$('.grecaptcha-badge').css('display','');});$('#loginModal').on('show.bs.modal',function(){$('.grecaptcha-badge').css('display','block');$('.grecaptcha-badge').css('visibility','');})
$('#btn-login').off().on('click',function(e){if(sessionStorage.getItem('SPRING_SECURITY_LAST_USERNAME')){window.location.reload();}
else{e.preventDefault();$('#btn-login').prop('disabled',true);$('.spinner.spinner--steps2.icon-f-spinner3').addClass("login-busy-indicator");$('.lincolnsentryPwd').on('click',function(){enableBtn();});$('.lincolnsentryInput').on('click',function(){enableBtn();});$('#loginForm').find('.form-control').removeClass('field-invalid');grecaptcha.ready(function(){grecaptcha.execute(ACC.config.googleCaptchaSiteKey,{action:'submit'}).then(function(token){$('#j_recaptcha').val(token);$('#loginForm').submit();});});}});function enableBtn(){$('#btn-login').prop('disabled',false);if($('.spinner.spinner--steps2.icon-f-spinner3').hasClass('login-busy-indicator')){$('.spinner.spinner--steps2.icon-f-spinner3').removeClass("login-busy-indicator");}}
$('form#loginForm').ajaxForm({success:function(data){var attemptCount=$('form#loginForm').data('login-attempt');if($(data).find('.ls-login-global-alerts').length){$('.form-group #j_password').val('');if($(".ls-login-global-alerts").length){$('.ls-login-global-alerts').replaceWith($(data).find('.ls-login-global-alerts'));}
else{$('.password-container').after($(data).find('.ls-login-global-alerts'));}
$('#btn-login').prop('disabled',false);$('#loginForm').find('.form-control').addClass('field-invalid')}
else{const oDataForm=$('form#loginForm').serializeArray();const preURL=sessionStorage.getItem('SessionTimeoutPreviousURL')||window.location.href;let sTargetUrl;for(const prop in oDataForm){sTargetUrl=oDataForm[prop].name==="targetUrl"?oDataForm[prop].value:null;}
sessionStorage.removeItem('SessionTimeoutPreviousURL');if(sTargetUrl&&sTargetUrl!=="/"){window.location.href=sTargetUrl;}
else{preURL===window.location.href?window.location.reload():window.location.assign(preURL);}
$('#btn-login').prop('disabled',false);}
$('.spinner.spinner--steps2.icon-f-spinner3').removeClass("login-busy-indicator");ACC.login.bindLoginForm();var attempts=parseInt($(data).find('#loginForm').data('login-attempt'));$('form#loginForm').data('login-attempt',attempts);if(attemptCount>0&&attempts===0){$('.trouble-login').removeClass('hidden');}else{$('.trouble-login').addClass('hidden');}},error:function(){location.reload();}});},invokeLoginPopup:function(){sessionStorage.removeItem('SessionTimeoutDetected');sessionStorage.removeItem('SessionTimeoutActiveAccount');var currentLocation=window.location.pathname+window.location.search;$("#loginForm").find("input[name='targetUrl']").remove();$('#loginForm').append('<input type="hidden" name="targetUrl" value="'+currentLocation+'" />');$('#loginModal').modal('show');},sessionTimeoutLoginPopup:function(){$('#loginModal-loginInformation').hide();$('#loginModal-sessionTimeout').show();$('.js-session-timeout-info').show();$('.js-session-timeout-active-info').hide();if(sessionStorage.getItem('SessionTimeoutActiveAccount')){$('.js-session-timeout-info').hide();$('.js-session-timeout-active-info').show();}
ACC.login.invokeLoginPopup();}};const pattern=/^(?=.*[0-9])(?=.*[a-z])[a-zA-Z0-9!@\"\';:+-_#,()|{}$%^&*]{8,}$/;ACC.changepass={_autoload:['bindValidation'],isFormValid:false,bindValidation:function(){$('#btn-changePassword').prop('disabled',true);$('.js-password-input').on('input',function(e){const inputId=e.target.id;const currentPwd=$('#currentPassword').val();const pwd=$('#newPassword').val();const retypePwd=$('#checkNewPassword').val();const regex=new RegExp(pattern);const isValid=regex.test(pwd);const isCurrentPwdEmpty=currentPwd==="";$('#btn-changePassword').prop('disabled',!(isValid&&retypePwd===pwd&&!isCurrentPwdEmpty));ACC.changepass.isFormValid=isValid&&retypePwd===pwd&&!isCurrentPwdEmpty;});$('.js-password-input').on('blur',function(e){const inputId=e.target.id;const currentPwd=$('#currentPassword').val();const pwd=$('#newPassword').val();const retypePwd=$('#checkNewPassword').val();const regex=new RegExp(pattern);const isValid=regex.test(pwd);const isCurrentPwdEmpty=currentPwd==="";if(ACC.changepass.isFormValid){$(".currentPassword-error-message, .newPassword-error-message, .checkNewPassword-error-message, "+".txt-label-control").hide();return;}
if(inputId==="currentPassword"){$(".currentPassword-error-message").hide();$("#txt-currentPass").hide();if(isCurrentPwdEmpty){$("#txt-currentPass").show();}}
if(inputId==="newPassword"){$(".newPassword-error-message").hide();$("#txt-newPass").hide();$("#txt-newPass-empty").hide();if(pwd===""){$("#txt-newPass-empty").show();}else if(!isValid){$("#txt-newPass").show();}else if(retypePwd!==pwd&&retypePwd.length>0&&pwd.length>0){$("#txt-newConfirmPass-empty").hide();$("#txt-checkPass").show();}}
if(inputId==="checkNewPassword"){$(".checkNewPassword-error-message").hide();$("#txt-checkPass").hide();$("#txt-newConfirmPass-empty").hide();if(retypePwd===""){$("#txt-newConfirmPass-empty").show();}
else if(retypePwd!==pwd){$("#txt-checkPass").show();}
if($('#btn-changePassword').is(':disabled')){$("#currentPassword").focus();}}});$('#changePwdModal').on('hidden.bs.modal',function(e){location.href='/my-account/update-profile';})
$('form#updatePasswordForm').ajaxForm({success:function(data){$("html").html($("html",data).html());if($("div").hasClass("account-section-form")){$('.account-section-form').replaceWith($(data).find('.account-section-form'));if(!$('div').hasClass("help-block")){$('#changePwdModal').modal('show');}
ACC.changepass.bindValidation();}}});}};$(document).ready(function(){$('#newPassword').on('blur',function(){$('.newPassword-error-message').hide();if($('#newPassword').val()===''){$('#txt-newPass-empty').show();$('#txt-newPass').hide();$('.btn-createpass').prop('disabled',true);}
else if($('#newPassword').val().match(pattern)){$('#txt-newPass').hide();$('#txt-newPass-empty').hide();}else{$('#txt-newPass').show();$('#txt-newPass-empty').hide();$('.btn-createpass').prop('disabled',true);}});$('#checkNewPassword').on('blur',function(){$('.checkNewPassword-error-message').hide();let checkNewPassword=$('#checkNewPassword').val();if(checkNewPassword){if($('#checkNewPassword').val()===$('#newPassword').val()){$('#txt-checkPass').hide();$('#txt-newConfirmPass-empty').hide();if($('#newPassword').val().match(pattern)){$('.btn-createpass').removeAttr('disabled');}}else{$('#txt-checkPass').show();$('#txt-newConfirmPass-empty').hide();$('.btn-createpass').prop('disabled',true);}}else{$('#txt-newConfirmPass-empty').show();$('#txt-checkPass').hide();}});$('#newPassword').on('input',function(e){$('.btn-createpass').prop('disabled',true);if($('#checkNewPassword').val()===$('#newPassword').val()&&$('#newPassword').val().match(pattern)){$('.btn-createpass').removeAttr('disabled');}})
$('#checkNewPassword').on('input',function(e){let checkNewPassword=$('#checkNewPassword').val();if(checkNewPassword&&$('#checkNewPassword').val()===$('#newPassword').val()&&$('#newPassword').val().match(pattern)){$('.btn-createpass').removeAttr('disabled');}else{$('.btn-createpass').prop('disabled',true);}})
const sessionTimeout=$('.js-active-session-timeout');if(sessionTimeout.length){var time=sessionTimeout.val()*1000;setTimeout(function(){sessionStorage.setItem('SessionTimeoutDetected',true);sessionStorage.setItem('SessionTimeoutActiveAccount',true);location.href='/';},time);}});ACC.csvimport={TEXT_CSV_CONTENT_TYPE:'text/csv',TEXT_CSV_LONG_CONTENT_TYPE:'text/comma-separated-values',APP_EXCEL_CONTENT_TYPE:'application/vnd.ms-excel',_autoload:[["changeFileUploadAppearance",$(".js-file-upload").length!=0],["bindImportCSVActions",$(".js-import-csv").length!=0]],changeFileUploadAppearance:function(){$('.js-file-upload__input').on('change',function(){var files=(this.files);var spanFileNames=document.createElement("span");spanFileNames.insertAdjacentText("beforeend",files[0].name.toLowerCase());spanFileNames.insertAdjacentElement("beforeend",document.createElement("br"));$('.js-file-upload__file-name').unbind('mouseenter mouseleave');$('.js-file-upload__file-name').html(spanFileNames);if($('.js-file-upload').parents('#cboxLoadedContent').length>0){ACC.colorbox.resize();}})},bindImportCSVActions:function(){$('#chooseFileButton').on('click',function(event){ACC.csvimport.clearGlobalAlerts();});$('#importButton').on('click',function(event){event.preventDefault();ACC.csvimport.clearGlobalAlerts();if(!($('.js-file-upload__input').val().trim().length>0)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-no-file-chosen-error-message'});return;}
var selectedFile=document.getElementById('csvFile').files[0];if(!ACC.csvimport.isSelectedFileValid(selectedFile)){return;}
var form=document.getElementById('importCSVSavedCartForm');var formData=new window.FormData(form);formData.append("csvFile",selectedFile);ACC.csvimport.displayGlobalAlert({type:'warning',messageId:'import-csv-upload-message'});ACC.csvimport.enableDisableActionButtons(false);$.ajax({url:form.action,type:'POST',data:formData,contentType:false,processData:false,success:function(){ACC.csvimport.displayGlobalAlert({type:'info',message:''});$('#import-csv-alerts .alert-info').append($('#import-csv-success-message').html());ACC.csvimport.clearChosenFile();},error:function(jqXHR){if(jqXHR.status==400){if(jqXHR.responseJSON){ACC.csvimport.displayGlobalAlert({type:'error',message:jqXHR.responseJSON});return;}}
ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-generic-error-message'});},complete:function(){ACC.csvimport.enableDisableActionButtons(true);}});});},isSelectedFileValid:function(selectedFile){if(window.File&&window.Blob){if(selectedFile){if(!(selectedFile.type==ACC.csvimport.TEXT_CSV_CONTENT_TYPE||selectedFile.type==ACC.csvimport.APP_EXCEL_CONTENT_TYPE||selectedFile.type==ACC.csvimport.TEXT_CSV_LONG_CONTENT_TYPE)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-file-csv-required'});return false;}
var fileName=selectedFile.name;if(!fileName||!(/\.csv$/i).test(fileName)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-file-csv-required'});return false;}}
var fileMaxSize=$('.js-file-upload__input').data('file-max-size');if($.isNumeric(fileMaxSize)&&selectedFile){if(selectedFile.size>parseFloat(fileMaxSize)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-file-max-size-exceeded-error-message'});return false;}}}
return true;},displayGlobalAlert:function(options){ACC.csvimport.clearGlobalAlerts();var alertTemplateSelector;switch(options.type){case'error':alertTemplateSelector='#global-alert-danger-template';break;case'warning':alertTemplateSelector='#global-alert-warning-template';break;default:alertTemplateSelector='#global-alert-info-template';}
if(typeof options.message!='undefined'){$('#import-csv-alerts').append($(alertTemplateSelector).tmpl({message:options.message}));}
if(typeof options.messageId!='undefined')
{$('#import-csv-alerts').append($(alertTemplateSelector).tmpl({message:$(document).find('#'+options.messageId).text()}));}
$(".closeAccAlert").on("click",function(){$(this).parent('.getAccAlert').remove();});},clearGlobalAlerts:function(){$('#import-csv-alerts').empty();},clearChosenFile:function(){document.getElementById('csvFile').value='';$('.js-file-upload__file-name').text('');},enableDisableActionButtons:function(enable){$('#chooseFileButton').attr('disabled',!enable);$('#importButton').prop('disabled',!enable);}};function showHelpModal(){$(document).ready(function(){$('#helpModal').modal('show');$('#learnMoreModal').on('hidden.bs.modal',function(e){if($('.switchAccount-dialog').length===0){$('#helpModal').modal('hide');}});$('#helpModal').on('hidden.bs.modal',function(e){if($('.account-content').length>0){$("#submitNewB2BUnit").trigger("click");}});});if($('#helpModal').length>0){updateFirstLoginStatusAjax();}}
function handleSkipButton(){$(document).ready(function(){$(".skip-button").click(function(e){e.preventDefault();$('#helpModal').modal('hide');});});}
function handleLearnMoreButton(){$(document).ready(function(){$(".learn-more-button").click(function(e){e.preventDefault();$('#learnMoreModal').modal('show');if($('.account-content').length>0){$('#helpModal').css('display','none');}});});}
function handleCloseButtonInHelp(){$('#helpModal').modal('hide');}
function handleCloseButtonInLearnMore(){$('#learnMoreModal').modal('hide');}
function updateFirstLoginStatusAjax(){let url='/my-account/update-first-login-status';$.ajax({url:url,success:function(){}});}
$(function(){showHelpModal();handleSkipButton()
handleLearnMoreButton();});ACC.resetpassword={_autoload:['bindValidation'],isFormValid:false,bindValidation:function(){$(document).on('blur','.password-input',function(e){e.preventDefault();const inputId=e.target.id;const retypePwd=$('#checkNewPassword').val();const pwd=$('#newPassword').val();const regex=new RegExp(pattern);const isValid=regex.test(pwd);switch(inputId){case"newPassword":$('#password-validation-empty').addClass('password-hidden-field');$('#password-validation-length').addClass('password-hidden-field');if(pwd===""){$('#password-validation-empty').removeClass('password-hidden-field');}else if(!isValid){$('#password-validation-length').removeClass('password-hidden-field');}
break;case"checkNewPassword":$('#password-validation-match-empty').addClass('password-hidden-field');$('#password-validation-match').addClass('password-hidden-field');if(retypePwd===""){$('#password-validation-match-empty').removeClass('password-hidden-field');}else if(retypePwd!==pwd){$('#password-validation-match').removeClass('password-hidden-field');}
break;default:}
ACC.resetpassword.isFormValid=isValid&&retypePwd===pwd;$('#btnResetPassword').prop('disabled',!(isValid&&retypePwd===pwd));});$('#btnResetPassword').prop('disabled',true);$('#resetPwdForm').on('submit',function(e){if(!ACC.resetpassword.isFormValid){e.preventDefault();return false;}});$('.password-input').keyup(function(e){const retypePwd=$('#checkNewPassword').val();const pwd=$('#newPassword').val();const regex=new RegExp(pattern);const isValid=regex.test(pwd);if(isValid){$('#btnResetPassword').prop('disabled',!(isValid&&retypePwd===pwd));ACC.resetpassword.isFormValid=isValid&&retypePwd===pwd;$('#password-validation-length').addClass('password-hidden-field');$('#password-validation-match').addClass('password-hidden-field');}});}};$(document).ready(function(){$('[data-toggle="popover"]').popover();});ACC.changeb2bunit={_autoload:['showPopupModel','trackingIdentify','resetIdentityLogout'],showPopupModel:function(){changeB2BUnitURL="/switchaccount/change/";selectB2BUnitURL="/switchaccount/select/";if(!$("#loginModal").length&&$("#showSwitchAccountPopUp").val()=="true"){showSwitchAccountPopup(selectB2BUnitURL);}
$("a.switch-account").click(function(event){showSwitchAccountPopup(selectB2BUnitURL);event.preventDefault();});$(document).on("click","#submitNewB2BUnit",function(){var selectedItem=$(".selectB2BUnit").find('option:selected');var selectedB2BUnit=selectedItem.val();var parentUnitUid=selectedItem.data("parent");var fullName=selectedItem.data("fullname");var parentUnitName=selectedItem.data("name");var parentUnitNumberOfMembers=selectedItem.data("numberofmembers");var selectedGroup=$(".group-segment-data").filter(function(index){return $(this).data("id")===parentUnitUid;});var date=selectedItem.data("last-login");var lastLoginDate=date?ACC.orderDetail.toIso(date):"";var firstName=selectedItem.data("fullname").split(' ').slice(0,-1).join(' ');var lastName=selectedItem.data("fullname").split(' ').slice(-1).join(' ');var email=selectedItem.data("email");var pk=selectedItem.data("pk")+"";var eccContactId=selectedItem.data("ecc-contact-id")+"";var creationTime=ACC.orderDetail.toIso(selectedItem.data("creation-time"));var lastOrderDate=ACC.orderDetail.toIso(selectedItem.data("last-order-date"));if(selectedGroup.length>0){var address={city:$(selectedGroup[0]).data("city"),country:$(selectedGroup[0]).data("country"),postal_code:$(selectedGroup[0]).data("postal-code")+"",state:$(selectedGroup[0]).data("state"),street:$(selectedGroup[0]).data("street")};var phone=$(selectedGroup[0]).data("phone");var company=[];$(".selectB2BUnit").find('option').each(function(){company.push({id:$(this).data('parent')+"",name:$(this).data('name')})});}
var segmentGroupData={pk:pk,firstName:firstName,lastName:lastName,fullName:fullName,name:parentUnitName,email:email,eccContact:eccContactId,address:address,company:company,creationTime:creationTime,lastLoginDate:lastLoginDate,lastOrderDate:lastOrderDate,phone:phone};$.get(changeB2BUnitURL+selectedB2BUnit,function(data){if(location.pathname==="/my-account/orders"&&location.href.includes('?')){history.pushState({},null,location.href.split('?')[0]);}
if(location.pathname==="/my-account/manage-user/edit"&&location.href.includes('?')){history.pushState({},null,'/my-account/manage-users');}
if(location.pathname==="/my-account/manage-user/details"&&location.href.includes('?')){history.pushState({},null,'/my-account/manage-users');}
if(location.pathname==="/my-account/manage-user/create"){history.pushState({},null,'/my-account/manage-users');}
if(location.pathname==="/my-account/manage-users"&&location.href.includes('?')){history.pushState({},null,'/my-account/manage-users');}
$.get(selectB2BUnitURL,function(res){var parentUnitNumberOfOrders=$(res).find(".selectB2BUnit").find('option:selected').data("numberoforders");segmentGroupData.lastOrderDate=ACC.orderDetail.toIso($(res).find(".selectB2BUnit").find('option:selected').data("last-order-date"));var segmentData={selectedB2BUnit:selectedB2BUnit,parentUnitUid:parentUnitUid,parentUnitName:parentUnitName,parentUnitNumberOfMembers:parentUnitNumberOfMembers,parentUnitNumberOfOrders:parentUnitNumberOfOrders,segmentGroupData:segmentGroupData}
sessionStorage.setItem('segmentdata',JSON.stringify(segmentData));location.reload();});});});function showSwitchAccountPopup(selectB2BUnitURL){$.ajax({url:selectB2BUnitURL,type:"get",success:function(response){var numberOfB2BUnit=$(response).find('.selectB2BUnit > option').length;if(numberOfB2BUnit>1){if(response.indexOf("account-content")>-1){$('#commonModal').modal({backdrop:'static',keyboard:false});$('#commonModal').find('.close').hide();$('#commonModal').find('.modal-dialog').addClass("switchAccount-dialog");$('#commonModal').modal('show');$('#commonModal').find('.modal-body').html(response);}else{location.reload();}}else{$("body").append(response);if($('#helpModal').length===0){$("#submitNewB2BUnit").trigger("click");}}},error:function(error){},});};},trackingIdentify:function(){$("#guest-register").click(function(){var phone=$("#guest-mobile").val()?$("#guest-mobile").val().trim():"";phone=phone.charAt(0)==="0"?"+61"+phone.slice(1):phone;var segmentIdentifyGuest={address:{city:$("#guest-address-suburb").val()?$("#guest-address-suburb").val().trim():"",country:'Australia',postal_code:$("#guest-address-postal").val()?$("#guest-address-postal").val().trim():"",state:$("#guest-address-state").val()?$("#guest-address-state").val().trim():"",street:($("#guest-address-street-number").val()?$("#guest-address-street-number").val().trim():"")
+" "+($("#guest-address-street-name").val()?$("#guest-address-street-name").val().trim():"")},commerce_contact_id:'',company:[{name:$("#guest-business-name").val()?$("#guest-business-name").val().trim():""}],email:$("#guest-email").val()?$("#guest-email").val().trim():"",first_name:$("#guest-first-name").val()?$("#guest-first-name").val().trim():"",last_name:$("#guest-last-name").val()?$("#guest-last-name").val().trim():"",phone:phone||"",contact_type:'guest'};localStorage.setItem("identify_sm",JSON.stringify(segmentIdentifyGuest));sessionStorage.setItem("isGuestIdentity",true);});},resetIdentityLogout:function(){$(".ls-custom-logout").click(function(){analytics.reset();});}}
$(document).ready(function(){if(sessionStorage.segmentdata){var storageItem=JSON.parse(sessionStorage.segmentdata);analytics.identify(storageItem.segmentGroupData.eccContact,{address:storageItem.segmentGroupData.address?storageItem.segmentGroupData.address:"",commerce_contact_id:storageItem.segmentGroupData.pk,company:storageItem.segmentGroupData.company.length>0?storageItem.segmentGroupData.company:"",ecc_contact_id:storageItem.segmentGroupData.eccContact,email:storageItem.segmentGroupData.email||"",first_name:storageItem.segmentGroupData.firstName||"",group_id:storageItem.parentUnitUid,last_login_date:new Date(storageItem.segmentGroupData.lastLoginDate),last_name:storageItem.segmentGroupData.lastName||"",phone:storageItem.segmentGroupData.phone||"",contact_type:"registered user"},{groupId:storageItem.parentUnitUid});analytics.group(storageItem.parentUnitUid,{address:storageItem.segmentGroupData.address?storageItem.segmentGroupData.address:"",creation_date:new Date(storageItem.segmentGroupData.creationTime),employees:storageItem.parentUnitNumberOfMembers,group_id:storageItem.parentUnitUid?storageItem.parentUnitUid+"":"",last_login_date:storageItem.segmentGroupData.lastLoginDate?new Date(storageItem.segmentGroupData.lastLoginDate):"",last_order_date:storageItem.segmentGroupData.lastOrderDate?new Date(storageItem.segmentGroupData.lastOrderDate):"",name:storageItem.segmentGroupData.name||"",phone:storageItem.segmentGroupData.phone||""});sessionStorage.removeItem('segmentdata');}
if($(".nav-item-link").closest(".ls-dropdown-menu").find(".ls-dropdown-menu-items").find(".ls-custom-logout").length==0){if(!JSON.parse(sessionStorage.getItem("isGuestIdentity"))){analytics.reset();return;}
var identify=JSON.parse(localStorage.getItem("identify_sm"));if(identify){var userId=$("#customer-id-tracking").data("customer-id")?$("#customer-id-tracking").data("customer-id")+"":"";identify.commerce_contact_id=userId;analytics.identify(userId,identify);localStorage.removeItem("identify_sm");}}});ACC.lsCarousel={bindAction:function(){$('.carousel-icon').on('click',function(e){let clickedClass=e.currentTarget.classList.value;let indicator=clickedClass.split("-").pop();ACC.lsCarousel.scrollElement(indicator,'.ls-carousel-content');});},bindArrow:function(){if($('.ls-carousel-container').length>0){const scrollWidth=$('.ls-carousel-scroll-container').width();const contentWidth=$('.ls-carousel-content').width();scrollWidth<contentWidth?$('.carousel-icon').show():$('.carousel-icon').hide();}},scrollElement:function(indicator,element){const elementOuterWidth=$(`${element} div:first`).outerWidth(true);const scrollValue=indicator==='left'?`-=${elementOuterWidth}`:`+=${elementOuterWidth}`;$('.ls-carousel-scroll-container').scroll();$('.ls-carousel-scroll-container').animate({scrollLeft:scrollValue},500);}};$(document).ready(function(){ACC.lsCarousel.bindArrow();ACC.lsCarousel.bindAction();$(window).resize(function(){ACC.lsCarousel.bindArrow();});});window.onscroll=function(){scrollFunction()};function scrollFunction(){var buttonGoToTop=document.getElementById("top");var recaptchaBadge=$('.grecaptcha-badge');if(document.body.scrollTop>250||document.documentElement.scrollTop>250){buttonGoToTop.style.display="block";recaptchaBadge.css('bottom','85px')}else{buttonGoToTop.style.display="none";recaptchaBadge.css('bottom','14px');}}
var changeDisplay=true;function topFunction(){if(changeDisplay){changeDisplay=false;document.body.scrollTop=0;document.documentElement.scrollTop=0;}
setTimeout(function(){changeDisplay=true;},250);}
function clickFooter(clickClass){var idShowDown=clickClass.getElementsByClassName("dropdown")[0].id;var showDown=document.getElementById(idShowDown);var idIconShowDown=clickClass.getElementsByClassName("iconDropDowm")[0].id;var iconShowDonw=document.getElementById(idIconShowDown);if(showDown.style.display==="block"){showDown.style.display="none";iconShowDonw.className+=" icon-down-arrow";}else{showDown.style.display="block";iconShowDonw.className+=" icon-up-arrow";iconShowDonw.classList.remove("icon-down-arrow");}};ACC.favorites={formMethod:{favoritesOrder:'/favorites/order',favoritesShare:'/favorites/share',favoritesCreateList:'/favorites',favoritesUpdateList:'/favorites/update',favoritesUpdatesList:'/favorites/products-update',favoritesCopy:'/favorites/copy',favoritesDelete:'/favorites/remove',favoritesUpdateNotes:'/favorites/update-note',favoritesExportCSV:'/favorites/products/export',favoritesProductsOrder:'/favorites/product-order',favoritesPrintPDF:'/favorites/products/print',favoritesPrintPDFAll:'/favorites/products/printAll',favoritesProductRemove:'/favorites/product-remove',favoritesProductRemoveAll:'/favorites/product-removeAll/',favoritesProductReplacement:'/favorites/remove-replacement',favoritesProductsAddToCart:'/favorites/products-cart-add',},formValue:{editForm:{valid:false},dragable:{valid:true},favoritesDragable:{valid:true}},isSelectAll:true,isCheckSort:true,listUpdateMsg:'update',copySuccessMsg:'copy',bindSortProducts:function(){const blocks=$('.wishlist-product .wishlist-product-container');const blocksItem=blocks.find('.ls-fav-entry-container');if(blocksItem.length>0){const drake=dragula(blocks.toArray(),{isContainer:function(e){return e.classList.contains('wishlist-product-container');},invalid:function(el,handle){return!ACC.favorites.formValue.favoritesDragable.valid&&!el.classList.contains('ls-fav-entry-container');},direction:'vertical',copy:false,copySortSource:false,revertOnSpill:true,removeOnSpill:false,mirrorContainer:blocks[0],ignoreInputTextSelection:true,slideFactorX:0,slideFactorY:0});autoScroll([window],{margin:20,autoScroll:function(){return this.down&&drake.dragging;}});drake.on('drag',function(){$(document.body).addClass('no-scrollbar');$('html').addClass('no-scrollbar');});drake.on('dragend',function(){$(document.body).removeClass('no-scrollbar');$('html').removeClass('no-scrollbar');});drake.on('drop',function(){ACC.favorites.formValue.favoritesDragable.valid=false;setTimeout(ACC.favorites.favoritesSortProductsHandler,100);});}},onSortProductsCompleted:function(){ACC.favorites.formValue.favoritesDragable.valid=true;let oldUrl=window.location.href;let indexOfQuery=oldUrl.indexOf("?");if(indexOfQuery!==-1){let newUrl=oldUrl.substring(0,indexOfQuery);window.location=newUrl;}
return oldUrl;},onSortProductsFailed:function(res){ACC.favorites.formValue.favoritesDragable.valid=true;},favoritesSortProductsHandler:function(e,u){const data=[];$('.wishlist-owner-container .wishlist-product-container .ls-fav-entry-container').each(function(index,item){let item_uid=$('#uiList').val();let item_code=$(this).find('input[name="productCodePost"]').val();let item_unitCode=$(this).find('input[name="uomCode"]').val();let item_quantity=$(this).find('input[name="pdpAddtoCartInput"]').val();const product={quantity:item_quantity,product:{code:item_code},unit:{code:item_unitCode},orderPosition:index+1,wishlistId:item_uid}
data.push(product)});$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesProductsOrder,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:ACC.favorites.onSortProductsCompleted,error:ACC.favorites.onSortProductsFailed});},viewFavsList:function(){var items=$(".favorites-block-content");var favTrackList=[];var favList=JSON.parse(localStorage.getItem("dsd-3808"))||[];items.each(function(index,item){var dateLastUpdate=favList.find(x=>x.wishLishId===$(item).data("uid"));var favTrackInfo={date_last_updated:dateLastUpdate?dateLastUpdate.dateLastUpdate:"",favourites_list_id:$(item).data("uid")||"",favourites_list_name:$(item).data("name")+"",number_of_products:$(item).data("count")||0};favTrackList.push(favTrackInfo);})
var trackingData={lists:favTrackList}
window.dataLayer.push({event:'View all favourites lists',...trackingData});},bindSortable:function(){if($('.ls-fav-entry-container .ls-product-checked:checked').length>0){$('.wishlist-product').find('.wishlist-product-buttons').find('.ls-add-to-cart').find('.wishlist-add-to-cart').prop('disabled',false)}else{$('.wishlist-product').find('.wishlist-product-buttons').find('.ls-add-to-cart').find('.wishlist-add-to-cart').prop('disabled',true)}
var blocks=$('.my-favorites-tab-content .favorites-blocks');var childBlocks=blocks.find('.favorites-block-content-container');if(childBlocks.length>0){var drake=dragula(blocks.toArray(),{isContainer:function(el){return el.classList.contains('favorites-blocks');},invalid:function(el,handle){const isModal=el.classList.contains('modal-dialog');return!ACC.favorites.formValue.dragable.valid&&!el.classList.contains('favorites-block-content-container')||isModal;},direction:'vertical',copy:false,copySortSource:false,revertOnSpill:true,removeOnSpill:false,mirrorContainer:blocks[0],ignoreInputTextSelection:true,slideFactorX:0,slideFactorY:0});var scrollContainer=$('.favorites-page-container .favorites-page-content .tab-content');autoScroll([scrollContainer.get(0)],{margin:20,autoScroll:function(){return this.down&&drake.dragging;}});drake.on('drag',function(){$(document.body).addClass('no-scrollbar');$('html').addClass('no-scrollbar');});drake.on('dragend',function(){$(document.body).removeClass('no-scrollbar');$('html').removeClass('no-scrollbar');});drake.on('drop',function(){ACC.favorites.formValue.dragable.valid=false;setTimeout(ACC.favorites.favoritesSortHandler,100);});}},onSortCompleted:function(res){ACC.favorites.formValue.dragable.valid=true;},onSortFailed:function(res){ACC.favorites.formValue.dragable.valid=true;},favoriteSuccess:function(message){ACC.favorites.showFavoritePopup(message);window.scroll(0,0);setTimeout(function(){location.reload();},2000);},favoriteSuccessNonScroll:function(message){sessionStorage.setItem("show-msg","true");location.reload();},favoriteSuccessNonTransition:function(message){ACC.favorites.showFavoritePopup(message);},favoriteWishlistSuccess:function(message,data){ACC.favorites.showFavoritePopup(message);window.scroll(0,0);setTimeout(function(){window.location.href=data;},2000);},showFavoritePopup:function(message){$('.modal.copyList-modal').modal('hide');$('.dialog-favorite-container').css('display','block');var updateMsg=$('.dialog-favorite-container').find('.dialog-update').html();var copyMsg=$('.dialog-favorite-container').find('.dialog-copy').html();if(message===ACC.favorites.listUpdateMsg){$('.dialog-favorite-container').find('.dialog-message').html(updateMsg);}
else{$('.dialog-favorite-container').find('.dialog-message').html(copyMsg);}},favoritesSortHandler:function(e,u){const data=[];$('.my-favorites-tab-content .favorites-blocks .favorites-block-content').each(function(index,item){let element=$(item);data.push({name:element.data('name'),description:element.data('description'),productCount:element.data('count'),sharedWishList:element.data('shared'),orderPosition:index+1,uid:element.data('uid')});});$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesOrder,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:ACC.favorites.onSortCompleted,error:ACC.favorites.onSortFailed});},bindEditForm:function(){$("[id^='copyFavoriteModal'], #createFavoriteListModal,#copyFavoriteWishlistModal").on("shown.bs.modal",function(){let currentFormCopy=$('#'+$(this).attr("id"));currentFormCopy.find('input[name="newName"]').val("");currentFormCopy.find('.copy-button').attr('disabled',true).addClass('not-allowed-button');currentFormCopy.find('.modal-error-message').css('display','none');});$('.copyList-modal,#createFavoriteListModal').on('hidden.bs.modal',function(e){$('input[name="newName"]').val("");$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','none');});$('form.copy-favorite-list, form.create-favorite-list').on('input',function(e){let currentFormCopy=$('#'+$(this).attr("id"));let newName=currentFormCopy.find('input[name="newName"]').val();let oldName=currentFormCopy.find('input[name="name"]').val();if(newName===oldName){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("List name must be unique.");}else if(newName.trim()===""){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("Please input a valid name.");}else if(newName.length>255){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("List can be named to a maximum of 255 characters including spaces.");}else{$('.copy-button').removeAttr('disabled').removeClass('not-allowed-button');$('.modal-error-message').css('display','none');}});$('#copyFavoriteWishlistModal').on('input',function(e){let currentFormCopy=$('#'+$(this).attr("id"));let newName=currentFormCopy.find('input[name="newName"]').val();let oldName=currentFormCopy.find('input[name="name"]').val();if(newName.trim()===""){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("Please input a valid name.");}else{$('.copy-button').removeAttr('disabled').removeClass('not-allowed-button');$('.modal-error-message').css('display','none');}});$('form.edit-favorite-form').submit(function(e){e.preventDefault();if($(this).find('input[name="newName"]').val().trim()===""){return false;}
const data={name:$(this).find('input[name="name"]').val(),newName:$(this).find('input[name="newName"]').val()?$(this).find('input[name="newName"]').val():"",description:$(this).find('input[name="description"]').val()?$(this).find('input[name="description"]').val():"",productCount:$(this).find('input[name="count"]').val()?$(this).find('input[name="count"]').val():"",sharedWishList:$(this).find('input[name="shared"]').val()?$(this).find('input[name="shared"]').val():"",uid:$(this).find('input[name="uid"]').val()};$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesUpdateList,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(data){var wishListId=$("#uiList").val();ACC.global.getFavouritesUpdateTime(wishListId)
location.reload();},error:function(data){$('.unique-name-error').show();}});})
$('.edit-favorite-modal').on('hidden.bs.modal',function(){$($(this).find('.favorites-new-name')[0]).val($($(this).find('.favorites-old-name')[0]).val());$('.unique-name-error').hide();$('.unique-empty-error').hide();$('.unique-name-limit-error').hide();});$('.favorites-new-name').on('input',function(e){let newValue=$(this).val();let oldValue=$($(this).siblings('.favorites-old-name')[0]).val();if(!newValue){$(this).parents('form').find('.ls-edit-update').attr('disabled',true);$('.unique-empty-error').show();}else if(newValue===oldValue){$(this).parents('form').find('.ls-edit-update').attr('disabled',true);$('.unique-name-error').show();}else if(newValue.length>255){$('.unique-name-limit-error').show();$(this).parents('form').find('.ls-edit-update').attr('disabled',true);}else{$('.unique-name-limit-error').hide();$('.unique-empty-error').hide();$(this).parents('form').find('.ls-edit-update').attr('disabled',false);}
ACC.favorites.formValue.editForm.valid=newValue&&newValue!==oldValue;});$('form.copy-favorite-list').submit(function(e){e.preventDefault();const data={name:$(this).find('input[name="name"]').val(),newName:$(this).find('input[name="newName"]').val()?$(this).find('input[name="newName"]').val():"",description:$(this).find('input[name="description"]').val()?$(this).find('input[name="description"]').val():"",productCount:$(this).find('input[name="productCount"]').val()?$(this).find('input[name="count"]').val():"",sharedWishList:$(this).find('input[name="sharedWishList"]').val()?$(this).find('input[name="shared"]').val():"",uid:$(this).find('input[name="uid"]').val()};$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesCopy,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(data){ACC.favorites.favoriteSuccess(ACC.favorites.copySuccessMsg);},error:function(data){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("List name must be unique.");}});})
$('form.copy-favorite-wishlist').submit(function(e){e.preventDefault();const data={name:$(this).find('input[name="name"]').val(),newName:$(this).find('input[name="newName"]').val()?$(this).find('input[name="newName"]').val():"",uid:$(this).find('input[name="uid"]').val()};console.log(data);$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesCopy,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(data){ACC.favorites.favoriteWishlistSuccess(ACC.favorites.copySuccessMsg,data);},error:function(data){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("List name must be unique.");}});})
$('form.create-favorite-list').submit(function(e){e.preventDefault();const data={name:$(this).find('input[name="newName"]').val(),}
$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesCreateList,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(res){var trackingData={"date_created":new Date().toISOString(),"favourite_list_id":res,"favourite_list_name":$('form.create-favorite-list').find('input[name="newName"]').val()}
window.dataLayer.push({event:'Favourites list created',...trackingData});location.reload();},error:function(){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').css('display','block').html("List name must be unique.");}});});$('form.delete-favorite-class').submit(function(e){e.preventDefault();const data={name:$(this).find('input[name="name"]').val(),uid:$(this).find('input[name="uid"]').val()}
$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesDelete,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(res){location.href='/favorites';}});});$('.btn-notes').click(function(){$('.wishlist-notes').toggle();});$('.notes-input').focusout(function(){const data={name:$(this).find('input[name="name"]').val(),uid:$(this).find('input[name="uid"]').val(),description:$(this).find('textarea[name="description"]').val().trim()};$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesUpdateNotes,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(data){}})});$('.btn-export-action').click(function(e){e.preventDefault();const data=[];let item_name=$('input[name="name"]').val();$('.ls-fav-entry-container').each(function(){let item_code=$(this).find('input[name="productCodePost"]').val(),item_quantity=$(this).find('input[name="pdpAddtoCartInput"]').val(),item_unitCode=$(this).find('input[name="uomCode"]').val();let isChecked=$(this).find(".ls-product-checked").is(":checked");if(item_code&&item_code!=""&&isChecked){const product={quantity:item_quantity,product:{code:item_code},unit:{code:item_unitCode}}
data.push(product)}});function exportFavoriteToCSV(fileContents,fileName){let linkExport=document.createElement('a');linkExport.download=fileName;linkExport.href=fileContents;linkExport.click();}
$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesExportCSV+"?id="+$("#uiList").val(),data:JSON.stringify(data),contentType:'application/json',success:function(result){let fileContent='data:text/csv;charset=UTF-8,'+encodeURIComponent(result),fileName=item_name+'.csv';exportFavoriteToCSV(fileContent,fileName);var trackingProducts=[];var trackingItems=$(document).find('.ls-fav-entry-container .ls-product-checked:checked').closest('.ls-fav-entry-container').find(".product-component");trackingItems.each(function(index,item){var trackingProduct=ACC.product.handleTrackingData($(item),"favourites");trackingProducts.push(trackingProduct);})
var trackingData={export_date:new Date().toISOString(),favourite_list_id:$(".update-notes-favorite-class").find("#uiList").val(),favourite_list_name:$(".wishlist-owner-container").find(".wishlist-title").text().trim(),products:trackingProducts}
window.dataLayer.push({event:'Favourites list exported',...trackingData});},error:function(e){}})});$('.ls-checked-all').click(function(){ACC.favorites.isSelectAll=!ACC.favorites.isSelectAll;let checkedAll=$('.ls-checked-all').prop('checked');let checkedProducts=$('.ls-product-checked');checkedProducts.prop("checked",checkedAll);if(ACC.favorites.isSelectAll){ACC.favorites.enabledButtons();}else{ACC.favorites.disabledButtons();}});$("#select_all").change(function(){let status=this.checked;$('.checkbox').each(function(){this.checked=status;});if(!status){ACC.favorites.disabledButtons();}else{ACC.favorites.enabledButtons();}
ACC.favorites.setCartButtonState();});$('.checkbox').change(function(){if(this.checked==false){$("#select_all")[0].checked=false;}
if($('.checkbox:checked').length==$('.checkbox').length){$("#select_all")[0].checked=true;}
if($('.checkbox:checked').length>0){ACC.favorites.enabledButtons();}
if($('.checkbox:checked').length===0){ACC.favorites.disabledButtons();}
ACC.favorites.setCartButtonState();});$('.dropbtn').click(function(){ACC.favorites.isCheckSort=!ACC.favorites.isCheckSort;if(!ACC.favorites.isCheckSort){$('.dropdown-content').css('display','block');$('.arrow-button.glyphicon.glyphicon-triangle-bottom').css('transform','rotate(180deg)');}else{$('.dropdown-content').css('display','none');$('.arrow-button.glyphicon.glyphicon-triangle-bottom').css('transform','rotate(0deg)');}})
$(document).click(function(event){if(!event.target.matches('.dropbtn')&&!event.target.matches('.glyphicon-triangle-bottom')){ACC.favorites.isCheckSort=true;$('.dropdown-content').css('display','none');$('.arrow-button.glyphicon.glyphicon-triangle-bottom').css('transform','rotate(0deg)');}})
$('.status-increase').click(function(){document.location.href=String(document.location.href).replace(/#/,"");let url=ACC.favorites.removeUrlSort()+"?sort=name-asc";window.location=url;});$('.status-decrease').click(function(){document.location.href=String(document.location.href).replace(/#/,"");let url=ACC.favorites.removeUrlSort()+"?sort=name-desc";window.location=url;});$('.status-date').click(function(){document.location.href=String(document.location.href).replace(/#/,"");let url=ACC.favorites.removeUrlSort()+"?sort=date";window.location=url;});$('.status-lower-higher').click(function(){document.location.href=String(document.location.href).replace(/#/,"");let url=ACC.favorites.removeUrlSort()+"?sort=productCode-asc";window.location=url;});$('.status-higher-lower').click(function(){document.location.href=String(document.location.href).replace(/#/,"");let url=ACC.favorites.removeUrlSort()+"?sort=productCode-desc";window.location=url;});$('input[name="pdpAddtoCartInput"]').change(function(){quantityFunc(0);});$('.pdp-btn-minus').click(function(){let defaultQty=$(this).parents('.ls-fav-entry-container').find('input[name="pdpAddtoCartInput"]');let defaultQtyValue=defaultQty.val();defaultQty.val(+defaultQtyValue-1);quantityFunc();let defaultQtyValueAfter=defaultQty.val();ACC.favorites.trackFavUpdate(this);defaultQty.val(+defaultQtyValueAfter+1);});$('.pdp-btn-plus').click(function(){let defaultQty=$(this).parents('.ls-fav-entry-container').find('input[name="pdpAddtoCartInput"]');let defaultQtyValue=defaultQty.val();defaultQty.val(+defaultQtyValue+1);quantityFunc();let defaultQtyValueAfter=defaultQty.val();ACC.favorites.trackFavUpdate(this);defaultQty.val(+defaultQtyValueAfter-1);});function quantityFunc(){let dataList={wishlistID:"",qty:[]};let temp_qty=[];$('.ls-fav-entry-container').each(function(index,e){let qty=$(e).find('input[name="pdpAddtoCartInput"]').val();let dataItem={qty:qty,}
temp_qty.push(dataItem)})
dataList.wishlistID=$('#uiList').val();dataList.qty=temp_qty;localStorage.setItem("favEntries",JSON.stringify(dataList));}},replacementProductInFavourites:function(){$(document).on("click",'.ls-product-obsolete',function(e){let dataList=[];let wishListID=$('#uiList').val();let repData=({wishlistId:wishListID,product:{code:$(this).find('input[name="productCode"]').val()},unit:{code:$(this).find('input[name="productUnitCode"]').val()},quantity:$(this).parents('.product-display-lg1-container').find('input[name="pdpAddtoCartInput"]').val()});let obsoleteData=({wishlistId:wishListID,product:{code:$(this).find('input[name="obsoleteCode"]').val()},unit:{code:$(this).find('input[name="obsoleteUnitCode"]').val()}});dataList.push(repData,obsoleteData);console.log(dataList);$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesProductReplacement,data:JSON.stringify(dataList),dataType:'json',contentType:'application/json',success:function(dataRep){ACC.favorites.favoriteSuccessNonScroll(ACC.favorites.listUpdateMsg);$(this).children('.waiting-icon').addClass('ls-icon-hidden');$(this).children('.waiting-icon').removeClass('ls-animate-spin');$(this).children('.ls-icon-close').removeClass('ls-icon-hidden');},})})},saveData:function(){if(localStorage.favEntries){let localFavEntries=JSON.parse(localStorage.favEntries);if(localFavEntries.wishlistID&&localFavEntries.wishlistID===$('#uiList').val()){let dataList=[];$('.ls-fav-entry-container').each(function(index){$(this).find('input[name="pdpAddtoCartInput"]').val(localFavEntries.qty[index].qty);let wishListID=$('#uiList').val();let item_code=$(this).find('input[name="productCodePost"]').val();let qty=$(this).find('input[name="pdpAddtoCartInput"]').val();let item_unitCode=$(this).find('input[name="uomCode"]').val();let dataItem={wishlistId:wishListID,product:{code:item_code},unit:{code:item_unitCode},quantity:qty,}
dataList.push(dataItem);})
$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesUpdatesList,data:JSON.stringify(dataList),dataType:'json',contentType:'application/json',success:function(){localStorage.removeItem("favEntries");},})}}},removeUrlSort:function(){let oldUrl=window.location.href;let indexOfQuery=oldUrl.indexOf("?");if(indexOfQuery!==-1){let newUrl=oldUrl.substring(0,indexOfQuery);return newUrl}
return oldUrl;},enabledButtons:function(){$('.btn-export-action').removeClass('color-gray').addClass("color-orange");$('.btn-export-action').removeClass('border-gray').addClass("border-orange");$('.btn-export-action').removeAttr("disabled",true);$('.ls-fav-owner-user-print-btn').removeAttr("disabled",true);$('.ls-fav-another-user-print-btn').removeAttr("disabled",true);},disabledButtons:function(){$('.btn-export-action').removeClass('color-orange').addClass("color-gray");$('.btn-export-action').removeClass('border-orange').addClass("border-gray");$('.btn-export-action').attr("disabled",true);$('.ls-fav-owner-user-print-btn').attr("disabled",true);$('.ls-fav-another-user-print-btn').attr("disabled",true);},bindOwnerFavouritesShareLink:function(){let bodyEmail="Please%20use%20the%20link%20below%20to%20preview%20My%20Favourites%20List%20displaying%20products%20selected%20from%20Lincoln%20Sentry's%20Online%20store.%20Search%20Lincoln%20Sentry's%20Online%20store%20for%20the%20latest%20products%2C%20brands%20and%20promotions.%0A%0A"
let linkShare=window.location.href;$('.btn-shares-product').attr('href','mailto: ?subject=Share my list products to you&body='+bodyEmail+linkShare);},bindFavoriteShareLink:function(){let bodyEmail="Please%20use%20the%20link%20below%20to%20preview%20My%20Favourites%20List%20displaying%20products%20selected%20from%20Lincoln%20Sentry's%20Online%20store.%20Search%20Lincoln%20Sentry's%20Online%20store%20for%20the%20latest%20products%2C%20brands%20and%20promotions.%0A%0A"
$("[class^='share-list']").each(function(index){let linkShare=window.location.href+'/products/'+$(this).attr('class').slice(11);$(this).attr('href','mailto: ?subject=Lincoln Sentry: Shared Favourites list&body='+bodyEmail+linkShare+"%0A%0A");});},addProductFavoriteListToCart:function(){$('.ls-btn-addtocart').click(function(event){ACC.favorites.addLoadingIcon();var checkedData=$('.ls-fav-entry-container .ls-product-checked:checked');var isAnyProductSelected=checkedData.length>0;if(isAnyProductSelected){var postingData=checkedData.closest('.ls-fav-entry-container');ACC.favorites.addFavoriteProductsToCart(postingData);}else{$('#ls-fav-addAllToCart-modal').modal('show');}});$('.ls-add-all-confirmed').click(function(){var postingData=$('.ls-fav-entry-container');ACC.favorites.addFavoriteProductsToCart(postingData);});$('.ls-add-all-denied-link').click(function(){ACC.favorites.removeLoadingIcon();});},addFavoriteProductsToCart:function(postingData){var productData=[];var products=[];const objectIs=[];const objectDatas=[];postingData.each(function(){var item=$(this).find(".product-component");var product=ACC.product.handleTrackingData(item,"favourites");objectIs.push(product.product_id);objectDatas.push({"price":product.price,"quantity":product.quantity});products.push(product);productData.push({product:{code:$(this).find('input[name="productCodePost"]').val()},unit:{code:$(this).find('input[name="uomCode"]').val()},quantity:$(this).find('input[name="pdpAddtoCartInput"]').val()||$(this).find('.product-quantity-container').data('quantity')||1});});$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesProductsAddToCart,data:JSON.stringify(productData),dataType:'json',contentType:'application/json',beforeSend:function(){if(objectIs&&objectIs.length>0){ACC.algoliaEvent.objectDatas=objectDatas;ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',objectIs,ACC.algoliaSearch.defaultCurrency);}},success:function(res){localStorage.setItem("cartId",res.cartCode);var trackingData={cart_id:res.cartCode,favourite_list_id:$(".update-notes-favorite-class").find("#uiList").val(),favourite_list_name:$(".wishlist-owner-container").find(".wishlist-title").text().trim(),products:products};window.dataLayer.push({event:'Favourite product added to cart',...trackingData});ACC.favorites.removeLoadingIcon();ACC.cart.showCartTooltip(res.totalProduct);ACC.minicart.updateMiniCartDisplay();},error:function(){ACC.favorites.removeLoadingIcon();}});},removeLoadingIcon:function(){var cartIcon=$('.wishlist-add-to-cart').find('.cart-icon');var spinnerIcon=$('.wishlist-add-to-cart').find('.waiting-icon');cartIcon.removeClass('ls-icon-hidden');spinnerIcon.addClass('ls-icon-hidden');$('.wishlist-add-to-cart').prop('disabled',false);},addLoadingIcon:function(){var cartIcon=$('.wishlist-add-to-cart').find('.cart-icon');var spinnerIcon=$('.wishlist-add-to-cart').find('.waiting-icon');cartIcon.addClass('ls-icon-hidden');spinnerIcon.removeClass('ls-icon-hidden');$('.wishlist-add-to-cart').prop('disabled',true);},printFavoriteList:function(){const ROLE_OWNER="OWNER";const ROLE_ANOTHER="ANOTHER";const ROLE_ANONYMOUS="ANONYMOUS";const CHECK_PRINT_WITH_PRICES="true";let roleUser=ROLE_ANONYMOUS;let isPrintWithPrices=false;let isYourLSLists=false;let yourLSWishlistID="";let item_name=$('input[name="name"]').val();ACC.favorites.removeRedundantButton();function callAPIPrintFavoriteList(){if(isYourLSLists){let isPrintForOwner=false;$('.ls-fav-print-confirm-btn').children('.waiting-icon').removeClass('ls-icon-hidden');$('.ls-fav-print-confirm-btn').children('.waiting-icon').addClass('ls-animate-spin');$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesPrintPDFAll+"?wishlistId="+yourLSWishlistID+"&priceIncluded="+isPrintWithPrices+"&printForOwner="+isPrintForOwner,xhrFields:{responseType:'blob'},success:function(result){let blob=new Blob([result]);let link=document.createElement('a');link.href=window.URL.createObjectURL(blob);link.download=item_name+".pdf";link.click();$('.ls-fav-print-cancel-btn').click();$('.ls-fav-print-confirm-btn').children('.waiting-icon').addClass('ls-icon-hidden');$('.ls-fav-print-confirm-btn').children('.waiting-icon').removeClass('ls-animate-spin');},error:function(){$('.ls-fav-print-cancel-btn').click();$('.ls-fav-print-confirm-btn').children('.waiting-icon').addClass('ls-icon-hidden');$('.ls-fav-print-confirm-btn').children('.waiting-icon').removeClass('ls-animate-spin');},})
return;}
let wishListID=$('#uiList').val();let data=[];$('.ls-fav-entry-container').each(function(){let item_code=$(this).find('input[name="productCodePost"]').val();let item_unitCode=$(this).find('input[name="uomCode"]').val();if(roleUser===ROLE_ANONYMOUS){if(item_code===""){return true;}
let product={product:{code:item_code},unit:{code:item_unitCode},wishListID:wishListID}
data.push(product);return true;}
let isChecked=$(this).find(".ls-product-checked").is(":checked");if(item_code&&item_code!=""&&isChecked){let product={product:{code:item_code},unit:{code:item_unitCode},wishListID:wishListID}
data.push(product);}});let isPrintForOwner=false;if(roleUser===ROLE_OWNER){isPrintForOwner=true;}
$('.ls-fav-print-confirm-btn').children('.waiting-icon').removeClass('ls-icon-hidden');$('.ls-fav-print-confirm-btn').children('.waiting-icon').addClass('ls-animate-spin');$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesPrintPDF+"?wishlistId="+wishListID+"&priceIncluded="+isPrintWithPrices+"&printForOwner="+isPrintForOwner,data:JSON.stringify(data),contentType:'application/json',xhrFields:{responseType:'blob'},success:function(result){let blob=new Blob([result]);let link=document.createElement('a');link.href=window.URL.createObjectURL(blob);link.download=item_name+".pdf";link.click();$('.ls-fav-print-cancel-btn').click();$('.ls-fav-print-confirm-btn').children('.waiting-icon').addClass('ls-icon-hidden');$('.ls-fav-print-confirm-btn').children('.waiting-icon').removeClass('ls-animate-spin');},error:function(){$('.ls-fav-print-cancel-btn').click();$('.ls-fav-print-confirm-btn').children('.waiting-icon').addClass('ls-icon-hidden');$('.ls-fav-print-confirm-btn').children('.waiting-icon').removeClass('ls-animate-spin');},});}
$('.ls-fav-print-list-form').submit(function(e){e.preventDefault();let strPrintWithPrices=$(this).find('input[name="favPrintWithPrices"]:checked').val();if(strPrintWithPrices===CHECK_PRINT_WITH_PRICES){isPrintWithPrices=true;}else{isPrintWithPrices=false;}
callAPIPrintFavoriteList()})
$('.ls-fav-owner-user-print-btn').click(function(){roleUser=ROLE_OWNER;isYourLSLists=false;$('.ls-fav-printList-link').click();});$('.ls-fav-another-user-print-btn').click(function(){roleUser=ROLE_ANOTHER;isYourLSLists=false;$('.ls-fav-printList-link').click();});$('.ls-fav-anonymous-user-print-btn').click(function(){roleUser=ROLE_ANONYMOUS;isPrintWithPrices=false;isYourLSLists=false;callAPIPrintFavoriteList();});$('.ls-fav-your-ls-print-btn').click(function(){isYourLSLists=true;yourLSWishlistID=$(this).parents(".favorites-block-content").attr("data-uid");$('.ls-fav-printList-link').click();});$('.ls-fav-your-ls-print-btn').each(function(){let dataCount=+$(this).parents('.favorites-block-content').attr('data-count');if(dataCount<=0){$(this).attr("disabled",true);}})},removeProductFromFavList:function(){$('.ls-fav-product-remove-btn').click(function(){$(this).children('.waiting-icon').removeClass('ls-icon-hidden');$(this).children('.waiting-icon').addClass('ls-animate-spin');$(this).children('.ls-icon-close').addClass('ls-icon-hidden');let context=$(this);let wishListID=$('#uiList').val();let item_code=$(this).parents('.ls-fav-entry-container').find('input[name="productCodePost"]').val();let item_unitCode=$(this).parents('.ls-fav-entry-container').find('input[name="uomCode"]').val();let qty=$(this).parents('.ls-fav-entry-container').find('input[name="pdpAddtoCartInput"]').val();let data={wishlistId:wishListID,product:{code:item_code},unit:{code:item_unitCode},quantity:qty};ACC.global.getFavouritesUpdateTime(wishListID);var item=$(document).find(this).closest(".product-component");var trackingData=ACC.product.handleTrackingData(item,"favourites-remove");$.ajax({type:'POST',url:ACC.favorites.formMethod.favoritesProductRemove,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(res){window.dataLayer.push({event:'Product removed from favourites',...trackingData});ACC.favorites.favoriteSuccessNonScroll(ACC.favorites.listUpdateMsg);$(this).children('.waiting-icon').addClass('ls-icon-hidden');$(this).children('.waiting-icon').removeClass('ls-animate-spin');$(this).children('.ls-icon-close').removeClass('ls-icon-hidden');},error:function(){}});});$('.ls-btn-remove-all').click(function(){$('.ls-fav-removeAllProduct-link').click();});$('.ls-remove-all-confirmed').click(function(){let wishListID=$('#uiList').val();ACC.global.getFavouritesUpdateTime(wishListID);$.ajax({type:"POST",url:ACC.favorites.formMethod.favoritesProductRemoveAll+wishListID,success:function(res){var products=[];var trackingData={favourite_list_id:wishListID,favourite_list_name:$(".wishlist-owner-container").find(".wishlist-title").text().trim(),products:products};for(var i=0;i<res.entries.length;i++){products.push({brand:res.entries[i].product.brandName||"",category:res.entries[i].product.h1Category||"",image_url:(res.entries[i].product.images&&res.entries[i].product.images.length>0)?res.entries[i].product.images[0].url:"",name:res.entries[i].product.name||"",price:res.entries[i].product.price.value||"",product_code:res.entries[i].product.displayCode||"",product_id:res.entries[i].product.code||"",promo:res.entries[i].product.promotionName||"",quantity:res.entries[i].quantity,unit:res.entries[i].product.defaultUnit?"1 "+res.entries[i].product.defaultUnit.name:"1 "+res.entries[i].product.baseUnit.name||"",})};window.dataLayer.push({event:'Remove all from favourites',...trackingData});ACC.favorites.favoriteSuccess(ACC.favorites.listUpdateMsg);},error:function(){},async:false})});},shareFavouriteList:function(){$('.ls-icon-social-share').click(function(e){if(!$('.ls-icon-social-share').parent().hasClass("btn-shares-product")){var numberOfProducts=$(this).parent().parent().parent().parent().find(".favorites-item-count").text();var trackingData={"favourite_list_id":$(document).find(this).closest(".favorites-block-content").data("uid"),"favourite_list_name":$(document).find(this).closest(".favorites-block-content").find(".favorites-name").text(),"number_of_products":+numberOfProducts};window.dataLayer.push({event:'Favourites list shared',...trackingData});}else{var numberOfProducts=$(".ls-fav-entry-container").find(".product-component").length;var trackingData={"favourite_list_id":$('#uiList').val(),"favourite_list_name":$(".update-notes-favorite-class").find('input[name="name"]').val(),"number_of_products":numberOfProducts};window.dataLayer.push({event:'Favourites list shared',...trackingData});}});},checkStatusSort:function(){let url=window.location.href;let iconCheck="<span class=\"ls-icon-tick\"></span>";let indexOfQuery=url.indexOf("?");if(indexOfQuery===-1){}else{let sortType=url.slice(indexOfQuery).slice(6);switch(sortType){case'name-asc':$('.tick-1').removeClass('hidden');break;case'name-desc':$('.tick-2').removeClass('hidden');break;case'date':$('.tick-3').removeClass('hidden');break;case'productCode-asc':$('.tick-4').removeClass('hidden');break;case'productCode-desc':$('.tick-5').removeClass('hidden');break;}}},trackFavUpdate:function(target){if($(".wishlist-owner-container").length>0){var wishListID=$('#uiList').val();ACC.global.getFavouritesUpdateTime(wishListID);var item=$(document).find(target).closest(".product-component");var data={favourites_list_id:$("#uiList").val(),favourites_list_name:$(".wishlist-owner-container").find(".wishlist-title").text().trim(),price:Number(item.find(".promo-price").text().trim().replace(/[^0-9.-]+/g,""))||"",product_id:item.data("product-code")+"",quantity:+item.find(".js-qty-selector-input").val()||"",};window.dataLayer.push({event:'Product updated in favourites',...data});}},bindFavoriteMessageTriggers:function(){$(".wishlist-product").on("click",".input-group-btn",function(){ACC.favorites.favoriteSuccessNonTransition(ACC.favorites.listUpdateMsg);});$(".wishlist-product").on("change",".js-qty-selector-input",function(e){let afterChange=sessionStorage.getItem("qty-input-change");ACC.favorites.favoriteSuccessNonTransition(ACC.favorites.listUpdateMsg);if(afterChange===null){sessionStorage.setItem("qty-input-change","true");}
ACC.favorites.trackFavUpdate(this);});$(".wishlist-content").on("change",".wishlist-notes .input-item-de",function(e){let afterChange=sessionStorage.getItem("qty-input-change");ACC.favorites.favoriteSuccessNonTransition(ACC.favorites.listUpdateMsg);if(afterChange===null){sessionStorage.setItem("qty-input-change","true");}});$(document).ready(function(){let showPopup=sessionStorage.getItem("show-msg");if(showPopup){sessionStorage.removeItem("show-msg");ACC.favorites.showFavoritePopup(ACC.favorites.listUpdateMsg);}});},bindLinkToFavoriteItem:function(){$('.favorites-block-content').each(function(){let linkToFavorite=window.location.origin+'/favorites/products/'+$(this).attr('data-uid');$(this).find('a.favorites-outer-layer').attr('href',linkToFavorite);})},bindFavoritesAction:function(){$('.favorites-button-item').on('click',function(){var target=$(this);var modalId=target.data('modal-id');if(modalId){$(modalId).modal('show');}});},removeRedundantButton:function(){$(".filter-value-block").ready(function(e){if($(".category-filter-section-blocks-content").find(".filter-category-item").hasClass("filter-category-active")){$(".filter-bar-container").closest(".flexbox").show();}})},setCartButtonState:function(){var selectedProduct=$('.wishlist-product-container .ls-product-checked:checked').toArray();var licensedEntries=$('.ls-fav-entry-container .license-product');if(selectedProduct.length===0){if(licensedEntries.length===0){$('.wishlist-product-buttons .js-add-to-cart').prop('disabled',false);$('.wishlist-product-buttons .product-license-message').addClass('hidden');}else{$('.wishlist-product-buttons .js-add-to-cart').prop('disabled',true);$('.wishlist-product-buttons .product-license-message').removeClass('hidden');}
return;}
var isContainLicense=selectedProduct.find(p=>$(p).data('license-product'));if(!!isContainLicense){$('.wishlist-product-buttons .js-add-to-cart').prop('disabled',true);$('.wishlist-product-buttons .product-license-message').removeClass('hidden');}else{$('.wishlist-product-buttons .js-add-to-cart').prop('disabled',false);$('.wishlist-product-buttons .product-license-message').addClass('hidden');}},handleAddToCart:function(){$('.ls-product-checked').change(function(){if($('.ls-fav-entry-container .ls-product-checked:checked').length>0){$('.wishlist-product').find('.wishlist-product-buttons').find('.ls-add-to-cart').find('.wishlist-add-to-cart').prop('disabled',false)}else{$('.wishlist-product').find('.wishlist-product-buttons').find('.ls-add-to-cart').find('.wishlist-add-to-cart').prop('disabled',true)}})
$('.ls-checked-all').change(function(){if($('.ls-checked-all:checked').length>0){$('.wishlist-product').find('.wishlist-product-buttons').find('.ls-add-to-cart').find('.wishlist-add-to-cart').prop('disabled',false)}else{$('.wishlist-product').find('.wishlist-product-buttons').find('.ls-add-to-cart').find('.wishlist-add-to-cart').prop('disabled',true)}})},}
$(document).ready(function(){ACC.favorites.shareFavouriteList();ACC.favorites.checkStatusSort();ACC.favorites.bindSortable();ACC.favorites.bindSortProducts();ACC.favorites.bindEditForm();if($('.favorites-block-content-container').length>0){ACC.favorites.viewFavsList();ACC.favorites.bindFavoriteShareLink();ACC.favorites.bindLinkToFavoriteItem();}
ACC.favorites.bindOwnerFavouritesShareLink();ACC.favorites.addProductFavoriteListToCart();ACC.favorites.enabledButtons();ACC.favorites.disabledButtons();ACC.favorites.removeUrlSort();ACC.favorites.printFavoriteList();ACC.favorites.removeProductFromFavList();ACC.favorites.saveData();ACC.favorites.bindFavoriteMessageTriggers();ACC.favorites.replacementProductInFavourites();ACC.favorites.bindFavoritesAction();ACC.favorites.handleAddToCart();});ACC.favoriteNotification={_autoload:[['handleShowNotification',$('.js-header-session-timeout').length>0]],handleShowNotification:function(){let checkHaveNewList={url:'/favorites/checkUnreadLists',data:{},type:'GET',success:function(data,status,xhr){let isShow=!!data;if(isShow)$('.new-list-container').removeClass('display-hidden');},error:function(xhr,status,error){}};$(".ls-nav-favorites").click(function(){$('.new-list-container').hide();});if(window.location.pathname!=="/favorites"){$.ajax(checkHaveNewList);}}};ACC.category={_autoload:[['bindControlAction',$('.filter-block').length>0]],refreshFlag:false,isFormChange:false,targetSubEntry:null,bindNavigation:function(){$(document).on('click','.category-block-content .sub-category-icon',function(e){const selectedItem=$(this).closest('.sub-category-item');if(!selectedItem.hasClass('category-item-active')){$('.sub-category-item').removeClass('category-item-active')
selectedItem.addClass('category-item-active');selectedItem.parents('.sub-category-item').addClass('category-item-active');}else{selectedItem.removeClass('category-item-active');const childrenCategoryItem=$(selectedItem).find('.sub-category-item');childrenCategoryItem.removeClass('category-item-active')}});$(document).on('click','.filter-category-item-content',function(e){const selectedFilter=$(this).closest('.filter-category-item');selectedFilter.toggleClass('filter-category-active');});$(document).on('click','.sub-filter-block .toggle-container',function(){const targetBlock=$(this).closest('.sub-filter-block');targetBlock.toggleClass('see-more-enable');});$(document).on('click','.category-sort',function(){$(this).toggleClass('sort-active');});$(document).on('click','.sort-entry-action',function(){var isAllowToSubmit=!$(this).hasClass('sort-entry-selected');$('.sort-entry-action').removeClass('sort-entry-selected');$(this).addClass('sort-entry-selected');var filterForm=$('.category-filter-container form');filterForm.find('input[name="sort"]').val($(this).data('code'));ACC.category.refreshFlag=true;if(isAllowToSubmit){filterForm.submit();}});$(document).on('click','.collapse-expand',function(){$(this).closest('.selected-filter-values').toggleClass('expanded');});$(document).on('click','.continue-reading',function(){$(this).closest('.category-container').toggleClass('description-expanded');});$(document).on('click','.category-filter-control-m',function(e){window.scroll(0,0);$('html').addClass('disable-scroll');$('body').addClass('disable-scroll');$('.product-category-content').addClass('filter-activated');e.stopPropagation();});$(document).on('click','.close-filter',function(e){$('html').removeClass('disable-scroll');$('body').removeClass('disable-scroll');$('.product-category-content').removeClass('filter-activated');$('.product-category-filter').removeAttr('style');ACC.category.updateFilter(true);e.stopPropagation();});$(document).on('click','.view-mode-change',function(e){const mode=$(e.currentTarget).data('view-mode');$.cookie("viewMode",mode,{path:window.location.path});location.reload();});$(document).on('click','.product-feature-title',function(){const blockContainer=$(this).closest('.block-content');if(blockContainer.hasClass('list-expanded')){blockContainer.removeClass('list-expanded');blockContainer.closest('.product-feature-recommended-content').removeClass('product-feature-recommended-expanded');}else{$('.product-recommended-content').removeClass('list-expanded');$('.product-features-content').removeClass('list-expanded');blockContainer.addClass('list-expanded');blockContainer.closest('.product-feature-recommended-content').addClass('product-feature-recommended-expanded');}});$(document).on('click','.filter-blocks-control-pre',function(e){var scrollElement=$('.main-filter-container');scrollElement.animate({scrollLeft:'-=200px'},100);});$(document).on('click','.filter-blocks-control-next',function(e){var scrollElement=$('.main-filter-container');scrollElement.animate({scrollLeft:'+=200px'},100);});$(document).on('click','.mega-menu-block a',function(e){sessionStorage.setItem("algolia-search","false");});const descHeight=$('.category-description')[0]?$('.category-description')[0].scrollHeight:$('.category-description').height();const viewPortWidth=$(window).width();if((viewPortWidth<=640&&descHeight>242)||(viewPortWidth<1366&&viewPortWidth>640&&descHeight>110)||(viewPortWidth>=1366&&descHeight>44)){$('.category-container').addClass('description-exceeded');}},bindSelected:function(){const selectedContext=$('.sub-category-item.category-item-active');if(selectedContext&&selectedContext.length>0){$(selectedContext).parents('.sub-category-item').addClass('category-item-active');}
const selectedFilter=$('input.ls-checkbox:checked');if(selectedFilter.length>0){selectedFilter.closest('.filter-category-item').addClass('filter-category-active');}
$('input.ls-checkbox').one('change',function(e){$(this).closest('form').submit();});},bindControlAction:function(){$(document).on('click','.clear-filter-selection',function(e){var targetBlock=$(e.target).closest('.filter-block');targetBlock.find('.ls-filter-checkbox').prop('checked',false);targetBlock.removeClass('selected');targetBlock.find('.filter-count').text('');targetBlock.find('.filter-count').addClass('hidden');targetBlock.find('.sub-filter-count').text('');targetBlock.find('.sub-filter-count').addClass('hidden');ACC.category.updateTotalCount();ACC.category.isFormChange=true;});$(document).on('click','.listing-update-button',function(e){$(this).closest('.filter-block').removeClass('active');ACC.category.isFormChange=true;ACC.category.updateFilter(true);});$(document).on('click','.filter-block-header',function(e){if($(e.target).hasClass('active')||$(e.target).closest('.filter-block').hasClass('active')){ACC.category.updateFilter(true);}
var targetBlock=$(e.target).closest('.filter-block');var isTargetActive=targetBlock.hasClass('active');var isMobileFilterActive=targetBlock.closest('.product-category-content').hasClass('filter-activated');if(isTargetActive||$('.filter-block').hasClass('active')){$('.filter-block').removeClass('active');isTargetActive?targetBlock.removeClass('active'):targetBlock.addClass('active');ACC.category.updateFilter(isTargetActive&&!isMobileFilterActive);ACC.category.targetSubEntry=null;}else{targetBlock.addClass('active');}
var controlElement=$('.filter-blocks-control-pre:visible');var offset=$(this).closest('.filter-block').offset().left;$(this).closest('.filter-block').find('.filter-block-content').removeAttr('style');if(controlElement.length>0){if(offset+$(this).closest('.filter-block').find('.filter-block-content').outerWidth()>$(window).width()-15){$(this).closest('.filter-block').find('.filter-block-content').css('right','0px');return;}
if(offset-15<0){$(this).closest('.filter-block').find('.filter-block-content').css('left','0px');return;}
$(this).closest('.filter-block').find('.filter-block-content').css('left',offset-15+'px');}else{if($(window).width()<1366&&offset+$(this).closest('.filter-block').find('.filter-block-content').outerWidth()>$(window).width()-15){$(this).closest('.filter-block').find('.filter-block-content').css('right','0px');return;}
$(this).closest('.filter-block').find('.filter-block-content').removeAttr('style');}});$(document).on('click','.sub-filter-block-header',function(e){var subBlock=$(e.target).closest('.sub-filter-block');var isTargetActive=subBlock.hasClass('active');$('.sub-filter-block').removeClass('active');if(isTargetActive){subBlock.removeClass('active');ACC.category.targetSubEntry=null;}else{subBlock.addClass('active')
ACC.category.updateFilter(false);ACC.category.targetSubEntry=subBlock.data('filter-code');}});$(document).on('change','.selection-checkbox .ls-filter-checkbox',function(e){ACC.category.isFormChange=true;var targetBlock=$(this).closest('.filter-block');var selections=targetBlock.find('.ls-filter-checkbox:checked:not(.view-all)');var count=selections.length;if(!e.target.checked){targetBlock.find('.selection-checkbox .ls-filter-checkbox.view-all').prop('checked',false);}else{var elementLength=targetBlock.find('.selection-checkbox .ls-filter-checkbox:not(.view-all)');var viewAllBlock=targetBlock.find('.selection-checkbox .ls-filter-checkbox.view-all');if(selections.length===elementLength.length&&viewAllBlock.length>0){viewAllBlock.prop('checked',true);}}
if(selections.length>0){targetBlock.find('.filter-count').text(`(${count})`);targetBlock.find('.filter-count').removeClass('hidden');targetBlock.addClass('selected');}else{targetBlock.removeClass('selected');targetBlock.find('.filter-count').text('');targetBlock.find('.filter-count').addClass('hidden');}
var subFilterBlock=$(this).closest('.sub-filter-block');if(subFilterBlock.length>0){var checkedLength=subFilterBlock.find('.ls-filter-checkbox:checked').length;if(checkedLength>0){subFilterBlock.find('.sub-filter-count').text(`(${checkedLength})`);subFilterBlock.find('.sub-filter-count').removeClass('hidden');}else{subFilterBlock.find('.sub-filter-count').text('');subFilterBlock.find('.sub-filter-count').addClass('hidden');}}
sessionStorage.setItem("algolia-search","false");ACC.category.updateTotalCount();});$(document).on('click',function(e){var target=$(e.target);if(target.hasClass('filter-block')||target.closest('.filter-block').length>0){return;}
var isFilterActive=$('.filter-block-content:visible');if(isFilterActive.length>0){isFilterActive.closest('.filter-block').removeClass('active');isFilterActive.closest('.filter-block').find('.sub-filter-block').removeClass('active');isFilterActive.closest('.filter-block').find('.sub-filter-block').removeClass('see-more-enable');var isMFilterActivated=target.closest('.product-category-content.filter-activated').length>0;if(isMFilterActivated){return;}
ACC.category.updateFilter(true);}});$(document).on('change','.selection-checkbox .ls-filter-checkbox.view-all',function(e){var targetBlock=$(this).closest('.filter-block');var selections=targetBlock.find('.ls-filter-checkbox');if(e.target.checked){selections.prop('checked',true);targetBlock.find('.filter-count').text(`(${selections.length - 1})`);targetBlock.find('.filter-count').removeClass('hidden');targetBlock.addClass('selected');}else{selections.prop('checked',false);targetBlock.find('.filter-count').text('');targetBlock.find('.filter-count').addClass('hidden');}
ACC.category.updateTotalCount();});$(document).on('click','.mobile-update-result',function(e){ACC.category.isFormChange=true;ACC.category.updateFilter(true);});if($(".pagination-item:eq(2)").find("a").length>0){$(".pagination-item:eq(2)").find("a").attr("href",window.location.origin+window.location.pathname);}},updateFilter:function(resetFlag){ACC.category.refreshFlag=resetFlag;var filterBlocks=$('.filter-block').toArray().filter(function(block){return $(block).data('filter-code')});var fullQuery=[];var filterForm=$('.category-filter-container form');var sortQuery=filterForm.find('input.sort-query');var textSearch=filterForm.find('input[name="text"]');fullQuery.push(textSearch.val()||'');if(sortQuery.val()){fullQuery.push(sortQuery.val());}
var query=filterBlocks.map(function(item){var code=$(item).data('filter-code');var selected=$(item).find('.ls-filter-checkbox:checked:not(.view-all)').toArray();return selected?selected.map(function(it){return`${code}:${$(it).val()}`;}).join(':'):'';}).filter(function(q){return q.length>0;});if(query.length>0){fullQuery.push(query.join(':'));}
var moreFilterBlocks=$('.sub-filter-block').toArray().filter(function(block){return $(block).data('filter-code')});var moreQuery=moreFilterBlocks.map(function(item){var code=$(item).data('filter-code');var selected=$(item).find('.ls-filter-checkbox:checked').toArray();return selected?selected.map(function(it){return`${code}:${$(it).val()}`;}).join(':'):'';}).filter(function(q){return q.length>0;});if(moreQuery.length>0){fullQuery.push(moreQuery.join(':'));}
filterForm.find('input[name="q"]').val(fullQuery.join(':'));if(ACC.category.isFormChange){filterForm.submit();}},bindSubmitFilter:function(){var filterForm=$('.category-filter-container form');filterForm.ajaxForm({beforeSubmit:function(){var currentUrl=this.url;this.url=currentUrl.split('?').shift();$('.selection-checkbox .ls-filter-checkbox').prop('disabled',true);$('.filter-block .clear-filter-selection').prop('disabled',true);$('.filter-block .listing-update-button').prop('disabled',true);},success:function(data){if(ACC.category.refreshFlag){window.location.href=this.url;return;}
var existingHeader=$('.filter-block .filter-block-header');for(var i=0;i<existingHeader.length;i++){$(existingHeader.eq(i)).replaceWith($(data).find('.filter-block .filter-block-header').eq(i));}
var existingFilter=$('.filter-block .filter-block-content');for(var i=0;i<existingHeader.length;i++){$(existingFilter.eq(i)).replaceWith($(data).find('.filter-block .filter-block-content').eq(i));}
if(ACC.category.targetSubEntry){var selectedBlock=$(`.filter-block:not([data-filter-code]) .sub-filter-block[data-filter-code="${ACC.category.targetSubEntry}"]`);selectedBlock.addClass("active");}
ACC.category.targetSubEntry=null;$('.selection-checkbox .ls-filter-checkbox').prop('disabled',false);$('.filter-block .clear-filter-selection').prop('disabled',false);$('.filter-block .listing-update-button').prop('disabled',false);},error:function(){ACC.category.refreshFlag=false;$('.selection-checkbox .ls-filter-checkbox').prop('disabled',false);$('.filter-block .clear-filter-selection').prop('disabled',false);$('.filter-block .listing-update-button').prop('disabled',false);}});},updateTotalCount:function(){var totalCount=$('.filter-block .ls-filter-checkbox:checked').length;var totalCountEle=$('.ls-filter-blocks-container .total-filter-count');totalCountEle.text(totalCount);if(totalCount>0){totalCountEle.removeClass('hidden');}else{totalCountEle.addClass('hidden');}}}
$(document).ready(function(){ACC.category.bindNavigation();ACC.category.bindSelected();ACC.category.bindSubmitFilter();});ACC.cookiefunction={cookieList:function(cookieName){const cookie=$.cookie(cookieName);let items=cookie?JSON.parse(cookie):[];items.sort(function(a,b){return new Date(a.date).getTime()-new Date(b.date).getTime();});return{"add":function(val){items.push(val);if(items.length>=10){items.splice(0,items.length-10);}
$.cookie(cookieName,JSON.stringify(items));},"remove":function(val){let index=items.indexOf(val);if(index!==-1)items.splice(index,1);$.cookie(cookieName,JSON.stringify(items));},"clear":function(){items.length=0;$.cookie(cookieName,null);},"items":function(){return items;}}}};ACC.saveFavorite={formMethod:{favoritesOrder:'/favorites/order',favoritesShare:'/favorites/share',favoritesCreateList:'/favorites',favoritesUpdateList:'/favorites/update',favoritesCopy:'/favorites/copy',favoritesDelete:'/favorites/remove',favoritesUpdateNotes:'/favorites/update-note',favoritesGetAllLists:'/favorites/getAllWishList',favoritesAddProductToWishlist:'/favorites/product-add',favoritesGetAllProduct:'/favorites/product-getAll'},isSubmitCreateFav:true,isReplacementProduct:false,bindFavListSelect:function(){$('.fav-list').on('click',function(){const wishlistId=$(this).attr('class').split(' ')[1];const wishlistName=$(this).find('.fav-list-name').html();$('.save-product-data').find('input[name="wishlistId"]').val(wishlistId);$('#saveProductToWishlist').find('.save-wishlist-name').html(wishlistName);$('#saveFavoriteModal').modal('hide');$('#saveProductToWishlist').modal('show');return;})},preventDefaultOnClickModal:function(){if($('#saveFavoriteModal, #createFavoriteListModal, #saveProductToWishlist').length>0){$('#saveFavoriteModal, #createFavoriteListModal, #saveProductToWishlist').click(function(e){e.stopPropagation();})}else if($("*[id^='copyFavoriteModal']").length>0){$("*[id^='copyFavoriteModal']").click(function(e){e.stopPropagation();})}},updateFavoriteNavIndicatorInfo:function(dataName){let newFavListLength=$('.favorites-scroll-container').children().length+1;$('.nav-item-counter').html(newFavListLength.toString());let newListElement=" <div class=\"ls-menu-item-link\"><a><span>"+dataName+"</span></a></div>";$('.favorites-scroll-container').prepend(newListElement);},validateTypingCreateForm:function(){$('.create-wishlist-container').find('form.create-favorite-list-otf').on('input',function(e){let newName=$(this).find('input[name="newName"]').val();if(newName.trim()===""){$('.copy-button').attr('disabled',true).addClass('not-allowed-button');$('.modal-error-message').addClass('show-modal-element').removeClass('hide-modal-element').html("Please input a valid name.");}else{$('.copy-button').removeAttr('disabled').removeClass('not-allowed-button');$('.modal-error-message').addClass('hide-modal-element').removeClass('show-modal-element');}});},onclickCancelButtonBinding:function(){$('.create-wishlist-container').find('.button-cancel-left').click(function(){$('#saveFavoriteModal').find('.create-wishlist-container').addClass('hide-modal-element').removeClass('show-modal-element');$('.create-list-button').addClass('show-modal-element').removeClass('hide-modal-element');$('form.create-favorite-list-otf').off("submit");$('form.create-favorite-list-otf').off("input");});ACC.saveFavorite.resetFormCreate();},onSubmitCreateListOTF:function(){var isSubmit=true;$('.create-wishlist-container').find('form.create-favorite-list-otf').submit(function(e){e.preventDefault();$(this).find(':submit').attr('disabled','disabled');$('#saveFavoriteModal').find('.create-button').attr('disabled',true).addClass('not-allowed-button')
const data={name:$(this).find('input[name="newName"]').val().toString(),}
if(isSubmit){$.ajax({type:'POST',url:ACC.saveFavorite.formMethod.favoritesCreateList,data:JSON.stringify(data),dataType:'json',contentType:'application/json',success:function(wishlistId){var trackingData={"date_created":new Date().toISOString(),"favourite_list_id":wishlistId,"favourite_list_name":$('.newListName').val()||""};window.dataLayer.push({event:'Favourites list created',...trackingData});isSubmit=false;$('form.create-favorite-list-otf').submit(()=>{return false;});ACC.saveFavorite.onCreateOTFSuccess(data.name,wishlistId);ACC.saveFavorite.updateFavoriteNavIndicatorInfo(data.name);},error:()=>{$(this).find('.create-button').attr('disabled',true).addClass('not-allowed-button');$(this).find('.modal-error-message').addClass('show-modal-element').removeClass('hide-modal-element').html("List name must be unique.");}});}else{return false;}})},bindCreateFavListButton:function(){$('#saveFavoriteModal').find('.create-list-button').click(function(){$('#saveFavoriteModal').find('.create-wishlist-container').addClass('show-modal-element').removeClass('hide-modal-element')
$(this).addClass('hide-modal-element').removeClass('show-modal-element');ACC.saveFavorite.onclickCancelButtonBinding();ACC.saveFavorite.onSubmitCreateListOTF();ACC.saveFavorite.validateTypingCreateForm();})},resetFormCreate:function(){const formCreate=$('#saveFavoriteModal').find('.create-wishlist-container');formCreate.find('input[name="newName"]').val("");formCreate.find('.modal-error-message').addClass('hide-modal-element').removeClass('show-modal-element');formCreate.find('.create-button').attr('disabled',true).addClass('not-allowed-button');},onCreateOTFSuccess:function(newListName,wishlistId){let saveListClassName='fav-list '+wishlistId+" NoShade";let saveListsContainer=$('#saveFavoriteModal').find('.save-lists-container');let listElementString="<div class='{saveListClassName}'><p class='fav-list-name'></p><span class='ls-icon-heart-stroke icon-fav-list'></span></div>"
let newListElementName=$(listElementString).find('.fav-list-name').text(newListName);let newListElement=listElementString.replace('{saveListClassName}',saveListClassName).replace("<p class='fav-list-name'></p>",newListElementName.prop('outerHTML'))
saveListsContainer.prepend(newListElement);ACC.saveFavorite.resetFormCreate();$('#saveFavoriteModal').find('.create-wishlist-container').addClass('hide-modal-element').removeClass('show-modal-element');$('.create-list-button').addClass('show-modal-element').removeClass('hide-modal-element');ACC.saveFavorite.bindFavListSelect();},initCreateOTFModal:function(prodCodeArg){$('#saveFavoriteModal').find('.save-lists-container').empty();localStorage.removeItem("prodCodeArr");let prodCodeArr=[];if(typeof prodCodeArg==="string"){let productUnitCode=$('.save-product-data').find('input[name="productUnitCode"]').val().toString();const data={product:{code:prodCodeArg},unit:{code:productUnitCode||$(`.product-component[data-product-code=${prodCodeArg}]`).find('input[name="uomCode"]').val().toString()}};const currentQuantity=$(`.product-component[data-product-code=${prodCodeArg}]`).find('input.js-qty-selector-input').val().toString()
$('.save-product-data').find('input[name="productUnitCode"]').val(data.unit.code);$('.save-product-data').find('input[name="productCode"]').val(prodCodeArg);$('.save-product-data').find('input[name="currentProductQuantity"]').val(currentQuantity);prodCodeArr.push(data);}else{prodCodeArr=prodCodeArg;localStorage.setItem("prodCodeArr",JSON.stringify(prodCodeArr));}
$.ajax({type:'POST',data:JSON.stringify(prodCodeArr),dataType:'json',contentType:'application/json',url:ACC.saveFavorite.formMethod.favoritesGetAllLists,success:function(response){const listsElement=ACC.saveFavorite.renderSavedList(response);$('#saveFavoriteModal').find('.save-lists-container').append(listsElement);ACC.saveFavorite.bindFavListSelect();}});},renderSavedList:function(savedLists){const fullyShadeIcon="<span class='ls-icon-heart-full icon-fav-list'></span>";const halfShadeIcon="<span class='ls-icon-heart-haft icon-fav-list'></span>";const noShadeIcon="<span class='ls-icon-heart-stroke icon-fav-list'></span>";return savedLists.reduce((acc,list)=>{let listIcon="";if(list.shadeStatus==="NoShade"){listIcon=noShadeIcon;}else if(list.shadeStatus==="HalfShade"){listIcon=halfShadeIcon;}else{listIcon=fullyShadeIcon;}
const classNameWithIdList='fav-list '+list.uid.toString()+' '+list.shadeStatus.toString();let saveListString="<div class='{classNameWithIdList}'><p class='fav-list-name'></p>{listIcon}</div>";let nameListElem=$(saveListString).find('.fav-list-name').text(list.name.toString());let saveList=saveListString.replace('{classNameWithIdList}',classNameWithIdList).replace("{listIcon}",listIcon).replace("<p class='fav-list-name'></p>",nameListElem.prop('outerHTML'))
return acc+saveList;},'')},initProductsDataCartPage:function(){const productsData=[];$('.ls-cart-item').each(function(){const productCode=$(this).find('.code').html().slice(14);let productUnicode=$(this).find('input.uom-code-info').val();if($(this).find('.uom-selector.js-select-uom').length>0){productUnicode=$(this).find('.uom-selector.select option:selected').val();}
const productQuantity=$(this).find('input.input-number').val();productsData.push({quantity:productQuantity,product:{code:productCode},unit:{code:productUnicode}})});return productsData;},initProductDataPdp:function(){$('.btn-favourites').click(function(){var price=+$('.product-size-xl-content').find(".promo-price").text().trim().replace(/[^0-9.-]+/g,"");localStorage.setItem("tracking_price_fav",price);})},initProductDataComponent:function(){$('.heart-icon-fav').click(function(){var price=+$(this).parents('.product-component').find(".promo-price").text().trim().replace(/[^0-9.-]+/g,"");localStorage.setItem("tracking_price_fav",price);});},createProductReplacementData:function(){var productReplacementContentEle=$('.product-replacement-content'),productReplacementPopUpEle=$('.product-replacement-popup');if(productReplacementPopUpEle.length){var currentQuantity="1";if(productReplacementContentEle.find('input[name="isObsolete"]').val()==='false'){currentQuantity=productReplacementContentEle.find('input.pdp-quantity-input').last().val().toString();}
if(productReplacementContentEle.find('input[name="productUom"]').val()){var productUom=productReplacementContentEle.find('input[name="productUom"]').val().toString();$('.save-product-data').find('input[name="productUom"]').val(productUom);}
if(productReplacementContentEle.find('input[name="productCode"]').val()){var productsData=productReplacementContentEle.find('input[name="productCode"]').val().toString();$('.save-product-data').find('input[name="productCode"]').val(productsData);}
if(productReplacementContentEle.find('input[name="productUnitCode"]').val()){var productUnitCode=productReplacementContentEle.find('input[name="productUnitCode"]').val().toString();$('.save-product-data').find('input[name="productUnitCode"]').val(productUnitCode);}
if(productReplacementContentEle.find('input[name="productMinOrderQuan"]').val()){var productMinOrderQuan=productReplacementContentEle.find('input[name="productMinOrderQuan"]').val().toString();$('.save-product-data').find('input[name="productMinOrderQuan"]').val(productMinOrderQuan);}
$('.save-product-data').find('input[name="currentProductQuantity"]').val(currentQuantity);ACC.saveFavorite.isReplacementProduct=true;}},bindingDataProduct:{productsCartPage:function(){let productsDataArray=[];$('.ls-cart-item').each(function(){const productCode=$(this).find('input.product-code-info').val();const isExist=productsDataArray.find(item=>item.product?.code===productCode);let productUnicode=$(this).find('input.uom-code-info').val();if(!isExist){if($(this).find('.obselete-container').length>0){productsDataArray.push({quantity:($(`.product-component[data-product-code=${productCode}]`).length).toString(),product:{code:productCode},unit:{code:productUnicode}});}else{if($(this).find('.uom-selector.js-select-uom').length>0){productUnicode=$(this).find('.uom-selector.select option:selected').val();}
const productArray=$(`.product-component[data-product-code=${productCode}]`).toArray();const quantity=productArray.reduce((a,item)=>a+(+$(item).find('input.js-qty-selector-input.pdp-quantity-input').val()),0);productsDataArray.push({quantity:quantity.toString(),product:{code:productCode},unit:{code:productUnicode}})}}});return productsDataArray;},productDetailPage:function(productCode){let productUnitCode=$('.product-size-xl-content').find('input[name="productUnitCode"]').val();if($('.uom-selector.select').length>0){productUnitCode=$('.product-size-xl-content').find('.uom-selector.select option:selected').val();}
let currentQuantity="1";if($('.product-size-xl-content').find('input.pdp-quantity-input').length>0){currentQuantity=$('.product-size-xl-content').find('input.pdp-quantity-input').val().toString();}
const productMinOrderQuan=$('.product-size-xl-content').find('input[name="productCode"]').val().toString();$('.save-product-data').find('input[name="productCode"]').val(productCode);$('.save-product-data').find('input[name="productUnitCode"]').val(productUnitCode);$('.save-product-data').find('input[name="productMinOrderQuan"]').val(productMinOrderQuan);$('.save-product-data').find('input[name="currentProductQuantity"]').val(currentQuantity);}}};$(document).ready(function(){ACC.saveFavorite.initProductDataComponent();ACC.saveFavorite.initProductDataPdp();ACC.saveFavorite.preventDefaultOnClickModal();let productsData="";if($('.cart-product-left').find('.ls-btn-favorites').length>0){productsData=ACC.saveFavorite.bindingDataProduct.productsCartPage();}
else{$(document).on('click','.heart-icon-fav',function(e){let currentQuantity="1";if($(this).parent().find('input[name="isObsolete"]').val()==='false'){currentQuantity=$(this).parents('.product-component').find('input.pdp-quantity-input').val().toString();}
let productUom=$(this).parent().find('input[name="productUom"]').val().toString();productsData=$(this).parent().find('input[name="productCode"]').val().toString();let productUnitCode=$(this).parent().find('input[name="productUnitCode"]').val().toString();let productMinOrderQuan=$(this).parent().find('input[name="productMinOrderQuan"]').val().toString();$('.save-product-data').find('input[name="productUom"]').val(productUom);$('.save-product-data').find('input[name="productCode"]').val(productsData);$('.save-product-data').find('input[name="productUnitCode"]').val(productUnitCode);$('.save-product-data').find('input[name="productMinOrderQuan"]').val(productMinOrderQuan);$('.save-product-data').find('input[name="currentProductQuantity"]').val(currentQuantity);});$('.btn-favourites').click(function(){productsData=$('.product-size-xl-content').find('input[name="productCode"]').val().toString();ACC.saveFavorite.bindingDataProduct.productDetailPage(productsData);});}
if($('#saveFavoriteModal').length>0){$("#saveFavoriteModal").on("shown.bs.modal",function(e){let triggerProductData;const isCartAction=$(e.relatedTarget).closest('.product-component').length===0;if(ACC.saveFavorite.isReplacementProduct){productsData=$('.save-product-data').find('input[name="productCode"]').val().toString();}
if($('.ls-account-popular-products-container').length>0){const storeProducts=JSON.parse(localStorage.getItem('selectedPopularProducts'))||[];productsData=storeProducts.map(product=>{return{product:{code:product.product.code},quantity:product.quantity,unit:{code:product.unit.code}};});}
if(!isCartAction){const productComponent=$(e.relatedTarget).closest('.product-component');triggerProductData=productComponent.data('product-code').toString();}
ACC.saveFavorite.initCreateOTFModal(isCartAction?productsData:triggerProductData);ACC.saveFavorite.resetFormCreate();});ACC.saveFavorite.bindCreateFavListButton();}});ACC.productSitemap={_autoload:["bindProduct",],bindProduct:function(){var BLOCK_CSS="block";var NONE_CSS="none";var coll=document.getElementsByClassName("js-drop");for(var i=0;i<coll.length;i++){coll[i].addEventListener("click",function(){this.parentElement.classList.toggle("active");var content=this.parentElement.nextElementSibling;if(content.style.display===BLOCK_CSS){content.style.display=NONE_CSS;this.classList.replace('ls-icon-arrow-three-up','ls-icon-arrow-three-down');}else{content.style.display=BLOCK_CSS;this.classList.replace('ls-icon-arrow-three-down','ls-icon-arrow-three-up');}});}
var collSub=document.getElementsByClassName("js-sub-drop");for(var i=0;i<collSub.length;i++){collSub[i].addEventListener("click",function(){this.parentElement.classList.toggle("active");var content=this.parentElement.nextElementSibling;if(content.style.display===BLOCK_CSS){content.style.display=NONE_CSS;this.classList.replace('ls-icon-arrow-three-up','ls-icon-arrow-three-down');}else{content.style.display=BLOCK_CSS;this.classList.replace('ls-icon-arrow-three-down','ls-icon-arrow-three-up');}});}}};ACC.brand={bindNavigation:function(){$('.brand-info .toggle-container').on('click',function(){$(this).closest('.brand-info').toggleClass('brand-expanded');});const descHeight=$('.brand-description')[0]?$('.brand-description')[0].scrollHeight:$('.brand-description').height();const viewPortWidth=$(window).width();if((viewPortWidth<=640&&descHeight>308)||(viewPortWidth<1366&&viewPortWidth>640&&descHeight>154)||(viewPortWidth>=1366&&descHeight>88)){$('.brand-info').addClass('brand-exceed');}}}
$(document).ready(function(){ACC.brand.bindNavigation();});ACC.latestreleases={_autoload:["resizeFn"],resizeFn:function(){var bounds=[{min:0,max:640},{min:640,max:1023},];var currentPath=window.location.href;if(currentPath.includes('latest-release/pages/')){$('.js-mainHeader').css('margin-bottom','0px');}
var chosen=null;var width=window.innerWidth;if(width<bounds[1].max){$(".ls-latestrelease-toggle").hide();$(".ls-latestrelease-toggle-mobile").hide();if(chosen==null){$(".ls-latestrelease-toggle").first().show();$(".ls-latestrelease-toggle-mobile").first().show();chosen=$(".ls-subCategories_item").first().data("categorycode");$('#'+chosen+'-selector').addClass("ls-isActive");$(".ls-separator-small").hide();$('#'+chosen+'-separator').show();$('.ls-category-title').hide();}
else{$('#'+chosen+'-section').show();$('#'+chosen+'-selector').addClass("ls-isActive");$('#'+chosen+'-selector').addClass("ls-isActive-mobile");$(".ls-separator-small").hide();$('#'+chosen+'-separator').show();$('.ls-category-title').hide();}}
if(width>bounds[1].max){$(".ls-latestrelease-toggle").show();$(".ls-latestrelease-toggle-mobile").show();$(".ls-separator-small").hide();if(chosen!=null){$('#'+chosen+'-selector').removeClass("ls-isActive");$('#'+chosen+'-selector').removeClass("ls-isActive-mobile");}
$('.ls-category-title').show();}
$(".ls-subCategories_item").on("click",function(){width2=window.innerWidth;if(width2>bounds[0].min&&width2<bounds[1].max){$('#'+chosen+'-selector').removeClass("ls-isActive");$('#'+chosen+'-selector').removeClass("ls-isActive-mobile");if(chosen!==$(this).data("categorycode")){$('#icon-up-arrow-'+chosen).removeClass("show-panel");$('#icon-up-arrow-'+chosen).addClass("hide-panel");$('#icon-down-arrow-'+chosen).removeClass("hide-panel");$('#icon-down-arrow-'+chosen).addClass("show-panel");}
chosen=$(this).data("categorycode");$('#'+chosen+'-selector').addClass("ls-isActive");$('#'+chosen+'-selector').addClass("ls-isActive-mobile");$(".ls-latestrelease-toggle").hide();$(".ls-latestrelease-toggle-mobile").hide();$('#'+chosen+'-section').show();$('#'+chosen+'-section-mobile').show();$(".ls-separator-small").hide();$('#'+chosen+'-separator').show();}
if(width2>bounds[1].max){chosen=$(this).data("categorycode");$('html,body').animate({scrollTop:$('#'+chosen+'-section').offset().top},'slow');}
var currentArrowDownEle=$('#icon-down-arrow-'+chosen),currentArrowUpEle=$('#icon-up-arrow-'+chosen),currentCategoryEle=$('#product-carousel-mobile-'+chosen);if(currentArrowDownEle.hasClass('show-panel')){currentArrowDownEle.removeClass('show-panel');currentArrowDownEle.addClass('hide-panel');currentArrowUpEle.removeClass('hide-panel');currentArrowUpEle.addClass('show-panel');currentCategoryEle.removeClass("hide-category");currentCategoryEle.addClass("show-category");}else{currentArrowDownEle.removeClass('hide-panel');currentArrowDownEle.addClass('show-panel');currentArrowUpEle.removeClass('show-panel');currentArrowUpEle.addClass('hide-panel');currentCategoryEle.removeClass("show-category");currentCategoryEle.addClass("hide-category");}});$(window).resize(function(){var width=$(window).width();if(width>bounds[0].min&&width<bounds[1].max){$(".ls-latestrelease-toggle").hide();$(".ls-latestrelease-toggle-mobile").hide();if(chosen==null){$(".ls-latestrelease-toggle").first().show();$(".ls-latestrelease-toggle-mobile").first().show();chosen=$(".ls-subCategories_item").first().data("categorycode");$('#'+chosen+'-selector').addClass("ls-isActive");$('#'+chosen+'-selector').addClass("ls-isActive-mobile");$(".ls-separator-small").hide();$('#'+chosen+'-separator').show();$('.ls-category-title').hide();}
else{$('#'+chosen+'-section').show();$('#'+chosen+'-selector').addClass("ls-isActive");$('#'+chosen+'-selector').addClass("ls-isActive-mobile");$(".ls-separator-small").hide();$('#'+chosen+'-separator').show();$('.ls-category-title').hide();}}
if(width>bounds[1].max){$(".ls-latestrelease-toggle").show();$(".ls-latestrelease-toggle-mobile").show();$(".ls-separator-small").hide();if(chosen!=null){$('#'+chosen+'-selector').removeClass("ls-isActive");$('#'+chosen+'-selector').removeClass("ls-isActive-mobile");}
$('.ls-category-title').show();}});},};ACC.saveProductToWishlist={formMethod:{favoritesUpdateProductInWishlist:'/favorites/product-add',favoritesGetAllProduct:'/favorites/product-getAll',},addAndMinusQuantityHandler:function(){$('.plus-button').click(function(){let currentInput=$(this).parent().find('input.number-indicator');if(+currentInput.val()===+currentInput.attr('max')){return;}
let step=currentInput.data('step');currentInput.val(+currentInput.val()+step);ACC.saveProductToWishlist.checkExistAndNewQuantity();})
$('.minus-button').click(function(){let currentInput=$(this).parent().find('input.number-indicator');if(+currentInput.val()===+currentInput.attr('min')){return;}
let step=currentInput.data('step');if((+currentInput.val()-step)<=+currentInput.attr('min')){if(+currentInput.attr('min')!=0){currentInput.val(+currentInput.attr('min'));}
return;}
currentInput.val(+currentInput.val()-step);ACC.saveProductToWishlist.checkExistAndNewQuantity();})},updateQtyValue:function(self,value,step,roundingRule){var input=$(self);var modularValue=parseFloat(value)%parseFloat(step);if(modularValue==0){input.val(value);}
else{if(typeof roundingRule=='undefined'){ACC.productDetail.roundValuesUp(step,modularValue,value,input);}
else{if(roundingRule==='I3'||roundingRule==='O3'){if(modularValue<step/2){ACC.productDetail.roundValuesDown(step,modularValue,value,input);}
else{ACC.productDetail.roundValuesUp(step,modularValue,value,input);}}
else{ACC.productDetail.roundValuesUp(step,modularValue,value,input);}}}},roundValuesUp:function(step,modularValue,value,input){$(input).val(parseFloat(value)+parseFloat(step-modularValue));},roundValuesDown:function(step,modularValue,value,input){$(input).val(parseFloat(value)-modularValue);},checkExistAndNewQuantity:function(){if($('#saveProductToWishlist').find('.products-list').children().length>0){let isEqualQuantity=true;$('.products-list').find('.product-container').each(function(index){const productExistingQuan=+$(this).find('.exist-quantity-content').html();const productNewQuan=+$(this).find('input.number-indicator').val();if(productExistingQuan!==productNewQuan){isEqualQuantity=false;return false;}})
if(isEqualQuantity){$('#saveProductToWishlist').find('.update-list-product').addClass('not-allowed-button');return;}
$('#saveProductToWishlist').find('.update-list-product').removeClass('not-allowed-button');}},initProductsInfo:function(productArray){$('#saveProductToWishlist').find('.products-list').empty();let prodArr=[];if(localStorage.getItem("prodCodeArr")){prodArr=JSON.parse(localStorage.getItem("prodCodeArr"));}
const promotionText=$('#promotionLabel').val();const noImageTitle=$('#noImageTitle').val();const noImageText=$('#noImageText').val();const productCodeLabel=$('#productCodeLabel').val();const productUomLabel=$('#productUomLabel').val();const emptyImagePlaceholderString="<div class='no-image-product-icon-container'><div class='icon'><span class='icon-f-camera'></span></div><div class='info'><span class='title'>{noImageTitle}</span><span class='text'>{noImageText}</span></div></div>";const emptyImagePlaceholder=emptyImagePlaceholderString.replace('{noImageTitle}',noImageTitle).replace('{noImageText}',noImageText)
const promotionBannerElemString="<div class='promotion-banner promotion-favorite-modal'>{promotionText}</div>";const promotionBannerElement=promotionBannerElemString.replace('{promotionText}',promotionText);const productRows=productArray.map((productResponse,index)=>{let goRewardsBannerElement;if(productResponse.product.goRewards){const goRewardsFullText=productResponse.product.goRewards;const goRewardsText=goRewardsFullText.substring(0,goRewardsFullText.indexOf(" "));const goRewardsBannerElemString="<div class='go-rewards-container'><span>{goRewardsText}</span></div>";goRewardsBannerElement=goRewardsBannerElemString.replace('{goRewardsText}',goRewardsText);}
const prodCode=productResponse.product.displayCode;const productCode=productResponse.product.code;const prodName=productResponse.product.name;let prodbaseUnitElement="<p class='prod-info-uom'><span class='uom-code'>{productUomLabel} {conversionlabel}</span></p>";prodbaseUnitElement=prodbaseUnitElement.replace('{productUomLabel}',productUomLabel);let prodUnitCode=productResponse.unit.code;if(prodUnitCode===productResponse.product.baseUnit.code){prodbaseUnitElement=prodbaseUnitElement.replace('{conversionlabel}','1 = 1 '+productResponse.product.baseUnit.name);}
else{const labelIndex=productResponse.product.uoms.findIndex(uom=>{return uom.code===prodUnitCode});prodbaseUnitElement=prodbaseUnitElement.replace('{conversionlabel}',productResponse.product.uoms[labelIndex].conversionLabel);}
const prodExistQuan=productResponse.quantity;const prodMinOrderQuan=productResponse.product.minOrderQuantity!==null?productResponse.product.minOrderQuantity:"0";let currentProductQuan="";if(localStorage.getItem("prodCodeArr")){currentProductQuan=prodArr[index].quantity;}
else{currentProductQuan=$('.save-product-data').find('input[name="currentProductQuantity"]').val();}
let prodUnitCodeElemString="<input type='hidden' name='prodUnitCode' value='{prodUnitCode}'/>";const prodUnitCodeElem=prodUnitCodeElemString.replace("{prodUnitCode}",prodUnitCode);let productCodeElemString="<input type='hidden' name='productCode' value='{productCode}'/>";const productCodeElem=productCodeElemString.replace("{productCode}",productCode);let prodCodeElemString="<p class='prod-info-code'>{productCodeLabel} <span class='prod-code'>{prodCode}</span></p>";const prodCodeElement=prodCodeElemString.replace('{productCodeLabel}',productCodeLabel).replace("{prodCode}",prodCode);let prodNameElemString="<p class='prod-info-name'>{prodName} <span class='ls-icon-close'/> </p>";const prodNameElement=prodNameElemString.replace("{prodName}",prodName);let prodImgElementString,prodImgElement;if(productResponse.product.promotion&&!productResponse.product.goRewards){prodImgElementString="<div class='prod-image'>{promotionBannerElement} {emptyImagePlaceholder}</div>";prodImgElement=prodImgElementString.replace('{promotionBannerElement}',promotionBannerElement).replace("{emptyImagePlaceholder}",emptyImagePlaceholder);}else if(productResponse.product.goRewards&&!productResponse.product.promotion){prodImgElementString="<div class='prod-image'>{goRewardsBannerElement} {emptyImagePlaceholder}</div>";prodImgElement=prodImgElementString.replace('{goRewardsBannerElement}',goRewardsBannerElement).replace("{emptyImagePlaceholder}",emptyImagePlaceholder);}else if(productResponse.product.goRewards&&productResponse.product.promotion){prodImgElementString="<div class='prod-image'>{promotionBannerElement} {goRewardsBannerElement} {emptyImagePlaceholder}</div>";prodImgElement=prodImgElementString.replace('{promotionBannerElement}',promotionBannerElement).replace('{goRewardsBannerElement}',goRewardsBannerElement).replace("{emptyImagePlaceholder}",emptyImagePlaceholder);}else{prodImgElementString="<div class='prod-image'>{emptyImagePlaceholder}</div>";prodImgElement=prodImgElementString.replace("{emptyImagePlaceholder}",emptyImagePlaceholder);}
if(productResponse.product.images&&productResponse.product.images.length>0){let prodImageUrl=productResponse.product.images[0].url;let lastSlashIndex=prodImageUrl.lastIndexOf('/');let imageName=prodImageUrl.substring(lastSlashIndex+1);let imageLocation=prodImageUrl.substring(0,lastSlashIndex+1);let encodedUrl=encodeURIComponent(imageName);let newImgUrl=imageLocation+encodedUrl;prodImgElement="<div class='prod-image'><img class='image-product' src='{prodImageUrl}'/></div>".replace("{prodImageUrl}",newImgUrl);if(productResponse.product.promotion&&!productResponse.product.goRewards){prodImgElementString="<div class='prod-image'>{promotionBannerElement}<img class='image-product' src='{prodImageUrl}'/></div>";prodImgElement=prodImgElementString.replace('{promotionBannerElement}',promotionBannerElement).replace("{prodImageUrl}",newImgUrl);}else if(productResponse.product.goRewards&&!productResponse.product.promotion){prodImgElementString="<div class='prod-image'>{goRewardsBannerElement}<img class='image-product' src='{prodImageUrl}'/></div>";prodImgElement=prodImgElementString.replace('{goRewardsBannerElement}',goRewardsBannerElement).replace("{prodImageUrl}",newImgUrl);}else if(productResponse.product.goRewards&&productResponse.product.promotion){prodImgElementString="<div class='prod-image'>{promotionBannerElement} {goRewardsBannerElement}<img class='image-product' src='{prodImageUrl}'/></div>";prodImgElement=prodImgElementString.replace('{promotionBannerElement}',promotionBannerElement).replace('{goRewardsBannerElement}',goRewardsBannerElement).replace("{prodImageUrl}",newImgUrl);}}
if(productResponse.product.obsolete||productResponse.product.approvalStatus==="unapproved"){const productUnavailableText=$('#productUnavailableText').val();const productUnavailableElemString="<div class='obsolete-product'>{productUnavailableText}</div>";const productUnavailableTextElement=productUnavailableElemString.replace('{productUnavailableText}',productUnavailableText);const productImageTagString="<div class='prod-image'>";prodImgElement=prodImgElement.substring(0,productImageTagString.length)+productUnavailableTextElement+prodImgElement.substring(productImageTagString.length);}
let prodExistQuanElemString="<span class='exist-quantity-content'>{prodExistQuan}</span>";const prodExistQuanElement=prodExistQuanElemString.replace("{prodExistQuan}",prodExistQuan);let prodInfoElemString="<div class='prod-info'> {prodNameElement} {prodCodeElement} {prodbaseUnitElement}</div>";const prodInfoElem=prodInfoElemString.replace('{prodNameElement}',prodNameElement).replace('{prodCodeElement}',prodCodeElement).replace('{prodbaseUnitElement}',prodbaseUnitElement).replace('{prodExistQuan}',prodExistQuan);let defaultConversion=1;if(productResponse.product.defaultUnit!==null){if(productResponse.product.defaultUnit.conversion!==null){defaultConversion=productResponse.product.defaultUnit.conversion;}}
let step=1;let conversion=1;let roundingRule='none';if(productResponse.product.roundingProfile!==null){if(productResponse.product.roundingProfile.step!==null){step=productResponse.product.roundingProfile.step;}
if(productResponse.product.roundingProfile.uom===null){conversion=defaultConversion;}
else{if(productResponse.product.roundingProfile.conversion!==null){conversion=productResponse.product.roundingProfile.conversion;}}
if(productResponse.product.roundingProfile.rule!==null){roundingRule=productResponse.product.roundingProfile.rule;if(productResponse.product.roundingProfile.ruleConversion!==null){step=productResponse.product.roundingProfile.ruleConversion;}}}
let eaStep=step*conversion;let roundingStep=1;if($.isFunction(ACC.productDetail.calculateStep)){roundingStep=ACC.productDetail.calculateStep(defaultConversion,eaStep);}
const newProductQuanElemString=""+"<div class='new-quantity-area'>"+"<div class='label-exist-quantity'>New Qty</div>"+"   <div class='new-quantity'>"+"       <div class='count-container'>"+"           <button class='minus-button'>"+"               <span class='icon-minus'/>"+"           </button>"+"           <input type='number' class='number-indicator' data-roundingrule='{roundingRule}' data-step='{roundingStep}' step='1' min='{prodMinOrderQuan}' value='{currentProductQuan}'>"+"           <button class='plus-button'>"+"               <span class='icon-plus'/>"+"           </button>"+"       </div>"+"       <span class='ls-icon-close'/>"+"   </div>"+"</div>"
const newProductQuanElement=newProductQuanElemString.replace('{prodMinOrderQuan}',prodMinOrderQuan).replace('{currentProductQuan}',currentProductQuan).replace('{roundingStep}',roundingStep).replace('{roundingRule}',roundingRule);let productRowString=""+"<div class='product-container'>"+"   <div class='prod-name-header'>"+"       <div class='prod-container'>{prodImgElement} {prodInfoElem} {prodUnitCodeElem} {productCodeElem}</div>"+"   </div>"+"   <div class='product-quantity-area'>"+"       <div class='exist-quantity-area'>"+"<div class='label-new-quantity'>Existing Qty</div>"+"           <div class='exist-quantity'>{prodExistQuanElement}</div>"+"       </div>"+"       {newProductQuanElement} "+"   </div>"+"</div>";const productRow=productRowString.replace('{prodImgElement}',prodImgElement).replace('{prodInfoElem}',prodInfoElem).replace('{prodUnitCodeElem}',prodUnitCodeElem).replace('{productCodeElem}',productCodeElem).replace('{prodExistQuanElement}',prodExistQuanElement).replace('{newProductQuanElement}',newProductQuanElement);return productRow;});$('.products-list').append(productRows);ACC.saveProductToWishlist.checkExistAndNewQuantity();ACC.saveProductToWishlist.addAndMinusQuantityHandler();ACC.saveProductToWishlist.onChangeCurrentProduct();ACC.saveProductToWishlist.bindDeleteProduct();ACC.saveProductToWishlist.onCheckValidateInput();},onShowFavoriteModal:function(){$("#saveProductToWishlist").on("shown.bs.modal",function(e){let productData=[];const wishlistId=$('.save-product-data').find('input[name="wishlistId"]').val();if(localStorage.getItem("prodCodeArr")){productData=JSON.parse(localStorage.getItem("prodCodeArr"));productData.forEach(product=>{product.wishlistId=wishlistId;})}
else{const productCode=$('.save-product-data').find('input[name="productCode"]').val();const productUnitCode=$('.save-product-data').find('input[name="productUnitCode"]').val().toString();productData=[{product:{code:productCode,},unit:{code:productUnitCode},wishlistId:wishlistId}]}
$.ajax({type:'POST',url:ACC.saveProductToWishlist.formMethod.favoritesGetAllProduct,data:JSON.stringify(productData),dataType:'json',contentType:'application/json',success:function(responseProductInfo){$('#saveProductToWishlist').find('.products-list').empty();ACC.saveProductToWishlist.initProductsInfo(responseProductInfo);}});});},onSubmitUpdateQuantity:function(){$('#saveProductToWishlist').find('.update-list-product').click(function(){let prodArr=[];let context=$(this);let productData;$('#saveProductToWishlist').find('.product-container').each(function(){const newQuantity=$(this).find('.number-indicator').val();const unitCode=$(this).find("input[name='prodUnitCode']").val();const productCode=$(this).find('input[name="productCode"]').val();const wishlistId=$('.save-product-data').find('input[name="wishlistId"]').val();productData={quantity:newQuantity,product:{code:productCode},unit:{code:unitCode},wishlistId:wishlistId};prodArr.push(productData);});$.ajax({type:'POST',contentType:'application/json',url:ACC.saveProductToWishlist.formMethod.favoritesUpdateProductInWishlist,data:JSON.stringify(prodArr),success:function(responseProductInfo){ACC.track.productAddedToWishlist(productData.wishlistId,context,responseProductInfo);const wishlistName=$('#saveProductToWishlist').find('.save-wishlist-name').html();$('#saveProductToWishlist').modal('hide');$('.dialog-favorite-container').css('display','block');$('.dialog-favorite-container').find('.dialog-message').html('Saved to '+wishlistName);localStorage.removeItem('prodCodeArr');window.scroll(0,0);setTimeout(function(){$('.dialog-favorite-container').css('display','none');location.reload();},1500);}});})},onChangeCurrentProduct:function(){$('#saveProductToWishlist').find('.number-indicator').on('change',function(e){const existingQuantity=$(this).parents('.product-container').find('.exist-quantity-content').html();const newQuantity=$(this).val();const minOrder=+$(this).attr('min');const maxOrder=+$(this).attr('max');if(newQuantity!=0&&!isNaN(newQuantity)){ACC.saveProductToWishlist.updateQtyValue($(this),newQuantity,$(this).data("step"),$(this).data("roundingrule"));}
else{if(minOrder!=0){ACC.saveProductToWishlist.updateQtyValue($(this),minOrder,$(this).data("step"),$(this).data("roundingrule"));}
else{ACC.saveProductToWishlist.updateQtyValue($(this),1,$(this).data("step"),$(this).data("roundingrule"));}}
let updatedQuantity=$(this).val();if(updatedQuantity.trim()===""||existingQuantity===updatedQuantity||updatedQuantity>maxOrder||updatedQuantity<minOrder||updatedQuantity==0){$('#saveProductToWishlist').find('.update-list-product').addClass('not-allowed-button')}
else{$('#saveProductToWishlist').find('.update-list-product').removeClass('not-allowed-button')}});$('#saveProductToWishlist').find('.number-indicator').focusout(function(){const newQuantity=+$(this).val();const minOrder=+$(this).attr('min');const maxOrder=+$(this).attr('max');if(newQuantity.toString()===""){$(this).val(minOrder);return;}
else if(newQuantity<minOrder){$(this).val(minOrder);return;}
else if(maxOrder!==undefined&&newQuantity>maxOrder){$(this).val(maxOrder);return;}})},onCheckValidateInput:function(){let input=$('#saveProductToWishlist').find('.number-indicator');if(input.val()!=0){input.each(function(){ACC.saveProductToWishlist.updateQtyValue($(this),$(this).val(),$(this).data("step"),$(this).data("roundingrule"));})}
$('#saveProductToWishlist').find('.number-indicator').keydown(function(e){let anotherCharCheck=new RegExp("d*[.,-]d*")
if(anotherCharCheck.test(e.key)||e.key==='e'){return false}})},bindDeleteProduct:function(){$('.products-list').find('.ls-icon-close').click(function(){const productCodeSelected=$(this).parents('.product-container').find('.prod-code').html();$('#saveProductToWishlist').find('.products-list').children()[$(this).parents('.product-container').index()].remove();if($('#saveProductToWishlist').find('.products-list').children().length===0){$('#saveProductToWishlist').find('.update-list-product').addClass('not-allowed-button');}
if(localStorage.getItem("prodCodeArr")){const productCodeIndex=JSON.parse(localStorage.getItem("prodCodeArr")).findIndex(productItem=>{return productItem.product.code===productCodeSelected});const newProdCodeArr=JSON.parse(localStorage.getItem("prodCodeArr")).splice(productCodeIndex,1);localStorage.setItem('prodCodeArr',JSON.stringify(newProdCodeArr))}})}}
$(document).ready(function(){if(($('#saveProductToWishlist').length>0)){ACC.saveProductToWishlist.onShowFavoriteModal();ACC.saveProductToWishlist.onSubmitUpdateQuantity();}
$('#saveProductToWishlist').on("hide.bs.modal",function(){localStorage.removeItem("prodCodeArr");})});const isProductTabActive="isProductSearching";const searchProductURLId="searchProductURL";const searchContentURLId="searchContentURL";const tabProductTextId="tabProductText";const tabContentTextId="tabContentText";const titleSearchResultId="titleSearchResult";ACC.search={_autoload:["setTabEvent","autoRunFunctions"],autoRunFunctions:function(){let currentUrl=window.location.href;let isSearchPage=currentUrl.indexOf("search")>=0;if(!isSearchPage){return;}
let isProductTabActiveValue=$.cookie(isProductTabActive);if(!isProductTabActiveValue){$.cookie(isProductTabActive,true,{path:"/",secure:true});}
ACC.search.setDefaultSearchUrl();ACC.search.toggleViewMode($.cookie(isProductTabActive));},setDefaultSearchUrl:function(){let currentUrl=new URL(window.location.href);let searchProductURLValue=localStorage.getItem(searchProductURLId);let searchContentURLValue=localStorage.getItem(searchContentURLId);let isProductSearching=$.cookie(isProductTabActive);if(!searchProductURLValue||!searchContentURLValue||!isProductSearching){localStorage.setItem(searchProductURLId,currentUrl.href);localStorage.setItem(searchContentURLId,currentUrl.href);localStorage.setItem(tabProductTextId,$("#productTab").html());localStorage.setItem(tabContentTextId,$("#contentTab").html());localStorage.setItem(titleSearchResultId,$("#ls-product-results-title").text());return;}
if(isProductSearching=="true"){localStorage.setItem(searchProductURLId,currentUrl.href);localStorage.setItem(titleSearchResultId,$("#ls-product-results-title").text());localStorage.setItem(tabProductTextId,$("#productTab").html());let tabContentText=localStorage.getItem(tabContentTextId);if(tabContentText){$("#contentTab").html(tabContentText);}
return;}
localStorage.setItem(searchContentURLId,currentUrl.href);localStorage.setItem(tabContentTextId,$("#contentTab").html());let tabProductText=localStorage.getItem(tabProductTextId);$("#ls-product-results-title").text(localStorage.getItem(titleSearchResultId));if(tabProductText){$("#productTab").html(tabProductText);}},setTabEvent:function(){$("#productTab").click(function(){ACC.search.toggleViewMode(true);ACC.search.storeSearchStatusAndReloadData(true);});$("#contentTab").click(function(){ACC.search.toggleViewMode(false);ACC.search.storeSearchStatusAndReloadData(false);});},toggleViewMode:function(isShow){let viewModeContainer=$(".ls-search-control-bar");if(isShow==true||isShow=="true"){viewModeContainer.show();return;}
viewModeContainer.hide();},storeSearchStatusAndReloadData:function(isProductTabActiveValue){$.cookie(isProductTabActive,isProductTabActiveValue,{path:"/"});let searchProductURLValue=localStorage.getItem(searchProductURLId);let searchContentURLValue=localStorage.getItem(searchContentURLId);let currentUrl=window.location.href;if(isProductTabActiveValue==true){localStorage.setItem(searchContentURLId,currentUrl);}else{localStorage.setItem(searchProductURLId,currentUrl);}
window.location.assign(isProductTabActiveValue?searchProductURLValue:searchContentURLValue);},};ACC.orderDetail={_autoload:['reOrderItems','retrievingURLShareOrder'],reOrderItems:function(){if($(".ls-order-detail-header").length>0){ACC.orderDetail.getOrderHistoryInfo();}
$(document).on("click",".js-re-order",function(e){e.preventDefault();const buttonEle=$(this);$(buttonEle).addClass("disabled");$(buttonEle).find(".ls-animate-spin").removeClass("hidden");const orderCode=$(buttonEle).data("orderCodeSap");const url='/my-account/order/'+orderCode+'/addtocart';const reOrder={url:url,type:'GET',success:function(data,status,xhr){const reorderItem=$(".order-detail-container");localStorage.setItem("cartId",data.cartCode);cartToolTipDisplay(data.successNbr);const objectIs=[];const objectDatas=[];for(const element of reorderItem){if($(element).data("product-approval")!=='unapproved'){const trackingData=ACC.product.handleTrackingData($(element),"reorder",data.cartCode);objectIs.push(trackingData.product_id);objectDatas.push({"price":trackingData.price||0,"quantity":trackingData.quantity||0});delete data.job_reference;window.mediator.publish("productAdded_sm",trackingData);}}
if(objectIs&&objectIs.length>0){ACC.algoliaEvent.objectDatas=objectDatas;ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',objectIs,ACC.algoliaSearch.defaultCurrency);}
ACC.minicart.updateMiniCartDisplay();},error:function(xhr,status,error){console.log('error')},complete:function(){$(buttonEle).find(".ls-animate-spin").addClass("hidden");$(buttonEle).removeClass("disabled");}}
$.ajax(reOrder);});function cartToolTipDisplay(totalProduct){if(totalProduct!=0){var $tooltip=$("<div class='cart-tooltip'><img class='cart-thumbnail'><p class='cart-added'></p></div>");$(".cart-nav-item").append($tooltip);$(".cart-added").text(totalProduct+" added to cart");window.scrollTo(0,0);setTimeout(()=>{$(".cart-tooltip").css("display","none");},2000);}};},retrievingURLShareOrder:function(){$(document).on("click",".js-share-order-detail-item",function(e){var orderCode=$(this).data("orderCodeSap");var url='/my-account/order/'+orderCode+'/shareorder';var shareOrder={url:url,type:'GET',success:function(data,status,xhr){if(status==='success'){ACC.orderDetail.shareOrderToMail(data);}},error:function(xhr,status,error){console.log('error');}}
$.ajax(shareOrder);});},shareOrderToMail:function(data){let bodyEmail="Please%20use%20the%20link%20below%20to%20preview%3A%20"
var link=document.createElement('a');let linkShare=window.location.origin+'/sharedata/shareorder?order='+data;link.setAttribute('href','mailto: ?subject=Lincoln Sentry – Shared order details&body='+bodyEmail+linkShare);link.click();},getOrderHistoryInfo:function(){var products=[];var reorderItem=$(".order-detail-container");for(var i=0;i<reorderItem.length;i++){if($(reorderItem[i]).data("product-approval")!=='unapproved'){var product=ACC.product.handleTrackingData($(reorderItem[i]),"reorder");delete product.source;products.push(product);}}
var trackingData={account_number:$("#view-order-history").data("account-number"),order_address:$("#view-order-history").data("order-address"),order_date:$("#view-order-history").data("order-date")?ACC.orderDetail.toIso($("#view-order-history").data("order-date")):"",order_id:$(".order-header-content").find("span").text().trim().replace(/\D/g,"")?$(".order-header-content").find("span").text().trim().replace(/\D/g,""):$(".order-header-content").find("div").text().trim().replace(/\D/g,""),order_status:ACC.global.capitalizeFirstLetter($("#view-order-history").data("order-status")),pickup_branch:$(".label-content").find("span").text().trim(),products:products,purchase_order_no:$("#view-order-history").data("purchase-order"),revenue:+$(".ls-sub-total").data("sub-total")||0,shipping:Number($(".freight-price").text().trim().replace(/[^0-9.-]+/g,""))||0,tax:Number($(".gst-price").text().trim().replace(/[^0-9.-]+/g,""))||0,total:Number($(".or-total").find("div:eq(1)").text().trim().replace(/[^0-9.-]+/g,""))||0,}
window.dataLayer.push({event:'View order history',...trackingData});},toIso:function(dateString){if(dateString){var parts=dateString.split(' ');var dayOfWeek=parts[0];var month=parts[1];var day=Number(parts[2]);var time=parts[3].split(':');var hour=Number(time[0]);var minute=Number(time[1]);var second=Number(time[2]);var timeZone=parts[4];var year=Number(parts[5]);var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var monthIdx=months.indexOf(month);var date=new Date(Date.UTC(year,monthIdx,day,hour,minute,second));return date.toISOString();}else{return"";}}};ACC.financialDocument={_autoload:["bindActiveTabs","bindDocuments"],bindActiveTabs:function(){$(document).ready(function(){$(".ls-document-tab a").click(function(){var tab=$(this).attr("id");if($(this).hasClass("inactive")){$(".ls-document-tab a").addClass("inactive");$(this).removeClass("inactive");}});});},bindDocuments:function(){const docType=$('[name="documentType"]').val();const url="/financial/"+docType+"?";function getURLParam(){let searchParam="",statusParam="",fromDateParam="",toDateParam="",pageParam="",sortParam="";if(documentObject.searchValue){searchParam="&searchValue="+documentObject.searchValue;}
if(documentObject.fromDateFormatStr){fromDateParam="&startDate="+documentObject.fromDateFormatStr;}
if(documentObject.toDateFormatStr){toDateParam="&endDate="+documentObject.toDateFormatStr;}
if(documentObject.sortValue){sortParam="&sort="+documentObject.sortValue;}
if(documentObject.pageValueOrigin){pageParam="&page="+documentObject.pageValueOrigin;}
if(url.includes("#")){url.replace("#","");}
const urlDocument=url+
searchParam+
statusParam+
fromDateParam+
toDateParam+
pageParam+
sortParam;return urlDocument;}
let documentObject={searchValue:"",statusValue:"",fromDateValue:"",toDateValue:"",fromDateFormatStr:"",toDateFormatStr:"",pageValueOrigin:"",sortValue:"",limitDay:""};let pageValue=0;$(document).ready(function(){const financialUrl="/financial/"+docType;if(window.location.pathname===financialUrl&&window.location.search===""){handleSetDefaultSelectDate();sessionStorage.removeItem("documentObject");return;}
if(window.location.pathname.includes("/financial")){if(sessionStorage.documentObject){documentObject=JSON.parse(sessionStorage.documentObject);}
if(documentObject.searchValue){$(".ls-custom-search-bar").val(documentObject.searchValue);}
if(window.location.search.includes("sort=code-desc")){$(".ls-code-icon").addClass("glyphicon-triangle-top");$(".ls-code-icon").removeClass("glyphicon-triangle-bottom");}else{$(".ls-code-icon").removeClass("glyphicon-triangle-top");$(".ls-code-icon").addClass("glyphicon-triangle-bottom");}
if(window.location.search.includes("sort=orderSAP-desc")){$(".ls-orderSAP-icon").addClass("glyphicon-triangle-top");$(".ls-orderSAP-icon").removeClass("glyphicon-triangle-bottom");}else{$(".ls-orderSAP-icon").removeClass("glyphicon-triangle-top");$(".ls-orderSAP-icon").addClass("glyphicon-triangle-bottom");}
if(window.location.search.includes("sort=purchaseOrder-desc")){$(".ls-purchaseOrder-icon").addClass("glyphicon-triangle-top");$(".ls-purchaseOrder-icon").removeClass("glyphicon-triangle-bottom");}else{$(".ls-purchaseOrder-icon").removeClass("glyphicon-triangle-top");$(".ls-purchaseOrder-icon").addClass("glyphicon-triangle-bottom");}
if(window.location.search.includes("sort=invDate-desc")){$(".ls-invDate-icon").addClass("glyphicon-triangle-top");$(".ls-invDate-icon").removeClass("glyphicon-triangle-bottom");}else{$(".ls-invDate-icon").removeClass("glyphicon-triangle-top");$(".ls-invDate-icon").addClass("glyphicon-triangle-bottom");}
if(window.location.search.includes("sort=finStatementDate-asc")){$(".ls-finStatementDate-icon").removeClass("glyphicon-triangle-top");$(".ls-finStatementDate-icon").addClass("glyphicon-triangle-bottom");}else{$(".ls-finStatementDate-icon").addClass("glyphicon-triangle-top");$(".ls-finStatementDate-icon").removeClass("glyphicon-triangle-bottom");}
var isCheckLength=$('.ls-doc-code').length;if(isCheckLength==0){$('.isCheckData').removeClass('ls-document-code ls-document-orderSAP ls-document-purchaseOrder ls-document-invDate');$('.isCheckIcon').removeClass('glyphicon-triangle-bottom');$('.isCheckIcon').removeClass('glyphicon-triangle-top');}
var isCheckStatement=$('.ls-date-text-statement-value').length;if(isCheckStatement==0){$('.isCheckState').removeClass('ls-statement-date');$('.ls-finStatementDate-icon').removeClass('glyphicon-triangle-top');}
if(documentObject.pageValueOrigin){$("#document-pagination").pagination(+documentObject.pageValueOrigin+1);}
if(window.location.pathname!=financialUrl){localStorage.removeItem("currentSortSequence");}
if(window.location.pathname===financialUrl&&window.location.search.includes("&sort=")){if(!localStorage.getItem("currentSortSequence")){localStorage.setItem("currentSortSequence",window.location.search);}else{let lastLocation=new URLSearchParams(localStorage.getItem("currentSortSequence"));let newLocation=new URLSearchParams(window.location.search);if(lastLocation.get("sort")==newLocation.get("sort")&&lastLocation.get("page")==newLocation.get("page")){localStorage.removeItem("currentSortSequence");if(newLocation.has("page")){window.location.href=window.location.pathname+"?&page="+
newLocation.get("page");}else{window.location.href=window.location.pathname;}}else{localStorage.removeItem("currentSortSequence");localStorage.setItem("currentSortSequence",window.location.search);}}}
var isCheckInput=$(".js-search-change").val();if(isCheckInput.trim()===""){$('.ls-change-icon').addClass('ls-icon-search');$('.ls-change-icon').removeClass('glyphicon glyphicon-remove-circle');$('.ls-btn-search').addClass('js-search-click');$('.ls-btn-search').removeClass('js-search-click-remove');}else{$('.ls-change-icon').removeClass('ls-icon-search');$('.ls-change-icon').addClass('glyphicon glyphicon-remove-circle');$('.ls-btn-search').removeClass('js-search-click');$('.ls-btn-search').addClass('js-search-click-remove');}
$('.js-search-click-remove').click(function(){$(".js-search-change").val('');documentObject.searchValue="";documentObject.pageValueOrigin=0;$('.ls-change-icon').addClass('ls-icon-search');$('.ls-change-icon').removeClass('glyphicon glyphicon-remove-circle');sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();})
$('.js-search-click-remove').keypress(function(){$(".js-search-change").val('');documentObject.searchValue="";documentObject.pageValueOrigin=0;$('.ls-change-icon').addClass('ls-icon-search');$('.ls-change-icon').removeClass('glyphicon glyphicon-remove-circle');sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();})}
if(documentObject.fromDateValue&&documentObject.toDateValue){let dateParams=new URLSearchParams(window.location.search),startDate=new Date(dateParams.get('startDate')),today=new Date(),limitDay=new Date(documentObject.limitDay);var limitedDateRange=$("#calendarTD").data("title");var startDateFormat=moment().add(-limitedDateRange+1,"months").startOf('month').format("DD/MM/YYYY");if(documentObject.limitDay&&startDate.setHours(0,0,0,0)<limitDay.setHours(0,0,0,0)){documentObject.fromDateValue=limitDay.toLocaleDateString('fr');documentObject.fromDateFormatStr=limitDay.toLocaleDateString();documentObject.toDateValue=today.toLocaleDateString('fr');documentObject.toDateFormatStr=today.toLocaleDateString();documentObject.pageValueOrigin=0;sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();}
$("#calendarFD").off("change");$("#calendarFD").datepicker("setStartDate",startDateFormat);$("#calendarFD").datepicker("setDate",moment(documentObject.fromDateValue,"DD/MM/YY").format("DD/MM/YYYY"));$("#calendarTD").off("change");$("#calendarTD").datepicker("setDate",moment(documentObject.toDateValue,"DD/MM/YY").format("DD/MM/YYYY"));$("#calendarFD").change(onChangeFromDate);$("#calendarTD").change(onChangeToDate);}});var isCheckLength=$('.ls-doc-code').length;if(isCheckLength==0){$('.isCheckData').removeClass('ls-document-code ls-document-orderSAP ls-document-purchaseOrder ls-document-invDate');$('.isCheckIcon').removeClass('glyphicon-triangle-bottom');$('.isCheckIcon').removeClass('glyphicon-triangle-top');}
var isCheckStatement=$('.ls-date-text-statement-value').length;if(isCheckStatement==0){$('.isCheckState').removeClass('ls-statement-date');$('.ls-finStatementDate-icon').removeClass('glyphicon-triangle-top');}
$(".js-search-change").on("change",function(){searchDocuments();});$(".js-search-change").keypress(function(event){const keycode=event.keyCode?event.keyCode:event.which;if(keycode===13){searchDocuments();}});$(".js-search-click").on("click",function(){searchDocuments();});function searchDocuments(){const searchVal=$('[name="searchStr"]').val();if(searchVal!=undefined&&searchVal!=""){documentObject.searchValue=searchVal;documentObject.pageValueOrigin=0;documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");var isCheckClass=$('.glyphicon-triangle-top').length?$('.glyphicon-triangle-top').closest('div').attr("class"):"";if(isCheckClass.includes("invDate")){documentObject.sortValue="invDate-desc";}else if(isCheckClass.includes("purchaseOrder")){documentObject.sortValue="purchaseOrder-desc";}else if(isCheckClass.includes("orderSAP")){documentObject.sortValue="orderSAP-desc";}else if(isCheckClass.includes("code")){documentObject.sortValue="code-desc";}
sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();}else if(searchVal==""){documentObject.searchValue="";documentObject.pageValueOrigin=0;documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();}}
$(".ls-document-code").click(function(){documentObject.pageValueOrigin=(pageValue-1).toString();if(window.location.search.includes("&sort=code-desc")){documentObject.sortValue="code-asc";}else{documentObject.sortValue="code-desc";}
documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});$(".ls-document-orderSAP").click(function(){documentObject.pageValueOrigin=(pageValue-1).toString();if(window.location.search.includes("&sort=orderSAP-desc")){documentObject.sortValue="orderSAP-asc";}else{documentObject.sortValue="orderSAP-desc";}
documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});$(".ls-document-purchaseOrder").click(function(){documentObject.pageValueOrigin=(pageValue-1).toString();if(window.location.search.includes("&sort=purchaseOrder-desc")){documentObject.sortValue="purchaseOrder-asc";}else{documentObject.sortValue="purchaseOrder-desc";}
documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});$(".ls-document-invDate").click(function(){documentObject.pageValueOrigin=(pageValue-1).toString();if(window.location.search.includes("&sort=invDate-asc")){documentObject.sortValue="invDate-desc";}else{documentObject.sortValue="invDate-asc";}
documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});$(".ls-statement-date").click(function(){documentObject.pageValueOrigin=(pageValue-1).toString();sessionStorage.setItem("documentObject",JSON.stringify(documentObject));if(window.location.search.includes("&sort=finStatementDate-asc")){window.location.href="/financial/"+"statements"+"?&sort=finStatementDate-desc";}else{window.location.href="/financial/"+"statements"+"?&sort=finStatementDate-asc";}});let numberOfPages=$('[name="dataSize"]').val();if(numberOfPages&&numberOfPages!==0){let options={dataSource:Array(+numberOfPages*12),pageSize:12,pageRange:null,showPageNumbers:true,hideWhenLessThanOnePage:true,callback:function(response,pagination){pageValue=pagination.pageNumber;},};$("#document-pagination").pagination(options);$("#document-pagination").addHook("afterPageOnClick",function(){documentObject.pageValueOrigin=(pageValue-1).toString();sortCode=$("#financialDocumentPageSortCode");if(sortCode!=undefined&&sortCode.val().includes("desc")){documentObject.sortValue=sortCode.val();}
sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});$("#document-pagination").addHook("afterPreviousOnClick",function(){documentObject.pageValueOrigin=(pageValue-1).toString();sortCode=$("#financialDocumentPageSortCode");if(sortCode!=undefined&&sortCode.val().includes("desc")){documentObject.sortValue=sortCode.val();}
sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});$("#document-pagination").addHook("afterNextOnClick",function(){documentObject.pageValueOrigin=(pageValue-1).toString();sortCode=$("#financialDocumentPageSortCode");if(sortCode!=undefined&&sortCode.val().includes("desc")){documentObject.sortValue=sortCode.val();}
sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});}
$("#sort-filter").selectmenu({icons:{button:"glyphicon glyphicon-triangle-bottom"},open:function(event,ui){$(":first-child",$("#sort-filter-button")).removeClass("glyphicon glyphicon-triangle-bottom");$(":first-child",$("#sort-filter-button")).addClass("glyphicon glyphicon-triangle-top");$("#filter-status-title").css({color:"#F8971D"});$(".ui-state-active").css({padding:"3px 1em 3px 10px"});if($("#sort-filter-menu").find(".ui-state-active").parent().children(".ls-js-status-filter").length<1){$("#sort-filter-menu").find(".ui-state-active").parent().prepend('<span class="ls-js-status-filter ls-icon-tick"></span>');}
$(".ls-icon-tick").attr("style","background: #F7F7F7 !important");$(".ui-menu-item").on("mouseover",function(){$(".ls-icon-tick").attr("style","background: #FFFFFF !important");$(".ui-menu-item").attr("style","background: #FFFFFF !important");$(this).attr("style","background: #F7F7F7 !important");$(this).children(".ls-icon-tick").attr("style","background: #F7F7F7 !important");});},close:function(event,ui){$(":first-child",$("#sort-filter-button")).removeClass("glyphicon glyphicon-triangle-top");$(":first-child",$("#sort-filter-button")).addClass("glyphicon glyphicon-triangle-bottom");$("#filter-status-title").css({color:"#003767"});},change:function(event,data){$(":first-child",$(".ui-state-active").parent()).remove();$(".ui-menu-item-wrapper").css({"padding-left":"28px"});documentObject.statusValue=data.item.value;documentObject.pageValueOrigin=0;sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();},});var onChangeFromDate=function(){let fromDateObject=$(this).datepicker('getDate');if(fromDateObject){documentObject.fromDateValue=$(this).datepicker().val();let dd=fromDateObject.getDate();let mm=fromDateObject.getMonth()+1;let yyyy=fromDateObject.getFullYear();documentObject.fromDateFormatStr=mm+'/'+dd+'/'+yyyy;documentObject.pageValueOrigin=0;documentObject.toDateValue=$("#calendarTD").val();documentObject.toDateFormatStr=moment($("#calendarTD").val(),"DD/MM/YY").format("M/D/YYYY");var isCheckClass=$('.glyphicon-triangle-top').length?$('.glyphicon-triangle-top').closest('div').attr("class"):"";if(isCheckClass.includes("invDate")){documentObject.sortValue="invDate-desc";}else if(isCheckClass.includes("purchaseOrder")){documentObject.sortValue="purchaseOrder-desc";}else if(isCheckClass.includes("orderSAP")){documentObject.sortValue="orderSAP-desc";}else if(isCheckClass.includes("code")){documentObject.sortValue="code-desc";}
sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();}};$("#calendarFD").change(onChangeFromDate);var onChangeToDate=function(){let toDateObject=$(this).datepicker('getDate');if(toDateObject){documentObject.toDateValue=$(this).datepicker().val();let dd=toDateObject.getDate();let mm=toDateObject.getMonth()+1;let yyyy=toDateObject.getFullYear();documentObject.toDateFormatStr=mm+'/'+dd+'/'+yyyy;documentObject.pageValueOrigin=0;documentObject.fromDateValue=$("#calendarFD").val();documentObject.fromDateFormatStr=moment($("#calendarFD").val(),"DD/MM/YY").format("M/D/YYYY");var isCheckClass=$('.glyphicon-triangle-top').length?$('.glyphicon-triangle-top').closest('div').attr("class"):"";if(isCheckClass.includes("invDate")){documentObject.sortValue="invDate-desc";}else if(isCheckClass.includes("purchaseOrder")){documentObject.sortValue="purchaseOrder-desc";}else if(isCheckClass.includes("orderSAP")){documentObject.sortValue="orderSAP-desc";}else if(isCheckClass.includes("code")){documentObject.sortValue="code-desc";}
sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();}};$("#calendarTD").change(onChangeToDate);$('.input-daterange').datepicker({format:"dd/mm/yy",keepEmptyValues:true,orientation:"bottom auto"});$(".js-refresh-filter-dates").click(function(){$(".filter-document-start-date").datepicker().val(null);$(".filter-document-to-date").datepicker().val(null);documentObject.fromDateValue="";documentObject.toDateValue="";documentObject.fromDateFormatStr="";documentObject.toDateFormatStr="";documentObject.sortValue="";documentObject.searchValue="";documentObject.pageValueOrigin=0;sessionStorage.setItem("documentObject",JSON.stringify(documentObject));window.location.href=getURLParam();});function handleSetDefaultSelectDate(){var defaultDateRange=$("#calendarFD").data("title");var limitedDateRange=$("#calendarTD").data("title");var startDate=moment().add(-limitedDateRange+1,"months").startOf('month').format("DD/MM/YYYY");var fromDate=moment().add(-defaultDateRange+1,"months").startOf('month').format("DD/MM/YYYY");var toDate=moment().format("DD/MM/YYYY");$("#calendarFD").datepicker({format:"dd/mm/yy",});$("#calendarTD").datepicker({format:"dd/mm/yy"});$("#calendarTD").off("change");$("#calendarTD").datepicker("setDate",toDate);$("#calendarTD").change(onChangeToDate);$("#calendarFD").datepicker("setStartDate",startDate);$("#calendarFD").off("change");$("#calendarFD").datepicker("setDate",fromDate);$("#calendarFD").change(onChangeFromDate);}},};ACC.faqpage={_autoload:["bindFaqPage"],bindFaqPage:function(){var searchParams=new URLSearchParams(window.location.search),param=searchParams.get('keywords');if(param){$("#faqSearchKey").val(param);}
if($('.ls-faq-page-body-topic').children().length==0){$('#no-result-faq-content').removeClass('hide-panel');$('#no-result-faq-content').addClass('show-panel');}else{$('#no-result-faq-content').removeClass('show-panel');$('#no-result-faq-content').addClass('hide-panel');}
$("#faqSearchKey").keyup(function(event){if(event.keyCode===13){ACC.faqpage.onStartSearch();}});$('.js_search_topic_button').click(function(){ACC.faqpage.onStartSearch();});$('.ls-radio-button').click(function($event){ACC.faqpage.onCloseFilter();if($event.target.id==="radioBtnAll"){$('.ls-radio-button').prop("checked",false);$('#allTopic')[0].click();}else{$('.ls-radio-button').prop("checked",false);$event.target.checked=true;var topicId=$event.target.id.replace("radioBtn",""),topicLinkEle=$('#group-topic-content-'+topicId);topicLinkEle[0].click();}});$('.ls-radio-button-label').click(function($event){ACC.faqpage.onCloseFilter();if($event.target.id==="allTopic"){$('.ls-radio-button').prop("checked",false);$("#radioBtnAll").prop("checked",true);}else{var topicId=$event.target.id.replace("group-topic-content-",""),currentRadioBtn="#radioBtn"+topicId;$('.ls-radio-button').prop("checked",false);$(currentRadioBtn).prop("checked",true);}});$('.panel-title').click(function($event){var qnaId=$event.currentTarget.id.replace("question-and-answer-",""),currentArrowDownEle=$('#icon-down-arrow-'+qnaId),currentArrowUpEle=$('#icon-up-arrow-'+qnaId),currentAnswerEle=$('#answer-'+qnaId);if(currentArrowDownEle.hasClass('show-panel')){currentArrowDownEle.removeClass('show-panel');currentArrowDownEle.addClass('hide-panel');currentArrowUpEle.removeClass('hide-panel');currentArrowUpEle.addClass('show-panel');currentAnswerEle.removeClass("hide-panel");currentAnswerEle.addClass("show-panel");}else{currentArrowDownEle.removeClass('hide-panel');currentArrowDownEle.addClass('show-panel');currentArrowUpEle.removeClass('show-panel');currentArrowUpEle.addClass('hide-panel');currentAnswerEle.removeClass("show-panel");currentAnswerEle.addClass("hide-panel");}});$('.faq-topic-filter').on('click',function(){window.scroll(0,0);$('body').addClass('overflow-y-hidden-xs').addClass('overflow-y-hidden-sm').addClass('overflow-y-hidden-md');$('.faq-page-content').addClass('filter-activated');$('.ls-faq-page-nav-tree').css('height',$(window).height()-$('header').height()+($(window).width()>640?30:70));});$('.close-filter').on('click',function(){ACC.faqpage.onCloseFilter();});},onStartSearch:function(){var keywords=$("#faqSearchKey").val(),searchURL;searchURL='?keywords='+keywords;window.location=searchURL;},onCloseFilter:function(){$('body').removeClass('overflow-y-hidden-xs').removeClass('overflow-y-hidden-sm').removeClass('overflow-y-hidden-md');$('.faq-page-content').removeClass('filter-activated');$('.ls-faq-page-nav-tree').removeAttr('style');}};ACC.UserManagement={_autoload:["bindMultiProduct","userManage"],formMethod:{userManageEdit:'/my-account/manage-user/edit?user=',userManageCreate:'/my-account/manage-user/create',userManageDelete:'/my-account/manage-user/delete?user=',},isCheckEmail:false,bindMultiProduct:function(){$(document).on("click",'.js-show-multiD-grid-in-order',function(event){ACC.multidgrid.populateAndShowGrid(this,event,true);return false;});$(document).on("click",'.showMultiDGridInOrderOverlay',function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event);});},userManage:function(){const urlPrefix="/my-account/manage-users?";let pageValue=0;let userManage={searchValue:"",pageValueOrigin:"",sortValue:"",statusValue:""};function getURLParam(){let searchParam="",pageParam="",sortParam="",statusParam="";if(userManage.searchValue){searchParam="name="+escape(userManage.searchValue);}
if(userManage.pageValueOrigin){pageParam="&page="+userManage.pageValueOrigin;}
if(userManage.sortValue){sortParam="&sort="+userManage.sortValue;}
if(userManage.statusValue){statusParam="&account="+userManage.statusValue;}
return urlPrefix+searchParam+pageParam+sortParam+statusParam;}
function buildSortParameter(fieldName){sortCode=$("#manageUserPageSortCode");if(sortCode!=undefined&&!sortCode.val().includes(fieldName+"-desc")){userManage.sortValue=fieldName+"-desc";}else{userManage.sortValue=fieldName+"-asc";}}
$(document).ready(function(){if(window.location.pathname==="/my-account/manage-users"&&window.location.search===""){sessionStorage.removeItem('userManage');let totalNumberOfResults=$("#hidden-total-number-results-user-manage").val();if(!totalNumberOfResults){$("#hidden-user-manage").prop('disabled',true);$("#ls-management-text-search").prop('disabled',true);$(".ls-user-management-search").prop('disabled',true);$("#ls-user-manage-btn-status-filter").prop('disabled',true);}
return;}
if(window.location.pathname!="/my-account/manage-users"){localStorage.removeItem('currentSortSequence');}
if(window.location.pathname==="/my-account/manage-users"&&window.location.search.includes("&sort=")){if(!localStorage.getItem('currentSortSequence')){localStorage.setItem('currentSortSequence',window.location.search);}else{let lastLocation=new URLSearchParams(localStorage.getItem('currentSortSequence'));let newLocation=new URLSearchParams(window.location.search);if(lastLocation.get('sort')==newLocation.get('sort')&&lastLocation.get('page')==newLocation.get('page')){localStorage.removeItem('currentSortSequence');if(newLocation.has('page')){window.location.href=window.location.pathname+'?&page='+newLocation.get('page');}else{window.location.href=window.location.pathname;}}else{localStorage.removeItem('currentSortSequence');localStorage.setItem('currentSortSequence',window.location.search);}}}
if(window.location.pathname==="/my-account/manage-users"){if(sessionStorage.userManage){userManage=JSON.parse(sessionStorage.userManage)}
if(userManage.searchValue){$("#ls-management-text-search").val(userManage.searchValue);}
if(userManage.pageValueOrigin){$("#document-pagination-user").pagination(+userManage.pageValueOrigin+1);}
var isCheckInput=$("#ls-management-text-search").val();if(isCheckInput.trim()===""){$('.ls-user-management-search').addClass('ls-icon-search');$('.ls-user-management-search').removeClass('glyphicon glyphicon-remove-circle');$('.ls-search-user-manager ').addClass('ls-management-btn-search');$('.ls-search-user-manager ').removeClass('ls-management-btn-search-remove');}else{$('.ls-user-management-search').removeClass('ls-icon-search');$('.ls-user-management-search').addClass('glyphicon glyphicon-remove-circle');$('.ls-search-user-manager ').removeClass('ls-management-btn-search');$('.ls-search-user-manager ').addClass('ls-management-btn-search-remove');}
$('.ls-management-btn-search-remove').click(function(){$("#ls-management-text-search").val('');userManage.searchValue="";userManage.pageValueOrigin=0;$('.ls-user-management-search').addClass('ls-icon-search');$('.ls-user-management-search').removeClass('glyphicon glyphicon-remove-circle');sessionStorage.setItem("orderHistory",JSON.stringify(userManage));window.location.href=getURLParam();})
$('.ls-management-btn-search-remove').keypress(function(){$("#ls-management-text-search").val('');userManage.searchValue="";userManage.pageValueOrigin=0;$('.ls-user-management-search').addClass('ls-icon-search');$('.ls-user-management-search').removeClass('glyphicon glyphicon-remove-circle');sessionStorage.setItem("orderHistory",JSON.stringify(userManage));window.location.href=getURLParam();})}
if(localStorage.getItem('newUser')){let itemNewUserEmail=$('.ls-management-body').find('.ls-management-'+localStorage.getItem('newUser'));$('.ls-updated-create:first').removeClass('hidden');$('.ls-updated-mobile-create:first').removeClass('hidden');localStorage.removeItem('newUser');}
if(localStorage.getItem('updatedUser')){let itemUpdatedUserEmail=$('.ls-management-body').find('.ls-management-'+localStorage.getItem('updatedUser'));$('.ls-updated-edit:first').removeClass('hidden');$('.ls-updated-mobile-edit:first').removeClass('hidden');localStorage.removeItem('updatedUser');}})
$('.btn-crud-save-edit').click(function(e){e.preventDefault();let rolesNameUser=[];let b2bUnitNameUser=[];let uidNameUser=$('input[name="uid"]').val();let emailNameUser=$('input[name="email"]').val().replace(/</gi,'&lt;');let firstNameUser=$('input[name="firstName"]').val().replace(/</gi,'&lt;');let lastNameUser=$('input[name="lastName"]').val().replace(/</gi,'&lt;');let phoneNameUser=$('input[name="phone"]').val().replace(/</gi,'&lt;');let parentB2BUnitUser=$('input[name="editParentB2BUnit"]').val();var b2bUnits=$(".ls-crud-chk").toArray().every(function(item){return $(item).find('input[type="checkbox"]:checked').length>=1;});$('input[name="editRolesList"]:checked').each(function(e){rolesNameUser[e]=$(this).val();});$('input[name="editB2Bunits"]:checked').each(function(index){b2bUnitNameUser[index]=$(this).val();});if(firstNameUser.trim()===""){$('.check-empty-first').css("display","block");$('.check-empty-first').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-first').remove("display","block");$('.check-empty-first').css("display","none");$('.btn-crud-save-create').prop('disabled',false).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).addClass('not-allowed-button');}
if(lastNameUser.trim()===""){$('.check-empty-last').css("display","block");$('.check-empty-last').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-last').remove("display","block");$('.check-empty-last').css("display","none");$('.btn-crud-save-create').prop('disabled',false).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).addClass('not-allowed-button');}
if(phoneNameUser.trim()===""){$('.check-empty-phone').css("display","block");$('.check-empty-phone').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-phone').remove("display","block");$('.check-empty-phone').css("display","none");$('.btn-crud-save-create').prop('disabled',false).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).addClass('not-allowed-button');}
if(b2bUnits){$('.check-empty-b2bunits').remove("display","block");$('.check-empty-b2bunits').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}else{$('.check-empty-b2bunits').css("display","block");$('.check-empty-b2bunits').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}
if(firstNameUser.trim()===""||lastNameUser.trim()===""||phoneNameUser.trim()===""||!b2bUnits){return false;}
let data={uid:uidNameUser,active:true,parentB2BUnit:parentB2BUnitUser,firstName:firstNameUser,lastName:lastNameUser,email:emailNameUser,phone:phoneNameUser,roles:rolesNameUser,b2BUnits:b2bUnitNameUser};$.ajax({type:'POST',url:ACC.UserManagement.formMethod.userManageEdit+uidNameUser,data:JSON.stringify(data),dataType:"json",contentType:"application/json",success:function(response){let modifyEditUid=data.uid;modifyEditUid=modifyEditUid.replace('@','at');modifyEditUid=modifyEditUid.replace('.','dot');localStorage.setItem('updatedUser',modifyEditUid);location.href='/my-account/manage-users?&page=0&sort=modifiedtime-desc';},});});$('.btn-crud-save-create').click(function(e){e.preventDefault();let rolesNameUser=[];let b2bUnitNameUser=[];let emailNameUser=$('input[name="email"]').val();let uidNameUser=$('input[name="uid"]').val();let firstNameUser=$('input[name="firstName"]').val().replace(/</gi,'&lt;');let lastNameUser=$('input[name="lastName"]').val().replace(/</gi,'&lt;');let phoneNameUser=$('input[name="phone"]').val().replace(/</gi,'&lt;');let parentB2BUnitUser=$('input[name="editParentB2BUnit"]').val();var b2bUnits=$(".ls-crud-chk").toArray().every(function(item){return $(item).find('input[type="checkbox"]:checked').length>=1;});$('input[name="editRolesList"]:checked').each(function(e){rolesNameUser[e]=$(this).val();});$('input[name="editB2Bunits"]:checked').each(function(index){b2bUnitNameUser[index]=$(this).val();});let emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(firstNameUser.trim()===""){$('.check-empty-first').css("display","block");$('.check-empty-first').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-first').remove("display","block");$('.check-empty-first').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}
if(lastNameUser.trim()===""){$('.check-empty-last').css("display","block");$('.check-empty-last').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-last').remove("display","block");$('.check-empty-last').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}
if(phoneNameUser.trim()===""){$('.check-empty-phone').css("display","block");$('.check-empty-phone').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-phone').remove("display","block");$('.check-empty-phone').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}
if(emailNameUser.trim()===""){$('.check-empty-email').css("display","block");$('.check-empty-email').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{ACC.UserManagement.isCheckEmail=!ACC.UserManagement.isCheckEmail;$('.check-empty-email').remove("display","block");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}
if(b2bUnits){$('.check-empty-b2bunits').remove("display","block");$('.check-empty-b2bunits').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}else{$('.check-empty-b2bunits').css("display","block");$('.check-empty-b2bunits').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}
let data={uid:emailNameUser,active:false,parentB2BUnit:parentB2BUnitUser,firstName:firstNameUser,lastName:lastNameUser,email:emailNameUser,phone:phoneNameUser,roles:rolesNameUser,b2BUnits:b2bUnitNameUser};if(firstNameUser.trim()===""||lastNameUser.trim()===""||emailNameUser.trim()===""||!emailReg.test(emailNameUser)||phoneNameUser.trim()===""||!b2bUnits){if(emailNameUser.trim()===""){$('.check-empty-first').css("display","block");$('.check-empty-first').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}
return false;}
$.ajax({type:'POST',url:ACC.UserManagement.formMethod.userManageCreate,data:JSON.stringify(data),dataType:"json",contentType:"application/json",success:function(response){let modifyUid=data.uid;modifyUid=modifyUid.replace('@','at');modifyUid=modifyUid.replace('.','dot');localStorage.setItem('newUser',modifyUid);location.href='/my-account/manage-users?&page=0&sort=creationtime-desc';},error:()=>{$('.modal-error-message').removeClass('hidden');}});});$('form.deleteUserForm').submit(function(e){e.preventDefault();let buttonEle=$(this);$(buttonEle).addClass("disabled");$(buttonEle).find(".ls-animate-spin").removeClass("hidden");let uidNameUser=$('input[name="deleteUid"]').val();const data={uid:uidNameUser}
$.ajax({type:'POST',url:ACC.UserManagement.formMethod.userManageDelete+uidNameUser,data:JSON.stringify(data),dataType:"json",contentType:"application/json",success:function(data){window.location='/my-account/manage-users';},complete:function(){$(buttonEle).find(".ls-animate-spin").addClass("hidden");$(buttonEle).removeClass("disabled");}});})
$('input[name="firstName"]').keyup(function(){if($(this).val().trim()===""){$('.check-empty-first').css("display","block");$('.check-empty-first').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-first').remove("display","block");$('.check-empty-first').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}})
$('input[name="lastName"]').keyup(function(){if($(this).val().trim()===""){$('.check-empty-last').css("display","block");$('.check-empty-last').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-last').remove("display","block");$('.check-empty-last').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}})
$('input[name="phone"]').keyup(function(){if($(this).val().trim()===""){$('.check-empty-phone').css("display","block");$('.check-empty-phone').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');}else{$('.check-empty-phone').remove("display","block");$('.check-empty-phone').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}})
$('input[name="email"]').keyup(function(){let emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if($(this).val().trim()===""||(!emailReg.test($(this).val()))){$('.check-empty-email').css("display","block");$('.check-empty-email').remove("display","none");$('.btn-crud-save-create').prop('disabled',true).addClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',true).addClass('not-allowed-button');$('.modal-error-message').addClass('hidden');}else{$('.check-empty-email').remove("display","block");$('.check-empty-email').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');}})
$('input[name="phone"]').keypress(function(e){let charCode=(e.which)?e.which:e.keyCode;if(charCode>31&&(charCode<48||charCode>57)){return false;}});$('.ls-crud-chk :checkbox').change(function(){$('.check-empty-b2bunits').remove("display","block");$('.check-empty-b2bunits').css("display","none");$('.btn-crud-save-create').prop('disabled',false).removeClass('not-allowed-button');$('.btn-crud-save-edit').prop('disabled',false).removeClass('not-allowed-button');});let isRole=$('input[name="parentUserRolesAccount"]').val();let roleCustomerAdmin='[customerAdministratorGroup]';let rolePrimaryAccount='[primaryAccountHolderGroup]';if(isRole!=rolePrimaryAccount){let isCheckCustomerAdmin='customerAdministratorGroup';$('input[name="editRolesList"]').each(function(i,obj){if($(this).val()==isCheckCustomerAdmin){$(this).attr('disabled',true);$('.ls-crud-role-item').eq(1).css("color","#757575");$('.ls-crud-checkmark').eq(1).css("background-color","#CBCBCB");}});}
$("#ls-management-text-search").keypress(function(event){let keycode=(event.keyCode?event.keyCode:event.which);if(keycode=='13'){userManage.searchValue=$(this).val();userManage.pageValueOrigin=0;sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();}});$("#ls-management-text-search").change(function(){userManage.searchValue=$(this).val();userManage.pageValueOrigin=0;sessionStorage.setItem("userManage",JSON.stringify(userManage));if($(this).val()===""){window.location.href=getURLParam();return;}
let strParam=getURLParam();$(".ls-management-btn-search").attr("href",strParam);});$("#ls-user-manage-btn-status-filter").selectmenu({change:function(event,data){$(":first-child",$(".ui-state-active").parent()).remove()
userManage.statusValue=data.item.value;userManage.pageValueOrigin=0;sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();}});$(".management-item-fullname").click(function(){userManage.pageValueOrigin=(pageValue-1).toString();buildSortParameter("name");sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();});$(".management-item-creationtime").click(function(){userManage.pageValueOrigin=(pageValue-1).toString();buildSortParameter("creationtime");sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();});$(".management-item-lastlogin").click(function(){userManage.pageValueOrigin=(pageValue-1).toString();buildSortParameter("lastlogin");sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();});let numberOfPages=$("#hidden-total-number-results-user-manage").val();if(numberOfPages&&numberOfPages!==0){let options={dataSource:Array(+numberOfPages*12),pageSize:12,pageRange:null,showPageNumbers:true,hideWhenLessThanOnePage:true,callback:function(response,pagination){pageValue=pagination.pageNumber;}};$("#document-pagination-user").pagination(options);$("#document-pagination-user").addHook('afterPageOnClick',function(){userManage.pageValueOrigin=(pageValue-1).toString();sortCode=$("#manageUserPageSortCode");if(sortCode!=undefined&&sortCode.val().includes("desc")){userManage.sortValue=sortCode.val();}
sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();});$("#document-pagination-user").addHook('afterPreviousOnClick',function(){userManage.pageValueOrigin=(pageValue-1).toString();sortCode=$("#manageUserPageSortCode");if(sortCode!=undefined&&sortCode.val().includes("desc")){userManage.sortValue=sortCode.val();}
sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();});$("#document-pagination-user").addHook('afterNextOnClick',function(){userManage.pageValueOrigin=(pageValue-1).toString();sortCode=$("#manageUserPageSortCode");if(sortCode!=undefined&&sortCode.val().includes("desc")){userManage.sortValue=sortCode.val();}
sessionStorage.setItem("userManage",JSON.stringify(userManage));window.location.href=getURLParam();});}}};ACC.guestCheckout={_autoload:[['bindActions',$('.js-guest-checkout').length!==0],['bindState',$('.js-guest-checkout').length!==0],['getClosestStore',$('.js-guest-checkout').length!==0],'initGCaptcha',['initMAPApi',$('.js-googlePlaceAPI').length===0&&$('.js-guest-checkout').length>0],['bindLogin',$('.js-guest-checkout').length!==0],['bindGuestAddress',$('.js-guest-checkout').length!==0],'checkState','clearAutoFill'],selectedAddress:{},asyncValue:{state:'',store:'',email:''},selectedStoreLocation:null,addressExcludedKeywords:['PO Box','P.o box','P.o. Box','Post office','Parcel'],bindActions:function(){$(document).on('change','#address-toggle',function(e){e.preventDefault();$('.address-invalid').hide();if(e.target.checked){$('.guest-manual-address .manual-required').attr('required',true);$('#guest-address').attr('required',false);$('#guest-address').val('');$('#guest-address').prop('disabled',true);$('.guest-address-label').removeClass('ls-label-required');$('.guest-manual-address').show();}else{$('.guest-manual-address .manual-required').attr('required',false);$('.no-street-number-warning').hide();$('#guest-address').attr('required',true)
$('#guest-address').val('');$('#guest-address').prop('disabled',false);$('.guest-address-label').addClass('ls-label-required');$('.guest-manual-address .manual-required').removeClass('touched');$('.guest-manual-address').hide();}
ACC.guestCheckout.setCheckoutButtonState();});$(document).on('change','.checkout-register-form .form-control',function(e){ACC.guestCheckout.setCheckoutButtonState();});$(document).on('change','.checkout-register-form #guest-email',function(e){if(e.target.value!==ACC.guestCheckout.asyncValue.email){$('.account-warning').hide();$('#guest-confirm').attr('required',false);}
ACC.guestCheckout.setCheckoutButtonState();});$(document).on('blur','.checkout-register-form .form-control',function(e){$(e.target).addClass('touched');});$(document).on('input','.number-only',function(e){$(this).val($(this).val().replace(/[^0-9]/g,''));});$(document).on('input','.suburb-validator',function(e){$(this).val($(this).val().replace(/[^A-Za-z-'\s]+$/g,''));});$(document).on('change','.filter-store',function(e){ACC.guestCheckout.clearClosestStoreValues();var geoCoder=new google.maps.Geocoder();geoCoder.geocode({componentRestrictions:{administrativeArea:$('#guest-address-state').val(),postalCode:$('#guest-address-postal').val(),country:'AU'},},function(results,status){if(status==google.maps.GeocoderStatus.OK){ACC.guestCheckout.toggleInvalidPostcode(true);var location=results[0].geometry.location;var geometry={latitude:location.lat(),longitude:location.lng()};ACC.guestCheckout.updateStoreLocation(geometry);}else{ACC.guestCheckout.toggleInvalidPostcode();}});});$(document).on('click','#guest-register',function(e){e.preventDefault();$('#guest-register .spinner').show();$('#guest-register').attr('disabled',true);$('.no-street-number-warning').hide();if($('.checkout-register-form .form-control:invalid').length>0){return;}
grecaptcha.ready(function(){grecaptcha.execute(ACC.config.googleCaptchaSiteKey,{action:'submit'}).then(function(token){ACC.guestCheckout.doRegister(token);});});});$('#guest-login').off().on('click',function(e){e.preventDefault();grecaptcha.ready(function(){grecaptcha.execute(ACC.config.googleCaptchaSiteKey,{action:'submit'}).then(function(token){$('#guest-captcha').val(token);$('.guest-login-form').submit();});});});$(document).ready(function(){$('.grecaptcha-badge').css('display','block');});$(document).on('change','#guest-address',function(e){if(e.target.value){$('.address-invalid').show();}else{$('.address-invalid').hide();}});},setCheckoutButtonState:function(specialCase){ACC.guestCheckout.toggleRestrictedKeywordMessage();var invalidControl=$('.checkout-register-form .form-control:invalid');const isRestricted=ACC.guestCheckout.validatePOBoxAddress();if(isRestricted){$('#guest-register').attr('disabled',true);ACC.guestCheckout.toggleRestrictedKeywordMessage(isRestricted);}
if(invalidControl.length>0){$('#guest-register').attr('disabled',true);return;}
if(specialCase){$('#guest-register').attr('disabled',true);$('#guest-address-state').next('.form-control-invalid').show();$('#guest-address-state').css('border','1px solid #B92D2C');return;}
$('#guest-register').attr('disabled',isRestricted);},checkState:function(){$('#guest-address-state').change(function(){var checkState=/^AU-[A-Z]{2,5}$/.test($(this).val());if(checkState){$('#guest-address-state').css('border','');$('#guest-address-state').next('.form-control-invalid').hide();ACC.guestCheckout.setCheckoutButtonState();}});},bindState:function(){var url=$('.js-guest-checkout').data('url')+'/state';$.ajax({url:url,type:'get',dataType:'json',success:function(response){ACC.guestCheckout.setState(response);},});},setState:function(stateList){if(stateList&&stateList.length>0){var state=stateList.map(function(item){return`<option value='${item.isocode}'>${item.name}</option>`;});$('#guest-address-state').append($.parseHTML(state.join()));if(ACC.guestCheckout.asyncValue.state){$('#guest-address-state').val(ACC.guestCheckout.asyncValue.state);ACC.guestCheckout.asyncValue.state='';ACC.guestCheckout.setCheckoutButtonState();}}},initMAPApi:function(){var googleApiSrc='//maps.googleapis.com/maps/api/js?key='+
ACC.common.encodeHtml(ACC.config.googleApiKey)+'&libraries=places&callback=ACC.guestCheckout.initAutoComplete';$('head').append($('<script>').addClass('js-googlePlaceAPI').attr('type','text/javascript').attr('src',googleApiSrc));},initAutoComplete:function(){var options={componentRestrictions:{country:'AU'},fields:['address_component','adr_address','name','formatted_address','geometry'],strictBounds:false,types:['address']};var autocomplete=new google.maps.places.Autocomplete(document.getElementById('guest-address'),options);google.maps.event.addListener(autocomplete,'place_changed',function(){ACC.guestCheckout.clearClosestStoreValues();var location=autocomplete.getPlace();if(!location.geometry){ACC.guestCheckout.toggleInvalidPostcode();return;}
var streetNumber=location.address_components.find(item=>item.types.includes('street_number'));var streetName=location.address_components.find(item=>item.types.includes('route'));var city=location.address_components.find(item=>item.types.includes('locality'));var state=location.address_components.find(item=>item.types.includes('administrative_area_level_1'));var postCode=location.address_components.find(item=>item.types.includes('postal_code'));var country=location.address_components.find(item=>item.types.includes('country'));var formattedAddress=location.formatted_address;var geometry={latitude:location.geometry.location.lat(),longitude:location.geometry.location.lng()};var place={streetName,streetNumber,city,state,postCode,country,geometry,formattedAddress};ACC.guestCheckout.setAddressPlace(place);ACC.guestCheckout.toggleInvalidPostcode(true);var containsRestrictedKeyword=ACC.guestCheckout.validatePOBoxAddress(place);if(!containsRestrictedKeyword){ACC.guestCheckout.toggleRestrictedKeywordMessage();ACC.guestCheckout.updateStoreLocation(geometry);}else{ACC.guestCheckout.toggleRestrictedKeywordMessage(true);}});},setAddressPlace:function(place){ACC.guestCheckout.selectedAddress=place;$('#guest-address-street-number').val(place.streetNumber?.long_name||'');$('#guest-address-street-name').val(place.streetName?.long_name||'');$('#guest-address-suburb').val(place.city?.long_name||'');$('#guest-address-state').val(place.state&&place.country&&place.country.short_name&&place.state.short_name?(place.country.short_name+'-'+place.state.short_name):'');$('#guest-address-postal').val(place.postCode?.short_name||'');$('#guest-address').val(place.formattedAddress);$('.address-invalid').hide();$('#guest-address-state option').each(function(){var checkState=/^AU-[A-Z]{2,5}$/.test($(this).val());if($(this).prop('selected')&&(!$(this).val()||$(this).val()==' Select State'||!checkState)){ACC.guestCheckout.setCheckoutButtonState(true);}});ACC.guestCheckout.handleEmptyStreetNumber(place.streetNumber?.long_name||'');},handleEmptyStreetNumber:function(streetNumber){var addressToggle=$('#address-toggle');addressToggle.prop('checked',true);addressToggle.trigger("change");},initGCaptcha:function(){if($('.js-g-captcha').length===0){var gCaptchaSrc='//www.google.com/recaptcha/api.js?render='+
ACC.common.encodeHtml(ACC.config.googleCaptchaSiteKey);$('head').append($('<script>').addClass('js-g-captcha').attr('type','text/javascript').attr('src',gCaptchaSrc));}},doRegister:function(reCaptchaToken){var isManualAddress=$('#address-toggle').is(':checked')||!ACC.guestCheckout.selectedAddress.postCode;var reqBody={reCaptchaToken:reCaptchaToken,unit:'',guestForm:{email:$('#guest-email').val()||'',},closestStore:$('#guest-closest-store').val()||'',address:{firstName:$('#guest-first-name').val()||'',lastName:$('#guest-last-name').val()||'',companyName:$('#guest-business-name').val()||'',line2:isManualAddress?($('#guest-address-street-number').val()||''):(ACC.guestCheckout.selectedAddress.streetNumber?.long_name||''),line1:isManualAddress?($('#guest-address-street-name').val()||''):(ACC.guestCheckout.selectedAddress.streetName?.long_name||''),town:isManualAddress?($('#guest-address-suburb').val()||''):(ACC.guestCheckout.selectedAddress.city?.long_name||''),region:{isocode:isManualAddress?($('#guest-address-state').val()||''):(ACC.guestCheckout.selectedAddress.country?.short_name+'-'+ACC.guestCheckout.selectedAddress.state?.short_name||''),},postalCode:isManualAddress?($('#guest-address-postal').val()||''):(ACC.guestCheckout.selectedAddress.postCode?.short_name||''),cellphone:$('#guest-mobile').val()||''},forceCheckOut:$('#guest-confirm').is(':checked')};ACC.guestCheckout.selectedStoreLocation=$('#guest-closest-store').data('geo-point');var url=$('#checkout-register-form').data('url');$.ajax({url:url,type:'POST',data:JSON.stringify(reqBody),dataType:'json',contentType:'application/json',success:ACC.guestCheckout.onRegisterSuccess,error:ACC.guestCheckout.onRegisterFailed});},onRegisterSuccess:function(res){$('#guest-register .spinner').hide();if(ACC.guestCheckout.selectedStoreLocation){localStorage.setItem('Location',JSON.stringify(ACC.guestCheckout.selectedStoreLocation));}
window.location.href=res.redirectURL?res.redirectURL.replace('redirect:',''):$('#checkout-register-form').data('redirect');},onRegisterFailed:function(err){$('#guest-register .spinner').hide();var error=JSON.parse(err.responseText);switch(error?.errorCode){case 1:$('.account-warning').show();$('.recaptcha-warning').hide();$('.general-warning').hide();$('#guest-confirm').attr('required',true);break;case 2:$('.account-warning').hide();$('.recaptcha-warning').show();$('.general-warning').hide();$('#guest-confirm').attr('required',false);break;default:$('.account-warning').hide();$('.recaptcha-warning').hide();$('.general-warning').show();$('#guest-confirm').attr('required',false);break;}},getClosestStore:function(){$.ajax({url:'/checkout/register/closetstores',type:'get',dataType:'json',success:function(data){ACC.guestCheckout.setClosestStoreValue(data.pointOfServices);},error:function(){ACC.guestCheckout.clearClosestStoreValues();}});},setClosestStoreValue:function(stores){if(stores&&stores.length>0){var closestStores=stores.map(function(item){return`<option value='${item.name}' class="closest-store-option" data-geo-point="${item.geoPoint}">${item.displayName}</option>`;});$('#guest-closest-store').append($.parseHTML(closestStores.join()));if(ACC.guestCheckout.asyncValue.store){$('#guest-closest-store').val(ACC.guestCheckout.asyncValue.store);ACC.guestCheckout.asyncValue.store='';ACC.guestCheckout.setCheckoutButtonState();}}},clearClosestStoreValues:function(){$('#guest-closest-store').val('');$('#guest-closest-store .closest-store-option').remove();ACC.guestCheckout.setCheckoutButtonState();},updateStoreLocation:function(geometry){var data={latitude:geometry.latitude,longitude:geometry.longitude}
var url='/pricingfactory/updatelocation';$.ajax({url:url,type:'get',data:data,dataType:'json',success:function(response){localStorage.setItem('LocationSaved','true');localStorage.setItem('Location',JSON.stringify(data));ACC.guestCheckout.asyncValue.store='';ACC.guestCheckout.getClosestStore();}});},bindLogin:function(){var token=$('.ls-login-form input[name="CSRFToken"]').val();$('#guest-token').val(token);var loginControls=$('form.guest-login-form').find('.form-control');$('form.guest-login-form').ajaxForm({beforeSend:function(request){$('.guest-login-warning').addClass('hidden');$('.guest-login-locked').addClass('hidden');loginControls.removeClass('field-invalid');},success:function(res,textStatus,request){if($(res).find('.ls-login-global-alerts').length){if($(res).find('.ls-login-global-alerts .account-locked').length){$('.guest-login-locked').removeClass('hidden');$('#guest-login-password').val('');return;}
$('#guest-login-password').val('');loginControls.addClass('field-invalid')
$('.guest-login-warning').removeClass('hidden');return;}
window.location.href=$('.guest-login-form').data('redirect');},error:function(err){$('#guest-login-password').val('');$('.guest-login-warning').removeClass('hidden');}});},bindGuestAddress:function(){var url='/checkout/register/getregistration';$.ajax({url:url,type:'get',dataType:'json',success:function(response){ACC.guestCheckout.setAddress(response);},error:function(err){}});},clearAutoFill:function(){if($(".js-guest-checkout").length>0){$('input').on('mouseenter',function(){$("#guest-address").attr('autocomplete','new-password');});}},setAddress:function(formData){if(!formData){return;}
$('#guest-email').val(formData.address?formData.address.email:'');$('#guest-closest-store').val(formData.closestStore||'');$('#guest-first-name').val(formData.address?formData.address.firstName:'');$('#guest-last-name').val(formData.address?formData.address.lastName:'');$('#guest-business-name').val(formData.address?formData.address.companyName:'');$('#guest-address-street-number').val(formData.address?formData.address.line2:'');$('#guest-address-street-name').val(formData.address?formData.address.line1:'');$('#guest-address-suburb').val(formData.address?formData.address.town:'');$('#guest-address-state').val(formData.address&&formData.address.region?formData.address.region.isocode:'');$('#guest-address-postal').val(formData.address?formData.address.postalCode:'');$('#guest-mobile').val(formData.address?formData.address.cellphone:'');$('#guest-address').val(formData.address?formData.address.formattedAddress:'');ACC.guestCheckout.asyncValue.store=formData.closestStore||'';ACC.guestCheckout.asyncValue.state=formData.address&&formData.address.region?formData.address.region.isocode:''||'';ACC.guestCheckout.asyncValue.email=formData.address?formData.address.email:'';ACC.guestCheckout.setCheckoutButtonState();},validatePOBoxAddress:function(place){if(place){return ACC.guestCheckout.addressExcludedKeywords.filter(word=>place.formattedAddress?.toLowerCase().indexOf(word.toLowerCase())>=0||place.streetName?.long_name?.toLowerCase().indexOf(word.toLowerCase())>=0||place.streetNumber?.long_name?.toLowerCase().indexOf(word.toLowerCase())>=0).length>0;}
const address=$('#guest-address').val();const streetNumber=$('#guest-address-street-number').val();const streetName=$('#guest-address-street-name').val();return ACC.guestCheckout.addressExcludedKeywords.filter(word=>address?.toLowerCase().indexOf(word.toLowerCase())>=0||streetNumber?.toLowerCase().indexOf(word.toLowerCase())>=0||streetName?.toLowerCase().indexOf(word.toLowerCase())>=0).length>0;},toggleRestrictedKeywordMessage:function(flag){if(flag){$('.restricted-delivery-address-error').removeClass('hidden');}else{$('.restricted-delivery-address-error').addClass('hidden');}},toggleInvalidPostcode:function(flag){if(flag){$('.invalid-postcode-error').addClass('hidden');}else{$('.invalid-postcode-error').removeClass('hidden');}}};ACC.blum={_autoload:['bindBlumHeader',['bindAddBlumToCart',$('.blum-part-list-page').length>0],['bindBlumAutoComplete',$('.js-blum-part-location-select').length>0],['setCartButtonState',$('.blum-part-list-page').length>0],['bindRemoveBlumPart',$('.js-remove-blum-item').length>0]],blumPartSessionUrl:'/parts-list/',blumRemoveItem:'/parts-list/remove',blumRemoveAll:'/parts-list/removeAll',bindBlumHeader:function(){const blumNavLink=$('.js-blum-list-nav');$.ajax({url:ACC.blum.blumPartSessionUrl,type:"get",success:function(response){const blumPage=$(response).find('.blum-part-list-page');const hasSessionItem=blumPage.length>0&&blumPage.data('blum-code');if(hasSessionItem){blumNavLink.removeClass('hidden');}else{blumNavLink.addClass('hidden');}},error:function(e){blumNavLink.addClass('hidden');const isBlumErrorPage=$(e.responseText)?.find('.blum-part-page.blum-part-error-page').length>0;if(isBlumErrorPage){window.location.href='/blum-error';}}});},bindAddBlumToCart:function(){const addToCartForm=$('.add-blum-to-cart');addToCartForm.ajaxForm({beforeSubmit:ACC.blum.showLoading,success:ACC.blum.addToCartSuccess,error:ACC.blum.addToCartFailed});},showLoading:function(){const form=$('.add-blum-to-cart');const blumPartItems=$(".ls-blum-part-item");const objectIs=[];const objectDatas=[];if(blumPartItems.length>0){for(const element of blumPartItems){const productCode=$(element).data("product-code");const price=$(element).find(".promo-price.ls-display-promo-price")[0].outerText||0;const quantity=$(element).find(".ls-qty-content")[0].outerText||0;objectIs.push(productCode.toString());objectDatas.push({"price":price?Number(price.replaceAll("$","").replaceAll(",","")):0,"quantity":quantity?Number(quantity.replaceAll("Qty","").replaceAll(",","")):0});}
if(objectIs&&objectIs.length>0){ACC.algoliaEvent.objectDatas=objectDatas;ACC.algoliaEvent.sendAlgoliaEvent('addedToCartObjectIDs',objectIs,ACC.algoliaSearch.defaultCurrency);}}
const indicator=$(form).find('.waiting-icon');const cartIcon=$(form).find('.cart-icon');indicator.removeClass('hidden');cartIcon.addClass('hidden');const cartButton=cartIcon&&cartIcon.length?cartIcon.closest('.js-add-to-cart'):indicator.closest('.js-add-to-cart');cartButton.prop('disabled',true);},addToCartSuccess:function(res){ACC.blum.removeLoading();const blumNavLink=$('.js-blum-list-nav');blumNavLink.attr('href','#');blumNavLink.addClass('hidden');if(res.cartCode){window.location.href='/cart';}},addToCartFailed:function(res){ACC.blum.removeLoading();ACC.blum.sessionTimeoutNavigate();},sessionTimeoutNavigate:function(){window.location.href='/';},blumErrorNavigate:function(){window.location.href='/blum-error';},removeLoading:function(){const form=$('.add-blum-to-cart');const indicator=$(form).find('.waiting-icon');const cartIcon=$(form).find('.cart-icon');indicator.addClass('hidden');cartIcon.removeClass('hidden');const cartButton=cartIcon&&cartIcon.length?cartIcon.closest('.js-add-to-cart'):indicator.closest('.js-add-to-cart');cartButton.prop('disabled',false);},bindBlumAutoComplete:function(){const googleApiSrc='//maps.googleapis.com/maps/api/js?key='+
ACC.common.encodeHtml(ACC.config.googleApiKey)+'&libraries=places&callback=ACC.blum.initBlumAutoComplete';$('head').append($('<script>').addClass('js-googlePlaceAPI-blumPart').attr('type','text/javascript').attr('src',googleApiSrc));},initBlumAutoComplete:function(){const options={componentRestrictions:{country:'AU'},strictBounds:false,fields:['geometry'],types:['(regions)']};const autocomplete=new google.maps.places.Autocomplete(document.getElementById('blum-part-location-select'),options);google.maps.event.addListener(autocomplete,'place_changed',function(){const location=autocomplete.getPlace();if(!location.geometry){if($('.js-blum-location-alert').length<1){const emptySearchMessage=$('#blum-part-location-select').data('searchEmpty');$('.blum-part-header').before($('<div>').addClass('js-blum-location-alert alert alert-danger alert-dismissable getAccAlert').text(emptySearchMessage).append($('<button>').addClass('close closeAccAlert').attr('type','button').attr('data-dismiss','alert').attr('aria-hidden','true').text('x')));$('.closeAccAlert').on('click',function(){$(this).parent('.getAccAlert').remove();});}
return;}
const geometry={latitude:location.geometry.location.lat(),longitude:location.geometry.location.lng()};ACC.productDetail.saveLocation(geometry,true);});},setCartButtonState:function(){const obsoleteState=$('.product-component.ls-blum-part-item[data-obsolete=true]').length>0;const priceState=$('.product-component.ls-blum-part-item[data-no-price=true]').length>0;$('.js-add-blum-to-cart').prop('disabled',obsoleteState||priceState);},bindRemoveBlumPart:function(){$(".js-remove-blum-item").attr('disabled',false);$(".js-remove-blum-item").on("click",function(){const vendorCode=$(this).closest('.product-component').data("vendor-code");const blumCode=$(this).closest('.blum-part-list-page').data("blum-code");const loadingAnimator=$(this).find('.ls-animate-spin');const removeIndicator=$(this).find('.remove-cart');loadingAnimator.removeClass('hidden');removeIndicator.addClass('hidden');$(".js-remove-blum-item").attr('disabled',true);const removeOptions={url:ACC.blum.blumRemoveItem,data:{productCode:vendorCode,blumCode},type:'GET',success:function(data,status,xhr){location.reload();},error:function(xhr,status,error){loadingAnimator.addClass('hidden');removeIndicator.removeClass('hidden');ACC.blum.blumErrorNavigate();}};$.ajax(removeOptions);});}};ACC.promotion={_autoload:['bindPromotionActions'],bindPromotionActions:function(){$(document).on('click','.apply-coupon-container .js-enter-code-message',function(e){e.preventDefault();$('.apply-coupon-container').toggleClass('expanded');});$(document).on('input','.voucher-code-input',function(e){const applyButton=$('.js-apply-coupon');if(e.target?.value?.length>0){applyButton.prop('disabled',false);}else{applyButton.prop('disabled',true);}});$(document).on('keydown','.voucher-code-input',function(e){if(e.keyCode===13){e.preventDefault();$(e.target).closest('form').find('.js-apply-coupon').trigger("click");}});$(document).on('focus','.voucher-code-input',function(e){e.preventDefault();$(e.target).closest('.apply-coupon-container').find('.promotion-error').addClass('hidden');});$(document).on('click','.js-apply-coupon',function(e){e.preventDefault();const container=$(e.target).closest('.apply-coupon-container');const form=container.find('form');const couponCode=container.find('.voucher-code-input').val();const cartId=localStorage.getItem('cartId');ACC.track.trackCouponEntered(couponCode,cartId);form.ajaxForm({beforeSubmit:ACC.promotion.showLoading,success:ACC.promotion.applyCodeHandler,error:ACC.promotion.codeErrorHandler});form.submit();});$(document).on('click','.js-remove-coupon',function(e){e.preventDefault();const container=$(e.target).closest('.apply-coupon-container');const form=container.find('form');$(form).find('.waiting-icon').removeClass('hidden');$(form).find('.remove-coupon-text').addClass('hidden');$('.mini-cart__footer-btn-checkout').prop('disabled',true);$('.mini-cart__footer-btn-view-cart').attr('disabled',true);const couponCode=container.find('.voucher-code-input').val();const cartId=localStorage.getItem('cartId');ACC.track.trackCouponRemoved(couponCode,cartId);ACC.minicart.disableQuantitySelect();form.ajaxForm({success:ACC.promotion.removeCodeHandler,error:ACC.promotion.codeErrorHandler});form.submit();});},showLoading:function(_,$form){$form.find('.waiting-icon').removeClass('hidden');$form.find('.apply-coupon-btn-text').addClass('hidden');$form.find('.js-apply-coupon').prop('disabled',true);$('.mini-cart__footer-btn-checkout').prop('disabled',true);$('.mini-cart__footer-btn-view-cart').attr('disabled',true);$form.closest('.apply-coupon-container').find('.promotion-error').addClass('hidden');ACC.minicart.disableQuantitySelect();},removeLoading:function($form){if($form){$form.find('.waiting-icon').addClass('hidden');$form.find('.apply-coupon-btn-text').removeClass('hidden');$form.find('.js-apply-coupon').prop('disabled',false);$('.mini-cart__footer-btn-checkout').prop('disabled',false);$('.mini-cart__footer-btn-view-cart').attr('disabled',false);ACC.minicart.enableQuantitySelect();}},applyCodeHandler:function(result,statusText,xhr,formElement){const cartHeader=$(result).find('.ls-cart-header .ls-header-container-cart-page');const couponCode=$(formElement).find('.voucher-code-input').val();const cartId=localStorage.getItem('cartId');const isError=cartHeader.data('has-coupon-error');if(isError){const errorMessage=cartHeader.data('coupon-message');ACC.promotion.showCouponApplyError(formElement,errorMessage);ACC.track.trackDeniedCoupon(couponCode,cartId,errorMessage);return;}
ACC.track.trackAppliedCoupon(couponCode,cartId);const isMiniCart=$(formElement).closest('.js-mini-cart').length>0;if(isMiniCart){ACC.promotion.updateMiniCart(formElement);return;}
window.location.reload();},codeErrorHandler:function(){window.location.href='/not-found';},updateMiniCart:function(formElement){$.ajax({url:ACC.minicart.miniCartUrl,cache:false,type:"GET",success:function(response){ACC.minicart.updateCartPopup(response);ACC.promotion.removeLoading(formElement);ACC.minicart.enableQuantitySelect();},error:function(){ACC.promotion.removeLoading(formElement);}});},showCouponApplyError:function($form,message){const promotionErrorElement=$form.closest('.apply-coupon-container').find('.promotion-error');promotionErrorElement.removeClass('hidden');promotionErrorElement.text(message);$('.mini-cart__footer-btn-checkout').prop('disabled',false);$('.mini-cart__footer-btn-view-cart').attr('disabled',false);ACC.promotion.removeLoading($form);ACC.minicart.enableQuantitySelect();},removeCodeHandler:function(result,statusText,xhr,formElement){const isMiniCart=$(formElement).closest('.js-mini-cart').length>0;if(isMiniCart){ACC.promotion.updateMiniCart(formElement);ACC.minicart.enableQuantitySelect();}else{window.location.reload();}}};